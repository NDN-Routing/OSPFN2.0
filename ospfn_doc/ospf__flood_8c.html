<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: ospfd/ospf_flood.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('ospf__flood_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ospfd/ospf_flood.c File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="zebra_8h_source.html">zebra.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="linklist_8h_source.html">linklist.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="prefix_8h_source.html">prefix.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="if_8h_source.html">if.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="command_8h_source.html">command.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="table_8h_source.html">table.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="thread_8h_source.html">thread.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="memory_8h_source.html">memory.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="log_8h_source.html">log.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="zclient_8h_source.html">zclient.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospfd_8h_source.html">ospfd/ospfd.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__interface_8h_source.html">ospfd/ospf_interface.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__ism_8h_source.html">ospfd/ospf_ism.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__asbr_8h_source.html">ospfd/ospf_asbr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__lsa_8h_source.html">ospfd/ospf_lsa.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__lsdb_8h_source.html">ospfd/ospf_lsdb.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__neighbor_8h_source.html">ospfd/ospf_neighbor.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__nsm_8h_source.html">ospfd/ospf_nsm.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__spf_8h_source.html">ospfd/ospf_spf.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__flood_8h_source.html">ospfd/ospf_flood.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__packet_8h_source.html">ospfd/ospf_packet.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__abr_8h_source.html">ospfd/ospf_abr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__route_8h_source.html">ospfd/ospf_route.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__zebra_8h_source.html">ospfd/ospf_zebra.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__dump_8h_source.html">ospfd/ospf_dump.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ospf_flood.c:</div>
<div class="dyncontent">
<div class="center"><img src="ospf__flood_8c__incl.png" border="0" usemap="#ospfd_2ospf__flood_8c" alt=""/></div>
<map name="ospfd_2ospf__flood_8c" id="ospfd_2ospf__flood_8c">
<area shape="rect" id="node3" href="zebra_8h.html" title="zebra.h" alt="" coords="1193,155,1260,181"/><area shape="rect" id="node53" href="linklist_8h.html" title="linklist.h" alt="" coords="2473,229,2543,256"/><area shape="rect" id="node55" href="prefix_8h.html" title="prefix.h" alt="" coords="1833,80,1900,107"/><area shape="rect" id="node57" href="if_8h.html" title="if.h" alt="" coords="2488,155,2528,181"/><area shape="rect" id="node60" href="command_8h.html" title="command.h" alt="" coords="1977,80,2068,107"/><area shape="rect" id="node62" href="table_8h.html" title="table.h" alt="" coords="2093,80,2157,107"/><area shape="rect" id="node64" href="thread_8h.html" title="thread.h" alt="" coords="2181,80,2253,107"/><area shape="rect" id="node66" href="memory_8h.html" title="memory.h" alt="" coords="2277,80,2360,107"/><area shape="rect" id="node68" href="log_8h.html" title="log.h" alt="" coords="1913,155,1964,181"/><area shape="rect" id="node71" href="zclient_8h.html" title="zclient.h" alt="" coords="2435,80,2507,107"/><area shape="rect" id="node74" href="ospfd_8h.html" title="ospfd/ospfd.h" alt="" coords="1701,80,1808,107"/><area shape="rect" id="node78" href="ospf__interface_8h.html" title="ospfd/ospf_interface.h" alt="" coords="2817,80,2975,107"/><area shape="rect" id="node80" href="ospf__packet_8h.html" title="ospfd/ospf_packet.h" alt="" coords="2705,155,2852,181"/><area shape="rect" id="node82" href="ospf__spf_8h.html" title="ospfd/ospf_spf.h" alt="" coords="3217,155,3340,181"/><area shape="rect" id="node84" href="ospf__ism_8h.html" title="ospfd/ospf_ism.h" alt="" coords="2999,80,3125,107"/><area shape="rect" id="node86" href="ospf__asbr_8h.html" title="ospfd/ospf_asbr.h" alt="" coords="3151,80,3281,107"/><area shape="rect" id="node88" href="ospf__lsa_8h.html" title="ospfd/ospf_lsa.h" alt="" coords="3305,80,3428,107"/><area shape="rect" id="node90" href="ospf__lsdb_8h.html" title="ospfd/ospf_lsdb.h" alt="" coords="3452,80,3583,107"/><area shape="rect" id="node92" href="ospf__neighbor_8h.html" title="ospfd/ospf_neighbor.h" alt="" coords="2582,80,2740,107"/><area shape="rect" id="node95" href="ospf__nsm_8h.html" title="ospfd/ospf_nsm.h" alt="" coords="3657,80,3788,107"/><area shape="rect" id="node98" href="ospf__flood_8h.html" title="ospfd/ospf_flood.h" alt="" coords="3812,80,3948,107"/><area shape="rect" id="node101" href="ospf__abr_8h.html" title="ospfd/ospf_abr.h" alt="" coords="3973,80,4096,107"/><area shape="rect" id="node103" href="ospf__route_8h.html" title="ospfd/ospf_route.h" alt="" coords="4121,80,4257,107"/><area shape="rect" id="node105" href="ospf__zebra_8h.html" title="ospfd/ospf_zebra.h" alt="" coords="4283,80,4421,107"/><area shape="rect" id="node107" href="ospf__dump_8h.html" title="ospfd/ospf_dump.h" alt="" coords="4445,80,4584,107"/></map>
</div>
</div>
<p><a href="ospf__flood_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#ad5f4da4984c6453f549c42e5ebfec281">ospf_flood_delayed_lsa_ack</a> (struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *inbr, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structexternal__info.html">external_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a28fc4c5b15a10f380b4d1f79924ad3f5">ospf_external_info_check</a> (struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a6adc4ff40641399b21c1007c9dd14c47">ospf_process_self_originated_lsa</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *new, struct <a class="el" href="structospf__area.html">ospf_area</a> *area)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a3163fd032113f23c9df7f9c3ec40c560">ospf_flood</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *nbr, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *current, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *new)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a8beea81565f86a66155c1daacd90c3db">ospf_flood_through_interface</a> (struct <a class="el" href="structospf__interface.html">ospf_interface</a> *oi, struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *inbr, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#aa350bf192623114dae7914a98325a71f">ospf_flood_through_area</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *area, struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *inbr, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a2169b7a36db2e596585f2d3242ac94b6">ospf_flood_through_as</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *inbr, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a32ab724834b131f44a7756bb220d14ac">ospf_flood_through</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *inbr, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#ae6da3c20ff8542f795b735b5b177e7bd">ospf_ls_request_add</a> (struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *nbr, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a9544780854006403934ea809e4e99caa">ospf_ls_request_count</a> (struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *nbr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a1fad8802afa3d754e1ecf810d7cc1bd5">ospf_ls_request_isempty</a> (struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *nbr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a140fef53d3293227a5f51d11580cdcb8">ospf_ls_request_delete</a> (struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *nbr, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a90c072738e661b151c8fd6b180cb7fcd">ospf_ls_request_delete_all</a> (struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *nbr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a27c6e0c56e71024a8f2906b22ff31558">ospf_ls_request_lookup</a> (struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *nbr, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#aedb5408ac5f2016547b85154747a8398">ospf_ls_request_new</a> (struct <a class="el" href="structlsa__header.html">lsa_header</a> *lsah)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a9fc5f626cdb9afa119113fb7a8b9daf2">ospf_ls_retransmit_count</a> (struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *nbr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a2f1065151b3c6941df7b5f5f8f89bd76">ospf_ls_retransmit_count_self</a> (struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *nbr, int lsa_type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a00eeafc55321936ff86756ad0804c98b">ospf_ls_retransmit_isempty</a> (struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *nbr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#af8c025c82461d3cb8c96d04692dc656c">ospf_ls_retransmit_add</a> (struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *nbr, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a9409fb977977ecae3646621d04802a7f">ospf_ls_retransmit_delete</a> (struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *nbr, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#afa1fd3e1ddaf46a4674019b35f527667">ospf_ls_retransmit_clear</a> (struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *nbr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#ac58d995c667e0b1d491b76d0536ac0dd">ospf_ls_retransmit_lookup</a> (struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *nbr, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a9e7c064f04730b9b5331d68b0a6ff959">ospf_ls_retransmit_delete_nbr_if</a> (struct <a class="el" href="structospf__interface.html">ospf_interface</a> *oi, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a8f46211a0fe7065405e8bdda81963204">ospf_ls_retransmit_delete_nbr_area</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *area, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#add1aa73829326bf3733d0d442002cb95">ospf_ls_retransmit_delete_nbr_as</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#ad3049ba87364a6fbed7d352023e33a4a">ospf_lsa_flush_area</a> (struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa, struct <a class="el" href="structospf__area.html">ospf_area</a> *area)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#a68d550b90a6cd775d965f6e8f9309863">ospf_lsa_flush_as</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structzclient.html">zclient</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__flood_8c.html#abe1502972ba9aa40adc080e419c496bf">zclient</a></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a28fc4c5b15a10f380b4d1f79924ad3f5"></a><!-- doxytag: member="ospf_flood.c::ospf_external_info_check" ref="a28fc4c5b15a10f380b4d1f79924ad3f5" args="(struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structexternal__info.html">external_info</a>* ospf_external_info_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00080">80</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structas__external__lsa.html">as_external_lsa</a> *<a class="code" href="spgrid_8c.html#a7c4593313d1839d57c28594a69357bab">al</a>;
  <span class="keyword">struct </span><a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keywordtype">int</span> <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>;

  al = (<span class="keyword">struct </span><a class="code" href="structas__external__lsa.html">as_external_lsa</a> *) lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>;

  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.family = AF_INET;
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefix = lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>;
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen = <a class="code" href="prefix_8c.html#ab83ffad6b766ddd0ef87e4da228c322d">ip_masklen</a> (al-&gt;<a class="code" href="structas__external__lsa.html#aa860fac77968c497496d16df6d325651">mask</a>);

  <span class="keywordflow">for</span> (type = 0; type &lt;= <a class="code" href="zebra_8h.html#aec97442680d773fd62f9af5c9426b842">ZEBRA_ROUTE_MAX</a>; type++)
    {
      <span class="keywordtype">int</span> <a class="code" href="rip__zebra_8c.html#a6de0063d659a004efdd2c263e76b7721">redist_type</a> = <a class="code" href="ospf__lsa_8c.html#ab361b6fb4bed2a417afb49ae46bae391">is_prefix_default</a> (&amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>) ? <a class="code" href="ospf__zebra_8h.html#a353195a6a59d18a6807885cbefaf0d24">DEFAULT_ROUTE</a> : <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>;
      <span class="keywordflow">if</span> (<a class="code" href="ospf__zebra_8c.html#a0b61d95e6baf19bdd9d8a7705788a226">ospf_is_type_redistributed</a> (redist_type))
    <span class="keywordflow">if</span> (<a class="code" href="ospfd_8h.html#a9fa5e60f9244cb3ea41a0a96d3c9b85c">EXTERNAL_INFO</a> (type))
      {
        rn = <a class="code" href="table_8c.html#ab99d86b40440c8f18d4f2b31b5b8f1c7">route_node_lookup</a> (<a class="code" href="ospfd_8h.html#a9fa5e60f9244cb3ea41a0a96d3c9b85c">EXTERNAL_INFO</a> (type),
                    (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
        <span class="keywordflow">if</span> (rn)
          {
        <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (rn);
        <span class="keywordflow">if</span> (rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
          <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structexternal__info.html">external_info</a> *) rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;
          }
      }
    }

  <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3163fd032113f23c9df7f9c3ec40c560"></a><!-- doxytag: member="ospf_flood.c::ospf_flood" ref="a3163fd032113f23c9df7f9c3ec40c560" args="(struct ospf *ospf, struct ospf_neighbor *nbr, struct ospf_lsa *current, struct ospf_lsa *new)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_flood </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>nbr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>new</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00234">234</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__interface.html">ospf_interface</a> *oi;
  <span class="keywordtype">int</span> lsa_ack_flag;

  <span class="comment">/* Type-7 LSA&#39;s will be flooded throughout their native NSSA area,</span>
<span class="comment">     but will also be flooded as Type-5&#39;s into ABR capable links.  */</span>

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Flooding]: start, NBR %s (%s), cur(%p), New-LSA[%s]&quot;</span>,
               inet_ntoa (nbr-&gt;<a class="code" href="structospf__neighbor.html#a2257238c9040a76e9de9a78cf95bae0d">router_id</a>),
               <a class="code" href="log_8h.html#a3a4b1cad85aa6752f39580944e24a868">LOOKUP</a> (<a class="code" href="ospf__dump_8c.html#a7addd69d09415cd935c591a40b74ac46">ospf_nsm_state_msg</a>, nbr-&gt;<a class="code" href="structospf__neighbor.html#a07061a68f4e15effd12479e1047120c7">state</a>),
               current,
               <a class="code" href="ospf__lsa_8c.html#aa3a9efa2cceb09f1a6c7e3b5beba8bf6">dump_lsa_key</a> (<span class="keyword">new</span>));

  lsa_ack_flag = 0;
  oi = nbr-&gt;<a class="code" href="structospf__neighbor.html#a24eabbd825aa53aba5343ae2d5ea7233">oi</a>;

  <span class="comment">/* If there is already a database copy, and if the</span>
<span class="comment">     database copy was received via flooding and installed less</span>
<span class="comment">     than MinLSArrival seconds ago, discard the new LSA</span>
<span class="comment">     (without acknowledging it). */</span>
  <span class="keywordflow">if</span> (current != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)      <span class="comment">/* -- endo. */</span>
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8h.html#aba06df657f75f729003128da649322f8">IS_LSA_SELF</a> (current)
      &amp;&amp; (ntohs (current-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a797ae6158d74b4aa89a9d09c5edb13d2">ls_age</a>)    == 0
      &amp;&amp;  ntohl (current-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#ac9c2a10b78b2be23acfe6d0a54b9b6b5">ls_seqnum</a>) == <a class="code" href="ospfd_8h.html#affb6c878aa462ae5de5e5db70631482d">OSPF_INITIAL_SEQUENCE_NUMBER</a>))
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Flooding]: Got a self-originated LSA, &quot;</span>
               <span class="stringliteral">&quot;while local one is initial instance.&quot;</span>);
          ; <span class="comment">/* Accept this LSA for quick LSDB resynchronization. */</span>
        }
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8c.html#a5ba57790910a88ececacfd1d3f69538c">tv_cmp</a> (<a class="code" href="ospf__lsa_8c.html#aaa9daa06f817fbcc8ff12657aeb5996c">tv_sub</a> (<a class="code" href="thread_8c.html#a010d58e49a3c74ae856d5cd111f7eb62">recent_relative_time</a> (), current-&gt;<a class="code" href="structospf__lsa.html#a2bd331d17d54cdfcec251473668346da">tv_recv</a>),
                   <a class="code" href="ospf__lsa_8c.html#a2543635ecb435d64f2b40f9cfdf75fc5">int2tv</a> (<a class="code" href="ospfd_8h.html#ae567e64e4e08a38164953b22f9603bfc">OSPF_MIN_LS_ARRIVAL</a>)) &lt; 0)
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Flooding]: LSA is received recently.&quot;</span>);
          <span class="keywordflow">return</span> -1;
        }
    }

  <span class="comment">/* Flood the new LSA out some subset of the router&#39;s interfaces.</span>
<span class="comment">     In some cases (e.g., the state of the receiving interface is</span>
<span class="comment">     DR and the LSA was received from a router other than the</span>
<span class="comment">     Backup DR) the LSA will be flooded back out the receiving</span>
<span class="comment">     interface. */</span>
  lsa_ack_flag = <a class="code" href="ospf__flood_8c.html#a32ab724834b131f44a7756bb220d14ac">ospf_flood_through</a> (ospf, nbr, <span class="keyword">new</span>);

<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>  <span class="comment">/* Remove the current database copy from all neighbors&#39; Link state</span>
<span class="comment">     retransmission lists.  AS_EXTERNAL and AS_EXTERNAL_OPAQUE does</span>
<span class="comment">                                        ^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="comment">     not have area ID.</span>
<span class="comment">     All other (even NSSA&#39;s) do have area ID.  */</span>
<span class="preprocessor">#else </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
  <span class="comment">/* Remove the current database copy from all neighbors&#39; Link state</span>
<span class="comment">     retransmission lists.  Only AS_EXTERNAL does not have area ID.</span>
<span class="comment">     All other (even NSSA&#39;s) do have area ID.  */</span>
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
  <span class="keywordflow">if</span> (current)
    {
      <span class="keywordflow">switch</span> (current-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a>)
        {
        <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#ae1f343a4ebcfe793c20519a447f7b851">OSPF_AS_EXTERNAL_LSA</a>:
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>        <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a4ec63a35fbaffb7350ff4d69002af21e">OSPF_OPAQUE_AS_LSA</a>:
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
          <a class="code" href="ospf__flood_8c.html#add1aa73829326bf3733d0d442002cb95">ospf_ls_retransmit_delete_nbr_as</a> (ospf, current);
          <span class="keywordflow">break</span>;
        <span class="keywordflow">default</span>:
          <a class="code" href="ospf__flood_8c.html#a8f46211a0fe7065405e8bdda81963204">ospf_ls_retransmit_delete_nbr_area</a> (nbr-&gt;<a class="code" href="structospf__neighbor.html#a24eabbd825aa53aba5343ae2d5ea7233">oi</a>-&gt;<a class="code" href="structospf__interface.html#a7a0df59739f1ffa31ab75ff4b9bbcd95">area</a>, current);
          <span class="keywordflow">break</span>;
        }
    }

  <span class="comment">/* Do some internal house keeping that is needed here */</span>
  <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (new-&gt;<a class="code" href="structospf__lsa.html#aa8c833176affd799afeb8db16cdb2602">flags</a>, <a class="code" href="ospf__lsa_8h.html#a780906236e4b5ef16a4a720a57e3f617">OSPF_LSA_RECEIVED</a>);
  <a class="code" href="ospf__lsa_8c.html#ad430a0bdeae46dc78ef311cf2c511bad">ospf_lsa_is_self_originated</a> (ospf, <span class="keyword">new</span>); <span class="comment">/* Let it set the flag */</span>

  <span class="comment">/* Install the new LSA in the link state database</span>
<span class="comment">     (replacing the current database copy).  This may cause the</span>
<span class="comment">     routing table calculation to be scheduled.  In addition,</span>
<span class="comment">     timestamp the new LSA with the current time.  The flooding</span>
<span class="comment">     procedure cannot overwrite the newly installed LSA until</span>
<span class="comment">     MinLSArrival seconds have elapsed. */</span>  

  <span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#a1733ac6eff32161699d5e9d80a893351">ospf_lsa_install</a> (ospf, nbr-&gt;<a class="code" href="structospf__neighbor.html#a24eabbd825aa53aba5343ae2d5ea7233">oi</a>, <span class="keyword">new</span>);

  <span class="comment">/* Acknowledge the receipt of the LSA by sending a Link State</span>
<span class="comment">     Acknowledgment packet back out the receiving interface. */</span>
  <span class="keywordflow">if</span> (lsa_ack_flag)
    <a class="code" href="ospf__flood_8c.html#ad5f4da4984c6453f549c42e5ebfec281">ospf_flood_delayed_lsa_ack</a> (nbr, <span class="keyword">new</span>);     

  <span class="comment">/* If this new LSA indicates that it was originated by the</span>
<span class="comment">     receiving router itself, the router must take special action,</span>
<span class="comment">     either updating the LSA or in some cases flushing it from</span>
<span class="comment">     the routing domain. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8c.html#ad430a0bdeae46dc78ef311cf2c511bad">ospf_lsa_is_self_originated</a> (ospf, <span class="keyword">new</span>))
    <a class="code" href="ospf__flood_8c.html#a6adc4ff40641399b21c1007c9dd14c47">ospf_process_self_originated_lsa</a> (ospf, <span class="keyword">new</span>, oi-&gt;<a class="code" href="structospf__interface.html#a7a0df59739f1ffa31ab75ff4b9bbcd95">area</a>);
  <span class="keywordflow">else</span>
    <span class="comment">/* Update statistics value for OSPF-MIB. */</span>
    ospf-&gt;<a class="code" href="structospf.html#a9a1f25184f2f198f43b23b1b94f63060">rx_lsa_count</a>++;

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad5f4da4984c6453f549c42e5ebfec281"></a><!-- doxytag: member="ospf_flood.c::ospf_flood_delayed_lsa_ack" ref="ad5f4da4984c6453f549c42e5ebfec281" args="(struct ospf_neighbor *inbr, struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_flood_delayed_lsa_ack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>inbr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00057">57</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">/* LSA is more recent than database copy, but was not</span>
<span class="comment">     flooded back out receiving interface.  Delayed</span>
<span class="comment">     acknowledgment sent. If interface is in Backup state</span>
<span class="comment">     delayed acknowledgment sent only if advertisement</span>
<span class="comment">     received from Designated Router, otherwise do nothing See</span>
<span class="comment">     RFC 2328 Section 13.5 */</span>

  <span class="comment">/* Whether LSA is more recent or not, and whether this is in</span>
<span class="comment">     response to the LSA being sent out recieving interface has been </span>
<span class="comment">     worked out previously */</span>

  <span class="comment">/* Deal with router as BDR */</span>
  <span class="keywordflow">if</span> (inbr-&gt;<a class="code" href="structospf__neighbor.html#a24eabbd825aa53aba5343ae2d5ea7233">oi</a>-&gt;<a class="code" href="structospf__interface.html#a26605b9cc792cdd3e26c0481d24f0f63">state</a> == <a class="code" href="ospf__ism_8h.html#a3676782add5a8ecdb86981965ef9f37e">ISM_Backup</a> &amp;&amp; ! <a class="code" href="ospf__neighbor_8h.html#ad422e372f51656c4649d96641b24f6e0">NBR_IS_DR</a> (inbr))
    <span class="keywordflow">return</span>;

  <span class="comment">/* Schedule a delayed LSA Ack to be sent */</span> 
  <a class="code" href="linklist_8c.html#adb2a0478aba995441aaf691d1f6fe5db">listnode_add</a> (inbr-&gt;<a class="code" href="structospf__neighbor.html#a24eabbd825aa53aba5343ae2d5ea7233">oi</a>-&gt;<a class="code" href="structospf__interface.html#acbc88d1aa86ff7a082fe2c77ae984d1f">ls_ack</a>, <a class="code" href="ospf__lsa_8c.html#a312850eed27e83bb9f66d27bb5bfb144">ospf_lsa_lock</a> (lsa)); <span class="comment">/* delayed LSA Ack */</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a32ab724834b131f44a7756bb220d14ac"></a><!-- doxytag: member="ospf_flood.c::ospf_flood_through" ref="a32ab724834b131f44a7756bb220d14ac" args="(struct ospf *ospf, struct ospf_neighbor *inbr, struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_flood_through </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>inbr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00679">679</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> lsa_ack_flag = 0;
  
  <span class="comment">/* Type-7 LSA&#39;s for NSSA are flooded throughout the AS here, and</span>
<span class="comment">     upon return are updated in the LSDB for Type-7&#39;s.  Later,</span>
<span class="comment">     re-fresh will re-send them (and also, if ABR, packet code will</span>
<span class="comment">     translate to Type-5&#39;s)</span>
<span class="comment">  </span>
<span class="comment">     As usual, Type-5 LSA&#39;s (if not DISCARDED because we are STUB or</span>
<span class="comment">     NSSA) are flooded throughout the AS, and are updated in the</span>
<span class="comment">     global table.  */</span>
<span class="preprocessor">#ifdef ORIGINAL_CODING</span>
<span class="preprocessor"></span>  <span class="keywordflow">switch</span> (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a>)
    {
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a35879db42bef5fa9b3c1540b7db95b6f">OSPF_ROUTER_LSA</a>:
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a28b795ddb745c95eef700c9a2134c806">OSPF_NETWORK_LSA</a>:
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a3a501e86708401620a7a61e9920cd9bd">OSPF_SUMMARY_LSA</a>:
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a09d9e4a35705f96a15952c63088c0ccc">OSPF_ASBR_SUMMARY_LSA</a>:
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a9f5ad1d8944ebad62941128f9aeee23a">OSPF_OPAQUE_LINK_LSA</a>: <span class="comment">/* ospf_flood_through_interface ? */</span>
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#affea3ed894380623d4d5bf5dbbad90e9">OSPF_OPAQUE_AREA_LSA</a>:
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
      lsa_ack_flag = <a class="code" href="ospf__flood_8c.html#aa350bf192623114dae7914a98325a71f">ospf_flood_through_area</a> (inbr-&gt;<a class="code" href="structospf__neighbor.html#a24eabbd825aa53aba5343ae2d5ea7233">oi</a>-&gt;<a class="code" href="structospf__interface.html#a7a0df59739f1ffa31ab75ff4b9bbcd95">area</a>, inbr, lsa);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#ae1f343a4ebcfe793c20519a447f7b851">OSPF_AS_EXTERNAL_LSA</a>: <span class="comment">/* Type-5 */</span>
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a4ec63a35fbaffb7350ff4d69002af21e">OSPF_OPAQUE_AS_LSA</a>:
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
      lsa_ack_flag = <a class="code" href="ospf__flood_8c.html#a2169b7a36db2e596585f2d3242ac94b6">ospf_flood_through_as</a> (ospf, inbr, lsa);
      <span class="keywordflow">break</span>;
      <span class="comment">/* Type-7 Only received within NSSA, then flooded */</span>
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#adc97c8397af1195230a4a98bf67e5a9d">OSPF_AS_NSSA_LSA</a>:
      <span class="comment">/* Any P-bit was installed with the Type-7. */</span>
      lsa_ack_flag = <a class="code" href="ospf__flood_8c.html#aa350bf192623114dae7914a98325a71f">ospf_flood_through_area</a> (inbr-&gt;<a class="code" href="structospf__neighbor.html#a24eabbd825aa53aba5343ae2d5ea7233">oi</a>-&gt;<a class="code" href="structospf__interface.html#a7a0df59739f1ffa31ab75ff4b9bbcd95">area</a>, inbr, lsa);

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_flood_through: LOCAL NSSA FLOOD of Type-7.&quot;</span>);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
      <span class="keywordflow">break</span>;
    }
<span class="preprocessor">#else </span><span class="comment">/* ORIGINAL_CODING */</span>
  <span class="comment">/*</span>
<span class="comment">   * At the common sub-sub-function &quot;ospf_flood_through_interface()&quot;,</span>
<span class="comment">   * a parameter &quot;inbr&quot; will be used to distinguish the called context</span>
<span class="comment">   * whether the given LSA was received from the neighbor, or the</span>
<span class="comment">   * flooding for the LSA starts from this node (e.g. the LSA was self-</span>
<span class="comment">   * originated, or the LSA is going to be flushed from routing domain).</span>
<span class="comment">   *</span>
<span class="comment">   * So, for consistency reasons, this function &quot;ospf_flood_through()&quot;</span>
<span class="comment">   * should also allow the usage that the given &quot;inbr&quot; parameter to be</span>
<span class="comment">   * NULL. If we do so, corresponding AREA parameter should be referred</span>
<span class="comment">   * by &quot;lsa-&gt;area&quot;, instead of &quot;inbr-&gt;oi-&gt;area&quot;.</span>
<span class="comment">   */</span>
  <span class="keywordflow">switch</span> (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a>)
    {
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#ae1f343a4ebcfe793c20519a447f7b851">OSPF_AS_EXTERNAL_LSA</a>: <span class="comment">/* Type-5 */</span>
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a4ec63a35fbaffb7350ff4d69002af21e">OSPF_OPAQUE_AS_LSA</a>:
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
      lsa_ack_flag = <a class="code" href="ospf__flood_8c.html#a2169b7a36db2e596585f2d3242ac94b6">ospf_flood_through_as</a> (ospf, inbr, lsa);
      <span class="keywordflow">break</span>;
      <span class="comment">/* Type-7 Only received within NSSA, then flooded */</span>
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#adc97c8397af1195230a4a98bf67e5a9d">OSPF_AS_NSSA_LSA</a>:
      <span class="comment">/* Any P-bit was installed with the Type-7. */</span>

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_flood_through: LOCAL NSSA FLOOD of Type-7.&quot;</span>);
      <span class="comment">/* Fallthrough */</span>
    <span class="keywordflow">default</span>:
      lsa_ack_flag = <a class="code" href="ospf__flood_8c.html#aa350bf192623114dae7914a98325a71f">ospf_flood_through_area</a> (lsa-&gt;<a class="code" href="structospf__lsa.html#aba0c88ecf7facd990c4d29466b823402">area</a>, inbr, lsa);
      <span class="keywordflow">break</span>;
    }
<span class="preprocessor">#endif </span><span class="comment">/* ORIGINAL_CODING */</span>
  
  <span class="keywordflow">return</span> (lsa_ack_flag);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa350bf192623114dae7914a98325a71f"></a><!-- doxytag: member="ospf_flood.c::ospf_flood_through_area" ref="aa350bf192623114dae7914a98325a71f" args="(struct ospf_area *area, struct ospf_neighbor *inbr, struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_flood_through_area </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>inbr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00561">561</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structospf__interface.html">ospf_interface</a> *oi;
  <span class="keywordtype">int</span> lsa_ack_flag = 0;

  <span class="comment">/* All other types are specific to a single area (Area A).  The</span>
<span class="comment">     eligible interfaces are all those interfaces attaching to the</span>
<span class="comment">     Area A.  If Area A is the backbone, this includes all the virtual</span>
<span class="comment">     links.  */</span>
  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (area-&gt;<a class="code" href="structospf__area.html#aec49fceeb655dde5648208d29dfc66a4">oiflist</a>, node, nnode, oi))
    {
      <span class="keywordflow">if</span> (area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>.s_addr != <a class="code" href="ospfd_8h.html#a1f0c659cdd89cdac0e14ea0fdec8b7f7">OSPF_AREA_BACKBONE</a> &amp;&amp;
      oi-&gt;<a class="code" href="structospf__interface.html#adb923b0bfebf30738af57dafcf0d0d57">type</a> ==  <a class="code" href="ospf__interface_8h.html#a45798a2a8b566abd1907f7ae8bc0a2be">OSPF_IFTYPE_VIRTUALLINK</a>) 
    <span class="keywordflow">continue</span>;

<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>      <span class="keywordflow">if</span> ((lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a> == <a class="code" href="ospf__lsa_8h.html#a9f5ad1d8944ebad62941128f9aeee23a">OSPF_OPAQUE_LINK_LSA</a>) &amp;&amp; (lsa-&gt;oi != oi))
        {
          <span class="comment">/*</span>
<span class="comment">           * Link local scoped Opaque-LSA should only be flooded</span>
<span class="comment">           * for the link on which the LSA has received.</span>
<span class="comment">           */</span>
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_FLOODING))
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Type-9 Opaque-LSA: lsa-&gt;oi(%p) != oi(%p)&quot;</span>, lsa-&gt;oi, oi);
          <span class="keywordflow">continue</span>;
        }
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>

      <span class="keywordflow">if</span> (<a class="code" href="ospf__flood_8c.html#a8beea81565f86a66155c1daacd90c3db">ospf_flood_through_interface</a> (oi, inbr, lsa))
    lsa_ack_flag = 1;
    }

  <span class="keywordflow">return</span> (lsa_ack_flag);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2169b7a36db2e596585f2d3242ac94b6"></a><!-- doxytag: member="ospf_flood.c::ospf_flood_through_as" ref="a2169b7a36db2e596585f2d3242ac94b6" args="(struct ospf *ospf, struct ospf_neighbor *inbr, struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_flood_through_as </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>inbr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00599">599</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keywordtype">int</span> lsa_ack_flag;

  lsa_ack_flag = 0;

  <span class="comment">/* The incoming LSA is type 5 or type 7  (AS-EXTERNAL or AS-NSSA )</span>
<span class="comment"></span>
<span class="comment">    Divert the Type-5 LSA&#39;s to all non-NSSA/STUB areas</span>
<span class="comment"></span>
<span class="comment">    Divert the Type-7 LSA&#39;s to all NSSA areas</span>
<span class="comment"></span>
<span class="comment">     AS-external-LSAs are flooded throughout the entire AS, with the</span>
<span class="comment">     exception of stub areas (see Section 3.6).  The eligible</span>
<span class="comment">     interfaces are all the router&#39;s interfaces, excluding virtual</span>
<span class="comment">     links and those interfaces attaching to stub areas.  */</span>

  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;<a class="code" href="structospf__lsa.html#aa8c833176affd799afeb8db16cdb2602">flags</a>, <a class="code" href="ospf__lsa_8h.html#a20f98f1fb4931335ddf4dd15d8fe9040">OSPF_LSA_LOCAL_XLT</a>)) <span class="comment">/* Translated from 7  */</span>
    <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Flood/AS: NSSA TRANSLATED LSA&quot;</span>);

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, area))
    {
      <span class="keywordtype">int</span> continue_flag = 0;
      <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *if_node;
      <span class="keyword">struct </span><a class="code" href="structospf__interface.html">ospf_interface</a> *oi;

      <span class="keywordflow">switch</span> (area-&gt;<a class="code" href="structospf__area.html#ac7c3a32e77b40506f5bc26209f41ab89">external_routing</a>)
    {
      <span class="comment">/* Don&#39;t send AS externals into stub areas.  Various types</span>
<span class="comment">             of support for partial stub areas can be implemented</span>
<span class="comment">             here.  NSSA&#39;s will receive Type-7&#39;s that have areas</span>
<span class="comment">             matching the originl LSA. */</span>
    <span class="keywordflow">case</span> <a class="code" href="ospfd_8h.html#a871478d6ecced0907ee1f67c5dbacf99">OSPF_AREA_NSSA</a>:    <span class="comment">/* Sending Type 5 or 7 into NSSA area */</span>
      <span class="comment">/* Type-7, flood NSSA area */</span>
          <span class="keywordflow">if</span> (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a> == <a class="code" href="ospf__lsa_8h.html#adc97c8397af1195230a4a98bf67e5a9d">OSPF_AS_NSSA_LSA</a>
          &amp;&amp; area == lsa-&gt;<a class="code" href="structospf__lsa.html#aba0c88ecf7facd990c4d29466b823402">area</a>)
        <span class="comment">/* We will send it. */</span>
        continue_flag = 0;
          <span class="keywordflow">else</span>
        continue_flag = 1;  <span class="comment">/* Skip this NSSA area for Type-5&#39;s et al */</span>
          <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="ospfd_8h.html#acd1fa1b30b89ecd580dc0a836ec92e4d">OSPF_AREA_TYPE_MAX</a>:
    <span class="keywordflow">case</span> <a class="code" href="ospfd_8h.html#a34e738eee2ef9dfcea3d7f31d36de08c">OSPF_AREA_STUB</a>:
      continue_flag = 1;    <span class="comment">/* Skip this area. */</span>
      <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="ospfd_8h.html#a43f84c8e8584ccc8b82990d251abec4d">OSPF_AREA_DEFAULT</a>:
    <span class="keywordflow">default</span>:
      <span class="comment">/* No Type-7 into normal area */</span>
          <span class="keywordflow">if</span> (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a> == <a class="code" href="ospf__lsa_8h.html#adc97c8397af1195230a4a98bf67e5a9d">OSPF_AS_NSSA_LSA</a>) 
        continue_flag = 1; <span class="comment">/* skip Type-7 */</span>
          <span class="keywordflow">else</span>
        continue_flag = 0;  <span class="comment">/* Do this area. */</span>
      <span class="keywordflow">break</span>;
    }
      
      <span class="comment">/* Do continue for above switch.  Saves a big if then mess */</span>
      <span class="keywordflow">if</span> (continue_flag) 
    <span class="keywordflow">continue</span>; <span class="comment">/* main for-loop */</span>
      
      <span class="comment">/* send to every interface in this area */</span>

      <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (area-&gt;<a class="code" href="structospf__area.html#aec49fceeb655dde5648208d29dfc66a4">oiflist</a>, if_node, oi))
    {
      <span class="comment">/* Skip virtual links */</span>
      <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf__interface.html#adb923b0bfebf30738af57dafcf0d0d57">type</a> !=  <a class="code" href="ospf__interface_8h.html#a45798a2a8b566abd1907f7ae8bc0a2be">OSPF_IFTYPE_VIRTUALLINK</a>)
        <span class="keywordflow">if</span> (<a class="code" href="ospf__flood_8c.html#a8beea81565f86a66155c1daacd90c3db">ospf_flood_through_interface</a> (oi, inbr, lsa)) <span class="comment">/* lsa */</span>
          lsa_ack_flag = 1;
    }
    } <span class="comment">/* main area for-loop */</span>
  
  <span class="keywordflow">return</span> (lsa_ack_flag);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8beea81565f86a66155c1daacd90c3db"></a><!-- doxytag: member="ospf_flood.c::ospf_flood_through_interface" ref="a8beea81565f86a66155c1daacd90c3db" args="(struct ospf_interface *oi, struct ospf_neighbor *inbr, struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ospf_flood_through_interface </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__interface.html">ospf_interface</a> *&#160;</td>
          <td class="paramname"><em>oi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>inbr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00344">344</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__neighbor.html">ospf_neighbor</a> *onbr;
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keywordtype">int</span> retx_flag;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_flood_through_interface(): &quot;</span>
           <span class="stringliteral">&quot;considering int %s, INBR(%s), LSA[%s]&quot;</span>,
           <a class="code" href="ospf__dump_8h.html#a8617b8a577debdfb2cd2f08c41066497">IF_NAME</a> (oi), inbr ? inet_ntoa (inbr-&gt;<a class="code" href="structospf__neighbor.html#a2257238c9040a76e9de9a78cf95bae0d">router_id</a>) : <span class="stringliteral">&quot;NULL&quot;</span>,
               <a class="code" href="ospf__lsa_8c.html#aa3a9efa2cceb09f1a6c7e3b5beba8bf6">dump_lsa_key</a> (lsa));

  <span class="keywordflow">if</span> (!<a class="code" href="ospf__interface_8c.html#a25678bf88909391ee05583a4e73a838d">ospf_if_is_enable</a> (oi))
    <span class="keywordflow">return</span> 0;

  <span class="comment">/* Remember if new LSA is aded to a retransmit list. */</span>
  retx_flag = 0;

  <span class="comment">/* Each of the neighbors attached to this interface are examined,</span>
<span class="comment">     to determine whether they must receive the new LSA.  The following</span>
<span class="comment">     steps are executed for each neighbor: */</span>
  <span class="keywordflow">for</span> (rn = <a class="code" href="table_8c.html#aee1d06c531794df326d946bdac647fb2">route_top</a> (oi-&gt;<a class="code" href="structospf__interface.html#aeb2e2f33698c499957bb55bfc80835d9">nbrs</a>); rn; rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn))
    {
      <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *ls_req;
 
      <span class="keywordflow">if</span> (rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">continue</span>;

      onbr = rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_flood_through_interface(): considering nbr %s (%s)&quot;</span>,
           inet_ntoa (onbr-&gt;<a class="code" href="structospf__neighbor.html#a2257238c9040a76e9de9a78cf95bae0d">router_id</a>),
                   <a class="code" href="log_8h.html#a3a4b1cad85aa6752f39580944e24a868">LOOKUP</a> (<a class="code" href="ospf__dump_8c.html#a7addd69d09415cd935c591a40b74ac46">ospf_nsm_state_msg</a>, onbr-&gt;<a class="code" href="structospf__neighbor.html#a07061a68f4e15effd12479e1047120c7">state</a>));

      <span class="comment">/* If the neighbor is in a lesser state than Exchange, it</span>
<span class="comment">     does not participate in flooding, and the next neighbor</span>
<span class="comment">     should be examined. */</span>
      <span class="keywordflow">if</span> (onbr-&gt;<a class="code" href="structospf__neighbor.html#a07061a68f4e15effd12479e1047120c7">state</a> &lt; <a class="code" href="ospf__nsm_8h.html#a2bac91ff388bd6722ce1cdd682184e83">NSM_Exchange</a>)
    <span class="keywordflow">continue</span>;

      <span class="comment">/* If the adjacency is not yet full (neighbor state is</span>
<span class="comment">     Exchange or Loading), examine the Link state request</span>
<span class="comment">     list associated with this adjacency.  If there is an</span>
<span class="comment">     instance of the new LSA on the list, it indicates that</span>
<span class="comment">     the neighboring router has an instance of the LSA</span>
<span class="comment">     already.  Compare the new LSA to the neighbor&#39;s copy: */</span>
      <span class="keywordflow">if</span> (onbr-&gt;<a class="code" href="structospf__neighbor.html#a07061a68f4e15effd12479e1047120c7">state</a> &lt; <a class="code" href="ospf__nsm_8h.html#aae3fb624a87adcc8ae4d12d694fc0929">NSM_Full</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_flood_through_interface(): nbr adj is not Full&quot;</span>);
      ls_req = <a class="code" href="ospf__flood_8c.html#a27c6e0c56e71024a8f2906b22ff31558">ospf_ls_request_lookup</a> (onbr, lsa);
      <span class="keywordflow">if</span> (ls_req != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        {
          <span class="keywordtype">int</span> ret;

          ret = <a class="code" href="ospf__lsa_8c.html#a562753a50210d94f439aa232c260d433">ospf_lsa_more_recent</a> (ls_req, lsa);
          <span class="comment">/* The new LSA is less recent. */</span>
          <span class="keywordflow">if</span> (ret &gt; 0)
        <span class="keywordflow">continue</span>;
          <span class="comment">/* The two copies are the same instance, then delete</span>
<span class="comment">         the LSA from the Link state request list. */</span>
          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ret == 0)
        {
          <a class="code" href="ospf__flood_8c.html#a140fef53d3293227a5f51d11580cdcb8">ospf_ls_request_delete</a> (onbr, ls_req);
          <a class="code" href="ospf__nsm_8c.html#a8c79532418548f4027b82bc41b4ed871">ospf_check_nbr_loading</a> (onbr);
          <span class="keywordflow">continue</span>;
        }
          <span class="comment">/* The new LSA is more recent.  Delete the LSA</span>
<span class="comment">         from the Link state request list. */</span>
          <span class="keywordflow">else</span>
        {
          <a class="code" href="ospf__flood_8c.html#a140fef53d3293227a5f51d11580cdcb8">ospf_ls_request_delete</a> (onbr, ls_req);
          <a class="code" href="ospf__nsm_8c.html#a8c79532418548f4027b82bc41b4ed871">ospf_check_nbr_loading</a> (onbr);
        }
        }
    }

<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>      <span class="keywordflow">if</span> (<a class="code" href="ospf__opaque_8h.html#adca492bee2510ab6955b68454830c021">IS_OPAQUE_LSA</a> (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a>))
        {
          <span class="keywordflow">if</span> (! <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (onbr-&gt;<a class="code" href="structospf__neighbor.html#aefbbf7455ee0d73ae283d9ab8edab4f6">options</a>, <a class="code" href="ospfd_8h.html#a3273018c458aa48440274e21e935c85f">OSPF_OPTION_O</a>))
            {
              <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_FLOODING))
                <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Skip this neighbor: Not Opaque-capable.&quot;</span>);
              <span class="keywordflow">continue</span>;
            }

          <span class="keywordflow">if</span> (<a class="code" href="ospf__opaque_8h.html#a22f5fbb8d8c29a987847ca54159bb24e">IS_OPAQUE_LSA_ORIGINATION_BLOCKED</a> (oi-&gt;<a class="code" href="structospf__interface.html#a159ae1c542016fc78f68c3e39a1b132e">ospf</a>-&gt;opaque)
          &amp;&amp;  <a class="code" href="ospf__lsa_8h.html#aba06df657f75f729003128da649322f8">IS_LSA_SELF</a> (lsa)
          &amp;&amp;  onbr-&gt;<a class="code" href="structospf__neighbor.html#a07061a68f4e15effd12479e1047120c7">state</a> == <a class="code" href="ospf__nsm_8h.html#aae3fb624a87adcc8ae4d12d694fc0929">NSM_Full</a>)
            {
              <span class="comment">/* Small attempt to reduce unnecessary retransmission. */</span>
              <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_FLOODING))
                <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Skip this neighbor: Initial flushing done.&quot;</span>);
              <span class="keywordflow">continue</span>;
            }
        }
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>

      <span class="comment">/* If the new LSA was received from this neighbor,</span>
<span class="comment">     examine the next neighbor. */</span>
<span class="preprocessor">#ifdef ORIGINAL_CODING</span>
<span class="preprocessor"></span>      <span class="keywordflow">if</span> (inbr)
    <span class="keywordflow">if</span> (<a class="code" href="prefix_8h.html#a52a7c965d0b22ca60fe38fa6c404dbcc">IPV4_ADDR_SAME</a> (&amp;inbr-&gt;<a class="code" href="structospf__neighbor.html#a2257238c9040a76e9de9a78cf95bae0d">router_id</a>, &amp;onbr-&gt;<a class="code" href="structospf__neighbor.html#a2257238c9040a76e9de9a78cf95bae0d">router_id</a>))
      <span class="keywordflow">continue</span>;
<span class="preprocessor">#else </span><span class="comment">/* ORIGINAL_CODING */</span>
      <span class="keywordflow">if</span> (inbr)
        {
          <span class="comment">/*</span>
<span class="comment">           * Triggered by LSUpd message parser &quot;ospf_ls_upd ()&quot;.</span>
<span class="comment">           * E.g., all LSAs handling here is received via network.</span>
<span class="comment">           */</span>
          <span class="keywordflow">if</span> (<a class="code" href="prefix_8h.html#a52a7c965d0b22ca60fe38fa6c404dbcc">IPV4_ADDR_SAME</a> (&amp;inbr-&gt;<a class="code" href="structospf__neighbor.html#a2257238c9040a76e9de9a78cf95bae0d">router_id</a>, &amp;onbr-&gt;<a class="code" href="structospf__neighbor.html#a2257238c9040a76e9de9a78cf95bae0d">router_id</a>))
            {
              <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_FLOODING))
                <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Skip this neighbor: inbr == onbr&quot;</span>);
              <span class="keywordflow">continue</span>;
            }
        }
      <span class="keywordflow">else</span>
        {
          <span class="comment">/*</span>
<span class="comment">           * Triggered by MaxAge remover, so far.</span>
<span class="comment">           * NULL &quot;inbr&quot; means flooding starts from this node.</span>
<span class="comment">           */</span>
          <span class="keywordflow">if</span> (<a class="code" href="prefix_8h.html#a52a7c965d0b22ca60fe38fa6c404dbcc">IPV4_ADDR_SAME</a> (&amp;lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a14cecc24f7274d590fc9666f9c62fdd4">adv_router</a>, &amp;onbr-&gt;<a class="code" href="structospf__neighbor.html#a2257238c9040a76e9de9a78cf95bae0d">router_id</a>))
            {
              <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_FLOODING))
                <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Skip this neighbor: lsah-&gt;adv_router == onbr&quot;</span>);
              <span class="keywordflow">continue</span>;
            }
        }
<span class="preprocessor">#endif </span><span class="comment">/* ORIGINAL_CODING */</span>

      <span class="comment">/* Add the new LSA to the Link state retransmission list</span>
<span class="comment">     for the adjacency. The LSA will be retransmitted</span>
<span class="comment">     at intervals until an acknowledgment is seen from</span>
<span class="comment">     the neighbor. */</span>
      <a class="code" href="ospf__flood_8c.html#af8c025c82461d3cb8c96d04692dc656c">ospf_ls_retransmit_add</a> (onbr, lsa);
      retx_flag = 1;
    }

  <span class="comment">/* If in the previous step, the LSA was NOT added to any of</span>
<span class="comment">     the Link state retransmission lists, there is no need to</span>
<span class="comment">     flood the LSA out the interface. */</span>
  <span class="keywordflow">if</span> (retx_flag == 0) 
    {
      <span class="keywordflow">return</span> (inbr &amp;&amp; inbr-&gt;<a class="code" href="structospf__neighbor.html#a24eabbd825aa53aba5343ae2d5ea7233">oi</a> == oi);
    }

  <span class="comment">/* if we&#39;ve received the lsa on this interface we need to perform</span>
<span class="comment">     additional checking */</span>
  <span class="keywordflow">if</span> (inbr &amp;&amp; (inbr-&gt;<a class="code" href="structospf__neighbor.html#a24eabbd825aa53aba5343ae2d5ea7233">oi</a> == oi))
    {
      <span class="comment">/* If the new LSA was received on this interface, and it was</span>
<span class="comment">     received from either the Designated Router or the Backup</span>
<span class="comment">     Designated Router, chances are that all the neighbors have</span>
<span class="comment">     received the LSA already. */</span>
      <span class="keywordflow">if</span> (<a class="code" href="ospf__neighbor_8h.html#ad422e372f51656c4649d96641b24f6e0">NBR_IS_DR</a> (inbr) || <a class="code" href="ospf__neighbor_8h.html#a1b94db83d088198f33a207de991a5316">NBR_IS_BDR</a> (inbr))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_flood_through_interface(): &quot;</span>
               <span class="stringliteral">&quot;DR/BDR NOT SEND to int %s&quot;</span>, <a class="code" href="ospf__dump_8h.html#a8617b8a577debdfb2cd2f08c41066497">IF_NAME</a> (oi));
      <span class="keywordflow">return</span> 1;
    }
      
      <span class="comment">/* If the new LSA was received on this interface, and the</span>
<span class="comment">     interface state is Backup, examine the next interface.  The</span>
<span class="comment">     Designated Router will do the flooding on this interface.</span>
<span class="comment">     However, if the Designated Router fails the router will</span>
<span class="comment">     end up retransmitting the updates. */</span>

      <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf__interface.html#a26605b9cc792cdd3e26c0481d24f0f63">state</a> == <a class="code" href="ospf__ism_8h.html#a3676782add5a8ecdb86981965ef9f37e">ISM_Backup</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_flood_through_interface(): &quot;</span>
               <span class="stringliteral">&quot;ISM_Backup NOT SEND to int %s&quot;</span>, <a class="code" href="ospf__dump_8h.html#a8617b8a577debdfb2cd2f08c41066497">IF_NAME</a> (oi));
      <span class="keywordflow">return</span> 1;
    }
    }

  <span class="comment">/* The LSA must be flooded out the interface. Send a Link State</span>
<span class="comment">     Update packet (including the new LSA as contents) out the</span>
<span class="comment">     interface.  The LSA&#39;s LS age must be incremented by InfTransDelay</span>
<span class="comment">     (which must be &gt; 0) when it is copied into the outgoing Link</span>
<span class="comment">     State Update packet (until the LS age field reaches the maximum</span>
<span class="comment">     value of MaxAge). */</span>
  <span class="comment">/* XXX HASSO: Is this IS_DEBUG_OSPF_NSSA really correct? */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_flood_through_interface(): &quot;</span>
           <span class="stringliteral">&quot;DR/BDR sending upd to int %s&quot;</span>, <a class="code" href="ospf__dump_8h.html#a8617b8a577debdfb2cd2f08c41066497">IF_NAME</a> (oi));

  <span class="comment">/*  RFC2328  Section 13.3</span>
<span class="comment">      On non-broadcast networks, separate   Link State Update</span>
<span class="comment">      packets must be sent, as unicasts, to each adjacent   neighbor</span>
<span class="comment">      (i.e., those in state Exchange or greater).    The destination</span>
<span class="comment">      IP addresses for these packets are the neighbors&#39; IP</span>
<span class="comment">      addresses.   */</span>
  <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf__interface.html#adb923b0bfebf30738af57dafcf0d0d57">type</a> == <a class="code" href="ospf__interface_8h.html#abf2c650e64355936c071432d92dd5ecb">OSPF_IFTYPE_NBMA</a>)
    {
      <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
      <span class="keyword">struct </span><a class="code" href="structospf__neighbor.html">ospf_neighbor</a> *nbr;

      <span class="keywordflow">for</span> (rn = <a class="code" href="table_8c.html#aee1d06c531794df326d946bdac647fb2">route_top</a> (oi-&gt;<a class="code" href="structospf__interface.html#aeb2e2f33698c499957bb55bfc80835d9">nbrs</a>); rn; rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn))
        <span class="keywordflow">if</span> ((nbr = rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
      <span class="keywordflow">if</span> (nbr != oi-&gt;<a class="code" href="structospf__interface.html#a6450831debea20d192ad89e650d0edab">nbr_self</a> &amp;&amp; nbr-&gt;<a class="code" href="structospf__neighbor.html#a07061a68f4e15effd12479e1047120c7">state</a> &gt;= <a class="code" href="ospf__nsm_8h.html#a2bac91ff388bd6722ce1cdd682184e83">NSM_Exchange</a>)
        <a class="code" href="ospf__packet_8c.html#a725d9c1aa0cf357d4411f9bcbad7d441">ospf_ls_upd_send_lsa</a> (nbr, lsa, <a class="code" href="ospf__packet_8h.html#a040f276a34d92cb9426454753718e81b">OSPF_SEND_PACKET_DIRECT</a>);
    }
  <span class="keywordflow">else</span>
    <a class="code" href="ospf__packet_8c.html#a725d9c1aa0cf357d4411f9bcbad7d441">ospf_ls_upd_send_lsa</a> (oi-&gt;<a class="code" href="structospf__interface.html#a6450831debea20d192ad89e650d0edab">nbr_self</a>, lsa, <a class="code" href="ospf__packet_8h.html#a76f6e5970f4cddaa077a801063a4c0ef">OSPF_SEND_PACKET_INDIRECT</a>);

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae6da3c20ff8542f795b735b5b177e7bd"></a><!-- doxytag: member="ospf_flood.c::ospf_ls_request_add" ref="ae6da3c20ff8542f795b735b5b177e7bd" args="(struct ospf_neighbor *nbr, struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_ls_request_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>nbr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00763">763</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">/*</span>
<span class="comment">   * We cannot make use of the newly introduced callback function</span>
<span class="comment">   * &quot;lsdb-&gt;new_lsa_hook&quot; to replace debug output below, just because</span>
<span class="comment">   * it seems no simple and smart way to pass neighbor information to</span>
<span class="comment">   * the common function &quot;ospf_lsdb_add()&quot; -- endo.</span>
<span class="comment">   */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_FLOODING))
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;RqstL(%lu)++, NBR(%s), LSA[%s]&quot;</span>,
                  <a class="code" href="ospf__flood_8c.html#a9544780854006403934ea809e4e99caa">ospf_ls_request_count</a> (nbr),
                  inet_ntoa (nbr-&gt;<a class="code" href="structospf__neighbor.html#a2257238c9040a76e9de9a78cf95bae0d">router_id</a>), <a class="code" href="ospf__lsa_8c.html#aa3a9efa2cceb09f1a6c7e3b5beba8bf6">dump_lsa_key</a> (lsa));

  <a class="code" href="ospf__lsdb_8c.html#a4247fc1a76fbbc491d0d55ac0d77be71">ospf_lsdb_add</a> (&amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#ac1ff0219316301982d09b282b86dc16d">ls_req</a>, lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9544780854006403934ea809e4e99caa"></a><!-- doxytag: member="ospf_flood.c::ospf_ls_request_count" ref="a9544780854006403934ea809e4e99caa" args="(struct ospf_neighbor *nbr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long ospf_ls_request_count </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>nbr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00780">780</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="ospf__lsdb_8c.html#aac22a3316876f4a266649e4f2d902973">ospf_lsdb_count_all</a> (&amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#ac1ff0219316301982d09b282b86dc16d">ls_req</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a140fef53d3293227a5f51d11580cdcb8"></a><!-- doxytag: member="ospf_flood.c::ospf_ls_request_delete" ref="a140fef53d3293227a5f51d11580cdcb8" args="(struct ospf_neighbor *nbr, struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_ls_request_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>nbr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00793">793</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (nbr-&gt;<a class="code" href="structospf__neighbor.html#a0071c28cc3ed4b8330606973e0f16323">ls_req_last</a> == lsa)
    {
      <a class="code" href="ospf__lsa_8c.html#a268fc5c6673caf7ee94c0eaaa88455b8">ospf_lsa_unlock</a> (&amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#a0071c28cc3ed4b8330606973e0f16323">ls_req_last</a>);
      nbr-&gt;<a class="code" href="structospf__neighbor.html#a0071c28cc3ed4b8330606973e0f16323">ls_req_last</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_FLOODING))    <span class="comment">/* -- endo. */</span>
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;RqstL(%lu)--, NBR(%s), LSA[%s]&quot;</span>,
                  <a class="code" href="ospf__flood_8c.html#a9544780854006403934ea809e4e99caa">ospf_ls_request_count</a> (nbr),
                  inet_ntoa (nbr-&gt;<a class="code" href="structospf__neighbor.html#a2257238c9040a76e9de9a78cf95bae0d">router_id</a>), <a class="code" href="ospf__lsa_8c.html#aa3a9efa2cceb09f1a6c7e3b5beba8bf6">dump_lsa_key</a> (lsa));

  <a class="code" href="ospf__lsdb_8c.html#aea96804c9a8cf2e0f59e8cce0b7a264e">ospf_lsdb_delete</a> (&amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#ac1ff0219316301982d09b282b86dc16d">ls_req</a>, lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a90c072738e661b151c8fd6b180cb7fcd"></a><!-- doxytag: member="ospf_flood.c::ospf_ls_request_delete_all" ref="a90c072738e661b151c8fd6b180cb7fcd" args="(struct ospf_neighbor *nbr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_ls_request_delete_all </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>nbr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00811">811</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="ospf__lsa_8c.html#a268fc5c6673caf7ee94c0eaaa88455b8">ospf_lsa_unlock</a> (&amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#a0071c28cc3ed4b8330606973e0f16323">ls_req_last</a>);
  nbr-&gt;<a class="code" href="structospf__neighbor.html#a0071c28cc3ed4b8330606973e0f16323">ls_req_last</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <a class="code" href="ospf__lsdb_8c.html#aac04ea2aea1f1895b940fe30fa531a5f">ospf_lsdb_delete_all</a> (&amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#ac1ff0219316301982d09b282b86dc16d">ls_req</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1fad8802afa3d754e1ecf810d7cc1bd5"></a><!-- doxytag: member="ospf_flood.c::ospf_ls_request_isempty" ref="a1fad8802afa3d754e1ecf810d7cc1bd5" args="(struct ospf_neighbor *nbr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_ls_request_isempty </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>nbr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00786">786</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="ospf__lsdb_8c.html#a2b5faf4a42f54a62fcf14d5a7ff0c481">ospf_lsdb_isempty</a> (&amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#ac1ff0219316301982d09b282b86dc16d">ls_req</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a27c6e0c56e71024a8f2906b22ff31558"></a><!-- doxytag: member="ospf_flood.c::ospf_ls_request_lookup" ref="a27c6e0c56e71024a8f2906b22ff31558" args="(struct ospf_neighbor *nbr, struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_ls_request_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>nbr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00820">820</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="ospf__lsdb_8c.html#aaa05b45206ad37981306f38e098eae7d">ospf_lsdb_lookup</a> (&amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#ac1ff0219316301982d09b282b86dc16d">ls_req</a>, lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aedb5408ac5f2016547b85154747a8398"></a><!-- doxytag: member="ospf_flood.c::ospf_ls_request_new" ref="aedb5408ac5f2016547b85154747a8398" args="(struct lsa_header *lsah)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_ls_request_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlsa__header.html">lsa_header</a> *&#160;</td>
          <td class="paramname"><em>lsah</em></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00826">826</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *<span class="keyword">new</span>;

  <span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#add9074cfc3c1a160b044a9ce5ebb6d4b">ospf_lsa_new</a> ();
  <span class="keyword">new</span>-&gt;data = <a class="code" href="ospf__lsa_8c.html#a6ac1c58b3b248e433f625521b186f923">ospf_lsa_data_new</a> (<a class="code" href="ospf__lsa_8h.html#a7cf423b6ef1c2152b96c88e36593bec4">OSPF_LSA_HEADER_SIZE</a>);
  <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (new-&gt;data, lsah, <a class="code" href="ospf__lsa_8h.html#a7cf423b6ef1c2152b96c88e36593bec4">OSPF_LSA_HEADER_SIZE</a>);

  <span class="keywordflow">return</span> <span class="keyword">new</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af8c025c82461d3cb8c96d04692dc656c"></a><!-- doxytag: member="ospf_flood.c::ospf_ls_retransmit_add" ref="af8c025c82461d3cb8c96d04692dc656c" args="(struct ospf_neighbor *nbr, struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_ls_retransmit_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>nbr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00859">859</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *old;

  old = <a class="code" href="ospf__flood_8c.html#ac58d995c667e0b1d491b76d0536ac0dd">ospf_ls_retransmit_lookup</a> (nbr, lsa);

  <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8c.html#a562753a50210d94f439aa232c260d433">ospf_lsa_more_recent</a> (old, lsa) &lt; 0)
    {
      <span class="keywordflow">if</span> (old)
    {
      old-&gt;<a class="code" href="structospf__lsa.html#a752d828403f41dafa1bd85a443f51d5a">retransmit_counter</a>--;
      <a class="code" href="ospf__lsdb_8c.html#aea96804c9a8cf2e0f59e8cce0b7a264e">ospf_lsdb_delete</a> (&amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#aaab4ea26de244d322ac4c82abb4defab">ls_rxmt</a>, old);
    }
      lsa-&gt;<a class="code" href="structospf__lsa.html#a752d828403f41dafa1bd85a443f51d5a">retransmit_counter</a>++;
      <span class="comment">/*</span>
<span class="comment">       * We cannot make use of the newly introduced callback function</span>
<span class="comment">       * &quot;lsdb-&gt;new_lsa_hook&quot; to replace debug output below, just because</span>
<span class="comment">       * it seems no simple and smart way to pass neighbor information to</span>
<span class="comment">       * the common function &quot;ospf_lsdb_add()&quot; -- endo.</span>
<span class="comment">       */</span>
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_FLOODING))
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;RXmtL(%lu)++, NBR(%s), LSA[%s]&quot;</span>,
                     <a class="code" href="ospf__flood_8c.html#a9fc5f626cdb9afa119113fb7a8b9daf2">ospf_ls_retransmit_count</a> (nbr),
             inet_ntoa (nbr-&gt;<a class="code" href="structospf__neighbor.html#a2257238c9040a76e9de9a78cf95bae0d">router_id</a>), <a class="code" href="ospf__lsa_8c.html#aa3a9efa2cceb09f1a6c7e3b5beba8bf6">dump_lsa_key</a> (lsa));
      <a class="code" href="ospf__lsdb_8c.html#a4247fc1a76fbbc491d0d55ac0d77be71">ospf_lsdb_add</a> (&amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#aaab4ea26de244d322ac4c82abb4defab">ls_rxmt</a>, lsa);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="afa1fd3e1ddaf46a4674019b35f527667"></a><!-- doxytag: member="ospf_flood.c::ospf_ls_retransmit_clear" ref="afa1fd3e1ddaf46a4674019b35f527667" args="(struct ospf_neighbor *nbr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_ls_retransmit_clear </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>nbr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00904">904</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsdb.html">ospf_lsdb</a> *lsdb;
  <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>;

  lsdb = &amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#aaab4ea26de244d322ac4c82abb4defab">ls_rxmt</a>;

  <span class="keywordflow">for</span> (i = <a class="code" href="ospf__lsa_8h.html#a28f56e6e5dedc2dd8223832a029e18b1">OSPF_MIN_LSA</a>; i &lt; <a class="code" href="ospf__lsa_8h.html#a3e45213a5a73c9e6ca277573059d1fbc">OSPF_MAX_LSA</a>; i++)
    {
      <span class="keyword">struct </span><a class="code" href="structroute__table.html">route_table</a> *table = lsdb-&gt;<a class="code" href="structospf__lsdb.html#a0af6d8740509eb2ed0ad1aa9c6599d56">type</a>[<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>].<a class="code" href="structospf__lsdb.html#ac02ad39566534869219d3e9d942bf565">db</a>;
      <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
      <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;

      <span class="keywordflow">for</span> (rn = <a class="code" href="table_8c.html#aee1d06c531794df326d946bdac647fb2">route_top</a> (table); rn; rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn))
    <span class="keywordflow">if</span> ((lsa = rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
      <a class="code" href="ospf__flood_8c.html#a9409fb977977ecae3646621d04802a7f">ospf_ls_retransmit_delete</a> (nbr, lsa);
    }

  <a class="code" href="ospf__lsa_8c.html#a268fc5c6673caf7ee94c0eaaa88455b8">ospf_lsa_unlock</a> (&amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#a0071c28cc3ed4b8330606973e0f16323">ls_req_last</a>);
  nbr-&gt;<a class="code" href="structospf__neighbor.html#a0071c28cc3ed4b8330606973e0f16323">ls_req_last</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9fc5f626cdb9afa119113fb7a8b9daf2"></a><!-- doxytag: member="ospf_flood.c::ospf_ls_retransmit_count" ref="a9fc5f626cdb9afa119113fb7a8b9daf2" args="(struct ospf_neighbor *nbr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long ospf_ls_retransmit_count </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>nbr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00840">840</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="ospf__lsdb_8c.html#aac22a3316876f4a266649e4f2d902973">ospf_lsdb_count_all</a> (&amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#aaab4ea26de244d322ac4c82abb4defab">ls_rxmt</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2f1065151b3c6941df7b5f5f8f89bd76"></a><!-- doxytag: member="ospf_flood.c::ospf_ls_retransmit_count_self" ref="a2f1065151b3c6941df7b5f5f8f89bd76" args="(struct ospf_neighbor *nbr, int lsa_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long ospf_ls_retransmit_count_self </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>nbr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lsa_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00846">846</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="ospf__lsdb_8c.html#acbcaa15968fddc5e037aa7a18109fadd">ospf_lsdb_count_self</a> (&amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#aaab4ea26de244d322ac4c82abb4defab">ls_rxmt</a>, lsa_type);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9409fb977977ecae3646621d04802a7f"></a><!-- doxytag: member="ospf_flood.c::ospf_ls_retransmit_delete" ref="a9409fb977977ecae3646621d04802a7f" args="(struct ospf_neighbor *nbr, struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_ls_retransmit_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>nbr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00889">889</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="ospf__flood_8c.html#ac58d995c667e0b1d491b76d0536ac0dd">ospf_ls_retransmit_lookup</a> (nbr, lsa))
    {
      lsa-&gt;<a class="code" href="structospf__lsa.html#a752d828403f41dafa1bd85a443f51d5a">retransmit_counter</a>--;  
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_FLOODING))        <span class="comment">/* -- endo. */</span>
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;RXmtL(%lu)--, NBR(%s), LSA[%s]&quot;</span>,
                     <a class="code" href="ospf__flood_8c.html#a9fc5f626cdb9afa119113fb7a8b9daf2">ospf_ls_retransmit_count</a> (nbr),
             inet_ntoa (nbr-&gt;<a class="code" href="structospf__neighbor.html#a2257238c9040a76e9de9a78cf95bae0d">router_id</a>), <a class="code" href="ospf__lsa_8c.html#aa3a9efa2cceb09f1a6c7e3b5beba8bf6">dump_lsa_key</a> (lsa));
      <a class="code" href="ospf__lsdb_8c.html#aea96804c9a8cf2e0f59e8cce0b7a264e">ospf_lsdb_delete</a> (&amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#aaab4ea26de244d322ac4c82abb4defab">ls_rxmt</a>, lsa);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8f46211a0fe7065405e8bdda81963204"></a><!-- doxytag: member="ospf_flood.c::ospf_ls_retransmit_delete_nbr_area" ref="a8f46211a0fe7065405e8bdda81963204" args="(struct ospf_area *area, struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_ls_retransmit_delete_nbr_area </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00955">955</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structospf__interface.html">ospf_interface</a> *oi;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (area-&gt;<a class="code" href="structospf__area.html#aec49fceeb655dde5648208d29dfc66a4">oiflist</a>, node, nnode, oi))
    <a class="code" href="ospf__flood_8c.html#a9e7c064f04730b9b5331d68b0a6ff959">ospf_ls_retransmit_delete_nbr_if</a> (oi, lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="add1aa73829326bf3733d0d442002cb95"></a><!-- doxytag: member="ospf_flood.c::ospf_ls_retransmit_delete_nbr_as" ref="add1aa73829326bf3733d0d442002cb95" args="(struct ospf *ospf, struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_ls_retransmit_delete_nbr_as </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00966">966</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structospf__interface.html">ospf_interface</a> *oi;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (ospf-&gt;<a class="code" href="structospf.html#a977d3608343fe5db7900ec646880cb6a">oiflist</a>, node, nnode, oi))
    <a class="code" href="ospf__flood_8c.html#a9e7c064f04730b9b5331d68b0a6ff959">ospf_ls_retransmit_delete_nbr_if</a> (oi, lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9e7c064f04730b9b5331d68b0a6ff959"></a><!-- doxytag: member="ospf_flood.c::ospf_ls_retransmit_delete_nbr_if" ref="a9e7c064f04730b9b5331d68b0a6ff959" args="(struct ospf_interface *oi, struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_ls_retransmit_delete_nbr_if </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__interface.html">ospf_interface</a> *&#160;</td>
          <td class="paramname"><em>oi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00934">934</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structospf__neighbor.html">ospf_neighbor</a> *nbr;
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsr;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__interface_8c.html#a25678bf88909391ee05583a4e73a838d">ospf_if_is_enable</a> (oi))
    <span class="keywordflow">for</span> (rn = <a class="code" href="table_8c.html#aee1d06c531794df326d946bdac647fb2">route_top</a> (oi-&gt;<a class="code" href="structospf__interface.html#aeb2e2f33698c499957bb55bfc80835d9">nbrs</a>); rn; rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn))
      <span class="comment">/* If LSA find in LS-retransmit list, then remove it. */</span>
      <span class="keywordflow">if</span> ((nbr = rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      lsr = <a class="code" href="ospf__flood_8c.html#ac58d995c667e0b1d491b76d0536ac0dd">ospf_ls_retransmit_lookup</a> (nbr, lsa);
         
      <span class="comment">/* If LSA find in ls-retransmit list, remove it. */</span>
      <span class="keywordflow">if</span> (lsr != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; lsr-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#ac9c2a10b78b2be23acfe6d0a54b9b6b5">ls_seqnum</a> == lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#ac9c2a10b78b2be23acfe6d0a54b9b6b5">ls_seqnum</a>)
        <a class="code" href="ospf__flood_8c.html#a9409fb977977ecae3646621d04802a7f">ospf_ls_retransmit_delete</a> (nbr, lsr);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a00eeafc55321936ff86756ad0804c98b"></a><!-- doxytag: member="ospf_flood.c::ospf_ls_retransmit_isempty" ref="a00eeafc55321936ff86756ad0804c98b" args="(struct ospf_neighbor *nbr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_ls_retransmit_isempty </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>nbr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00852">852</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="ospf__lsdb_8c.html#a2b5faf4a42f54a62fcf14d5a7ff0c481">ospf_lsdb_isempty</a> (&amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#aaab4ea26de244d322ac4c82abb4defab">ls_rxmt</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac58d995c667e0b1d491b76d0536ac0dd"></a><!-- doxytag: member="ospf_flood.c::ospf_ls_retransmit_lookup" ref="ac58d995c667e0b1d491b76d0536ac0dd" args="(struct ospf_neighbor *nbr, struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_ls_retransmit_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td>
          <td class="paramname"><em>nbr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00928">928</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="ospf__lsdb_8c.html#aaa05b45206ad37981306f38e098eae7d">ospf_lsdb_lookup</a> (&amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#aaab4ea26de244d322ac4c82abb4defab">ls_rxmt</a>, lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad3049ba87364a6fbed7d352023e33a4a"></a><!-- doxytag: member="ospf_flood.c::ospf_lsa_flush_area" ref="ad3049ba87364a6fbed7d352023e33a4a" args="(struct ospf_lsa *lsa, struct ospf_area *area)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_lsa_flush_area </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00980">980</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a797ae6158d74b4aa89a9d09c5edb13d2">ls_age</a> = htons (<a class="code" href="ospfd_8h.html#a2f2ee186f07abbe2afec70662e026341">OSPF_LSA_MAXAGE</a>);
  <a class="code" href="ospf__flood_8c.html#aa350bf192623114dae7914a98325a71f">ospf_flood_through_area</a> (area, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, lsa);
  <a class="code" href="ospf__lsa_8c.html#ab730b081b5aa660ffc5d0ec642d03d27">ospf_lsa_maxage</a> (area-&gt;<a class="code" href="structospf__area.html#a0858934cbc3476d83ba7604309c813ad">ospf</a>, lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a68d550b90a6cd775d965f6e8f9309863"></a><!-- doxytag: member="ospf_flood.c::ospf_lsa_flush_as" ref="a68d550b90a6cd775d965f6e8f9309863" args="(struct ospf *ospf, struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_lsa_flush_as </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00988">988</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a797ae6158d74b4aa89a9d09c5edb13d2">ls_age</a> = htons (<a class="code" href="ospfd_8h.html#a2f2ee186f07abbe2afec70662e026341">OSPF_LSA_MAXAGE</a>);
  <a class="code" href="ospf__flood_8c.html#a2169b7a36db2e596585f2d3242ac94b6">ospf_flood_through_as</a> (ospf, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, lsa);
  <a class="code" href="ospf__lsa_8c.html#ab730b081b5aa660ffc5d0ec642d03d27">ospf_lsa_maxage</a> (ospf, lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6adc4ff40641399b21c1007c9dd14c47"></a><!-- doxytag: member="ospf_flood.c::ospf_process_self_originated_lsa" ref="a6adc4ff40641399b21c1007c9dd14c47" args="(struct ospf *ospf, struct ospf_lsa *new, struct ospf_area *area)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_process_self_originated_lsa </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__flood_8c_source.html#l00114">114</a> of file <a class="el" href="ospf__flood_8c_source.html">ospf_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__interface.html">ospf_interface</a> *oi;
  <span class="keyword">struct </span><a class="code" href="structexternal__info.html">external_info</a> *ei;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;
  
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: Process self-originated LSA seq 0x%x&quot;</span>,
           new-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a>, inet_ntoa (new-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>), 
           ntohl(new-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#ac9c2a10b78b2be23acfe6d0a54b9b6b5">ls_seqnum</a>));

  <span class="comment">/* If we&#39;re here, we installed a self-originated LSA that we received</span>
<span class="comment">     from a neighbor, i.e. it&#39;s more recent.  We must see whether we want</span>
<span class="comment">     to originate it.</span>
<span class="comment">     If yes, we should use this LSA&#39;s sequence number and reoriginate</span>
<span class="comment">     a new instance.</span>
<span class="comment">     if not --- we must flush this LSA from the domain. */</span>
  <span class="keywordflow">switch</span> (new-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a>)
    {
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a35879db42bef5fa9b3c1540b7db95b6f">OSPF_ROUTER_LSA</a>:
      <span class="comment">/* Originate a new instance and schedule flooding */</span>
      <span class="keywordflow">if</span> (area-&gt;<a class="code" href="structospf__area.html#a53c30c4d48396f97336cf4e1ae4545e2">router_lsa_self</a>)
    area-&gt;<a class="code" href="structospf__area.html#a53c30c4d48396f97336cf4e1ae4545e2">router_lsa_self</a>-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#ac9c2a10b78b2be23acfe6d0a54b9b6b5">ls_seqnum</a> = <span class="keyword">new</span>-&gt;data-&gt;ls_seqnum;
      <a class="code" href="ospf__lsa_8c.html#a66ad8a1fd151b43b11d7ec9650a644bf">ospf_router_lsa_timer_add</a> (area);
      <span class="keywordflow">return</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a28b795ddb745c95eef700c9a2134c806">OSPF_NETWORK_LSA</a>:
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a9f5ad1d8944ebad62941128f9aeee23a">OSPF_OPAQUE_LINK_LSA</a>:
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
      <span class="comment">/* We must find the interface the LSA could belong to.</span>
<span class="comment">     If the interface is no more a broadcast type or we are no more</span>
<span class="comment">     the DR, we flush the LSA otherwise -- create the new instance and</span>
<span class="comment">     schedule flooding. */</span>

      <span class="comment">/* Look through all interfaces, not just area, since interface</span>
<span class="comment">     could be moved from one area to another. */</span>
      <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (ospf-&gt;<a class="code" href="structospf.html#a977d3608343fe5db7900ec646880cb6a">oiflist</a>, node, oi))
    <span class="comment">/* These are sanity check. */</span>
        <span class="keywordflow">if</span> (<a class="code" href="prefix_8h.html#a52a7c965d0b22ca60fe38fa6c404dbcc">IPV4_ADDR_SAME</a> (&amp;oi-&gt;<a class="code" href="structospf__interface.html#a43493bc2b5d951e3e38ace850332eca1">address</a>-&gt;u.<a class="code" href="structprefix.html#ab37b8922554b41b7dc2417d8f37e7829">prefix4</a>, &amp;new-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>))
          {
            <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf__interface.html#a7a0df59739f1ffa31ab75ff4b9bbcd95">area</a> != area ||
                oi-&gt;<a class="code" href="structospf__interface.html#adb923b0bfebf30738af57dafcf0d0d57">type</a> != <a class="code" href="ospf__interface_8h.html#a6c044d3118d79d243c1547176a4c5281">OSPF_IFTYPE_BROADCAST</a> ||
                !<a class="code" href="prefix_8h.html#a52a7c965d0b22ca60fe38fa6c404dbcc">IPV4_ADDR_SAME</a> (&amp;oi-&gt;<a class="code" href="structospf__interface.html#a43493bc2b5d951e3e38ace850332eca1">address</a>-&gt;u.<a class="code" href="structprefix.html#ab37b8922554b41b7dc2417d8f37e7829">prefix4</a>, &amp;<a class="code" href="ospf__interface_8h.html#aa84a7dde76ac0a31898992d050858ec5">DR</a> (oi)))
              {
                <a class="code" href="ospf__lsa_8c.html#a213c8ef3aeb0ac504641c617397fda07">ospf_schedule_lsa_flush_area</a> (area, <span class="keyword">new</span>);
                <span class="keywordflow">return</span>;
              }
            
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>            <span class="keywordflow">if</span> (new-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a> == <a class="code" href="ospf__lsa_8h.html#a9f5ad1d8944ebad62941128f9aeee23a">OSPF_OPAQUE_LINK_LSA</a>)
              {
                <a class="code" href="ospf__opaque_8h.html#a5d47cc4e0de52b67511124fcb5aa2be5">ospf_opaque_lsa_refresh</a> (<span class="keyword">new</span>);
                <span class="keywordflow">return</span>;
              }
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>

            <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf__interface.html#a175c090a388cfc7d255012d0d569df6d">network_lsa_self</a>)
          oi-&gt;<a class="code" href="structospf__interface.html#a175c090a388cfc7d255012d0d569df6d">network_lsa_self</a>-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#ac9c2a10b78b2be23acfe6d0a54b9b6b5">ls_seqnum</a> = <span class="keyword">new</span>-&gt;data-&gt;ls_seqnum;
            <span class="comment">/* Schedule network-LSA origination. */</span>
            <a class="code" href="ospf__lsa_8c.html#a42678c90c94d537b3d9c905d4685e2c5">ospf_network_lsa_timer_add</a> (oi);
            <span class="keywordflow">return</span>;
          }
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a3a501e86708401620a7a61e9920cd9bd">OSPF_SUMMARY_LSA</a>:
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a09d9e4a35705f96a15952c63088c0ccc">OSPF_ASBR_SUMMARY_LSA</a>:
      <a class="code" href="ospf__abr_8c.html#a1ff6c727604d00c49b9c4a26131e5462">ospf_schedule_abr_task</a> (ospf);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#ae1f343a4ebcfe793c20519a447f7b851">OSPF_AS_EXTERNAL_LSA</a> :
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#adc97c8397af1195230a4a98bf67e5a9d">OSPF_AS_NSSA_LSA</a>:
       <span class="keywordflow">if</span> ( (new-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a> == <a class="code" href="ospf__lsa_8h.html#ae1f343a4ebcfe793c20519a447f7b851">OSPF_AS_EXTERNAL_LSA</a>)
             &amp;&amp; <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (new-&gt;<a class="code" href="structospf__lsa.html#aa8c833176affd799afeb8db16cdb2602">flags</a>, <a class="code" href="ospf__lsa_8h.html#a20f98f1fb4931335ddf4dd15d8fe9040">OSPF_LSA_LOCAL_XLT</a>))
         {
           <a class="code" href="ospf__lsa_8c.html#aa870c13f8cc5f9f7243bf1d73278d1d5">ospf_translated_nssa_refresh</a> (ospf, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>);
           <span class="keywordflow">return</span>;
         }
      ei = <a class="code" href="ospf__flood_8c.html#a28fc4c5b15a10f380b4d1f79924ad3f5">ospf_external_info_check</a> (<span class="keyword">new</span>);
      <span class="keywordflow">if</span> (ei)
        <a class="code" href="ospf__lsa_8c.html#a12f57ed226cea2cfd9499069dbde2f3c">ospf_external_lsa_refresh</a> (ospf, <span class="keyword">new</span>, ei, <a class="code" href="ospf__lsa_8h.html#a389234e05af4a29be76c63dc46576791">LSA_REFRESH_FORCE</a>);
      <span class="keywordflow">else</span>
        <a class="code" href="ospf__flood_8c.html#a68d550b90a6cd775d965f6e8f9309863">ospf_lsa_flush_as</a> (ospf, <span class="keyword">new</span>);
      <span class="keywordflow">break</span>;
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#affea3ed894380623d4d5bf5dbbad90e9">OSPF_OPAQUE_AREA_LSA</a>:
      <a class="code" href="ospf__opaque_8h.html#a5d47cc4e0de52b67511124fcb5aa2be5">ospf_opaque_lsa_refresh</a> (<span class="keyword">new</span>);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a4ec63a35fbaffb7350ff4d69002af21e">OSPF_OPAQUE_AS_LSA</a>:
      <a class="code" href="ospf__opaque_8h.html#a5d47cc4e0de52b67511124fcb5aa2be5">ospf_opaque_lsa_refresh</a> (<span class="keyword">new</span>); <span class="comment">/* Reconsideration may needed. */</span><span class="comment">/* XXX */</span>
      <span class="keywordflow">break</span>;
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
    <span class="keywordflow">default</span>:
      <span class="keywordflow">break</span>;
    }
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="abe1502972ba9aa40adc080e419c496bf"></a><!-- doxytag: member="ospf_flood.c::zclient" ref="abe1502972ba9aa40adc080e419c496bf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structzclient.html">zclient</a>* <a class="el" href="structzclient.html">zclient</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__zebra_8c_source.html#l00042">42</a> of file <a class="el" href="bgp__zebra_8c_source.html">bgp_zebra.c</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="ospf__flood_8c.html">ospf_flood.c</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:28 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
