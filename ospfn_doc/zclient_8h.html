<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: lib/zclient.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('zclient_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">lib/zclient.h File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="if_8h_source.html">if.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for zclient.h:</div>
<div class="dyncontent">
<div class="center"><img src="zclient_8h__incl.png" border="0" usemap="#lib_2zclient_8h" alt=""/></div>
<map name="lib_2zclient_8h" id="lib_2zclient_8h">
<area shape="rect" id="node3" href="if_8h.html" title="if.h" alt="" coords="29,80,69,107"/><area shape="rect" id="node5" href="linklist_8h.html" title="linklist.h" alt="" coords="14,155,84,181"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="zclient_8h__dep__incl.png" border="0" usemap="#lib_2zclient_8hdep" alt=""/></div>
<map name="lib_2zclient_8hdep" id="lib_2zclient_8hdep">
<area shape="rect" id="node3" href="bgp__main_8c.html" title="bgpd/bgp_main.c" alt="" coords="5,80,131,107"/><area shape="rect" id="node5" href="bgp__nexthop_8c.html" title="bgpd/bgp_nexthop.c" alt="" coords="155,80,305,107"/><area shape="rect" id="node7" href="bgp__zebra_8c.html" title="bgpd/bgp_zebra.c" alt="" coords="330,80,461,107"/><area shape="rect" id="node9" href="isis__zebra_8c.html" title="isisd/isis_zebra.c" alt="" coords="486,80,609,107"/><area shape="rect" id="node11" href="zclient_8c.html" title="lib/zclient.c" alt="" coords="634,80,723,107"/><area shape="rect" id="node13" href="ospf6__zebra_8h.html" title="ospf6d/ospf6_zebra.h" alt="" coords="748,80,900,107"/><area shape="rect" id="node19" href="ospf6__zebra_8c.html" title="ospf6d/ospf6_zebra.c" alt="" coords="908,155,1060,181"/><area shape="rect" id="node24" href="ospf__flood_8c.html" title="ospfd/ospf_flood.c" alt="" coords="975,80,1111,107"/><area shape="rect" id="node26" href="ospf__vty_8c.html" title="ospfd/ospf_vty.c" alt="" coords="1135,80,1259,107"/><area shape="rect" id="node28" href="ospf__zebra_8c.html" title="ospfd/ospf_zebra.c" alt="" coords="1284,80,1423,107"/><area shape="rect" id="node30" href="ospfd_8c.html" title="ospfd/ospfd.c" alt="" coords="1447,80,1553,107"/><area shape="rect" id="node32" href="rip__interface_8c.html" title="ripd/rip_interface.c" alt="" coords="1578,80,1712,107"/><area shape="rect" id="node34" href="rip__zebra_8c.html" title="ripd/rip_zebra.c" alt="" coords="1737,80,1852,107"/><area shape="rect" id="node36" href="ripng__interface_8c.html" title="ripngd/ripng_interface.c" alt="" coords="1375,155,1539,181"/><area shape="rect" id="node38" href="ripng__zebra_8c.html" title="ripngd/ripng_zebra.c" alt="" coords="1564,155,1708,181"/><area shape="rect" id="node40" href="ripngd_8h.html" title="ripngd/ripngd.h" alt="" coords="1977,80,2089,107"/><area shape="rect" id="node63" href="interface_8c.html" title="zebra/interface.c" alt="" coords="2113,80,2236,107"/><area shape="rect" id="node65" href="redistribute_8c.html" title="zebra/redistribute.c" alt="" coords="2765,155,2904,181"/><area shape="rect" id="node67" href="router-id_8h.html" title="zebra/router&#45;id.h" alt="" coords="2983,80,3104,107"/><area shape="rect" id="node76" href="zserv_8c.html" title="zebra/zserv.c" alt="" coords="3349,155,3451,181"/><area shape="rect" id="node15" href="ospf6__asbr_8c.html" title="ospf6d/ospf6_asbr.c" alt="" coords="430,155,575,181"/><area shape="rect" id="node17" href="ospf6__top_8c.html" title="ospf6d/ospf6_top.c" alt="" coords="599,155,739,181"/><area shape="rect" id="node21" href="ospf6d_8c.html" title="ospf6d/ospf6d.c" alt="" coords="764,155,884,181"/><area shape="rect" id="node43" href="ripng__main_8c.html" title="ripngd/ripng_main.c" alt="" coords="2603,155,2741,181"/><area shape="rect" id="node45" href="ripng__nexthop_8c.html" title="ripngd/ripng_nexthop.c" alt="" coords="1801,229,1964,256"/><area shape="rect" id="node47" href="ripng__nexthop_8h.html" title="ripngd/ripng_nexthop.h" alt="" coords="1833,155,1996,181"/><area shape="rect" id="node50" href="ripng__peer_8c.html" title="ripngd/ripng_peer.c" alt="" coords="1988,229,2127,256"/><area shape="rect" id="node52" href="ripngd_8c.html" title="ripngd/ripngd.c" alt="" coords="1665,229,1777,256"/><area shape="rect" id="node54" href="ripng__offset_8c.html" title="ripngd/ripng_offset.c" alt="" coords="2071,155,2217,181"/><area shape="rect" id="node57" href="ripng__route_8c.html" title="ripngd/ripng_route.c" alt="" coords="2242,155,2384,181"/><area shape="rect" id="node59" href="ripng__routemap_8c.html" title="ripngd/ripng_routemap.c" alt="" coords="2409,155,2577,181"/><area shape="rect" id="node69" href="zebra_2main_8c.html" title="zebra/main.c" alt="" coords="2929,155,3025,181"/><area shape="rect" id="node72" href="router-id_8c.html" title="zebra/router&#45;id.c" alt="" coords="3050,155,3171,181"/><area shape="rect" id="node74" href="test__main_8c.html" title="zebra/test_main.c" alt="" coords="3195,155,3324,181"/></map>
</div>
</div>
<p><a href="zclient_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structzclient.html">zclient</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structzserv__header.html">zserv_header</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structzapi__ipv4.html">zapi_ipv4</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#aeebd7bc37965845d7accd7ce370febf9">ZEBRA_MAX_PACKET_SIZ</a>&#160;&#160;&#160;4096</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#a31ddba642897aac3d80c91cdfdb5deb1">ZEBRA_HEADER_SIZE</a>&#160;&#160;&#160;6</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#a321bbeaddad8bc9bffaf57f7ac6cf8fd">ZAPI_MESSAGE_NEXTHOP</a>&#160;&#160;&#160;0x01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#ae8d1e48f6c2858ecda1c3aee4219a0e6">ZAPI_MESSAGE_IFINDEX</a>&#160;&#160;&#160;0x02</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#abe498bb81bfbda17757173ef23e25179">ZAPI_MESSAGE_DISTANCE</a>&#160;&#160;&#160;0x04</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#a4a5d60df1ef02f794476ea1daa6ba024">ZAPI_MESSAGE_METRIC</a>&#160;&#160;&#160;0x08</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#a353879f7a2fe9365a57041c8870e8dec">ZSERV_VERSION</a>&#160;&#160;&#160;1</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structzclient.html">zclient</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#ae5a9092f48ce7cd98f899966daa4cb24">zclient_new</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#a62606e3bae00b0964a418a84550b3af7">zclient_init</a> (struct <a class="el" href="structzclient.html">zclient</a> *, int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#a77867b73aab4bf25abfa6fa34cee784f">zclient_start</a> (struct <a class="el" href="structzclient.html">zclient</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#a7a4edeec2923b8265ecd01b3da5849b2">zclient_stop</a> (struct <a class="el" href="structzclient.html">zclient</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#a83f9472ad19afaba9b2335e475eaa0fe">zclient_reset</a> (struct <a class="el" href="structzclient.html">zclient</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#a81c693b53be5633f24300c4c4e69d47e">zclient_free</a> (struct <a class="el" href="structzclient.html">zclient</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#ac937966a23dbff10b311175341da2d57">zclient_socket</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#a300938ec5cd01e423e520fec4f800544">zclient_socket_un</a> (const char *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#a305475c0ae5ab1dfe0eab1d23eda23b2">zebra_redistribute_send</a> (int command, struct <a class="el" href="structzclient.html">zclient</a> *, int <a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#adce163a6c3c2b60169599da197caa4e8">zclient_redistribute</a> (int command, struct <a class="el" href="structzclient.html">zclient</a> *, int <a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#a5bfdb49cdbb8a781d00e9f899d0f404b">zclient_redistribute_default</a> (int command, struct <a class="el" href="structzclient.html">zclient</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#a52228c0fd3181bc29f626da27ae1e7ae">zclient_send_message</a> (struct <a class="el" href="structzclient.html">zclient</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#aeac3ff3870834a3e0c9176c614f9ac6e">zclient_create_header</a> (struct <a class="el" href="structstream.html">stream</a> *, uint16_t)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structinterface.html">interface</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#a2e03baf8dd2b1f1230afcd440f7cab15">zebra_interface_add_read</a> (struct <a class="el" href="structstream.html">stream</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structinterface.html">interface</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#a989f3e044d41b4e18463027a94b846e7">zebra_interface_state_read</a> (struct <a class="el" href="structstream.html">stream</a> *<a class="el" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structconnected.html">connected</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#ac15ef9082341672740df7b6a78950757">zebra_interface_address_read</a> (int, struct <a class="el" href="structstream.html">stream</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#ae26fd6278f35d7d451db778cfafecafe">zebra_interface_if_set_value</a> (struct <a class="el" href="structstream.html">stream</a> *, struct <a class="el" href="structinterface.html">interface</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#a6adcd87e46d205582c81673f669067f3">zebra_router_id_update_read</a> (struct <a class="el" href="structstream.html">stream</a> *<a class="el" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>, struct <a class="el" href="structprefix.html">prefix</a> *rid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zclient_8h.html#ac7fa65dc2a5dd938d12af3d161d0fc43">zapi_ipv4_route</a> (u_char, struct <a class="el" href="structzclient.html">zclient</a> *, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *, struct <a class="el" href="structzapi__ipv4.html">zapi_ipv4</a> *)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abe498bb81bfbda17757173ef23e25179"></a><!-- doxytag: member="zclient.h::ZAPI_MESSAGE_DISTANCE" ref="abe498bb81bfbda17757173ef23e25179" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZAPI_MESSAGE_DISTANCE&#160;&#160;&#160;0x04</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8h_source.html#l00087">87</a> of file <a class="el" href="zclient_8h_source.html">zclient.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae8d1e48f6c2858ecda1c3aee4219a0e6"></a><!-- doxytag: member="zclient.h::ZAPI_MESSAGE_IFINDEX" ref="ae8d1e48f6c2858ecda1c3aee4219a0e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZAPI_MESSAGE_IFINDEX&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8h_source.html#l00086">86</a> of file <a class="el" href="zclient_8h_source.html">zclient.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4a5d60df1ef02f794476ea1daa6ba024"></a><!-- doxytag: member="zclient.h::ZAPI_MESSAGE_METRIC" ref="a4a5d60df1ef02f794476ea1daa6ba024" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZAPI_MESSAGE_METRIC&#160;&#160;&#160;0x08</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8h_source.html#l00088">88</a> of file <a class="el" href="zclient_8h_source.html">zclient.h</a>.</p>

</div>
</div>
<a class="anchor" id="a321bbeaddad8bc9bffaf57f7ac6cf8fd"></a><!-- doxytag: member="zclient.h::ZAPI_MESSAGE_NEXTHOP" ref="a321bbeaddad8bc9bffaf57f7ac6cf8fd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZAPI_MESSAGE_NEXTHOP&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8h_source.html#l00085">85</a> of file <a class="el" href="zclient_8h_source.html">zclient.h</a>.</p>

</div>
</div>
<a class="anchor" id="a31ddba642897aac3d80c91cdfdb5deb1"></a><!-- doxytag: member="zclient.h::ZEBRA_HEADER_SIZE" ref="a31ddba642897aac3d80c91cdfdb5deb1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZEBRA_HEADER_SIZE&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8h_source.html#l00032">32</a> of file <a class="el" href="zclient_8h_source.html">zclient.h</a>.</p>

</div>
</div>
<a class="anchor" id="aeebd7bc37965845d7accd7ce370febf9"></a><!-- doxytag: member="zclient.h::ZEBRA_MAX_PACKET_SIZ" ref="aeebd7bc37965845d7accd7ce370febf9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZEBRA_MAX_PACKET_SIZ&#160;&#160;&#160;4096</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8h_source.html#l00029">29</a> of file <a class="el" href="zclient_8h_source.html">zclient.h</a>.</p>

</div>
</div>
<a class="anchor" id="a353879f7a2fe9365a57041c8870e8dec"></a><!-- doxytag: member="zclient.h::ZSERV_VERSION" ref="a353879f7a2fe9365a57041c8870e8dec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ZSERV_VERSION&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8h_source.html#l00098">98</a> of file <a class="el" href="zclient_8h_source.html">zclient.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ac7fa65dc2a5dd938d12af3d161d0fc43"></a><!-- doxytag: member="zclient.h::zapi_ipv4_route" ref="ac7fa65dc2a5dd938d12af3d161d0fc43" args="(u_char, struct zclient *, struct prefix_ipv4 *, struct zapi_ipv4 *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zapi_ipv4_route </td>
          <td>(</td>
          <td class="paramtype">u_char&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structzclient.html">zclient</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structzapi__ipv4.html">zapi_ipv4</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00421">421</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>;
  <span class="keywordtype">int</span> psize;
  <span class="keyword">struct </span><a class="code" href="structstream.html">stream</a> *<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>;

  <span class="comment">/* Reset stream. */</span>
  s = <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a6ad60dd1b329d25af807f1517634b71f">obuf</a>;
  <a class="code" href="stream_8c.html#aee8fd31485ebc2f0a556a6a5d5c2d1e6">stream_reset</a> (s);
  
  <a class="code" href="zclient_8c.html#a70fa712bf570d588ea3b3c464bc5156f">zclient_create_header</a> (s, cmd);
  
  <span class="comment">/* Put type and nexthop. */</span>
  <a class="code" href="stream_8c.html#a8a00e56e71aed4753ee4a21f8dd2aa65">stream_putc</a> (s, api-&gt;type);
  <a class="code" href="stream_8c.html#a8a00e56e71aed4753ee4a21f8dd2aa65">stream_putc</a> (s, api-&gt;flags);
  <a class="code" href="stream_8c.html#a8a00e56e71aed4753ee4a21f8dd2aa65">stream_putc</a> (s, api-&gt;message);

  <span class="comment">/* Put prefix information. */</span>
  psize = <a class="code" href="bgpd_8h.html#a472145011d944606a257487e80cc3ace">PSIZE</a> (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen);
  <a class="code" href="stream_8c.html#a8a00e56e71aed4753ee4a21f8dd2aa65">stream_putc</a> (s, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen);
  <a class="code" href="stream_8c.html#a39121b19ef0be09e9a5598a1ea1371c0">stream_write</a> (s, (u_char *) &amp; <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefix, psize);

  <span class="comment">/* Nexthop, ifindex, distance and metric information. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (api-&gt;message, <a class="code" href="zclient_8h.html#a321bbeaddad8bc9bffaf57f7ac6cf8fd">ZAPI_MESSAGE_NEXTHOP</a>))
    {
      <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (api-&gt;flags, <a class="code" href="zebra_8h.html#ab3b7a4bd090244ae1b882b9003810713">ZEBRA_FLAG_BLACKHOLE</a>))
        {
          <a class="code" href="stream_8c.html#a8a00e56e71aed4753ee4a21f8dd2aa65">stream_putc</a> (s, 1);
          <a class="code" href="stream_8c.html#a8a00e56e71aed4753ee4a21f8dd2aa65">stream_putc</a> (s, <a class="code" href="zebra_8h.html#af00200aec468f2738ec3fabc3103b187">ZEBRA_NEXTHOP_BLACKHOLE</a>);
          <span class="comment">/* XXX assert(api-&gt;nexthop_num == 0); */</span>
          <span class="comment">/* XXX assert(api-&gt;ifindex_num == 0); */</span>
        }
      <span class="keywordflow">else</span>
        <a class="code" href="stream_8c.html#a8a00e56e71aed4753ee4a21f8dd2aa65">stream_putc</a> (s, api-&gt;nexthop_num + api-&gt;ifindex_num);

      <span class="keywordflow">for</span> (i = 0; i &lt; api-&gt;nexthop_num; i++)
        {
          <a class="code" href="stream_8c.html#a8a00e56e71aed4753ee4a21f8dd2aa65">stream_putc</a> (s, <a class="code" href="zebra_8h.html#ae603faed81a38b4507ffd9b6f9586b44">ZEBRA_NEXTHOP_IPV4</a>);
          <a class="code" href="stream_8c.html#a9019a5de70c1b6c2715cf24103109632">stream_put_in_addr</a> (s, api-&gt;nexthop[i]);
        }
      <span class="keywordflow">for</span> (i = 0; i &lt; api-&gt;ifindex_num; i++)
        {
          <a class="code" href="stream_8c.html#a8a00e56e71aed4753ee4a21f8dd2aa65">stream_putc</a> (s, <a class="code" href="zebra_8h.html#a8b5777b74f2584912603090de989e564">ZEBRA_NEXTHOP_IFINDEX</a>);
          <a class="code" href="stream_8c.html#af366d780a14cb8de53279378a8a4faeb">stream_putl</a> (s, api-&gt;ifindex[i]);
        }
    }

  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (api-&gt;message, <a class="code" href="zclient_8h.html#abe498bb81bfbda17757173ef23e25179">ZAPI_MESSAGE_DISTANCE</a>))
    <a class="code" href="stream_8c.html#a8a00e56e71aed4753ee4a21f8dd2aa65">stream_putc</a> (s, api-&gt;distance);
  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (api-&gt;message, <a class="code" href="zclient_8h.html#a4a5d60df1ef02f794476ea1daa6ba024">ZAPI_MESSAGE_METRIC</a>))
    <a class="code" href="stream_8c.html#af366d780a14cb8de53279378a8a4faeb">stream_putl</a> (s, api-&gt;metric);

  <span class="comment">/* Put length at the first point of the stream. */</span>
  <a class="code" href="stream_8c.html#a41de70a7383bac6220b787d740c0b261">stream_putw_at</a> (s, 0, <a class="code" href="stream_8c.html#ac1d2c72755840ea194301a5447ff721a">stream_get_endp</a> (s));

  <span class="keywordflow">return</span> <a class="code" href="zclient_8c.html#ad395166e549bd33dcc253052ac0bbd7d">zclient_send_message</a>(<a class="code" href="structzclient.html">zclient</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aeac3ff3870834a3e0c9176c614f9ac6e"></a><!-- doxytag: member="zclient.h::zclient_create_header" ref="aeac3ff3870834a3e0c9176c614f9ac6e" args="(struct stream *, uint16_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zclient_create_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structstream.html">stream</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00270">270</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">/* length placeholder, caller can update */</span>
  <a class="code" href="stream_8c.html#a03459a9331e0333d2b396636eca3c2e4">stream_putw</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>, <a class="code" href="zclient_8h.html#a31ddba642897aac3d80c91cdfdb5deb1">ZEBRA_HEADER_SIZE</a>);
  <a class="code" href="stream_8c.html#a8a00e56e71aed4753ee4a21f8dd2aa65">stream_putc</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>, <a class="code" href="zebra_8h.html#a95ca8e88db92c66ea0c8bbb62cea622d">ZEBRA_HEADER_MARKER</a>);
  <a class="code" href="stream_8c.html#a8a00e56e71aed4753ee4a21f8dd2aa65">stream_putc</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>, <a class="code" href="zclient_8h.html#a353879f7a2fe9365a57041c8870e8dec">ZSERV_VERSION</a>);
  <a class="code" href="stream_8c.html#a03459a9331e0333d2b396636eca3c2e4">stream_putw</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>, command);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a81c693b53be5633f24300c4c4e69d47e"></a><!-- doxytag: member="zclient.h::zclient_free" ref="a81c693b53be5633f24300c4c4e69d47e" args="(struct zclient *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zclient_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structzclient.html">zclient</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00067">67</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a1b9d2a1e869c1008c2bc70d14ce2bf49">ibuf</a>)
    <a class="code" href="stream_8c.html#ac25ca0f9b32a76b4ea34ecb3c9d62481">stream_free</a>(<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a1b9d2a1e869c1008c2bc70d14ce2bf49">ibuf</a>);
  <span class="keywordflow">if</span> (<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a6ad60dd1b329d25af807f1517634b71f">obuf</a>)
    <a class="code" href="stream_8c.html#ac25ca0f9b32a76b4ea34ecb3c9d62481">stream_free</a>(<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a6ad60dd1b329d25af807f1517634b71f">obuf</a>);
  <span class="keywordflow">if</span> (<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a7d80b83ca9d6306e93880e228c53e99f">wb</a>)
    <a class="code" href="buffer_8c.html#a33630b21db5f9cda080c24c3175bde5a">buffer_free</a>(<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a7d80b83ca9d6306e93880e228c53e99f">wb</a>);

  <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba59512f8d99cdb9b137bc09d8c5b84e2e">MTYPE_ZCLIENT</a>, <a class="code" href="structzclient.html">zclient</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a62606e3bae00b0964a418a84550b3af7"></a><!-- doxytag: member="zclient.h::zclient_init" ref="a62606e3bae00b0964a418a84550b3af7" args="(struct zclient *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zclient_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structzclient.html">zclient</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00082">82</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>;
  
  <span class="comment">/* Enable zebra client connection by default. */</span>
  <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a7867dfbcd3b504d2edd22f70ef4277b6">enable</a> = 1;

  <span class="comment">/* Set -1 to the default socket value. */</span>
  <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a> = -1;

  <span class="comment">/* Clear redistribution flags. */</span>
  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="zebra_8h.html#aec97442680d773fd62f9af5c9426b842">ZEBRA_ROUTE_MAX</a>; i++)
    <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a7c76c66fcb4fee1303f834ea9fea0fc5">redist</a>[i] = 0;

  <span class="comment">/* Set unwanted redistribute route.  bgpd does not need BGP route</span>
<span class="comment">     redistribution. */</span>
  <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a7c2ac97dd71c8f3a0db036c6c0216208">redist_default</a> = redist_default;
  <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a7c76c66fcb4fee1303f834ea9fea0fc5">redist</a>[redist_default] = 1;

  <span class="comment">/* Set default-information redistribute to zero. */</span>
  <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a9d77c71b907f0f130f467edaefed93e9">default_information</a> = 0;

  <span class="comment">/* Schedule first zclient connection. */</span>
  if (<a class="code" href="zclient_8c.html#adee5d865f1f9404997069b6bda13bda8">zclient_debug</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;zclient start scheduled&quot;</span>);

  <a class="code" href="zclient_8c.html#adbcb93080813637b933076a14b5760aa">zclient_event</a> (<a class="code" href="zclient_8c.html#a3b65133bb9997cd1ccf311af0927fc9ea826c5318cddea911fefb2c166a4bf509">ZCLIENT_SCHEDULE</a>, <a class="code" href="structzclient.html">zclient</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae5a9092f48ce7cd98f899966daa4cb24"></a><!-- doxytag: member="zclient.h::zclient_new" ref="ae5a9092f48ce7cd98f899966daa4cb24" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structzclient.html">zclient</a>* zclient_new </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00049">49</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structzclient.html">zclient</a> *<a class="code" href="bgp__zebra_8c.html#abe1502972ba9aa40adc080e419c496bf">zclient</a>;
  zclient = <a class="code" href="memory_8h.html#a7826e4ed1d152cad0666dcf43f11f663">XCALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba59512f8d99cdb9b137bc09d8c5b84e2e">MTYPE_ZCLIENT</a>, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> zclient));

  zclient-&gt;<a class="code" href="structzclient.html#a1b9d2a1e869c1008c2bc70d14ce2bf49">ibuf</a> = <a class="code" href="stream_8c.html#a7117cdad9fa5e5ae633e0cf08d047459">stream_new</a> (<a class="code" href="zclient_8h.html#aeebd7bc37965845d7accd7ce370febf9">ZEBRA_MAX_PACKET_SIZ</a>);
  zclient-&gt;<a class="code" href="structzclient.html#a6ad60dd1b329d25af807f1517634b71f">obuf</a> = <a class="code" href="stream_8c.html#a7117cdad9fa5e5ae633e0cf08d047459">stream_new</a> (<a class="code" href="zclient_8h.html#aeebd7bc37965845d7accd7ce370febf9">ZEBRA_MAX_PACKET_SIZ</a>);
  zclient-&gt;<a class="code" href="structzclient.html#a7d80b83ca9d6306e93880e228c53e99f">wb</a> = <a class="code" href="buffer_8c.html#a277b94d1c81d4e5ac2e5c59ede1abed9">buffer_new</a>(0);

  <span class="keywordflow">return</span> <a class="code" href="bgp__zebra_8c.html#abe1502972ba9aa40adc080e419c496bf">zclient</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adce163a6c3c2b60169599da197caa4e8"></a><!-- doxytag: member="zclient.h::zclient_redistribute" ref="adce163a6c3c2b60169599da197caa4e8" args="(int command, struct zclient *, int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zclient_redistribute </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structzclient.html">zclient</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00952">952</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{

  <span class="keywordflow">if</span> (command == <a class="code" href="zebra_8h.html#aaf00306d6060095dd258463ee7cb0cc1">ZEBRA_REDISTRIBUTE_ADD</a>) 
    {
      <span class="keywordflow">if</span> (<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a7c76c66fcb4fee1303f834ea9fea0fc5">redist</a>[<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>])
         <span class="keywordflow">return</span>;
      <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a7c76c66fcb4fee1303f834ea9fea0fc5">redist</a>[<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>] = 1;
    }
  <span class="keywordflow">else</span>
    {
      <span class="keywordflow">if</span> (!<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a7c76c66fcb4fee1303f834ea9fea0fc5">redist</a>[<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>])
         <span class="keywordflow">return</span>;
      <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a7c76c66fcb4fee1303f834ea9fea0fc5">redist</a>[<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>] = 0;
    }

  <span class="keywordflow">if</span> (<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a> &gt; 0)
    <a class="code" href="zclient_8c.html#a0ed1704cde688d0575a1394a34f6fc82">zebra_redistribute_send</a> (command, <a class="code" href="structzclient.html">zclient</a>, <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5bfdb49cdbb8a781d00e9f899d0f404b"></a><!-- doxytag: member="zclient.h::zclient_redistribute_default" ref="a5bfdb49cdbb8a781d00e9f899d0f404b" args="(int command, struct zclient *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zclient_redistribute_default </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structzclient.html">zclient</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00974">974</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{

  <span class="keywordflow">if</span> (command == <a class="code" href="zebra_8h.html#a6a54e4c8e5f637b9edb208de808a2ac6">ZEBRA_REDISTRIBUTE_DEFAULT_ADD</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a9d77c71b907f0f130f467edaefed93e9">default_information</a>)
        <span class="keywordflow">return</span>;
      <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a9d77c71b907f0f130f467edaefed93e9">default_information</a> = 1;
    }
  <span class="keywordflow">else</span> 
    {
      <span class="keywordflow">if</span> (!<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a9d77c71b907f0f130f467edaefed93e9">default_information</a>)
        <span class="keywordflow">return</span>;
      <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a9d77c71b907f0f130f467edaefed93e9">default_information</a> = 0;
    }

  <span class="keywordflow">if</span> (<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a> &gt; 0)
    <a class="code" href="zclient_8c.html#adab3e03d8c0c0ecb6a1fa2e4d2068054">zebra_message_send</a> (<a class="code" href="structzclient.html">zclient</a>, command);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a83f9472ad19afaba9b2335e475eaa0fe"></a><!-- doxytag: member="zclient.h::zclient_reset" ref="a83f9472ad19afaba9b2335e475eaa0fe" args="(struct zclient *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zclient_reset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structzclient.html">zclient</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00140">140</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="zclient_8c.html#a380163204583292d5924050e26a8989d">zclient_stop</a> (<a class="code" href="structzclient.html">zclient</a>);
  <a class="code" href="zclient_8c.html#ac649a246f405850a3ade72de002745e3">zclient_init</a> (<a class="code" href="structzclient.html">zclient</a>, <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a7c2ac97dd71c8f3a0db036c6c0216208">redist_default</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a52228c0fd3181bc29f626da27ae1e7ae"></a><!-- doxytag: member="zclient.h::zclient_send_message" ref="a52228c0fd3181bc29f626da27ae1e7ae" args="(struct zclient *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zclient_send_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structzclient.html">zclient</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00246">246</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a> &lt; 0)
    <span class="keywordflow">return</span> -1;
  <span class="keywordflow">switch</span> (<a class="code" href="buffer_8c.html#a426b697edda52bb07fdf222e8b982e9d">buffer_write</a>(<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a7d80b83ca9d6306e93880e228c53e99f">wb</a>, <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a>, <a class="code" href="stream_8h.html#afde5f5db208a43da6faf7b830f26d7fc">STREAM_DATA</a>(<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a6ad60dd1b329d25af807f1517634b71f">obuf</a>),
               <a class="code" href="stream_8c.html#ac1d2c72755840ea194301a5447ff721a">stream_get_endp</a>(<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a6ad60dd1b329d25af807f1517634b71f">obuf</a>)))
    {
    <span class="keywordflow">case</span> <a class="code" href="buffer_8h.html#a11b72623a9601834584c5ecf08dd6e27a6185688e62ce527910fd779f2093c6f1">BUFFER_ERROR</a>:
      <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a>(<span class="stringliteral">&quot;%s: buffer_write failed to zclient fd %d, closing&quot;</span>,
             __func__, <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a>);
      <span class="keywordflow">return</span> <a class="code" href="zclient_8c.html#a68e4ea2cd32d468ce2523653f95a7688">zclient_failed</a>(<a class="code" href="structzclient.html">zclient</a>);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="buffer_8h.html#a11b72623a9601834584c5ecf08dd6e27a78d7168c875c46a0fbb5835cd160e2ba">BUFFER_EMPTY</a>:
      <a class="code" href="thread_8h.html#a7e1de4fc338e4feae498978461742dbb">THREAD_OFF</a>(<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#aeac07252bd304a7b2e557fb2d84d7b53">t_write</a>);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="buffer_8h.html#a11b72623a9601834584c5ecf08dd6e27a6a5c775497aad93877d86b6a334de110">BUFFER_PENDING</a>:
      <a class="code" href="thread_8h.html#ad563eafaebb935e4371f38e37ca33b00">THREAD_WRITE_ON</a>(<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#aeac07252bd304a7b2e557fb2d84d7b53">t_write</a>,
              <a class="code" href="zclient_8c.html#a8bf52479ef7bde190fbe66a350089b29">zclient_flush_data</a>, <a class="code" href="structzclient.html">zclient</a>, <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a>);
      <span class="keywordflow">break</span>;
    }
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac937966a23dbff10b311175341da2d57"></a><!-- doxytag: member="zclient.h::zclient_socket" ref="ac937966a23dbff10b311175341da2d57" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zclient_socket </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00148">148</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> <a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a>;
  <span class="keywordtype">int</span> ret;
  <span class="keyword">struct </span>sockaddr_in serv;

  <span class="comment">/* We should think about IPv6 connection. */</span>
  sock = socket (AF_INET, SOCK_STREAM, 0);
  <span class="keywordflow">if</span> (sock &lt; 0)
    <span class="keywordflow">return</span> -1;
  
  <span class="comment">/* Make server socket. */</span> 
  memset (&amp;serv, 0, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> sockaddr_in));
  serv.sin_family = AF_INET;
  serv.sin_port = htons (<a class="code" href="zebra_8h.html#afa19cc8f215eef54b36bea13a690cafe">ZEBRA_PORT</a>);
<span class="preprocessor">#ifdef HAVE_STRUCT_SOCKADDR_IN_SIN_LEN</span>
<span class="preprocessor"></span>  serv.sin_len = <span class="keyword">sizeof</span> (<span class="keyword">struct </span>sockaddr_in);
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_STRUCT_SOCKADDR_IN_SIN_LEN */</span>
  serv.sin_addr.s_addr = htonl (<a class="code" href="zebra_8h.html#ae1ac25d7797666cff6d01d6c795c2378">INADDR_LOOPBACK</a>);

  <span class="comment">/* Connect to zebra. */</span>
  ret = connect (sock, (<span class="keyword">struct</span> sockaddr *) &amp;serv, <span class="keyword">sizeof</span> (serv));
  <span class="keywordflow">if</span> (ret &lt; 0)
    {
      close (sock);
      <span class="keywordflow">return</span> -1;
    }
  <span class="keywordflow">return</span> sock;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a300938ec5cd01e423e520fec4f800544"></a><!-- doxytag: member="zclient.h::zclient_socket_un" ref="a300938ec5cd01e423e520fec4f800544" args="(const char *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zclient_socket_un </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00182">182</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> ret;
  <span class="keywordtype">int</span> sock, len;
  <span class="keyword">struct </span>sockaddr_un addr;

  sock = socket (AF_UNIX, SOCK_STREAM, 0);
  <span class="keywordflow">if</span> (sock &lt; 0)
    <span class="keywordflow">return</span> -1;
  
  <span class="comment">/* Make server socket. */</span> 
  memset (&amp;addr, 0, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> sockaddr_un));
  addr.sun_family = AF_UNIX;
  strncpy (addr.sun_path, path, strlen (path));
<span class="preprocessor">#ifdef HAVE_STRUCT_SOCKADDR_UN_SUN_LEN</span>
<span class="preprocessor"></span>  len = addr.sun_len = SUN_LEN(&amp;addr);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>  len = <span class="keyword">sizeof</span> (addr.sun_family) + strlen (addr.sun_path);
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_STRUCT_SOCKADDR_UN_SUN_LEN */</span>

  ret = connect (sock, (<span class="keyword">struct</span> sockaddr *) &amp;addr, len);
  <span class="keywordflow">if</span> (ret &lt; 0)
    {
      close (sock);
      <span class="keywordflow">return</span> -1;
    }
  <span class="keywordflow">return</span> sock;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a77867b73aab4bf25abfa6fa34cee784f"></a><!-- doxytag: member="zclient.h::zclient_start" ref="a77867b73aab4bf25abfa6fa34cee784f" args="(struct zclient *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zclient_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structzclient.html">zclient</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00297">297</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>;

  <span class="keywordflow">if</span> (<a class="code" href="zclient_8c.html#adee5d865f1f9404997069b6bda13bda8">zclient_debug</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;zclient_start is called&quot;</span>);

  <span class="comment">/* zclient is disabled. */</span>
  <span class="keywordflow">if</span> (! <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a7867dfbcd3b504d2edd22f70ef4277b6">enable</a>)
    <span class="keywordflow">return</span> 0;

  <span class="comment">/* If already connected to the zebra. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a> &gt;= 0)
    <span class="keywordflow">return</span> 0;

  <span class="comment">/* Check connect thread. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#acf3591fb899408dc58cfe71cb2035571">t_connect</a>)
    <span class="keywordflow">return</span> 0;

  <span class="comment">/* Make socket. */</span>
<span class="preprocessor">#ifdef HAVE_TCP_ZEBRA</span>
<span class="preprocessor"></span>  <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a> = <a class="code" href="zclient_8c.html#ac937966a23dbff10b311175341da2d57">zclient_socket</a> ();
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>  <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a> = <a class="code" href="zclient_8c.html#a1a87f3eaa2f08161b64feebfda6bf3fd">zclient_socket_un</a> (ZEBRA_SERV_PATH);
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_TCP_ZEBRA */</span>
  <span class="keywordflow">if</span> (<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a> &lt; 0)
    {
      <span class="keywordflow">if</span> (<a class="code" href="zclient_8c.html#adee5d865f1f9404997069b6bda13bda8">zclient_debug</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;zclient connection fail&quot;</span>);
      <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#af497cf3a311b3ffc692e874564d99f20">fail</a>++;
      <a class="code" href="zclient_8c.html#adbcb93080813637b933076a14b5760aa">zclient_event</a> (<a class="code" href="zclient_8c.html#a3b65133bb9997cd1ccf311af0927fc9ea82cf139bec91c753aa00f8861f9d7dcb">ZCLIENT_CONNECT</a>, <a class="code" href="structzclient.html">zclient</a>);
      <span class="keywordflow">return</span> -1;
    }

  <span class="keywordflow">if</span> (<a class="code" href="network_8c.html#a450a9be7be692d8ac42f64acddbdaadd">set_nonblocking</a>(<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a>) &lt; 0)
    <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a>(<span class="stringliteral">&quot;%s: set_nonblocking(%d) failed&quot;</span>, __func__, <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a>);

  <span class="comment">/* Clear fail count. */</span>
  <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#af497cf3a311b3ffc692e874564d99f20">fail</a> = 0;
  <span class="keywordflow">if</span> (<a class="code" href="zclient_8c.html#adee5d865f1f9404997069b6bda13bda8">zclient_debug</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;zclient connect success with socket [%d]&quot;</span>, <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a>);
      
  <span class="comment">/* Create read thread. */</span>
  <a class="code" href="zclient_8c.html#adbcb93080813637b933076a14b5760aa">zclient_event</a> (<a class="code" href="zclient_8c.html#a3b65133bb9997cd1ccf311af0927fc9eab19700a6d070e3835e08add96a1cb3b9">ZCLIENT_READ</a>, <a class="code" href="structzclient.html">zclient</a>);

  <span class="comment">/* We need interface information. */</span>
  <a class="code" href="zclient_8c.html#adab3e03d8c0c0ecb6a1fa2e4d2068054">zebra_message_send</a> (<a class="code" href="structzclient.html">zclient</a>, <a class="code" href="zebra_8h.html#af23bf4b28d6d856ed43995d31c253119">ZEBRA_INTERFACE_ADD</a>);

  <span class="comment">/* We need router-id information. */</span>
  <a class="code" href="zclient_8c.html#adab3e03d8c0c0ecb6a1fa2e4d2068054">zebra_message_send</a> (<a class="code" href="structzclient.html">zclient</a>, <a class="code" href="zebra_8h.html#a7fe5b4bfc1b5074695d98c043a521a16">ZEBRA_ROUTER_ID_ADD</a>);

  <span class="comment">/* Flush all redistribute request. */</span>
  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="zebra_8h.html#aec97442680d773fd62f9af5c9426b842">ZEBRA_ROUTE_MAX</a>; i++)
    <span class="keywordflow">if</span> (i != <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a7c2ac97dd71c8f3a0db036c6c0216208">redist_default</a> &amp;&amp; <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a7c76c66fcb4fee1303f834ea9fea0fc5">redist</a>[i])
      <a class="code" href="zclient_8c.html#a0ed1704cde688d0575a1394a34f6fc82">zebra_redistribute_send</a> (<a class="code" href="zebra_8h.html#aaf00306d6060095dd258463ee7cb0cc1">ZEBRA_REDISTRIBUTE_ADD</a>, <a class="code" href="structzclient.html">zclient</a>, i);

  <span class="comment">/* If default information is needed. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a9d77c71b907f0f130f467edaefed93e9">default_information</a>)
    <a class="code" href="zclient_8c.html#adab3e03d8c0c0ecb6a1fa2e4d2068054">zebra_message_send</a> (<a class="code" href="structzclient.html">zclient</a>, <a class="code" href="zebra_8h.html#a6a54e4c8e5f637b9edb208de808a2ac6">ZEBRA_REDISTRIBUTE_DEFAULT_ADD</a>);

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7a4edeec2923b8265ecd01b3da5849b2"></a><!-- doxytag: member="zclient.h::zclient_stop" ref="a7a4edeec2923b8265ecd01b3da5849b2" args="(struct zclient *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zclient_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structzclient.html">zclient</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00113">113</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="zclient_8c.html#adee5d865f1f9404997069b6bda13bda8">zclient_debug</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;zclient stopped&quot;</span>);

  <span class="comment">/* Stop threads. */</span>
  <a class="code" href="thread_8h.html#a7e1de4fc338e4feae498978461742dbb">THREAD_OFF</a>(<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a50e437ba261d04154d21f0411bad12b0">t_read</a>);
  <a class="code" href="thread_8h.html#a7e1de4fc338e4feae498978461742dbb">THREAD_OFF</a>(<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#acf3591fb899408dc58cfe71cb2035571">t_connect</a>);
  <a class="code" href="thread_8h.html#a7e1de4fc338e4feae498978461742dbb">THREAD_OFF</a>(<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#aeac07252bd304a7b2e557fb2d84d7b53">t_write</a>);

  <span class="comment">/* Reset streams. */</span>
  <a class="code" href="stream_8c.html#aee8fd31485ebc2f0a556a6a5d5c2d1e6">stream_reset</a>(<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a1b9d2a1e869c1008c2bc70d14ce2bf49">ibuf</a>);
  <a class="code" href="stream_8c.html#aee8fd31485ebc2f0a556a6a5d5c2d1e6">stream_reset</a>(<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a6ad60dd1b329d25af807f1517634b71f">obuf</a>);

  <span class="comment">/* Empty the write buffer. */</span>
  <a class="code" href="buffer_8c.html#a91ad0ff694ccef1876a3e8d8a3b05ffa">buffer_reset</a>(<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a7d80b83ca9d6306e93880e228c53e99f">wb</a>);

  <span class="comment">/* Close socket. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a> &gt;= 0)
    {
      close (<a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a>);
      <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a53dfb4d4cfc1331edf8a62d04d99f08f">sock</a> = -1;
    }
  <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#af497cf3a311b3ffc692e874564d99f20">fail</a> = 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2e03baf8dd2b1f1230afcd440f7cab15"></a><!-- doxytag: member="zclient.h::zebra_interface_add_read" ref="a2e03baf8dd2b1f1230afcd440f7cab15" args="(struct stream *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinterface.html">interface</a>* zebra_interface_add_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structstream.html">stream</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00603">603</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
  <span class="keywordtype">char</span> ifname_tmp[<a class="code" href="if_8h.html#ab819b6f1f4d393be3e866af97297b9cb">INTERFACE_NAMSIZ</a>];

  <span class="comment">/* Read interface name. */</span>
  <a class="code" href="stream_8c.html#ab7101e57ef0d9dc1a33e7f7e30c91b9a">stream_get</a> (ifname_tmp, <a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>, <a class="code" href="if_8h.html#ab819b6f1f4d393be3e866af97297b9cb">INTERFACE_NAMSIZ</a>);

  <span class="comment">/* Lookup/create interface by name. */</span>
  ifp = <a class="code" href="if_8c.html#a18fa51c3b90a3afa1f564e85a2f4c62b">if_get_by_name_len</a> (ifname_tmp, <a class="code" href="str_8c.html#afc92d2231e45d19988c7894aa2a07f0c">strnlen</a>(ifname_tmp, <a class="code" href="if_8h.html#ab819b6f1f4d393be3e866af97297b9cb">INTERFACE_NAMSIZ</a>));

  <span class="comment">/* Read interface&#39;s index. */</span>
  ifp-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a> = <a class="code" href="stream_8c.html#af857bfab0cbe7d5681e9108b58f939f2">stream_getl</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);

  <span class="comment">/* Read interface&#39;s value. */</span>
  ifp-&gt;<a class="code" href="structinterface.html#ae145c01f63b3abaca8e3805f9e396c4a">status</a> = <a class="code" href="stream_8c.html#a7902a86d9a749707c535840654ded3f6">stream_getc</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);
  ifp-&gt;<a class="code" href="structinterface.html#a09ed96b900f31d769a76a32b67217c8f">flags</a> = <a class="code" href="stream_8c.html#ac5102255e13d4a706f4136b82609987d">stream_getq</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);
  ifp-&gt;<a class="code" href="structinterface.html#adbb7ad89b817a388e9442e85f1e72cc8">metric</a> = <a class="code" href="stream_8c.html#af857bfab0cbe7d5681e9108b58f939f2">stream_getl</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);
  ifp-&gt;<a class="code" href="structinterface.html#aadd24df2d261a3bfcbdfe4797e639afb">mtu</a> = <a class="code" href="stream_8c.html#af857bfab0cbe7d5681e9108b58f939f2">stream_getl</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);
  ifp-&gt;<a class="code" href="structinterface.html#a75a892a4df0f60191a13ca07b6625cb1">mtu6</a> = <a class="code" href="stream_8c.html#af857bfab0cbe7d5681e9108b58f939f2">stream_getl</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);
  ifp-&gt;<a class="code" href="structinterface.html#a324b6a80459775b1e5e254369649e075">bandwidth</a> = <a class="code" href="stream_8c.html#af857bfab0cbe7d5681e9108b58f939f2">stream_getl</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);
<span class="preprocessor">#ifdef HAVE_STRUCT_SOCKADDR_DL</span>
<span class="preprocessor"></span>  <a class="code" href="stream_8c.html#ab7101e57ef0d9dc1a33e7f7e30c91b9a">stream_get</a> (&amp;ifp-&gt;sdl, <a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>, sizeof (ifp-&gt;sdl));
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>  ifp-&gt;<a class="code" href="structinterface.html#a6521c9be15367445abca01bbba9c2cb4">hw_addr_len</a> = <a class="code" href="stream_8c.html#af857bfab0cbe7d5681e9108b58f939f2">stream_getl</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);
  <span class="keywordflow">if</span> (ifp-&gt;<a class="code" href="structinterface.html#a6521c9be15367445abca01bbba9c2cb4">hw_addr_len</a>)
    <a class="code" href="stream_8c.html#ab7101e57ef0d9dc1a33e7f7e30c91b9a">stream_get</a> (ifp-&gt;<a class="code" href="structinterface.html#a6fe2f3c7e5be26c4e376b514d86f5c22">hw_addr</a>, <a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>, ifp-&gt;<a class="code" href="structinterface.html#a6521c9be15367445abca01bbba9c2cb4">hw_addr_len</a>);
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_STRUCT_SOCKADDR_DL */</span>
  
  <span class="keywordflow">return</span> ifp;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac15ef9082341672740df7b6a78950757"></a><!-- doxytag: member="zclient.h::zebra_interface_address_read" ref="ac15ef9082341672740df7b6a78950757" args="(int, struct stream *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structconnected.html">connected</a>* zebra_interface_address_read </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structstream.html">stream</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00732">732</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a>;
  <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
  <span class="keyword">struct </span><a class="code" href="structconnected.html">connected</a> *ifc;
  <span class="keyword">struct </span><a class="code" href="structprefix.html">prefix</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, d;
  <span class="keywordtype">int</span> <a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a>;
  <span class="keywordtype">int</span> plen;
  u_char ifc_flags;

  memset (&amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>));
  memset (&amp;d, 0, <span class="keyword">sizeof</span>(d));

  <span class="comment">/* Get interface index. */</span>
  ifindex = <a class="code" href="stream_8c.html#af857bfab0cbe7d5681e9108b58f939f2">stream_getl</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);

  <span class="comment">/* Lookup index. */</span>
  ifp = <a class="code" href="if_8c.html#a424dd1e971aee548383cca2b770e2859">if_lookup_by_index</a> (ifindex);
  <span class="keywordflow">if</span> (ifp == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;zebra_interface_address_read(%s): &quot;</span>
                 <span class="stringliteral">&quot;Can&#39;t find interface by ifindex: %d &quot;</span>,
                 (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a> == <a class="code" href="zebra_8h.html#aea532f1b7734390e98af1be9c18b0964">ZEBRA_INTERFACE_ADDRESS_ADD</a>? <span class="stringliteral">&quot;ADD&quot;</span> : <span class="stringliteral">&quot;DELETE&quot;</span>),
                 ifindex);
      <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }

  <span class="comment">/* Fetch flag. */</span>
  ifc_flags = <a class="code" href="stream_8c.html#a7902a86d9a749707c535840654ded3f6">stream_getc</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);

  <span class="comment">/* Fetch interface address. */</span>
  family = <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.family = <a class="code" href="stream_8c.html#a7902a86d9a749707c535840654ded3f6">stream_getc</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);

  plen = <a class="code" href="prefix_8c.html#ad076653f7c139acd0fdedb511542e915">prefix_blen</a> (&amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
  <a class="code" href="stream_8c.html#ab7101e57ef0d9dc1a33e7f7e30c91b9a">stream_get</a> (&amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.u.prefix, <a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>, plen);
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen = <a class="code" href="stream_8c.html#a7902a86d9a749707c535840654ded3f6">stream_getc</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);

  <span class="comment">/* Fetch destination address. */</span>
  <a class="code" href="stream_8c.html#ab7101e57ef0d9dc1a33e7f7e30c91b9a">stream_get</a> (&amp;d.u.prefix, <a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>, plen);
  d.family = <a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a>;

  <span class="keywordflow">if</span> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a> == <a class="code" href="zebra_8h.html#aea532f1b7734390e98af1be9c18b0964">ZEBRA_INTERFACE_ADDRESS_ADD</a>) 
    {
       <span class="comment">/* N.B. NULL destination pointers are encoded as all zeroes */</span>
       ifc = <a class="code" href="if_8c.html#ae243c0b66d0c529a2ad22d1442457c2e">connected_add_by_prefix</a>(ifp, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>,(<a class="code" href="zclient_8c.html#a743e58b2aba73769d940cbb0f2e95b6f">memconstant</a>(&amp;d.u.prefix,0,plen) ?
                          <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : &amp;d));
       <span class="keywordflow">if</span> (ifc != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
     {
       ifc-&gt;<a class="code" href="structconnected.html#a5928e0378e95d422553fdd37c3d66519">flags</a> = ifc_flags;
       <span class="keywordflow">if</span> (ifc-&gt;<a class="code" href="structconnected.html#ad13a382a19c45aaa4e5670e1422245ff">destination</a>)
         ifc-&gt;<a class="code" href="structconnected.html#ad13a382a19c45aaa4e5670e1422245ff">destination</a>-&gt;<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a> = ifc-&gt;<a class="code" href="structconnected.html#a288d9248b21b8e3999e03ceaa9bb70db">address</a>-&gt;<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a>;
     }
    }
  <span class="keywordflow">else</span>
    {
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a> == <a class="code" href="zebra_8h.html#a8965100a302cd587b7afa842473c8be2">ZEBRA_INTERFACE_ADDRESS_DELETE</a>);
      ifc = <a class="code" href="if_8c.html#a05a2b59bad209d6a820026d73c29de8e">connected_delete_by_prefix</a>(ifp, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
    }

  <span class="keywordflow">return</span> ifc;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae26fd6278f35d7d451db778cfafecafe"></a><!-- doxytag: member="zclient.h::zebra_interface_if_set_value" ref="ae26fd6278f35d7d451db778cfafecafe" args="(struct stream *, struct interface *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zebra_interface_if_set_value </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structstream.html">stream</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structinterface.html">interface</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00706">706</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">/* Read interface&#39;s index. */</span>
  ifp-&gt;ifindex = <a class="code" href="stream_8c.html#af857bfab0cbe7d5681e9108b58f939f2">stream_getl</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);
  ifp-&gt;status = <a class="code" href="stream_8c.html#a7902a86d9a749707c535840654ded3f6">stream_getc</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);

  <span class="comment">/* Read interface&#39;s value. */</span>
  ifp-&gt;flags = <a class="code" href="stream_8c.html#ac5102255e13d4a706f4136b82609987d">stream_getq</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);
  ifp-&gt;metric = <a class="code" href="stream_8c.html#af857bfab0cbe7d5681e9108b58f939f2">stream_getl</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);
  ifp-&gt;mtu = <a class="code" href="stream_8c.html#af857bfab0cbe7d5681e9108b58f939f2">stream_getl</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);
  ifp-&gt;mtu6 = <a class="code" href="stream_8c.html#af857bfab0cbe7d5681e9108b58f939f2">stream_getl</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);
  ifp-&gt;bandwidth = <a class="code" href="stream_8c.html#af857bfab0cbe7d5681e9108b58f939f2">stream_getl</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a989f3e044d41b4e18463027a94b846e7"></a><!-- doxytag: member="zclient.h::zebra_interface_state_read" ref="a989f3e044d41b4e18463027a94b846e7" args="(struct stream *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinterface.html">interface</a>* zebra_interface_state_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structstream.html">stream</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00643">643</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
  <span class="keywordtype">char</span> ifname_tmp[<a class="code" href="if_8h.html#ab819b6f1f4d393be3e866af97297b9cb">INTERFACE_NAMSIZ</a>];

  <span class="comment">/* Read interface name. */</span>
  <a class="code" href="stream_8c.html#ab7101e57ef0d9dc1a33e7f7e30c91b9a">stream_get</a> (ifname_tmp, s, <a class="code" href="if_8h.html#ab819b6f1f4d393be3e866af97297b9cb">INTERFACE_NAMSIZ</a>);

  <span class="comment">/* Lookup this by interface index. */</span>
  ifp = <a class="code" href="if_8c.html#a8ae0929167c87a44b1933994a0254d29">if_lookup_by_name_len</a> (ifname_tmp,
                   <a class="code" href="str_8c.html#afc92d2231e45d19988c7894aa2a07f0c">strnlen</a>(ifname_tmp, <a class="code" href="if_8h.html#ab819b6f1f4d393be3e866af97297b9cb">INTERFACE_NAMSIZ</a>));

  <span class="comment">/* If such interface does not exist, indicate an error */</span>
  <span class="keywordflow">if</span> (! ifp)
     <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="comment">/* Read interface&#39;s index. */</span>
  ifp-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a> = <a class="code" href="stream_8c.html#af857bfab0cbe7d5681e9108b58f939f2">stream_getl</a> (s);

  <span class="comment">/* Read interface&#39;s value. */</span>
  ifp-&gt;<a class="code" href="structinterface.html#ae145c01f63b3abaca8e3805f9e396c4a">status</a> = <a class="code" href="stream_8c.html#a7902a86d9a749707c535840654ded3f6">stream_getc</a> (s);
  ifp-&gt;<a class="code" href="structinterface.html#a09ed96b900f31d769a76a32b67217c8f">flags</a> = <a class="code" href="stream_8c.html#ac5102255e13d4a706f4136b82609987d">stream_getq</a> (s);
  ifp-&gt;<a class="code" href="structinterface.html#adbb7ad89b817a388e9442e85f1e72cc8">metric</a> = <a class="code" href="stream_8c.html#af857bfab0cbe7d5681e9108b58f939f2">stream_getl</a> (s);
  ifp-&gt;<a class="code" href="structinterface.html#aadd24df2d261a3bfcbdfe4797e639afb">mtu</a> = <a class="code" href="stream_8c.html#af857bfab0cbe7d5681e9108b58f939f2">stream_getl</a> (s);
  ifp-&gt;<a class="code" href="structinterface.html#a75a892a4df0f60191a13ca07b6625cb1">mtu6</a> = <a class="code" href="stream_8c.html#af857bfab0cbe7d5681e9108b58f939f2">stream_getl</a> (s);
  ifp-&gt;<a class="code" href="structinterface.html#a324b6a80459775b1e5e254369649e075">bandwidth</a> = <a class="code" href="stream_8c.html#af857bfab0cbe7d5681e9108b58f939f2">stream_getl</a> (s);

  <span class="keywordflow">return</span> ifp;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a305475c0ae5ab1dfe0eab1d23eda23b2"></a><!-- doxytag: member="zclient.h::zebra_redistribute_send" ref="a305475c0ae5ab1dfe0eab1d23eda23b2" args="(int command, struct zclient *, int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zebra_redistribute_send </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structzclient.html">zclient</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00541">541</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structstream.html">stream</a> *<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>;

  s = <a class="code" href="structzclient.html">zclient</a>-&gt;<a class="code" href="structzclient.html#a6ad60dd1b329d25af807f1517634b71f">obuf</a>;
  <a class="code" href="stream_8c.html#aee8fd31485ebc2f0a556a6a5d5c2d1e6">stream_reset</a>(s);
  
  <a class="code" href="zclient_8c.html#a70fa712bf570d588ea3b3c464bc5156f">zclient_create_header</a> (s, command);
  <a class="code" href="stream_8c.html#a8a00e56e71aed4753ee4a21f8dd2aa65">stream_putc</a> (s, <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>);
  
  <a class="code" href="stream_8c.html#a41de70a7383bac6220b787d740c0b261">stream_putw_at</a> (s, 0, <a class="code" href="stream_8c.html#ac1d2c72755840ea194301a5447ff721a">stream_get_endp</a> (s));
  
  <span class="keywordflow">return</span> <a class="code" href="zclient_8c.html#ad395166e549bd33dcc253052ac0bbd7d">zclient_send_message</a>(<a class="code" href="structzclient.html">zclient</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6adcd87e46d205582c81673f669067f3"></a><!-- doxytag: member="zclient.h::zebra_router_id_update_read" ref="a6adcd87e46d205582c81673f669067f3" args="(struct stream *s, struct prefix *rid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void zebra_router_id_update_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structstream.html">stream</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname"><em>rid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="zclient_8c_source.html#l00558">558</a> of file <a class="el" href="zclient_8c_source.html">zclient.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> plen;

  <span class="comment">/* Fetch interface address. */</span>
  rid-&gt;<a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a> = <a class="code" href="stream_8c.html#a7902a86d9a749707c535840654ded3f6">stream_getc</a> (s);

  plen = <a class="code" href="prefix_8c.html#ad076653f7c139acd0fdedb511542e915">prefix_blen</a> (rid);
  <a class="code" href="stream_8c.html#ab7101e57ef0d9dc1a33e7f7e30c91b9a">stream_get</a> (&amp;rid-&gt;u.<a class="code" href="structprefix.html#af508982a05429729278c96708bd9e337">prefix</a>, s, plen);
  rid-&gt;<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a> = <a class="code" href="stream_8c.html#a7902a86d9a749707c535840654ded3f6">stream_getc</a> (s);
}
</pre></div>
</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="zclient_8h.html">zclient.h</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:25 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
