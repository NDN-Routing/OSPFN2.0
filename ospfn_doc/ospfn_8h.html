<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: ospfn/ospfn.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('ospfn_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ospfn/ospfn.h File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="thread_8h_source.html">thread.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__apiclient_8h_source.html">ospfclient/ospf_apiclient.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="tables_8h_source.html">tables.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ospfn.h:</div>
<div class="dyncontent">
<div class="center"><img src="ospfn_8h__incl.png" border="0" usemap="#ospfn_2ospfn_8h" alt=""/></div>
<map name="ospfn_2ospfn_8h" id="ospfn_2ospfn_8h">
<area shape="rect" id="node3" href="thread_8h.html" title="thread.h" alt="" coords="1429,80,1501,107"/><area shape="rect" id="node5" href="ospf__apiclient_8h.html" title="ospfclient/ospf_apiclient.h" alt="" coords="1241,155,1423,181"/><area shape="rect" id="node7" href="tables_8h.html" title="tables.h" alt="" coords="1783,80,1853,107"/><area shape="rect" id="node9" href="zebra_8h.html" title="zebra.h" alt="" coords="1599,229,1665,256"/><area shape="rect" id="node71" href="hash_8h.html" title="hash.h" alt="" coords="1788,155,1849,181"/><area shape="rect" id="node73" href="memory_8h.html" title="memory.h" alt="" coords="1975,155,2057,181"/><area shape="rect" id="node75" href="memtypes_8h.html" title="lib/memtypes.h" alt="" coords="1933,229,2048,256"/><area shape="rect" id="node78" href="prefix_8h.html" title="lib/prefix.h" alt="" coords="2909,304,2995,331"/><area shape="rect" id="node82" href="ospfd_8h.html" title="ospfd/ospfd.h" alt="" coords="1657,155,1764,181"/><area shape="rect" id="node94" href="ospf__asbr_8h.html" title="ospfd/ospf_asbr.h" alt="" coords="2132,155,2263,181"/><area shape="rect" id="node96" href="ospf__lsa_8h.html" title="ospfd/ospf_lsa.h" alt="" coords="2503,155,2625,181"/><area shape="rect" id="node63" href="zassert_8h.html" title="zassert.h" alt="" coords="1963,304,2040,331"/><area shape="rect" id="node65" href="str_8h.html" title="str.h" alt="" coords="2065,304,2113,331"/><area shape="rect" id="node80" href="sockunion_8h.html" title="sockunion.h" alt="" coords="2905,379,2999,405"/><area shape="rect" id="node85" href="filter_8h.html" title="filter.h" alt="" coords="1777,229,1836,256"/><area shape="rect" id="node91" href="log_8h.html" title="log.h" alt="" coords="1694,229,1745,256"/><area shape="rect" id="node87" href="if_8h.html" title="if.h" alt="" coords="2757,304,2797,331"/><area shape="rect" id="node89" href="linklist_8h.html" title="linklist.h" alt="" coords="2742,379,2812,405"/><area shape="rect" id="node98" href="stream_8h.html" title="stream.h" alt="" coords="2809,229,2884,256"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ospfn_8h__dep__incl.png" border="0" usemap="#ospfn_2ospfn_8hdep" alt=""/></div>
<map name="ospfn_2ospfn_8hdep" id="ospfn_2ospfn_8hdep">
<area shape="rect" id="node3" href="ospfn_8c.html" title="OSPFN program designed for dynamic FIB manipulation for CCND." alt="" coords="5,80,109,107"/><area shape="rect" id="node5" href="ospfn__opaque__lsa_8c.html" title="Handle opaque lsa&#39;s functionality." alt="" coords="133,80,315,107"/><area shape="rect" id="node7" href="tables_8c.html" title="ospfn/tables.c" alt="" coords="339,80,447,107"/></map>
</div>
</div>
<p><a href="ospfn_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhop.html">hop</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmultipath.html">multipath</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structospfn.html">ospfn</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#a9dd88b880b2b8fbcb00c48b0eb7a4884">CCN_NAME_FORMAT_URI</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#af6b70054cb4021160a5f1b0d86226e38">CCN_NAME_FORMAT_CCNB</a>&#160;&#160;&#160;1</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#a8a770abf2df0826398857d02b1447571">process_command_ccnname</a> (char *command)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#ab5e1112232fc2485e5f280ea9a4b412e">process_command_logdir</a> (char *command)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#afb3fe99ddd133a8a33ff4cde4f74b4ef">process_command_ccnnametype</a> (char *command)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#a77da863f4342fb3260ea474063868df4">process_command_multipath_order</a> (char *command)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#acc5880817878e92c0fab845112aac99f">process_conf_command</a> (char *command, int isLogOnlyProcessing)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#a4820d49966add503e096cf3eaa59df8d">init_ospfn</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#a13e04cbba48afdbe5ecd0455e1f738f5">readConfigFile</a> (const char *filename, int isLogOnlyProcessing)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#a56016c767f4dfeb0473109c1c0f4fe78">add_nexthop</a> (struct in_addr address, unsigned int pref_order)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#a60602d3928887dde138c9ca08a00cb1d">no_nexthop</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#a7152a885fda88f17214c423892f280bc">display_nexthop</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct in_addr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#a8fc6479763cc8f9d5f1253e3aa1baf34">pop_nexthop_from_position</a> (unsigned int pos)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#a1c5ccb303cbc550a6fefe7d2518d2918">pop_nexthop</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#a934aea54f5f3f116ebe68bb03388ecf1">free_all_nexthop</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#a9ce07a695e675b6b320ac3d132cb5966">is_nexthop</a> (char *address)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#ad5f5adef30cc65b6dd730b50e528b55e">inject_name_opaque_lsa</a> (struct <a class="el" href="structname__prefix.html">name_prefix</a> *<a class="el" href="spgrid_8c.html#a928495140935d9d6ce0a100550473140">np</a>, unsigned int op_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#a2858154e2009b0e6e616f313177762bc">init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#a6c2d0abc3487f3d7cc33b635b8098e05">ospfn_stop_signal_handler</a> (int sig)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#a1f511d9757b5d8f9ca3ceef41ef20d51">pid_create</a> (pid_t <a class="el" href="zserv_8h.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospfn.html">ospfn</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#af2ce7a475c38676ae495527864aa3a4c">ospfn</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structthread__master.html">thread_master</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospfn_8h.html#af7f9077bc08df049beb65a1c09cde5fa">master</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="af6b70054cb4021160a5f1b0d86226e38"></a><!-- doxytag: member="ospfn.h::CCN_NAME_FORMAT_CCNB" ref="af6b70054cb4021160a5f1b0d86226e38" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CCN_NAME_FORMAT_CCNB&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospfn_8h_source.html#l00044">44</a> of file <a class="el" href="ospfn_8h_source.html">ospfn.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9dd88b880b2b8fbcb00c48b0eb7a4884"></a><!-- doxytag: member="ospfn.h::CCN_NAME_FORMAT_URI" ref="a9dd88b880b2b8fbcb00c48b0eb7a4884" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CCN_NAME_FORMAT_URI&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospfn_8h_source.html#l00043">43</a> of file <a class="el" href="ospfn_8h_source.html">ospfn.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a56016c767f4dfeb0473109c1c0f4fe78"></a><!-- doxytag: member="ospfn.h::add_nexthop" ref="a56016c767f4dfeb0473109c1c0f4fe78" args="(struct in_addr address, unsigned int pref_order)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void add_nexthop </td>
          <td>(</td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>pref_order</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add next hop in multipath order list. </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00434">434</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span><a class="code" href="structmultipath.html">multipath</a> *current;  
    <span class="keyword">struct </span><a class="code" href="structmultipath.html">multipath</a> *tmp = (<span class="keyword">struct </span><a class="code" href="structmultipath.html">multipath</a> *)<a class="code" href="regex_8c.html#ab7e36af3707843f77cc5b4e831c2fa6d">malloc</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structmultipath.html">multipath</a>));
    tmp-&gt;<a class="code" href="structmultipath.html#a5c65d7084f72d0731a9cd7872221f43c">nexthop</a>.<a class="code" href="structhop.html#ad4cfe2b29aed545499513a32776f244f">address</a>=address;
    tmp-&gt;<a class="code" href="structmultipath.html#a5c65d7084f72d0731a9cd7872221f43c">nexthop</a>.<a class="code" href="structhop.html#a7c6e3d68aa221d4f7a2643e2c0293845">pref_order</a>=pref_order;

    <span class="keywordflow">if</span>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a4ff1e8c01aec571b460d1d802b15c90d">mp</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || pref_order &lt; ospfn-&gt;mp-&gt;nexthop.pref_order)
    {
        tmp-&gt;<a class="code" href="structmultipath.html#ad065f2c5c38fa3acf5812cb7beaf273a">next</a> = <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a4ff1e8c01aec571b460d1d802b15c90d">mp</a>;
        <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a4ff1e8c01aec571b460d1d802b15c90d">mp</a> = tmp;    
    }
    <span class="keywordflow">else</span>
    {
        current = <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a4ff1e8c01aec571b460d1d802b15c90d">mp</a>;
        
        <span class="keywordflow">while</span> ( current-&gt;<a class="code" href="structmultipath.html#ad065f2c5c38fa3acf5812cb7beaf273a">next</a> != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; current-&gt;<a class="code" href="structmultipath.html#ad065f2c5c38fa3acf5812cb7beaf273a">next</a>-&gt;<a class="code" href="structmultipath.html#a5c65d7084f72d0731a9cd7872221f43c">nexthop</a>.<a class="code" href="structhop.html#a7c6e3d68aa221d4f7a2643e2c0293845">pref_order</a> &lt;= pref_order)
            current = current-&gt;<a class="code" href="structmultipath.html#ad065f2c5c38fa3acf5812cb7beaf273a">next</a>;
        
        tmp-&gt;<a class="code" href="structmultipath.html#ad065f2c5c38fa3acf5812cb7beaf273a">next</a> = current-&gt;<a class="code" href="structmultipath.html#ad065f2c5c38fa3acf5812cb7beaf273a">next</a>;
        current-&gt;<a class="code" href="structmultipath.html#ad065f2c5c38fa3acf5812cb7beaf273a">next</a> = tmp;
    }
}   
</pre></div>
</div>
</div>
<a class="anchor" id="a7152a885fda88f17214c423892f280bc"></a><!-- doxytag: member="ospfn.h::display_nexthop" ref="a7152a885fda88f17214c423892f280bc" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_nexthop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Print Multipath order list. </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00465">465</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span><a class="code" href="structmultipath.html">multipath</a> *current;

    <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot;Display Queued Item: \n&quot;</span>);

    current = <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a4ff1e8c01aec571b460d1d802b15c90d">mp</a>;
    <span class="keywordflow">if</span> (  current == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot; Empty Queue @display_nexthop \n&quot;</span>);
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">while</span> ( current != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        {
            <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot;Item: Address :%s   Pref_order:  %d \n&quot;</span>,inet_ntoa(current-&gt;<a class="code" href="structmultipath.html#a5c65d7084f72d0731a9cd7872221f43c">nexthop</a>.<a class="code" href="structhop.html#ad4cfe2b29aed545499513a32776f244f">address</a>), current-&gt;<a class="code" href="structmultipath.html#a5c65d7084f72d0731a9cd7872221f43c">nexthop</a>.<a class="code" href="structhop.html#a7c6e3d68aa221d4f7a2643e2c0293845">pref_order</a> );
            current = current-&gt;<a class="code" href="structmultipath.html#ad065f2c5c38fa3acf5812cb7beaf273a">next</a>;
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a934aea54f5f3f116ebe68bb03388ecf1"></a><!-- doxytag: member="ospfn.h::free_all_nexthop" ref="a934aea54f5f3f116ebe68bb03388ecf1" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void free_all_nexthop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Free all allocated memory for multipath orders. </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00571">571</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>;
    <span class="keywordtype">int</span> no_element=<a class="code" href="ospfn_8c.html#a60602d3928887dde138c9ca08a00cb1d" title="Return number of multipath configured.">no_nexthop</a>();

    <span class="keywordflow">for</span>(i=1; i&lt;=no_element; i++)
        <a class="code" href="ospfn_8c.html#a1c5ccb303cbc550a6fefe7d2518d2918" title="Pop a nexthop from multipath.">pop_nexthop</a>();

    <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot; All memory freed \n&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2858154e2009b0e6e616f313177762bc"></a><!-- doxytag: member="ospfn.h::init" ref="a2858154e2009b0e6e616f313177762bc" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>initialize signal handler for ospfn program </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00112">112</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (signal(SIGQUIT, <a class="code" href="ospfn_8c.html#a6c2d0abc3487f3d7cc33b635b8098e05" title="ospfn program&#39;s signal handler function">ospfn_stop_signal_handler</a> ) == SIG_ERR) 
    {
        perror(<span class="stringliteral">&quot;SIGQUIT install error\n&quot;</span>);
        <a class="code" href="vtysh_8c.html#afa5f6ba5518772e1487b961507e2a570">exit</a>(1);
    }
    <span class="keywordflow">if</span> (signal(SIGTERM, <a class="code" href="ospfn_8c.html#a6c2d0abc3487f3d7cc33b635b8098e05" title="ospfn program&#39;s signal handler function">ospfn_stop_signal_handler</a> ) == SIG_ERR) 
    {
        perror(<span class="stringliteral">&quot;SIGTERM install error\n&quot;</span>);
        <a class="code" href="vtysh_8c.html#afa5f6ba5518772e1487b961507e2a570">exit</a>(1);
        }
    <span class="keywordflow">if</span> (signal(SIGINT, <a class="code" href="ospfn_8c.html#a6c2d0abc3487f3d7cc33b635b8098e05" title="ospfn program&#39;s signal handler function">ospfn_stop_signal_handler</a> ) == SIG_ERR)
    {
        perror(<span class="stringliteral">&quot;SIGTERM install error\n&quot;</span>);
        <a class="code" href="vtysh_8c.html#afa5f6ba5518772e1487b961507e2a570">exit</a>(1);
    }   
    <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#adeb9e347d1d783bdc0ff3ae0e6d3eb85">CCN_NAME_TYPE</a>=<a class="code" href="ospfn_8h.html#a9dd88b880b2b8fbcb00c48b0eb7a4884">CCN_NAME_FORMAT_URI</a>;
    <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a4ff1e8c01aec571b460d1d802b15c90d">mp</a>=<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4820d49966add503e096cf3eaa59df8d"></a><!-- doxytag: member="ospfn.h::init_ospfn" ref="a4820d49966add503e096cf3eaa59df8d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_ospfn </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize ospfn. </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00865">865</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{

    <a class="code" href="structospfn.html">ospfn</a>=(<span class="keyword">struct </span><a class="code" href="structospfn.html">ospfn</a> *)<a class="code" href="regex_8c.html#ab7e36af3707843f77cc5b4e831c2fa6d">malloc</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structospfn.html">ospfn</a>));

    <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a6b98842a2bfca74f6ce1777be4c90807">OSPFN_DEFAULT_CONFIG_FILE</a>=(<span class="keywordtype">char</span> *)<a class="code" href="regex_8c.html#ab7e36af3707843f77cc5b4e831c2fa6d">malloc</a>(strlen(<span class="stringliteral">&quot;ospfn.conf&quot;</span>)+1);
    <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#acc23aa4a5fd60737211d45af2b9bde17">OSPFN_LOCAL_HOST</a>=(<span class="keywordtype">char</span> *)<a class="code" href="regex_8c.html#ab7e36af3707843f77cc5b4e831c2fa6d">malloc</a>(strlen(<span class="stringliteral">&quot;127.0.0.1&quot;</span>)+1);  
    <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a6b98842a2bfca74f6ce1777be4c90807">OSPFN_DEFAULT_CONFIG_FILE</a>,<span class="stringliteral">&quot;ospfn.conf&quot;</span>,10);
    <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#acc23aa4a5fd60737211d45af2b9bde17">OSPFN_LOCAL_HOST</a>,<span class="stringliteral">&quot;127.0.0.1&quot;</span>,9);

        <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a882146eca277081aad6e758b678a35d3">origin_table</a> = <a class="code" href="tables_8c.html#add6c0fe390d5f97c17cfc9e92748b131">origin_hash_create</a>();
        <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a5fcbebd95f37c54c3ff5e0455adcd819">prefix_table</a> = <a class="code" href="tables_8c.html#a3c9c026f80f12156cd635307ed718fd2">prefix_hash_create</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad5f5adef30cc65b6dd730b50e528b55e"></a><!-- doxytag: member="ospfn.h::inject_name_opaque_lsa" ref="ad5f5adef30cc65b6dd730b50e528b55e" args="(struct name_prefix *np, unsigned int op_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inject_name_opaque_lsa </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structname__prefix.html">name_prefix</a> *&#160;</td>
          <td class="paramname"><em>np</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>op_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>inject Name OLSA in ospfd </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00825">825</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
        <span class="keyword">struct </span><a class="code" href="structospf__apiclient.html">ospf_apiclient</a> *<a class="code" href="spgrid_8c.html#a6dd5c44547ae6870b695e43bc05c9a24">cl</a>;
        <span class="keyword">struct </span>in_addr ifaddr;
        <span class="keyword">struct </span>in_addr area_id;
        u_char lsa_type;
        u_char opaque_type;
        <span class="keywordtype">int</span> rc;

        cl=<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a8fd91d317acf9d25e5c3cfa1f295252d">oclient</a>;
        <a class="code" href="sockunion_8c.html#a4203367afaacee3fa5cc1626b2ef63c0">inet_aton</a> (<span class="stringliteral">&quot;127.0.0.1&quot;</span>, &amp;ifaddr);    
    <a class="code" href="sockunion_8c.html#a4203367afaacee3fa5cc1626b2ef63c0">inet_aton</a> (<span class="stringliteral">&quot;0&quot;</span>, &amp;area_id);
        lsa_type = 10;
        opaque_type = 235;

        <span class="keyword">struct </span><a class="code" href="structname__opaque__body.html">name_opaque_body</a> *nob= (<span class="keyword">struct </span><a class="code" href="structname__opaque__body.html">name_opaque_body</a> *)<a class="code" href="regex_8c.html#ab7e36af3707843f77cc5b4e831c2fa6d">malloc</a>( <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structname__opaque__body.html">name_opaque_body</a>) + np-&gt;<a class="code" href="structname__prefix.html#a0ffdda48ee731fee29c97b69e35ec859">length</a>);
    nob-&gt;<a class="code" href="structname__opaque__body.html#aa23e0bc227156679aacab72c3b1e5159">name_length</a>=np-&gt;<a class="code" href="structname__prefix.html#a0ffdda48ee731fee29c97b69e35ec859">length</a>;
        nob-&gt;<a class="code" href="structname__opaque__body.html#a2e29ccf9b3838a29421113212385a25d">name_type</a>=<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#adeb9e347d1d783bdc0ff3ae0e6d3eb85">CCN_NAME_TYPE</a>;
    np-&gt;<a class="code" href="structname__prefix.html#a2814019449f37c0f6e1f50e96240c47b">name</a>=<a class="code" href="utility_8c.html#ace8dc64a0447a563cb013be9c17660ce" title="align character to 4 bytes by padding character at end of string">align_data</a>(np-&gt;<a class="code" href="structname__prefix.html#a2814019449f37c0f6e1f50e96240c47b">name</a>,0);
        <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a>(nob-&gt;<a class="code" href="structname__opaque__body.html#aec55545ef6304460097e186e83e140d5">name_data</a>,np-&gt;<a class="code" href="structname__prefix.html#a2814019449f37c0f6e1f50e96240c47b">name</a>,np-&gt;<a class="code" href="structname__prefix.html#a0ffdda48ee731fee29c97b69e35ec859">length</a>);
        <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot;Originating/updating Name Opaque LSA... &quot;</span>);
        <span class="comment">/*injecting name opaque lsa here */</span>
        rc = <a class="code" href="ospf__apiclient_8c.html#a0bddf5cada0954167e7361d59fcf8a97">ospf_apiclient_lsa_originate</a>(cl, ifaddr, area_id,
            lsa_type,
            opaque_type, op_id,
            (<span class="keywordtype">void</span> *)nob, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structname__opaque__body.html">name_opaque_body</a>) + np-&gt;<a class="code" href="structname__prefix.html#a0ffdda48ee731fee29c97b69e35ec859">length</a>  );

        <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot;Done, return code is %d\n&quot;</span>, rc);

    free(nob);

}
</pre></div>
</div>
</div>
<a class="anchor" id="a9ce07a695e675b6b320ac3d132cb5966"></a><!-- doxytag: member="ospfn.h::is_nexthop" ref="a9ce07a695e675b6b320ac3d132cb5966" args="(char *address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_nexthop </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check existence of address in multipath nexthop. </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00589">589</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span><a class="code" href="structmultipath.html">multipath</a> *current;
    <span class="keywordtype">int</span> exists=0;

    current = <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a4ff1e8c01aec571b460d1d802b15c90d">mp</a>;
    <span class="keywordflow">if</span> (  current == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__, <span class="stringliteral">&quot; Empty Queue @ is_nexthop \n&quot;</span>);
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">while</span> ( current != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        {
            <span class="keywordflow">if</span>(inet_addr(inet_ntoa(current-&gt;<a class="code" href="structmultipath.html#a5c65d7084f72d0731a9cd7872221f43c">nexthop</a>.<a class="code" href="structhop.html#ad4cfe2b29aed545499513a32776f244f">address</a>)) == inet_addr(address))    
                exists=1;           
            current = current-&gt;<a class="code" href="structmultipath.html#ad065f2c5c38fa3acf5812cb7beaf273a">next</a>;
        }
    }

    <span class="keywordflow">return</span> exists;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a60602d3928887dde138c9ca08a00cb1d"></a><!-- doxytag: member="ospfn.h::no_nexthop" ref="a60602d3928887dde138c9ca08a00cb1d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int no_nexthop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return number of multipath configured. </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00491">491</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span><a class="code" href="structmultipath.html">multipath</a> *current;
    <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a66e3fedede6aa372e5196e55e5e8d5c1">count</a> = 0;

    current = <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a4ff1e8c01aec571b460d1d802b15c90d">mp</a>;
    <span class="keywordflow">if</span> (  current == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot; Empty Queue @no_nexthop \n&quot;</span>);
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">while</span> ( current != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        {
            current = current-&gt;<a class="code" href="structmultipath.html#ad065f2c5c38fa3acf5812cb7beaf273a">next</a>;
            count++;
        }
    }

    <span class="keywordflow">return</span> <a class="code" href="spgrid_8c.html#a66e3fedede6aa372e5196e55e5e8d5c1">count</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6c2d0abc3487f3d7cc33b635b8098e05"></a><!-- doxytag: member="ospfn.h::ospfn_stop_signal_handler" ref="a6c2d0abc3487f3d7cc33b635b8098e05" args="(int sig)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospfn_stop_signal_handler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ospfn program's signal handler function </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00140">140</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    signal(sig, SIG_IGN);
    <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot;Signal for ospfn stop\n&quot;</span>);
    <a class="code" href="tables_8c.html#ae588e397cd2770893df9ce89de74a575" title="delete ccnd fib entry for every name prefix entry in name prefix table">hash_iterate_delete_npt</a> (<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a5fcbebd95f37c54c3ff5e0455adcd819">prefix_table</a>);
        ccn_destroy(&amp;<a class="code" href="tables_8h.html#aa9a48f1b9a2007cd3c6be74ca4f5c9d4">ccn_handle</a>);   
        <a class="code" href="ospf__apiclient_8c.html#a0eef974ec77db8ea8f14c3566738be52">ospf_apiclient_close</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a8fd91d317acf9d25e5c3cfa1f295252d">oclient</a>);   
    <a class="code" href="ospfn_8c.html#a934aea54f5f3f116ebe68bb03388ecf1" title="Free all allocated memory for multipath orders.">free_all_nexthop</a>(); 
    <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot;Exiting ospfn...\n&quot;</span>);  
    <a class="code" href="vtysh_8c.html#afa5f6ba5518772e1487b961507e2a570">exit</a>(0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1f511d9757b5d8f9ca3ceef41ef20d51"></a><!-- doxytag: member="ospfn.h::pid_create" ref="a1f511d9757b5d8f9ca3ceef41ef20d51" args="(pid_t pid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pid_create </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>pid file creation function </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00158">158</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    FILE *fp;
    fp=fopen(PATH_OSPFN_PID,<span class="stringliteral">&quot;w&quot;</span>);
    <span class="keywordflow">if</span>(fp!=<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        fprintf(fp,<span class="stringliteral">&quot;%d\n&quot;</span>,<a class="code" href="zebra_2main_8c.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>+1);
        fclose(fp); 
    }
    <span class="keywordflow">else</span> 
    {
        fprintf (stderr, <span class="stringliteral">&quot;pid create: can not create pid file in %s directory\n&quot;</span>, PATH_OSPFN_PID);  
        <a class="code" href="vtysh_8c.html#afa5f6ba5518772e1487b961507e2a570">exit</a>(1);
    }   
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1c5ccb303cbc550a6fefe7d2518d2918"></a><!-- doxytag: member="ospfn.h::pop_nexthop" ref="a1c5ccb303cbc550a6fefe7d2518d2918" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pop_nexthop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pop a nexthop from multipath. </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00550">550</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span><a class="code" href="structmultipath.html">multipath</a> *tmp;
    <span class="keywordflow">if</span> ( <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a4ff1e8c01aec571b460d1d802b15c90d">mp</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )
        <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot; Empty Queue@pop_nexthop \n&quot;</span>);
    <span class="keywordflow">else</span>
    {
        tmp = <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a4ff1e8c01aec571b460d1d802b15c90d">mp</a>;
        <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot; Deleted item: Address :%s   Pref_order:  %d \n&quot;</span>,inet_ntoa(tmp-&gt;<a class="code" href="structmultipath.html#a5c65d7084f72d0731a9cd7872221f43c">nexthop</a>.<a class="code" href="structhop.html#ad4cfe2b29aed545499513a32776f244f">address</a>), tmp-&gt;<a class="code" href="structmultipath.html#a5c65d7084f72d0731a9cd7872221f43c">nexthop</a>.<a class="code" href="structhop.html#a7c6e3d68aa221d4f7a2643e2c0293845">pref_order</a> );
        <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a4ff1e8c01aec571b460d1d802b15c90d">mp</a> = <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a4ff1e8c01aec571b460d1d802b15c90d">mp</a>-&gt;<a class="code" href="structmultipath.html#ad065f2c5c38fa3acf5812cb7beaf273a">next</a>;
        free ( tmp );
    } 
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8fc6479763cc8f9d5f1253e3aa1baf34"></a><!-- doxytag: member="ospfn.h::pop_nexthop_from_position" ref="a8fc6479763cc8f9d5f1253e3aa1baf34" args="(unsigned int pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct in_addr pop_nexthop_from_position </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return nexthop from multipath from a position. </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00520">520</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span><a class="code" href="structmultipath.html">multipath</a> *current;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a66e3fedede6aa372e5196e55e5e8d5c1">count</a>=1;
    <span class="keywordflow">if</span> ( <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a4ff1e8c01aec571b460d1d802b15c90d">mp</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> )
        <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot; Empty Queue@pop_nexthop_from_position \n&quot;</span>);   
    <span class="keywordflow">else</span>
    {
        current = <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a4ff1e8c01aec571b460d1d802b15c90d">mp</a>;
        
        <span class="keywordflow">while</span> ( current-&gt;<a class="code" href="structmultipath.html#ad065f2c5c38fa3acf5812cb7beaf273a">next</a> != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; count&lt;pos)
        {
            count++;
            current = current-&gt;<a class="code" href="structmultipath.html#ad065f2c5c38fa3acf5812cb7beaf273a">next</a>;
        }

        <span class="keywordflow">if</span> ( current != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
            <span class="keywordflow">return</span> current-&gt;<a class="code" href="structmultipath.html#a5c65d7084f72d0731a9cd7872221f43c">nexthop</a>.<a class="code" href="structhop.html#ad4cfe2b29aed545499513a32776f244f">address</a>;
    } 

    <span class="keywordflow">return</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8a770abf2df0826398857d02b1447571"></a><!-- doxytag: member="ospfn.h::process_command_ccnname" ref="a8a770abf2df0826398857d02b1447571" args="(char *command)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void process_command_ccnname </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>process ccnname commands and call for name OLS injection </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00203">203</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span>(command==<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot;Wrong Command Format [ ccnname /name/prefix opaque_id]\n&quot;</span>);
        <span class="keywordflow">return</span>;
    }
    
    <span class="keywordtype">char</span> *rem;
    <span class="keyword">const</span> <span class="keywordtype">char</span> *sep=<span class="stringliteral">&quot; \t\n&quot;</span>;
    <span class="keywordtype">char</span> *<a class="code" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>; 
    <span class="keywordtype">char</span> *opId;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> op_id;
    <span class="keyword">struct </span><a class="code" href="structname__prefix.html">name_prefix</a> *<a class="code" href="spgrid_8c.html#a928495140935d9d6ce0a100550473140">np</a>=(<span class="keyword">struct </span><a class="code" href="structname__prefix.html">name_prefix</a> *)<a class="code" href="regex_8c.html#ab7e36af3707843f77cc5b4e831c2fa6d">malloc</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structname__prefix.html">name_prefix</a>));

    <span class="comment">/* procesing of ccn name commands here */</span>
    name=strtok_r(command,sep,&amp;rem);
    <span class="keywordflow">if</span>(name==<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot;Wrong Command Format [ ccnname /name/prefix opaque_id\n&quot;</span>);
        <span class="keywordflow">return</span>;
    }
    
    opId=strtok_r(<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,sep,&amp;rem);
    <span class="keywordflow">if</span>(opId==<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot;Wrong Command Format [ ccnname /name/prefix opaque_id\n&quot;</span>);
        <span class="keywordflow">return</span>;
    }
    op_id=atoi(opId);
    np-&gt;<a class="code" href="structname__prefix.html#a0ffdda48ee731fee29c97b69e35ec859">length</a>=strlen(name)+1;
    np-&gt;<a class="code" href="structname__prefix.html#a2814019449f37c0f6e1f50e96240c47b">name</a>=(u_char *)name;    
    np-&gt;<a class="code" href="structname__prefix.html#a2814019449f37c0f6e1f50e96240c47b">name</a>[np-&gt;<a class="code" href="structname__prefix.html#a0ffdda48ee731fee29c97b69e35ec859">length</a>]=<span class="charliteral">&#39;\0&#39;</span>;
    <a class="code" href="ospfn_8c.html#ad5f5adef30cc65b6dd730b50e528b55e" title="inject Name OLSA in ospfd">inject_name_opaque_lsa</a>(np,op_id);   
    free(np);
}
</pre></div>
</div>
</div>
<a class="anchor" id="afb3fe99ddd133a8a33ff4cde4f74b4ef"></a><!-- doxytag: member="ospfn.h::process_command_ccnnametype" ref="afb3fe99ddd133a8a33ff4cde4f74b4ef" args="(char *command)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void process_command_ccnnametype </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>process ccnnametype command and set nametype uri/ccnb </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00274">274</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span>(command==<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot; Wrong Command Format ( ccnnametype uri/ccnb\n&quot;</span>);
        <span class="keywordflow">return</span>;
    }
    <span class="keywordtype">char</span> *rem;
    <span class="keyword">const</span> <span class="keywordtype">char</span> *sep=<span class="stringliteral">&quot; \t\n&quot;</span>;
    <span class="keywordtype">char</span> *nametype;

    nametype=strtok_r(command,sep,&amp;rem);
    <span class="keywordflow">if</span>(nametype==<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot; Wrong Command Format ( ccnnametype uri/ccnb )\n&quot;</span>);
        <span class="keywordflow">return</span>;
    }
    <span class="keywordflow">if</span>(!strcmp(<a class="code" href="utility_8c.html#a8f2b4594f8766fbe985dd991d0cc777e" title="return lowercase of a string">strToLower</a>(nametype),<span class="stringliteral">&quot;uri&quot;</span>))
    {
        <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#adeb9e347d1d783bdc0ff3ae0e6d3eb85">CCN_NAME_TYPE</a>=<a class="code" href="ospfn_8h.html#a9dd88b880b2b8fbcb00c48b0eb7a4884">CCN_NAME_FORMAT_URI</a>;
    }
    <span class="keywordflow">if</span>(!strcmp(<a class="code" href="utility_8c.html#a8f2b4594f8766fbe985dd991d0cc777e" title="return lowercase of a string">strToLower</a>(nametype),<span class="stringliteral">&quot;ccnb&quot;</span>))
    {
        <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#adeb9e347d1d783bdc0ff3ae0e6d3eb85">CCN_NAME_TYPE</a>=<a class="code" href="ospfn_8h.html#af6b70054cb4021160a5f1b0d86226e38">CCN_NAME_FORMAT_CCNB</a>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab5e1112232fc2485e5f280ea9a4b412e"></a><!-- doxytag: member="ospfn.h::process_command_logdir" ref="ab5e1112232fc2485e5f280ea9a4b412e" args="(char *command)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void process_command_logdir </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>process logdir command and set the logdirectory </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00247">247</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span>(command==<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot; Wrong Command Format ( logdir /path/to/logdir )\n&quot;</span>);
        <span class="keywordflow">return</span>;
    }
    <span class="keywordtype">char</span> *rem;
    <span class="keyword">const</span> <span class="keywordtype">char</span> *sep=<span class="stringliteral">&quot; \t\n&quot;</span>;
    <span class="keywordtype">char</span> *dir;

    dir=strtok_r(command,sep,&amp;rem);
    <span class="keywordflow">if</span>(dir==<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot; Wrong Command Format ( logdir /path/to/logdir/ )\n&quot;</span>);
        <span class="keywordflow">return</span>;
    }
    <a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a492427a002fda236a0d9748102eaa6a8">loggingDir</a>=strdup(dir);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a77da863f4342fb3260ea474063868df4"></a><!-- doxytag: member="ospfn.h::process_command_multipath_order" ref="a77da863f4342fb3260ea474063868df4" args="(char *command)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void process_command_multipath_order </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>process multipath-order command </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00309">309</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span>(command==<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        {
                <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot;Wrong Command Format [ ccnname /name/prefix opaque_id]\n&quot;</span>);
                <span class="keywordflow">return</span>;
        }

        <span class="keywordtype">char</span> *rem;
        <span class="keyword">const</span> <span class="keywordtype">char</span> *sep=<span class="stringliteral">&quot; \t\n&quot;</span>;
        <span class="keywordtype">char</span> *addr;    
        <span class="keywordtype">char</span> *po;
        <span class="keyword">struct </span>in_addr address; 
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pref_order;

        <span class="comment">/* procesing of ccn name commands here */</span>
        addr=strtok_r(command,sep,&amp;rem);
        <span class="keywordflow">if</span>(addr==<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        {
                <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot;Wrong Command Format [ ccnname /name/prefix opaque_id\n&quot;</span>);
                <span class="keywordflow">return</span>;
        }
    <a class="code" href="sockunion_8c.html#a4203367afaacee3fa5cc1626b2ef63c0">inet_aton</a>(addr,&amp;address);

        po=strtok_r(<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,sep,&amp;rem);
        <span class="keywordflow">if</span>(po==<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        {
                <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot;Wrong Command Format [ ccnname /name/prefix opaque_id\n&quot;</span>);
                <span class="keywordflow">return</span>;
        }
        pref_order=atoi(po);
    
    <a class="code" href="ospfn_8c.html#a56016c767f4dfeb0473109c1c0f4fe78" title="Add next hop in multipath order list.">add_nexthop</a>(address, pref_order);   
    <a class="code" href="ospfn_8c.html#a7152a885fda88f17214c423892f280bc" title="Print Multipath order list.">display_nexthop</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="acc5880817878e92c0fab845112aac99f"></a><!-- doxytag: member="ospfn.h::process_conf_command" ref="acc5880817878e92c0fab845112aac99f" args="(char *command, int isLogOnlyProcessing)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void process_conf_command </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>isLogOnlyProcessing</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>process all configurations command and call each individual command processing sub routine </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00354">354</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <span class="keywordtype">char</span> *separators=<span class="stringliteral">&quot; \t\n&quot;</span>;
    <span class="keywordtype">char</span> *remainder=<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    <span class="keywordtype">char</span> *cmd_type=<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

    <span class="keywordflow">if</span>(command==<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || strlen(command)==0)
        <span class="keywordflow">return</span>; 

    cmd_type=strtok_r(command,separators,&amp;remainder);

    <span class="keywordflow">if</span>(!strcmp(cmd_type,<span class="stringliteral">&quot;ccnname&quot;</span>) )
    {
        <span class="keywordflow">if</span> (isLogOnlyProcessing == 0)
            <a class="code" href="ospfn_8c.html#a8a770abf2df0826398857d02b1447571" title="process ccnname commands and call for name OLS injection">process_command_ccnname</a>(remainder);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(cmd_type,<span class="stringliteral">&quot;ccnnametype&quot;</span>) )
    {
        <span class="keywordflow">if</span> (isLogOnlyProcessing == 0)
            <a class="code" href="ospfn_8c.html#afb3fe99ddd133a8a33ff4cde4f74b4ef" title="process ccnnametype command and set nametype uri/ccnb">process_command_ccnnametype</a>(remainder);
    } 
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(cmd_type,<span class="stringliteral">&quot;multipath-order&quot;</span>) )
        {
                <span class="keywordflow">if</span> (isLogOnlyProcessing == 0)
                        <a class="code" href="ospfn_8c.html#a77da863f4342fb3260ea474063868df4" title="process multipath-order command">process_command_multipath_order</a>(remainder);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcmp(cmd_type,<span class="stringliteral">&quot;logdir&quot;</span>) )
    {
        <span class="keywordflow">if</span> (isLogOnlyProcessing == 1)
            <a class="code" href="ospfn_8c.html#ab5e1112232fc2485e5f280ea9a4b412e" title="process logdir command and set the logdirectory">process_command_logdir</a>(remainder);
    }
    <span class="keywordflow">else</span>
    {
        <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__LINE__,<span class="stringliteral">&quot;Wrong configuration command\n&quot;</span>);
        printf(<span class="stringliteral">&quot;Wrong configuration Command %s \n&quot;</span>,cmd_type);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a13e04cbba48afdbe5ecd0455e1f738f5"></a><!-- doxytag: member="ospfn.h::readConfigFile" ref="a13e04cbba48afdbe5ecd0455e1f738f5" args="(const char *filename, int isLogOnlyProcessing)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int readConfigFile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>isLogOnlyProcessing</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>read configuration line by line and processes command from it </p>

<p>Definition at line <a class="el" href="ospfn_8c_source.html#l00399">399</a> of file <a class="el" href="ospfn_8c_source.html">ospfn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
    FILE *cfg;
    <span class="keywordtype">char</span> buf[1024];
    <span class="keywordtype">int</span> len;

    cfg=fopen(filename, <span class="stringliteral">&quot;r&quot;</span>);

    <span class="keywordflow">if</span>(cfg == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
        printf(<span class="stringliteral">&quot;\nConfiguration File does not exists\n&quot;</span>);
        <a class="code" href="vtysh_8c.html#afa5f6ba5518772e1487b961507e2a570">exit</a>(1);    
    }

    <span class="keywordflow">while</span>(fgets((<span class="keywordtype">char</span> *)buf, <span class="keyword">sizeof</span>(buf), cfg))
    {
        len=strlen(buf);
        <span class="keywordflow">if</span>(buf[len-1] == <span class="charliteral">&#39;\n&#39;</span>)
        buf[len-1]=<span class="charliteral">&#39;\0&#39;</span>;        
        <a class="code" href="utility_8c.html#a1202bbb0195db91de4825608a2f7575d" title="write log to logfile">writeLogg</a>(<a class="code" href="structospfn.html">ospfn</a>-&gt;<a class="code" href="structospfn.html#a0a98763e73d6de8626f54f98aaf060ab">logFile</a>,__FILE__,__FUNCTION__,__FILE__,<span class="stringliteral">&quot;%s\n&quot;</span>,buf);
        <a class="code" href="ospfn_8c.html#acc5880817878e92c0fab845112aac99f" title="process all configurations command and call each individual command processing sub routine...">process_conf_command</a>(buf,isLogOnlyProcessing);  
    }

    fclose(cfg);

    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="af7f9077bc08df049beb65a1c09cde5fa"></a><!-- doxytag: member="ospfn.h::master" ref="af7f9077bc08df049beb65a1c09cde5fa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structthread__master.html">thread_master</a>* <a class="el" href="test__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospfn_8h_source.html#l00041">41</a> of file <a class="el" href="ospfn_8h_source.html">ospfn.h</a>.</p>

</div>
</div>
<a class="anchor" id="af2ce7a475c38676ae495527864aa3a4c"></a><!-- doxytag: member="ospfn.h::ospfn" ref="af2ce7a475c38676ae495527864aa3a4c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospfn.html">ospfn</a>* <a class="el" href="structospfn.html">ospfn</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospfn_8h_source.html#l00040">40</a> of file <a class="el" href="ospfn_8h_source.html">ospfn.h</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="ospfn_8h.html">ospfn.h</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:34 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
