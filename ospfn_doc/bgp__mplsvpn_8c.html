<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: bgpd/bgp_mplsvpn.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('bgp__mplsvpn_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">bgpd/bgp_mplsvpn.c File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="zebra_8h_source.html">zebra.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="command_8h_source.html">command.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="prefix_8h_source.html">prefix.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="log_8h_source.html">log.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="memory_8h_source.html">memory.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="stream_8h_source.html">stream.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="bgpd_8h_source.html">bgpd/bgpd.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="bgp__table_8h_source.html">bgpd/bgp_table.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="bgp__route_8h_source.html">bgpd/bgp_route.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="bgp__attr_8h_source.html">bgpd/bgp_attr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="bgp__mplsvpn_8h_source.html">bgpd/bgp_mplsvpn.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for bgp_mplsvpn.c:</div>
<div class="dyncontent">
<div class="center"><img src="bgp__mplsvpn_8c__incl.png" border="0" usemap="#bgpd_2bgp__mplsvpn_8c" alt=""/></div>
<map name="bgpd_2bgp__mplsvpn_8c" id="bgpd_2bgp__mplsvpn_8c">
<area shape="rect" id="node3" href="zebra_8h.html" title="zebra.h" alt="" coords="1345,80,1412,107"/><area shape="rect" id="node61" href="command_8h.html" title="command.h" alt="" coords="2931,80,3023,107"/><area shape="rect" id="node69" href="log_8h.html" title="log.h" alt="" coords="2938,229,2989,256"/><area shape="rect" id="node74" href="prefix_8h.html" title="prefix.h" alt="" coords="3218,155,3285,181"/><area shape="rect" id="node79" href="memory_8h.html" title="memory.h" alt="" coords="3320,80,3403,107"/><area shape="rect" id="node83" href="stream_8h.html" title="stream.h" alt="" coords="3221,80,3296,107"/><area shape="rect" id="node86" href="bgpd_8h.html" title="bgpd/bgpd.h" alt="" coords="3427,80,3527,107"/><area shape="rect" id="node89" href="bgp__table_8h.html" title="bgpd/bgp_table.h" alt="" coords="3552,155,3683,181"/><area shape="rect" id="node91" href="bgp__route_8h.html" title="bgpd/bgp_route.h" alt="" coords="3603,80,3733,107"/><area shape="rect" id="node94" href="bgp__attr_8h.html" title="bgpd/bgp_attr.h" alt="" coords="3757,80,3877,107"/><area shape="rect" id="node96" href="bgp__mplsvpn_8h.html" title="bgpd/bgp_mplsvpn.h" alt="" coords="3902,80,4052,107"/><area shape="rect" id="node57" href="zassert_8h.html" title="zassert.h" alt="" coords="2623,155,2700,181"/><area shape="rect" id="node59" href="str_8h.html" title="str.h" alt="" coords="2725,155,2773,181"/><area shape="rect" id="node63" href="vector_8h.html" title="vector.h" alt="" coords="2799,155,2871,181"/><area shape="rect" id="node65" href="vty_8h.html" title="vty.h" alt="" coords="2895,155,2947,181"/><area shape="rect" id="node72" href="route__types_8h.html" title="lib/route_types.h" alt="" coords="2971,155,3095,181"/><area shape="rect" id="node67" href="thread_8h.html" title="thread.h" alt="" coords="2841,229,2913,256"/><area shape="rect" id="node76" href="sockunion_8h.html" title="sockunion.h" alt="" coords="3315,229,3408,256"/><area shape="rect" id="node81" href="memtypes_8h.html" title="lib/memtypes.h" alt="" coords="3311,155,3425,181"/></map>
</div>
</div>
<p><a href="bgp__mplsvpn_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224">bgp_show_type</a> { <br/>
&#160;&#160;<a class="el" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224abf37805650c47f8027ad95cff9c9487a">bgp_show_type_normal</a>, 
<a class="el" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224a35109463530411a4907ed022390179b0">bgp_show_type_regexp</a>, 
<a class="el" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224a0d2eda7a68d24a39a898ea68f301bf88">bgp_show_type_prefix_list</a>, 
<a class="el" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224ab42dba932aaf8c38575222fb983eda2e">bgp_show_type_filter_list</a>, 
<br/>
&#160;&#160;<a class="el" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224a1b22bf3ffc2791723ea0a31a7426a641">bgp_show_type_neighbor</a>, 
<a class="el" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224af5527ed0df465192325b2736120ae158">bgp_show_type_cidr_only</a>, 
<a class="el" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224a2499ca18f107f909d7c97242740d9f86">bgp_show_type_prefix_longer</a>, 
<a class="el" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224a45bfc69383b603b2704715be9a16e841">bgp_show_type_community_all</a>, 
<br/>
&#160;&#160;<a class="el" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224ad8437fdb3062b2b91e286da9c08e450b">bgp_show_type_community</a>, 
<a class="el" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224ac94e62cabbbff323965c5b03e3dc95bc">bgp_show_type_community_exact</a>, 
<a class="el" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224a3a0f3c2a33d58490f67f74ba8ca3d4c7">bgp_show_type_community_list</a>, 
<a class="el" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224ad96b9b7d195891fcfa7f1fcd78c2f0ab">bgp_show_type_community_list_exact</a>
<br/>
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static u_int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#a47993eeec5984e2f65168c06429de358">decode_rd_type</a> (u_char *pnt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">u_int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#aa210756655b6acea8f6495e194ac5cc7">decode_label</a> (u_char *pnt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#a62179d8e94d4b44b6433ad99d634c137">decode_rd_as</a> (u_char *pnt, struct <a class="el" href="structrd__as.html">rd_as</a> *<a class="el" href="structrd__as.html">rd_as</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#a5df4485aeff68dcd7993023dec70f5ef">decode_rd_ip</a> (u_char *pnt, struct <a class="el" href="structrd__ip.html">rd_ip</a> *<a class="el" href="structrd__ip.html">rd_ip</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#a2e29628712bf37fc59b006b90d0aa909">bgp_nlri_parse_vpnv4</a> (struct <a class="el" href="structpeer.html">peer</a> *<a class="el" href="structpeer.html">peer</a>, struct <a class="el" href="structattr.html">attr</a> *<a class="el" href="structattr.html">attr</a>, struct <a class="el" href="structbgp__nlri.html">bgp_nlri</a> *packet)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#a296cfbde78d5b77bb55f852b2e1cabdd">str2prefix_rd</a> (const char *<a class="el" href="ripng__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, struct <a class="el" href="structprefix__rd.html">prefix_rd</a> *prd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#a351be45ea03f40abf1b4247e2a71a8f4">str2tag</a> (const char *<a class="el" href="ripng__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, u_char *tag)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#a806cd220250d519b75ac7f78cd091bcc">prefix_rd2str</a> (struct <a class="el" href="structprefix__rd.html">prefix_rd</a> *prd, char *buf, size_t size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#a8bf73b5ab85246736d898a7774b6f792">DEFUN</a> (vpnv4_network, vpnv4_network_cmd,&quot;network A.B.C.D/M rd ASN:nn_or_IP-address:nn tag <a class="el" href="bgp__route_8c.html#a1b8d8f33ec8896a62ab53afa7351c08b">WORD</a>&quot;,&quot;Specify a <a class="el" href="command_8c.html#acec200f241e2d8f6b38bc83616c4c468">network</a> to announce via BGP\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;IP <a class="el" href="structprefix.html">prefix</a> &lt;<a class="el" href="command_8c.html#acec200f241e2d8f6b38bc83616c4c468">network</a>&gt;/&lt;<a class="el" href="isis__pdu_8h.html#a64ed70bbcb4536e2af22a1aaf5209d18">length</a>&gt;, e.g., 35.0.0.0/8\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Specify Route Distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;VPN Route Distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;BGP tag\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;tag value\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#af40ea1c21400f77e55ab0c6dc218c30e">DEFUN</a> (no_vpnv4_network, no_vpnv4_network_cmd,&quot;no <a class="el" href="command_8c.html#acec200f241e2d8f6b38bc83616c4c468">network</a> A.B.C.D/M rd ASN:nn_or_IP-address:nn tag <a class="el" href="bgp__route_8c.html#a1b8d8f33ec8896a62ab53afa7351c08b">WORD</a>&quot;, NO_STR&quot;Specify a <a class="el" href="command_8c.html#acec200f241e2d8f6b38bc83616c4c468">network</a> to announce via BGP\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;IP <a class="el" href="structprefix.html">prefix</a> &lt;<a class="el" href="command_8c.html#acec200f241e2d8f6b38bc83616c4c468">network</a>&gt;/&lt;<a class="el" href="isis__pdu_8h.html#a64ed70bbcb4536e2af22a1aaf5209d18">length</a>&gt;, e.g., 35.0.0.0/8\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Specify Route Distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;VPN Route Distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;BGP tag\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;tag value\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#a4ef605c877a883ec15a8ed6ec83f524e">show_adj_route_vpn</a> (struct <a class="el" href="structvty.html">vty</a> *<a class="el" href="structvty.html">vty</a>, struct <a class="el" href="structpeer.html">peer</a> *<a class="el" href="structpeer.html">peer</a>, struct <a class="el" href="structprefix__rd.html">prefix_rd</a> *prd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#a07081ecac476e0ed27755d35075126ed">bgp_show_mpls_vpn</a> (struct <a class="el" href="structvty.html">vty</a> *<a class="el" href="structvty.html">vty</a>, struct <a class="el" href="structprefix__rd.html">prefix_rd</a> *prd, enum <a class="el" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224">bgp_show_type</a> <a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>, void *output_arg, int tags)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#a27f6de655d4cb9bf7b5f4dd48af0d217">DEFUN</a> (show_ip_bgp_vpnv4_all, show_ip_bgp_vpnv4_all_cmd,&quot;show <a class="el" href="spgrid_8c.html#addd335afdb9230f431842ebb6cbbce62">ip</a> <a class="el" href="structbgp.html">bgp</a> vpnv4 all&quot;, SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display information about all VPNv4 NLRIs\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#a85ad77c1d5d63fee6aa40c0c12eb2f69">DEFUN</a> (show_ip_bgp_vpnv4_rd, show_ip_bgp_vpnv4_rd_cmd,&quot;show <a class="el" href="spgrid_8c.html#addd335afdb9230f431842ebb6cbbce62">ip</a> <a class="el" href="structbgp.html">bgp</a> vpnv4 rd ASN:nn_or_IP-address:nn&quot;, SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display information for a route distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;VPN Route Distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#aa255da505da9bbdf9e489c9370080fde">DEFUN</a> (show_ip_bgp_vpnv4_all_tags, show_ip_bgp_vpnv4_all_tags_cmd,&quot;show <a class="el" href="spgrid_8c.html#addd335afdb9230f431842ebb6cbbce62">ip</a> <a class="el" href="structbgp.html">bgp</a> vpnv4 all tags&quot;, SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display information about all VPNv4 NLRIs\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display BGP tags for prefixes\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#a54587c5c0982253a4e05f5bc709d7532">DEFUN</a> (show_ip_bgp_vpnv4_rd_tags, show_ip_bgp_vpnv4_rd_tags_cmd,&quot;show <a class="el" href="spgrid_8c.html#addd335afdb9230f431842ebb6cbbce62">ip</a> <a class="el" href="structbgp.html">bgp</a> vpnv4 rd ASN:nn_or_IP-address:nn tags&quot;, SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display information for a route distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;VPN Route Distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display BGP tags for prefixes\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#afc71d8b6f60f8c7ed891471658747d08">DEFUN</a> (show_ip_bgp_vpnv4_all_neighbor_routes, show_ip_bgp_vpnv4_all_neighbor_routes_cmd,&quot;show <a class="el" href="spgrid_8c.html#addd335afdb9230f431842ebb6cbbce62">ip</a> <a class="el" href="structbgp.html">bgp</a> vpnv4 all neighbors A.B.C.D routes&quot;, SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display information about all VPNv4 NLRIs\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Detailed information on TCP and BGP neighbor connections\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Neighbor to display information about\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display routes learned from neighbor\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#aaa33a59fab1039deb3ad45258073d0d8">DEFUN</a> (show_ip_bgp_vpnv4_rd_neighbor_routes, show_ip_bgp_vpnv4_rd_neighbor_routes_cmd,&quot;show <a class="el" href="spgrid_8c.html#addd335afdb9230f431842ebb6cbbce62">ip</a> <a class="el" href="structbgp.html">bgp</a> vpnv4 rd ASN:nn_or_IP-address:nn neighbors A.B.C.D routes&quot;, SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display information for a route distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;VPN Route Distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Detailed information on TCP and BGP neighbor connections\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Neighbor to display information about\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display routes learned from neighbor\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#a404307f1256395cc4e50804d6b71de74">DEFUN</a> (show_ip_bgp_vpnv4_all_neighbor_advertised_routes, show_ip_bgp_vpnv4_all_neighbor_advertised_routes_cmd,&quot;show <a class="el" href="spgrid_8c.html#addd335afdb9230f431842ebb6cbbce62">ip</a> <a class="el" href="structbgp.html">bgp</a> vpnv4 all neighbors A.B.C.D advertised-routes&quot;, SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display information about all VPNv4 NLRIs\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Detailed information on TCP and BGP neighbor connections\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Neighbor to display information about\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display the routes advertised to a BGP neighbor\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#ac9274ce4f0529bbaddc12635b8115be9">DEFUN</a> (show_ip_bgp_vpnv4_rd_neighbor_advertised_routes, show_ip_bgp_vpnv4_rd_neighbor_advertised_routes_cmd,&quot;show <a class="el" href="spgrid_8c.html#addd335afdb9230f431842ebb6cbbce62">ip</a> <a class="el" href="structbgp.html">bgp</a> vpnv4 rd ASN:nn_or_IP-address:nn neighbors A.B.C.D advertised-routes&quot;, SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display information for a route distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;VPN Route Distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Detailed information on TCP and BGP neighbor connections\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Neighbor to display information about\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display the routes advertised to a BGP neighbor\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__mplsvpn_8c.html#a558459716ff86cc36a5b7fd546c2b906">bgp_mplsvpn_init</a> (void)</td></tr>
</table>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ac195e619a0a62398127e5551f4e6b224"></a><!-- doxytag: member="bgp_mplsvpn.c::bgp_show_type" ref="ac195e619a0a62398127e5551f4e6b224" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224">bgp_show_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ac195e619a0a62398127e5551f4e6b224abf37805650c47f8027ad95cff9c9487a"></a><!-- doxytag: member="bgp_show_type_normal" ref="ac195e619a0a62398127e5551f4e6b224abf37805650c47f8027ad95cff9c9487a" args="" -->bgp_show_type_normal</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ac195e619a0a62398127e5551f4e6b224a35109463530411a4907ed022390179b0"></a><!-- doxytag: member="bgp_show_type_regexp" ref="ac195e619a0a62398127e5551f4e6b224a35109463530411a4907ed022390179b0" args="" -->bgp_show_type_regexp</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ac195e619a0a62398127e5551f4e6b224a0d2eda7a68d24a39a898ea68f301bf88"></a><!-- doxytag: member="bgp_show_type_prefix_list" ref="ac195e619a0a62398127e5551f4e6b224a0d2eda7a68d24a39a898ea68f301bf88" args="" -->bgp_show_type_prefix_list</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ac195e619a0a62398127e5551f4e6b224ab42dba932aaf8c38575222fb983eda2e"></a><!-- doxytag: member="bgp_show_type_filter_list" ref="ac195e619a0a62398127e5551f4e6b224ab42dba932aaf8c38575222fb983eda2e" args="" -->bgp_show_type_filter_list</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ac195e619a0a62398127e5551f4e6b224a1b22bf3ffc2791723ea0a31a7426a641"></a><!-- doxytag: member="bgp_show_type_neighbor" ref="ac195e619a0a62398127e5551f4e6b224a1b22bf3ffc2791723ea0a31a7426a641" args="" -->bgp_show_type_neighbor</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ac195e619a0a62398127e5551f4e6b224af5527ed0df465192325b2736120ae158"></a><!-- doxytag: member="bgp_show_type_cidr_only" ref="ac195e619a0a62398127e5551f4e6b224af5527ed0df465192325b2736120ae158" args="" -->bgp_show_type_cidr_only</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ac195e619a0a62398127e5551f4e6b224a2499ca18f107f909d7c97242740d9f86"></a><!-- doxytag: member="bgp_show_type_prefix_longer" ref="ac195e619a0a62398127e5551f4e6b224a2499ca18f107f909d7c97242740d9f86" args="" -->bgp_show_type_prefix_longer</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ac195e619a0a62398127e5551f4e6b224a45bfc69383b603b2704715be9a16e841"></a><!-- doxytag: member="bgp_show_type_community_all" ref="ac195e619a0a62398127e5551f4e6b224a45bfc69383b603b2704715be9a16e841" args="" -->bgp_show_type_community_all</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ac195e619a0a62398127e5551f4e6b224ad8437fdb3062b2b91e286da9c08e450b"></a><!-- doxytag: member="bgp_show_type_community" ref="ac195e619a0a62398127e5551f4e6b224ad8437fdb3062b2b91e286da9c08e450b" args="" -->bgp_show_type_community</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ac195e619a0a62398127e5551f4e6b224ac94e62cabbbff323965c5b03e3dc95bc"></a><!-- doxytag: member="bgp_show_type_community_exact" ref="ac195e619a0a62398127e5551f4e6b224ac94e62cabbbff323965c5b03e3dc95bc" args="" -->bgp_show_type_community_exact</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ac195e619a0a62398127e5551f4e6b224a3a0f3c2a33d58490f67f74ba8ca3d4c7"></a><!-- doxytag: member="bgp_show_type_community_list" ref="ac195e619a0a62398127e5551f4e6b224a3a0f3c2a33d58490f67f74ba8ca3d4c7" args="" -->bgp_show_type_community_list</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ac195e619a0a62398127e5551f4e6b224ad96b9b7d195891fcfa7f1fcd78c2f0ab"></a><!-- doxytag: member="bgp_show_type_community_list_exact" ref="ac195e619a0a62398127e5551f4e6b224ad96b9b7d195891fcfa7f1fcd78c2f0ab" args="" -->bgp_show_type_community_list_exact</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00388">388</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224abf37805650c47f8027ad95cff9c9487a">bgp_show_type_normal</a>,
  <a class="code" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224a35109463530411a4907ed022390179b0">bgp_show_type_regexp</a>,
  <a class="code" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224a0d2eda7a68d24a39a898ea68f301bf88">bgp_show_type_prefix_list</a>,
  <a class="code" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224ab42dba932aaf8c38575222fb983eda2e">bgp_show_type_filter_list</a>,
  <a class="code" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224a1b22bf3ffc2791723ea0a31a7426a641">bgp_show_type_neighbor</a>,
  <a class="code" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224af5527ed0df465192325b2736120ae158">bgp_show_type_cidr_only</a>,
  <a class="code" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224a2499ca18f107f909d7c97242740d9f86">bgp_show_type_prefix_longer</a>,
  <a class="code" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224a45bfc69383b603b2704715be9a16e841">bgp_show_type_community_all</a>,
  <a class="code" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224ad8437fdb3062b2b91e286da9c08e450b">bgp_show_type_community</a>,
  <a class="code" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224ac94e62cabbbff323965c5b03e3dc95bc">bgp_show_type_community_exact</a>,
  <a class="code" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224a3a0f3c2a33d58490f67f74ba8ca3d4c7">bgp_show_type_community_list</a>,
  <a class="code" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224ad96b9b7d195891fcfa7f1fcd78c2f0ab">bgp_show_type_community_list_exact</a>
};
</pre></div>
</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a558459716ff86cc36a5b7fd546c2b906"></a><!-- doxytag: member="bgp_mplsvpn.c::bgp_mplsvpn_init" ref="a558459716ff86cc36a5b7fd546c2b906" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_mplsvpn_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00716">716</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a7d6209ce7672734b4681adb05e925e08">BGP_VPNV4_NODE</a>, &amp;vpnv4_network_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a7d6209ce7672734b4681adb05e925e08">BGP_VPNV4_NODE</a>, &amp;no_vpnv4_network_cmd);


  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682acfdc7d342a9640147533988ace5fac24">VIEW_NODE</a>, &amp;show_ip_bgp_vpnv4_all_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682acfdc7d342a9640147533988ace5fac24">VIEW_NODE</a>, &amp;show_ip_bgp_vpnv4_rd_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682acfdc7d342a9640147533988ace5fac24">VIEW_NODE</a>, &amp;show_ip_bgp_vpnv4_all_tags_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682acfdc7d342a9640147533988ace5fac24">VIEW_NODE</a>, &amp;show_ip_bgp_vpnv4_rd_tags_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682acfdc7d342a9640147533988ace5fac24">VIEW_NODE</a>, &amp;show_ip_bgp_vpnv4_all_neighbor_routes_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682acfdc7d342a9640147533988ace5fac24">VIEW_NODE</a>, &amp;show_ip_bgp_vpnv4_rd_neighbor_routes_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682acfdc7d342a9640147533988ace5fac24">VIEW_NODE</a>, &amp;show_ip_bgp_vpnv4_all_neighbor_advertised_routes_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682acfdc7d342a9640147533988ace5fac24">VIEW_NODE</a>, &amp;show_ip_bgp_vpnv4_rd_neighbor_advertised_routes_cmd);

  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;show_ip_bgp_vpnv4_all_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;show_ip_bgp_vpnv4_rd_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;show_ip_bgp_vpnv4_all_tags_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;show_ip_bgp_vpnv4_rd_tags_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;show_ip_bgp_vpnv4_all_neighbor_routes_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;show_ip_bgp_vpnv4_rd_neighbor_routes_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;show_ip_bgp_vpnv4_all_neighbor_advertised_routes_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;show_ip_bgp_vpnv4_rd_neighbor_advertised_routes_cmd);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2e29628712bf37fc59b006b90d0aa909"></a><!-- doxytag: member="bgp_mplsvpn.c::bgp_nlri_parse_vpnv4" ref="a2e29628712bf37fc59b006b90d0aa909" args="(struct peer *peer, struct attr *attr, struct bgp_nlri *packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bgp_nlri_parse_vpnv4 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpeer.html">peer</a> *&#160;</td>
          <td class="paramname"><em>peer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structattr.html">attr</a> *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbgp__nlri.html">bgp_nlri</a> *&#160;</td>
          <td class="paramname"><em>packet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00079">79</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  u_char *pnt;
  u_char *lim;
  <span class="keyword">struct </span><a class="code" href="structprefix.html">prefix</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keywordtype">int</span> psize;
  <span class="keywordtype">int</span> <a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a>;
  u_int32_t label;
  u_int16_t <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>;
  <span class="keyword">struct </span><a class="code" href="structrd__as.html">rd_as</a> <a class="code" href="structrd__as.html">rd_as</a>;
  <span class="keyword">struct </span><a class="code" href="structrd__ip.html">rd_ip</a> <a class="code" href="structrd__ip.html">rd_ip</a>;
  <span class="keyword">struct </span><a class="code" href="structprefix__rd.html">prefix_rd</a> prd;
  u_char *tagpnt;

  <span class="comment">/* Check peer status. */</span>
  <span class="keywordflow">if</span> (peer-&gt;<a class="code" href="structpeer.html#ae39d16f69d65fec0f4f1908b4a33e6c6">status</a> != <a class="code" href="bgpd_8h.html#aa87809ec7dea97b0e970e98ae6c181ea">Established</a>)
    <span class="keywordflow">return</span> 0;
  
  <span class="comment">/* Make prefix_rd */</span>
  prd.<a class="code" href="structprefix__rd.html#aebc7554cffb51de46f09161875fb52ac">family</a> = AF_UNSPEC;
  prd.prefixlen = 64;

  pnt = packet-&gt;<a class="code" href="structbgp__nlri.html#ac43e135107260206f2a30593371aece1">nlri</a>;
  lim = pnt + packet-&gt;<a class="code" href="structbgp__nlri.html#a662dc7e55e55b2e5be5ebd9ff15099d1">length</a>;

  <span class="keywordflow">for</span> (; pnt &lt; lim; pnt += psize)
    {
      <span class="comment">/* Clear prefix structure. */</span>
      memset (&amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, 0, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a>));

      <span class="comment">/* Fetch prefix length. */</span>
      prefixlen = *pnt++;
      <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.family = AF_INET;
      psize = <a class="code" href="bgpd_8h.html#a472145011d944606a257487e80cc3ace">PSIZE</a> (prefixlen);

      <span class="keywordflow">if</span> (prefixlen &lt; 88)
    {
      <a class="code" href="log_8h.html#aaf50b52a949696adb9e77153b08545ad">zlog_err</a> (<span class="stringliteral">&quot;prefix length is less than 88: %d&quot;</span>, prefixlen);
      <span class="keywordflow">return</span> -1;
    }

      label = <a class="code" href="bgp__mplsvpn_8c.html#aa210756655b6acea8f6495e194ac5cc7">decode_label</a> (pnt);

      <span class="comment">/* Copyr label to prefix. */</span>
      tagpnt = pnt;;

      <span class="comment">/* Copy routing distinguisher to rd. */</span>
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (&amp;prd.val, pnt + 3, 8);

      <span class="comment">/* Decode RD type. */</span>
      type = <a class="code" href="bgp__mplsvpn_8c.html#a47993eeec5984e2f65168c06429de358">decode_rd_type</a> (pnt + 3);

      <span class="comment">/* Decode RD value. */</span>
      <span class="keywordflow">if</span> (type == <a class="code" href="bgp__mplsvpn_8h.html#a3bbc700e4f4ab28c235350e4ba7507c0">RD_TYPE_AS</a>)
    <a class="code" href="bgp__mplsvpn_8c.html#a62179d8e94d4b44b6433ad99d634c137">decode_rd_as</a> (pnt + 5, &amp;<a class="code" href="structrd__as.html">rd_as</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="bgp__mplsvpn_8h.html#af9b4e8d4a94f686e0b6f72e7f8d3bcbc">RD_TYPE_IP</a>)
    <a class="code" href="bgp__mplsvpn_8c.html#a5df4485aeff68dcd7993023dec70f5ef">decode_rd_ip</a> (pnt + 5, &amp;<a class="code" href="structrd__ip.html">rd_ip</a>);
      <span class="keywordflow">else</span>
    {
      <a class="code" href="log_8h.html#aaf50b52a949696adb9e77153b08545ad">zlog_err</a> (<span class="stringliteral">&quot;Invalid RD type %d&quot;</span>, type);
      <span class="keywordflow">return</span> -1;
    }

      <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen = prefixlen - 88;
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (&amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.u.prefix, pnt + 11, psize - 11);

<span class="preprocessor">#if 0</span>
<span class="preprocessor"></span>      <span class="keywordflow">if</span> (type == <a class="code" href="bgp__mplsvpn_8h.html#a3bbc700e4f4ab28c235350e4ba7507c0">RD_TYPE_AS</a>)
    <a class="code" href="log_8h.html#a383184727341e7ad985deb9e4f2156c7">zlog_info</a> (<span class="stringliteral">&quot;prefix %ld:%ld:%ld:%s/%d&quot;</span>, label, <a class="code" href="structrd__as.html">rd_as</a>.<a class="code" href="structrd__as.html#a99398523407ec01cf01938bf7304d25d">as</a>, <a class="code" href="structrd__as.html">rd_as</a>.<a class="code" href="structrd__as.html#a4a684250a2208bcc7300b664387b6869">val</a>,
           inet_ntoa (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.u.prefix4), <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="bgp__mplsvpn_8h.html#af9b4e8d4a94f686e0b6f72e7f8d3bcbc">RD_TYPE_IP</a>)
    <a class="code" href="log_8h.html#a383184727341e7ad985deb9e4f2156c7">zlog_info</a> (<span class="stringliteral">&quot;prefix %ld:%s:%ld:%s/%d&quot;</span>, label, inet_ntoa (<a class="code" href="structrd__ip.html">rd_ip</a>.<a class="code" href="structrd__ip.html#ae2ebc68930cc4d8c1a33297de25dfcfc">ip</a>),
           <a class="code" href="structrd__ip.html">rd_ip</a>.<a class="code" href="structrd__ip.html#a330e0f20d03c058307b5fb0767c29724">val</a>, inet_ntoa (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.u.prefix4), <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen);
<span class="preprocessor">#endif </span><span class="comment">/* 0 */</span>

      <span class="keywordflow">if</span> (pnt + psize &gt; lim)
    <span class="keywordflow">return</span> -1;

      <span class="keywordflow">if</span> (attr)
    <a class="code" href="bgp__route_8c.html#adead0e338559e1bf15f14c261fbe975d">bgp_update</a> (peer, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, attr, <a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>, <a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>,
            <a class="code" href="zebra_8h.html#a1991829492a88a5df46712d8782240a0">ZEBRA_ROUTE_BGP</a>, <a class="code" href="bgp__route_8h.html#a4734a795191347f5279e59e64c75b7a3">BGP_ROUTE_NORMAL</a>, &amp;prd, tagpnt, 0);
      <span class="keywordflow">else</span>
    <a class="code" href="bgp__route_8c.html#a1e246b33bc776aab326a127170921d6d">bgp_withdraw</a> (peer, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, attr, <a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>, <a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>,
              <a class="code" href="zebra_8h.html#a1991829492a88a5df46712d8782240a0">ZEBRA_ROUTE_BGP</a>, <a class="code" href="bgp__route_8h.html#a4734a795191347f5279e59e64c75b7a3">BGP_ROUTE_NORMAL</a>, &amp;prd, tagpnt);
    }

  <span class="comment">/* Packet length consistency check. */</span>
  <span class="keywordflow">if</span> (pnt != lim)
    <span class="keywordflow">return</span> -1;

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a07081ecac476e0ed27755d35075126ed"></a><!-- doxytag: member="bgp_mplsvpn.c::bgp_show_mpls_vpn" ref="a07081ecac476e0ed27755d35075126ed" args="(struct vty *vty, struct prefix_rd *prd, enum bgp_show_type type, void *output_arg, int tags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int bgp_show_mpls_vpn </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname"><em>vty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__rd.html">prefix_rd</a> *&#160;</td>
          <td class="paramname"><em>prd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224">bgp_show_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>output_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00405">405</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structbgp.html">bgp</a> *<a class="code" href="bgp__capability__test_8c.html#a528a1146825f30f8df2ae2e9d61dd7be">bgp</a>;
  <span class="keyword">struct </span><a class="code" href="structbgp__table.html">bgp_table</a> *table;
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rm;
  <span class="keyword">struct </span><a class="code" href="structbgp__info.html">bgp_info</a> *ri;
  <span class="keywordtype">int</span> rd_header;
  <span class="keywordtype">int</span> header = 1;
  <span class="keywordtype">char</span> v4_header[] = <span class="stringliteral">&quot;   Network          Next Hop            Metric LocPrf Weight Path%s&quot;</span>;
  <span class="keywordtype">char</span> v4_header_tag[] = <span class="stringliteral">&quot;   Network          Next Hop      In tag/Out tag%s&quot;</span>;

  bgp = <a class="code" href="bgpd_8c.html#ae19787bc29126d524ac261d00bacc13d">bgp_get_default</a> ();
  <span class="keywordflow">if</span> (bgp == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;No BGP process is configured%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
      <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
    }
  
  <span class="keywordflow">for</span> (rn = <a class="code" href="bgp__table_8c.html#af8ce42494729d03a8c7ca41ded487bb2">bgp_table_top</a> (bgp-&gt;<a class="code" href="structbgp.html#a165710ce04dcbf78397c514707c15f3b">rib</a>[<a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>][<a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>]); rn; rn = <a class="code" href="bgp__table_8c.html#abdeced48b9b4aad614c88dc63ea0a4cf">bgp_route_next</a> (rn))
    {
      <span class="keywordflow">if</span> (prd &amp;&amp; <a class="code" href="regex_8c.html#a98d0dff0c7366f08562d8e8583df9bb9">memcmp</a> (rn-&gt;<a class="code" href="structbgp__node.html#a61c7e08de23a3c64f8dd738448567cde">p</a>.u.<a class="code" href="structprefix.html#aff8f7c555d44bdcf53f9e09d3a2d2e68">val</a>, prd-&gt;val, 8) != 0)
    <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> ((table = rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      rd_header = 1;

      <span class="keywordflow">for</span> (rm = <a class="code" href="bgp__table_8c.html#af8ce42494729d03a8c7ca41ded487bb2">bgp_table_top</a> (table); rm; rm = <a class="code" href="bgp__table_8c.html#abdeced48b9b4aad614c88dc63ea0a4cf">bgp_route_next</a> (rm))
        <span class="keywordflow">for</span> (ri = rm-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>; ri; ri = ri-&gt;<a class="code" href="structbgp__info.html#a7a49886b20a2c95c08baa23149501a2a">next</a>)
          {
        <span class="keywordflow">if</span> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a> == <a class="code" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224a1b22bf3ffc2791723ea0a31a7426a641">bgp_show_type_neighbor</a>)
          {
            <span class="keyword">union </span><a class="code" href="unionsockunion.html">sockunion</a> *su = output_arg;

            <span class="keywordflow">if</span> (ri-&gt;<a class="code" href="structbgp__info.html#a367917f671400c20f33e512fa2c435dc">peer</a>-&gt;<a class="code" href="structpeer.html#a9ab7f1f3e48a3027c0f8a92fa6e2de28">su_remote</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || ! <a class="code" href="sockunion_8c.html#afbcb327baabeb77f356791b1551e51b8">sockunion_same</a>(ri-&gt;<a class="code" href="structbgp__info.html#a367917f671400c20f33e512fa2c435dc">peer</a>-&gt;<a class="code" href="structpeer.html#a9ab7f1f3e48a3027c0f8a92fa6e2de28">su_remote</a>, su))
              <span class="keywordflow">continue</span>;
          }
        <span class="keywordflow">if</span> (header)
          {
            <span class="keywordflow">if</span> (tags)
              <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, v4_header_tag, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
            <span class="keywordflow">else</span>
              {
            <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;BGP table version is 0, local router ID is %s%s&quot;</span>,
                 inet_ntoa (bgp-&gt;<a class="code" href="structbgp.html#ac85364afca7a6afc7c184148355318a7">router_id</a>), <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
            <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;Status codes: s suppressed, d damped, h history, * valid, &gt; best, i - internal%s&quot;</span>,
                 <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
            <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;Origin codes: i - IGP, e - EGP, ? - incomplete%s%s&quot;</span>,
                 <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
            <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, v4_header, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
              }
            header = 0;
          }

        <span class="keywordflow">if</span> (rd_header)
          {
            u_int16_t <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>;
            <span class="keyword">struct </span><a class="code" href="structrd__as.html">rd_as</a> <a class="code" href="structrd__as.html">rd_as</a>;
            <span class="keyword">struct </span><a class="code" href="structrd__ip.html">rd_ip</a> <a class="code" href="structrd__ip.html">rd_ip</a>;
            u_char *pnt;

            pnt = rn-&gt;<a class="code" href="structbgp__node.html#a61c7e08de23a3c64f8dd738448567cde">p</a>.u.<a class="code" href="structprefix.html#aff8f7c555d44bdcf53f9e09d3a2d2e68">val</a>;

            <span class="comment">/* Decode RD type. */</span>
            type = <a class="code" href="bgp__mplsvpn_8c.html#a47993eeec5984e2f65168c06429de358">decode_rd_type</a> (pnt);
            <span class="comment">/* Decode RD value. */</span>
            <span class="keywordflow">if</span> (type == <a class="code" href="bgp__mplsvpn_8h.html#a3bbc700e4f4ab28c235350e4ba7507c0">RD_TYPE_AS</a>)
              <a class="code" href="bgp__mplsvpn_8c.html#a62179d8e94d4b44b6433ad99d634c137">decode_rd_as</a> (pnt + 2, &amp;<a class="code" href="structrd__as.html">rd_as</a>);
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="bgp__mplsvpn_8h.html#af9b4e8d4a94f686e0b6f72e7f8d3bcbc">RD_TYPE_IP</a>)
              <a class="code" href="bgp__mplsvpn_8c.html#a5df4485aeff68dcd7993023dec70f5ef">decode_rd_ip</a> (pnt + 2, &amp;<a class="code" href="structrd__ip.html">rd_ip</a>);

            <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;Route Distinguisher: &quot;</span>);

            <span class="keywordflow">if</span> (type == <a class="code" href="bgp__mplsvpn_8h.html#a3bbc700e4f4ab28c235350e4ba7507c0">RD_TYPE_AS</a>)
              <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;%u:%d&quot;</span>, <a class="code" href="structrd__as.html">rd_as</a>.<a class="code" href="structrd__as.html#a99398523407ec01cf01938bf7304d25d">as</a>, <a class="code" href="structrd__as.html">rd_as</a>.<a class="code" href="structrd__as.html#a4a684250a2208bcc7300b664387b6869">val</a>);
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="bgp__mplsvpn_8h.html#af9b4e8d4a94f686e0b6f72e7f8d3bcbc">RD_TYPE_IP</a>)
              <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;%s:%d&quot;</span>, inet_ntoa (<a class="code" href="structrd__ip.html">rd_ip</a>.<a class="code" href="structrd__ip.html#ae2ebc68930cc4d8c1a33297de25dfcfc">ip</a>), <a class="code" href="structrd__ip.html">rd_ip</a>.<a class="code" href="structrd__ip.html#a330e0f20d03c058307b5fb0767c29724">val</a>);
          
            <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);         
            rd_header = 0;
          }
            <span class="keywordflow">if</span> (tags)
          <a class="code" href="bgp__route_8h.html#ae57510a15d9159581f1e32f10aac1a9c">route_vty_out_tag</a> (vty, &amp;rm-&gt;<a class="code" href="structbgp__node.html#a61c7e08de23a3c64f8dd738448567cde">p</a>, ri, 0, SAFI_MPLS_VPN);
            <span class="keywordflow">else</span>
          <a class="code" href="bgp__route_8h.html#a9c8ca3acfad463c61259edab3afd7220">route_vty_out</a> (vty, &amp;rm-&gt;<a class="code" href="structbgp__node.html#a61c7e08de23a3c64f8dd738448567cde">p</a>, ri, 0, SAFI_MPLS_VPN);
          }
        }
    }
  <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa210756655b6acea8f6495e194ac5cc7"></a><!-- doxytag: member="bgp_mplsvpn.c::decode_label" ref="aa210756655b6acea8f6495e194ac5cc7" args="(u_char *pnt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u_int32_t decode_label </td>
          <td>(</td>
          <td class="paramtype">u_char *&#160;</td>
          <td class="paramname"><em>pnt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00046">46</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  u_int32_t <a class="code" href="spgrid_8c.html#a92119ef27b84f1e2e15792d7ea360ba4">l</a>;

  l = ((u_int32_t) *pnt++ &lt;&lt; 12);
  l |= (u_int32_t) *pnt++ &lt;&lt; 4;
  l |= (u_int32_t) ((*pnt &amp; 0xf0) &gt;&gt; 4);
  <span class="keywordflow">return</span> <a class="code" href="spgrid_8c.html#a92119ef27b84f1e2e15792d7ea360ba4">l</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a62179d8e94d4b44b6433ad99d634c137"></a><!-- doxytag: member="bgp_mplsvpn.c::decode_rd_as" ref="a62179d8e94d4b44b6433ad99d634c137" args="(u_char *pnt, struct rd_as *rd_as)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void decode_rd_as </td>
          <td>(</td>
          <td class="paramtype">u_char *&#160;</td>
          <td class="paramname"><em>pnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structrd__as.html">rd_as</a> *&#160;</td>
          <td class="paramname"><em>rd_as</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00057">57</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  rd_as-&gt;<a class="code" href="structrd__as.html#a99398523407ec01cf01938bf7304d25d">as</a> = (u_int16_t) *pnt++ &lt;&lt; 8;
  rd_as-&gt;<a class="code" href="structrd__as.html#a99398523407ec01cf01938bf7304d25d">as</a> |= (u_int16_t) *pnt++;
  
  rd_as-&gt;<a class="code" href="structrd__as.html#a4a684250a2208bcc7300b664387b6869">val</a> = ((u_int32_t) *pnt++ &lt;&lt; 24);
  rd_as-&gt;<a class="code" href="structrd__as.html#a4a684250a2208bcc7300b664387b6869">val</a> |= ((u_int32_t) *pnt++ &lt;&lt; 16);
  rd_as-&gt;<a class="code" href="structrd__as.html#a4a684250a2208bcc7300b664387b6869">val</a> |= ((u_int32_t) *pnt++ &lt;&lt; 8);
  rd_as-&gt;<a class="code" href="structrd__as.html#a4a684250a2208bcc7300b664387b6869">val</a> |= (u_int32_t) *pnt;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5df4485aeff68dcd7993023dec70f5ef"></a><!-- doxytag: member="bgp_mplsvpn.c::decode_rd_ip" ref="a5df4485aeff68dcd7993023dec70f5ef" args="(u_char *pnt, struct rd_ip *rd_ip)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void decode_rd_ip </td>
          <td>(</td>
          <td class="paramtype">u_char *&#160;</td>
          <td class="paramname"><em>pnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structrd__ip.html">rd_ip</a> *&#160;</td>
          <td class="paramname"><em>rd_ip</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00069">69</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (&amp;rd_ip-&gt;<a class="code" href="structrd__ip.html#ae2ebc68930cc4d8c1a33297de25dfcfc">ip</a>, pnt, 4);
  pnt += 4;
  
  rd_ip-&gt;<a class="code" href="structrd__ip.html#a330e0f20d03c058307b5fb0767c29724">val</a> = ((u_int16_t) *pnt++ &lt;&lt; 8);
  rd_ip-&gt;<a class="code" href="structrd__ip.html#a330e0f20d03c058307b5fb0767c29724">val</a> |= (u_int16_t) *pnt;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a47993eeec5984e2f65168c06429de358"></a><!-- doxytag: member="bgp_mplsvpn.c::decode_rd_type" ref="a47993eeec5984e2f65168c06429de358" args="(u_char *pnt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static u_int16_t decode_rd_type </td>
          <td>(</td>
          <td class="paramtype">u_char *&#160;</td>
          <td class="paramname"><em>pnt</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00036">36</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  u_int16_t v;
  
  v = ((u_int16_t) *pnt++ &lt;&lt; 8);
  v |= (u_int16_t) *pnt;
  <span class="keywordflow">return</span> v;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8bf73b5ab85246736d898a7774b6f792"></a><!-- doxytag: member="bgp_mplsvpn.c::DEFUN" ref="a8bf73b5ab85246736d898a7774b6f792" args="(vpnv4_network, vpnv4_network_cmd,&quot;network A.B.C.D/M rd ASN:nn_or_IP&#45;address:nn tag WORD&quot;,&quot;Specify a network to announce via BGP\n&quot;&quot;IP prefix &lt;network&gt;/&lt;length&gt;, e.g., 35.0.0.0/8\n&quot;&quot;Specify Route Distinguisher\n&quot;&quot;VPN Route Distinguisher\n&quot;&quot;BGP tag\n&quot;&quot;tag value\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">vpnv4_network&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vpnv4_network_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;network A.B.C.D/M rd ASN:nn_or_IP-address:nn tag <a class="el" href="bgp__route_8c.html#a1b8d8f33ec8896a62ab53afa7351c08b">WORD</a>&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Specify a <a class="el" href="command_8c.html#acec200f241e2d8f6b38bc83616c4c468">network</a> to announce via BGP\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;IP <a class="el" href="structprefix.html">prefix</a> &lt;<a class="el" href="command_8c.html#acec200f241e2d8f6b38bc83616c4c468">network</a>&gt;/&lt;<a class="el" href="isis__pdu_8h.html#a64ed70bbcb4536e2af22a1aaf5209d18">length</a>&gt;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">e.&#160;</td>
          <td class="paramname"><em>g.</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">35.0.0.0/8\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot; &quot;Specify Route Distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot; &quot;VPN Route Distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot; &quot;BGP tag\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot; &quot;tag value\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00282">282</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">                                :nn_or_IP-address:nn tag <a class="code" href="bgp__route_8c.html#a1b8d8f33ec8896a62ab53afa7351c08b">WORD</a><span class="stringliteral">&quot;,</span>
<span class="stringliteral">       &quot;</span>Specify <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a> <a class="code" href="command_8c.html#acec200f241e2d8f6b38bc83616c4c468">network</a> to announce via BGP\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>IP <a class="code" href="structprefix.html">prefix &lt;network&gt;</a>/&lt;<a class="code" href="isis__pdu_8h.html#a64ed70bbcb4536e2af22a1aaf5209d18">length</a>&gt;, e.g., 35.0.0.0/8\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>Specify Route Distinguisher\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>VPN Route Distinguisher\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>BGP tag\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>tag value\n<span class="stringliteral">&quot;)</span>
<span class="stringliteral">{</span>
<span class="stringliteral">  return bgp_static_set_vpnv4 (vty, argv[0], argv[1], argv[2]);</span>
<span class="stringliteral">}</span>
</pre></div>
</div>
</div>
<a class="anchor" id="af40ea1c21400f77e55ab0c6dc218c30e"></a><!-- doxytag: member="bgp_mplsvpn.c::DEFUN" ref="af40ea1c21400f77e55ab0c6dc218c30e" args="(no_vpnv4_network, no_vpnv4_network_cmd,&quot;no network A.B.C.D/M rd ASN:nn_or_IP&#45;address:nn tag WORD&quot;, NO_STR&quot;Specify a network to announce via BGP\n&quot;&quot;IP prefix &lt;network&gt;/&lt;length&gt;, e.g., 35.0.0.0/8\n&quot;&quot;Specify Route Distinguisher\n&quot;&quot;VPN Route Distinguisher\n&quot;&quot;BGP tag\n&quot;&quot;tag value\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">no_vpnv4_network&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">no_vpnv4_network_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;no <a class="el" href="command_8c.html#acec200f241e2d8f6b38bc83616c4c468">network</a> A.B.C.D/M rd ASN:nn_or_IP-address:nn tag <a class="el" href="bgp__route_8c.html#a1b8d8f33ec8896a62ab53afa7351c08b">WORD</a>&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NO_STR&quot;Specify a <a class="el" href="command_8c.html#acec200f241e2d8f6b38bc83616c4c468">network</a> to announce via BGP\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;IP <a class="el" href="structprefix.html">prefix</a> &lt;<a class="el" href="command_8c.html#acec200f241e2d8f6b38bc83616c4c468">network</a>&gt;/&lt;<a class="el" href="isis__pdu_8h.html#a64ed70bbcb4536e2af22a1aaf5209d18">length</a>&gt;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">e.&#160;</td>
          <td class="paramname"><em>g.</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">35.0.0.0/8\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot; &quot;Specify Route Distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot; &quot;VPN Route Distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot; &quot;BGP tag\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot; &quot;tag value\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00296">296</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">                                   :nn_or_IP-address:nn tag <a class="code" href="bgp__route_8c.html#a1b8d8f33ec8896a62ab53afa7351c08b">WORD</a><span class="stringliteral">&quot;,</span>
<span class="stringliteral">       NO_STR</span>
<span class="stringliteral">       &quot;</span>Specify <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a> <a class="code" href="command_8c.html#acec200f241e2d8f6b38bc83616c4c468">network</a> to announce via BGP\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>IP <a class="code" href="structprefix.html">prefix &lt;network&gt;</a>/&lt;<a class="code" href="isis__pdu_8h.html#a64ed70bbcb4536e2af22a1aaf5209d18">length</a>&gt;, e.g., 35.0.0.0/8\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>Specify Route Distinguisher\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>VPN Route Distinguisher\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>BGP tag\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>tag value\n<span class="stringliteral">&quot;)</span>
<span class="stringliteral">{</span>
<span class="stringliteral">  return bgp_static_unset_vpnv4 (vty, argv[0], argv[1], argv[2]);</span>
<span class="stringliteral">}</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a27f6de655d4cb9bf7b5f4dd48af0d217"></a><!-- doxytag: member="bgp_mplsvpn.c::DEFUN" ref="a27f6de655d4cb9bf7b5f4dd48af0d217" args="(show_ip_bgp_vpnv4_all, show_ip_bgp_vpnv4_all_cmd,&quot;show ip bgp vpnv4 all&quot;, SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\n&quot;&quot;Display information about all VPNv4 NLRIs\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">show_ip_bgp_vpnv4_all&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">show_ip_bgp_vpnv4_all_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;show <a class="el" href="spgrid_8c.html#addd335afdb9230f431842ebb6cbbce62">ip</a> <a class="el" href="structbgp.html">bgp</a> vpnv4 all&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display information about all VPNv4 NLRIs\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00498">498</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="bgp__mplsvpn_8c.html#a07081ecac476e0ed27755d35075126ed">bgp_show_mpls_vpn</a> (<a class="code" href="structvty.html">vty</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224abf37805650c47f8027ad95cff9c9487a">bgp_show_type_normal</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a85ad77c1d5d63fee6aa40c0c12eb2f69"></a><!-- doxytag: member="bgp_mplsvpn.c::DEFUN" ref="a85ad77c1d5d63fee6aa40c0c12eb2f69" args="(show_ip_bgp_vpnv4_rd, show_ip_bgp_vpnv4_rd_cmd,&quot;show ip bgp vpnv4 rd ASN:nn_or_IP&#45;address:nn&quot;, SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\n&quot;&quot;Display information for a route distinguisher\n&quot;&quot;VPN Route Distinguisher\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">show_ip_bgp_vpnv4_rd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">show_ip_bgp_vpnv4_rd_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;show <a class="el" href="spgrid_8c.html#addd335afdb9230f431842ebb6cbbce62">ip</a> <a class="el" href="structbgp.html">bgp</a> vpnv4 rd ASN:nn_or_IP-address:nn&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display information for a route distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;VPN Route Distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00510">510</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">                                :nn_or_IP-address:nn<span class="stringliteral">&quot;,</span>
<span class="stringliteral">       SHOW_STR</span>
<span class="stringliteral">       IP_STR</span>
<span class="stringliteral">       BGP_STR</span>
<span class="stringliteral">       &quot;</span>Display VPNv4 <a class="code" href="bgp__debug_8h.html#a5e85a5c6bb26ea0bf88024ddd4a932f7">NLRI</a> specific information\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>Display information <span class="keywordflow">for</span> <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a> route distinguisher\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>VPN Route Distinguisher\n<span class="stringliteral">&quot;)</span>
<span class="stringliteral">{</span>
<span class="stringliteral">  int ret;</span>
<span class="stringliteral">  struct prefix_rd prd;</span>
<span class="stringliteral"></span>
<span class="stringliteral">  ret = str2prefix_rd (argv[0], &amp;prd);</span>
<span class="stringliteral">  if (! ret)</span>
<span class="stringliteral">    {</span>
<span class="stringliteral">      vty_out (vty, &quot;</span>%% Malformed Route Distinguisher%<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a><span class="stringliteral">&quot;, VTY_NEWLINE);</span>
<span class="stringliteral">      return CMD_WARNING;</span>
<span class="stringliteral">    }</span>
<span class="stringliteral">  return bgp_show_mpls_vpn (vty, &amp;prd, bgp_show_type_normal, NULL, 0);</span>
<span class="stringliteral">}</span>
</pre></div>
</div>
</div>
<a class="anchor" id="aa255da505da9bbdf9e489c9370080fde"></a><!-- doxytag: member="bgp_mplsvpn.c::DEFUN" ref="aa255da505da9bbdf9e489c9370080fde" args="(show_ip_bgp_vpnv4_all_tags, show_ip_bgp_vpnv4_all_tags_cmd,&quot;show ip bgp vpnv4 all tags&quot;, SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\n&quot;&quot;Display information about all VPNv4 NLRIs\n&quot;&quot;Display BGP tags for prefixes\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">show_ip_bgp_vpnv4_all_tags&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">show_ip_bgp_vpnv4_all_tags_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;show <a class="el" href="spgrid_8c.html#addd335afdb9230f431842ebb6cbbce62">ip</a> <a class="el" href="structbgp.html">bgp</a> vpnv4 all tags&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display information about all VPNv4 NLRIs\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display BGP tags for prefixes\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00532">532</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="bgp__mplsvpn_8c.html#a07081ecac476e0ed27755d35075126ed">bgp_show_mpls_vpn</a> (<a class="code" href="structvty.html">vty</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224abf37805650c47f8027ad95cff9c9487a">bgp_show_type_normal</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,  1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a54587c5c0982253a4e05f5bc709d7532"></a><!-- doxytag: member="bgp_mplsvpn.c::DEFUN" ref="a54587c5c0982253a4e05f5bc709d7532" args="(show_ip_bgp_vpnv4_rd_tags, show_ip_bgp_vpnv4_rd_tags_cmd,&quot;show ip bgp vpnv4 rd ASN:nn_or_IP&#45;address:nn tags&quot;, SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\n&quot;&quot;Display information for a route distinguisher\n&quot;&quot;VPN Route Distinguisher\n&quot;&quot;Display BGP tags for prefixes\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">show_ip_bgp_vpnv4_rd_tags&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">show_ip_bgp_vpnv4_rd_tags_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;show <a class="el" href="spgrid_8c.html#addd335afdb9230f431842ebb6cbbce62">ip</a> <a class="el" href="structbgp.html">bgp</a> vpnv4 rd ASN:nn_or_IP-address:nn tags&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display information for a route distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;VPN Route Distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display BGP tags for prefixes\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00545">545</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">                                :nn_or_IP-address:nn tags<span class="stringliteral">&quot;,</span>
<span class="stringliteral">       SHOW_STR</span>
<span class="stringliteral">       IP_STR</span>
<span class="stringliteral">       BGP_STR</span>
<span class="stringliteral">       &quot;</span>Display VPNv4 <a class="code" href="bgp__debug_8h.html#a5e85a5c6bb26ea0bf88024ddd4a932f7">NLRI</a> specific information\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>Display information <span class="keywordflow">for</span> <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a> route distinguisher\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>VPN Route Distinguisher\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>Display BGP tags <span class="keywordflow">for</span> prefixes\n<span class="stringliteral">&quot;)</span>
<span class="stringliteral">{</span>
<span class="stringliteral">  int ret;</span>
<span class="stringliteral">  struct prefix_rd prd;</span>
<span class="stringliteral"></span>
<span class="stringliteral">  ret = str2prefix_rd (argv[0], &amp;prd);</span>
<span class="stringliteral">  if (! ret)</span>
<span class="stringliteral">    {</span>
<span class="stringliteral">      vty_out (vty, &quot;</span>%% Malformed Route Distinguisher%<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a><span class="stringliteral">&quot;, VTY_NEWLINE);</span>
<span class="stringliteral">      return CMD_WARNING;</span>
<span class="stringliteral">    }</span>
<span class="stringliteral">  return bgp_show_mpls_vpn (vty, &amp;prd, bgp_show_type_normal, NULL, 1);</span>
<span class="stringliteral">}</span>
</pre></div>
</div>
</div>
<a class="anchor" id="afc71d8b6f60f8c7ed891471658747d08"></a><!-- doxytag: member="bgp_mplsvpn.c::DEFUN" ref="afc71d8b6f60f8c7ed891471658747d08" args="(show_ip_bgp_vpnv4_all_neighbor_routes, show_ip_bgp_vpnv4_all_neighbor_routes_cmd,&quot;show ip bgp vpnv4 all neighbors A.B.C.D routes&quot;, SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\n&quot;&quot;Display information about all VPNv4 NLRIs\n&quot;&quot;Detailed information on TCP and BGP neighbor connections\n&quot;&quot;Neighbor to display information about\n&quot;&quot;Display routes learned from neighbor\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">show_ip_bgp_vpnv4_all_neighbor_routes&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">show_ip_bgp_vpnv4_all_neighbor_routes_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;show <a class="el" href="spgrid_8c.html#addd335afdb9230f431842ebb6cbbce62">ip</a> <a class="el" href="structbgp.html">bgp</a> vpnv4 all neighbors A.B.C.D routes&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display information about all VPNv4 NLRIs\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Detailed information on TCP and BGP neighbor connections\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Neighbor to display information about\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display routes learned from neighbor\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00568">568</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">union </span><a class="code" href="unionsockunion.html">sockunion</a> *su;
  <span class="keyword">struct </span><a class="code" href="structpeer.html">peer</a> *<a class="code" href="structpeer.html">peer</a>;
  
  su = <a class="code" href="sockunion_8c.html#a3dffcd96d7fff7136a7a35d44727ca0d">sockunion_str2su</a> (argv[0]);
  <span class="keywordflow">if</span> (su == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (<a class="code" href="structvty.html">vty</a>, <span class="stringliteral">&quot;Malformed address: %s%s&quot;</span>, argv[0], <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
               <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
    }

  peer = <a class="code" href="bgpd_8c.html#a65909a6f0ec7c8ab26101fad9ff1b6f7">peer_lookup</a> (<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, su);
  <span class="keywordflow">if</span> (! peer || ! peer-&gt;<a class="code" href="structpeer.html#a6a5fa9dc65cf8fa50e280638b8a0a491">afc</a>[<a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>][<a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>])
    {
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (<a class="code" href="structvty.html">vty</a>, <span class="stringliteral">&quot;%% No such neighbor or address family%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
      <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
    }

  <span class="keywordflow">return</span> <a class="code" href="bgp__mplsvpn_8c.html#a07081ecac476e0ed27755d35075126ed">bgp_show_mpls_vpn</a> (<a class="code" href="structvty.html">vty</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="bgp__mplsvpn_8c.html#ac195e619a0a62398127e5551f4e6b224a1b22bf3ffc2791723ea0a31a7426a641">bgp_show_type_neighbor</a>, su, 0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaa33a59fab1039deb3ad45258073d0d8"></a><!-- doxytag: member="bgp_mplsvpn.c::DEFUN" ref="aaa33a59fab1039deb3ad45258073d0d8" args="(show_ip_bgp_vpnv4_rd_neighbor_routes, show_ip_bgp_vpnv4_rd_neighbor_routes_cmd,&quot;show ip bgp vpnv4 rd ASN:nn_or_IP&#45;address:nn neighbors A.B.C.D routes&quot;, SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\n&quot;&quot;Display information for a route distinguisher\n&quot;&quot;VPN Route Distinguisher\n&quot;&quot;Detailed information on TCP and BGP neighbor connections\n&quot;&quot;Neighbor to display information about\n&quot;&quot;Display routes learned from neighbor\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">show_ip_bgp_vpnv4_rd_neighbor_routes&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">show_ip_bgp_vpnv4_rd_neighbor_routes_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;show <a class="el" href="spgrid_8c.html#addd335afdb9230f431842ebb6cbbce62">ip</a> <a class="el" href="structbgp.html">bgp</a> vpnv4 rd ASN:nn_or_IP-address:nn neighbors A.B.C.D routes&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display information for a route distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;VPN Route Distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Detailed information on TCP and BGP neighbor connections\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Neighbor to display information about\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display routes learned from neighbor\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00600">600</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">                                :nn_or_IP-address:nn neighbors <a class="code" href="random_8c.html#a955f504eccf76b4eb2489c0adab03121">A</a>.B.C.D routes<span class="stringliteral">&quot;,</span>
<span class="stringliteral">       SHOW_STR</span>
<span class="stringliteral">       IP_STR</span>
<span class="stringliteral">       BGP_STR</span>
<span class="stringliteral">       &quot;</span>Display VPNv4 <a class="code" href="bgp__debug_8h.html#a5e85a5c6bb26ea0bf88024ddd4a932f7">NLRI</a> specific information\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>Display information <span class="keywordflow">for</span> <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a> route distinguisher\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>VPN Route Distinguisher\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>Detailed information on TCP and BGP neighbor connections\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>Neighbor to display information about\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>Display routes learned from neighbor\n<span class="stringliteral">&quot;)</span>
<span class="stringliteral">{</span>
<span class="stringliteral">  int ret;</span>
<span class="stringliteral">  union sockunion *su;</span>
<span class="stringliteral">  struct peer *peer;</span>
<span class="stringliteral">  struct prefix_rd prd;</span>
<span class="stringliteral"></span>
<span class="stringliteral">  ret = str2prefix_rd (argv[0], &amp;prd);</span>
<span class="stringliteral">  if (! ret)</span>
<span class="stringliteral">    {</span>
<span class="stringliteral">      vty_out (vty, &quot;</span>%% Malformed Route Distinguisher%<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a><span class="stringliteral">&quot;, VTY_NEWLINE);</span>
<span class="stringliteral">      return CMD_WARNING;</span>
<span class="stringliteral">    }</span>
<span class="stringliteral"></span>
<span class="stringliteral">  su = sockunion_str2su (argv[1]);</span>
<span class="stringliteral">  if (su == NULL)</span>
<span class="stringliteral">    {</span>
<span class="stringliteral">      vty_out (vty, &quot;</span>Malformed address: %<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>%<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a><span class="stringliteral">&quot;, argv[0], VTY_NEWLINE);</span>
<span class="stringliteral">               return CMD_WARNING;</span>
<span class="stringliteral">    }</span>
<span class="stringliteral"></span>
<span class="stringliteral">  peer = peer_lookup (NULL, su);</span>
<span class="stringliteral">  if (! peer || ! peer-&gt;afc[AFI_IP][SAFI_MPLS_VPN])</span>
<span class="stringliteral">    {</span>
<span class="stringliteral">      vty_out (vty, &quot;</span>%% No such neighbor or address family%<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a><span class="stringliteral">&quot;, VTY_NEWLINE);</span>
<span class="stringliteral">      return CMD_WARNING;</span>
<span class="stringliteral">    }</span>
<span class="stringliteral"></span>
<span class="stringliteral">  return bgp_show_mpls_vpn (vty, &amp;prd, bgp_show_type_neighbor, su, 0);</span>
<span class="stringliteral">}</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a404307f1256395cc4e50804d6b71de74"></a><!-- doxytag: member="bgp_mplsvpn.c::DEFUN" ref="a404307f1256395cc4e50804d6b71de74" args="(show_ip_bgp_vpnv4_all_neighbor_advertised_routes, show_ip_bgp_vpnv4_all_neighbor_advertised_routes_cmd,&quot;show ip bgp vpnv4 all neighbors A.B.C.D advertised&#45;routes&quot;, SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\n&quot;&quot;Display information about all VPNv4 NLRIs\n&quot;&quot;Detailed information on TCP and BGP neighbor connections\n&quot;&quot;Neighbor to display information about\n&quot;&quot;Display the routes advertised to a BGP neighbor\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">show_ip_bgp_vpnv4_all_neighbor_advertised_routes&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">show_ip_bgp_vpnv4_all_neighbor_advertised_routes_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;show <a class="el" href="spgrid_8c.html#addd335afdb9230f431842ebb6cbbce62">ip</a> <a class="el" href="structbgp.html">bgp</a> vpnv4 all neighbors A.B.C.D advertised-routes&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display information about all VPNv4 NLRIs\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Detailed information on TCP and BGP neighbor connections\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Neighbor to display information about\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display the routes advertised to a BGP neighbor\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00642">642</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> ret;
  <span class="keyword">struct </span><a class="code" href="structpeer.html">peer</a> *<a class="code" href="structpeer.html">peer</a>;
  <span class="keyword">union </span><a class="code" href="unionsockunion.html">sockunion</a> su;

  ret = <a class="code" href="sockunion_8c.html#aaa4fbd35d2f9346b70e0d6c9e66cae79">str2sockunion</a> (argv[0], &amp;su);
  <span class="keywordflow">if</span> (ret &lt; 0)
    {
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (<a class="code" href="structvty.html">vty</a>, <span class="stringliteral">&quot;%% Malformed address: %s%s&quot;</span>, argv[0], <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
      <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
    }
  peer = <a class="code" href="bgpd_8c.html#a65909a6f0ec7c8ab26101fad9ff1b6f7">peer_lookup</a> (<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;su);
  <span class="keywordflow">if</span> (! peer || ! peer-&gt;<a class="code" href="structpeer.html#a6a5fa9dc65cf8fa50e280638b8a0a491">afc</a>[<a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>][<a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>])
    {
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (<a class="code" href="structvty.html">vty</a>, <span class="stringliteral">&quot;%% No such neighbor or address family%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
      <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
    }

  <span class="keywordflow">return</span> <a class="code" href="bgp__mplsvpn_8c.html#a4ef605c877a883ec15a8ed6ec83f524e">show_adj_route_vpn</a> (<a class="code" href="structvty.html">vty</a>, peer, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac9274ce4f0529bbaddc12635b8115be9"></a><!-- doxytag: member="bgp_mplsvpn.c::DEFUN" ref="ac9274ce4f0529bbaddc12635b8115be9" args="(show_ip_bgp_vpnv4_rd_neighbor_advertised_routes, show_ip_bgp_vpnv4_rd_neighbor_advertised_routes_cmd,&quot;show ip bgp vpnv4 rd ASN:nn_or_IP&#45;address:nn neighbors A.B.C.D advertised&#45;routes&quot;, SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\n&quot;&quot;Display information for a route distinguisher\n&quot;&quot;VPN Route Distinguisher\n&quot;&quot;Detailed information on TCP and BGP neighbor connections\n&quot;&quot;Neighbor to display information about\n&quot;&quot;Display the routes advertised to a BGP neighbor\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">show_ip_bgp_vpnv4_rd_neighbor_advertised_routes&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">show_ip_bgp_vpnv4_rd_neighbor_advertised_routes_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;show <a class="el" href="spgrid_8c.html#addd335afdb9230f431842ebb6cbbce62">ip</a> <a class="el" href="structbgp.html">bgp</a> vpnv4 rd ASN:nn_or_IP-address:nn neighbors A.B.C.D advertised-routes&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SHOW_STR IP_STR BGP_STR&quot;Display VPNv4 NLRI specific information\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display information for a route distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;VPN Route Distinguisher\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Detailed information on TCP and BGP neighbor connections\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Neighbor to display information about\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Display the routes advertised to a BGP neighbor\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00674">674</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">                                :nn_or_IP-address:nn neighbors <a class="code" href="random_8c.html#a955f504eccf76b4eb2489c0adab03121">A</a>.B.C.D advertised-routes<span class="stringliteral">&quot;,</span>
<span class="stringliteral">       SHOW_STR</span>
<span class="stringliteral">       IP_STR</span>
<span class="stringliteral">       BGP_STR</span>
<span class="stringliteral">       &quot;</span>Display VPNv4 <a class="code" href="bgp__debug_8h.html#a5e85a5c6bb26ea0bf88024ddd4a932f7">NLRI</a> specific information\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>Display information <span class="keywordflow">for</span> <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a> route distinguisher\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>VPN Route Distinguisher\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>Detailed information on TCP and BGP neighbor connections\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>Neighbor to display information about\n<span class="stringliteral">&quot;</span>
<span class="stringliteral">       &quot;</span>Display the routes advertised to <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a> BGP neighbor\n<span class="stringliteral">&quot;)</span>
<span class="stringliteral">{</span>
<span class="stringliteral">  int ret;</span>
<span class="stringliteral">  struct peer *peer;</span>
<span class="stringliteral">  struct prefix_rd prd;</span>
<span class="stringliteral">  union sockunion su;</span>
<span class="stringliteral"></span>
<span class="stringliteral">  ret = str2sockunion (argv[1], &amp;su);</span>
<span class="stringliteral">  if (ret &lt; 0)</span>
<span class="stringliteral">    {</span>
<span class="stringliteral">      vty_out (vty, &quot;</span>%% Malformed address: %<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>%<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a><span class="stringliteral">&quot;, argv[0], VTY_NEWLINE);</span>
<span class="stringliteral">      return CMD_WARNING;</span>
<span class="stringliteral">    }</span>
<span class="stringliteral">  peer = peer_lookup (NULL, &amp;su);</span>
<span class="stringliteral">  if (! peer || ! peer-&gt;afc[AFI_IP][SAFI_MPLS_VPN])</span>
<span class="stringliteral">    {</span>
<span class="stringliteral">      vty_out (vty, &quot;</span>%% No such neighbor or address family%<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a><span class="stringliteral">&quot;, VTY_NEWLINE);</span>
<span class="stringliteral">      return CMD_WARNING;</span>
<span class="stringliteral">    }</span>
<span class="stringliteral"></span>
<span class="stringliteral">  ret = str2prefix_rd (argv[0], &amp;prd);</span>
<span class="stringliteral">  if (! ret)</span>
<span class="stringliteral">    {</span>
<span class="stringliteral">      vty_out (vty, &quot;</span>%% Malformed Route Distinguisher%<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a><span class="stringliteral">&quot;, VTY_NEWLINE);</span>
<span class="stringliteral">      return CMD_WARNING;</span>
<span class="stringliteral">    }</span>
<span class="stringliteral"></span>
<span class="stringliteral">  return show_adj_route_vpn (vty, peer, &amp;prd);</span>
<span class="stringliteral">}</span>
</pre></div>
</div>
</div>
<a class="anchor" id="a806cd220250d519b75ac7f78cd091bcc"></a><!-- doxytag: member="bgp_mplsvpn.c::prefix_rd2str" ref="a806cd220250d519b75ac7f78cd091bcc" args="(struct prefix_rd *prd, char *buf, size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* prefix_rd2str </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix__rd.html">prefix_rd</a> *&#160;</td>
          <td class="paramname"><em>prd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00251">251</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  u_char *pnt;
  u_int16_t <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>;
  <span class="keyword">struct </span><a class="code" href="structrd__as.html">rd_as</a> <a class="code" href="structrd__as.html">rd_as</a>;
  <span class="keyword">struct </span><a class="code" href="structrd__ip.html">rd_ip</a> <a class="code" href="structrd__ip.html">rd_ip</a>;

  <span class="keywordflow">if</span> (size &lt; <a class="code" href="bgp__mplsvpn_8h.html#ac391784ff6cdf85be545665a90194a14">RD_ADDRSTRLEN</a>)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  pnt = prd-&gt;val;

  type = <a class="code" href="bgp__mplsvpn_8c.html#a47993eeec5984e2f65168c06429de358">decode_rd_type</a> (pnt);

  <span class="keywordflow">if</span> (type == <a class="code" href="bgp__mplsvpn_8h.html#a3bbc700e4f4ab28c235350e4ba7507c0">RD_TYPE_AS</a>)
    {
      <a class="code" href="bgp__mplsvpn_8c.html#a62179d8e94d4b44b6433ad99d634c137">decode_rd_as</a> (pnt + 2, &amp;<a class="code" href="structrd__as.html">rd_as</a>);
      <a class="code" href="str_8c.html#ad76145a6edfc98981ded8815a760e0cd">snprintf</a> (buf, size, <span class="stringliteral">&quot;%u:%d&quot;</span>, <a class="code" href="structrd__as.html">rd_as</a>.<a class="code" href="structrd__as.html#a99398523407ec01cf01938bf7304d25d">as</a>, <a class="code" href="structrd__as.html">rd_as</a>.<a class="code" href="structrd__as.html#a4a684250a2208bcc7300b664387b6869">val</a>);
      <span class="keywordflow">return</span> buf;
    }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="bgp__mplsvpn_8h.html#af9b4e8d4a94f686e0b6f72e7f8d3bcbc">RD_TYPE_IP</a>)
    {
      <a class="code" href="bgp__mplsvpn_8c.html#a5df4485aeff68dcd7993023dec70f5ef">decode_rd_ip</a> (pnt + 2, &amp;<a class="code" href="structrd__ip.html">rd_ip</a>);
      <a class="code" href="str_8c.html#ad76145a6edfc98981ded8815a760e0cd">snprintf</a> (buf, size, <span class="stringliteral">&quot;%s:%d&quot;</span>, inet_ntoa (<a class="code" href="structrd__ip.html">rd_ip</a>.<a class="code" href="structrd__ip.html#ae2ebc68930cc4d8c1a33297de25dfcfc">ip</a>), <a class="code" href="structrd__ip.html">rd_ip</a>.<a class="code" href="structrd__ip.html#a330e0f20d03c058307b5fb0767c29724">val</a>);
      <span class="keywordflow">return</span> buf;
    }

  <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4ef605c877a883ec15a8ed6ec83f524e"></a><!-- doxytag: member="bgp_mplsvpn.c::show_adj_route_vpn" ref="a4ef605c877a883ec15a8ed6ec83f524e" args="(struct vty *vty, struct peer *peer, struct prefix_rd *prd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int show_adj_route_vpn </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname"><em>vty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpeer.html">peer</a> *&#160;</td>
          <td class="paramname"><em>peer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__rd.html">prefix_rd</a> *&#160;</td>
          <td class="paramname"><em>prd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00311">311</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structbgp.html">bgp</a> *<a class="code" href="bgp__capability__test_8c.html#a528a1146825f30f8df2ae2e9d61dd7be">bgp</a>;
  <span class="keyword">struct </span><a class="code" href="structbgp__table.html">bgp_table</a> *table;
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rm;
  <span class="keyword">struct </span><a class="code" href="structattr.html">attr</a> *<a class="code" href="structattr.html">attr</a>;
  <span class="keywordtype">int</span> rd_header;
  <span class="keywordtype">int</span> header = 1;
  <span class="keywordtype">char</span> v4_header[] = <span class="stringliteral">&quot;   Network          Next Hop            Metric LocPrf Weight Path%s&quot;</span>;

  bgp = <a class="code" href="bgpd_8c.html#ae19787bc29126d524ac261d00bacc13d">bgp_get_default</a> ();
  <span class="keywordflow">if</span> (bgp == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;No BGP process is configured%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
      <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
    }

  <span class="keywordflow">for</span> (rn = <a class="code" href="bgp__table_8c.html#af8ce42494729d03a8c7ca41ded487bb2">bgp_table_top</a> (bgp-&gt;<a class="code" href="structbgp.html#a165710ce04dcbf78397c514707c15f3b">rib</a>[<a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>][<a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>]); rn;
       rn = <a class="code" href="bgp__table_8c.html#abdeced48b9b4aad614c88dc63ea0a4cf">bgp_route_next</a> (rn))
    {
      <span class="keywordflow">if</span> (prd &amp;&amp; <a class="code" href="regex_8c.html#a98d0dff0c7366f08562d8e8583df9bb9">memcmp</a> (rn-&gt;<a class="code" href="structbgp__node.html#a61c7e08de23a3c64f8dd738448567cde">p</a>.u.<a class="code" href="structprefix.html#aff8f7c555d44bdcf53f9e09d3a2d2e68">val</a>, prd-&gt;val, 8) != 0)
        <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> ((table = rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        {
          rd_header = 1;

          <span class="keywordflow">for</span> (rm = <a class="code" href="bgp__table_8c.html#af8ce42494729d03a8c7ca41ded487bb2">bgp_table_top</a> (table); rm; rm = <a class="code" href="bgp__table_8c.html#abdeced48b9b4aad614c88dc63ea0a4cf">bgp_route_next</a> (rm))
            <span class="keywordflow">if</span> ((attr = rm-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
              {
                <span class="keywordflow">if</span> (header)
                  {
                    <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;BGP table version is 0, local router ID is %s%s&quot;</span>,
                             inet_ntoa (bgp-&gt;<a class="code" href="structbgp.html#ac85364afca7a6afc7c184148355318a7">router_id</a>), <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
                    <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;Status codes: s suppressed, d damped, h history, * valid, &gt; best, i - internal%s&quot;</span>,
                             <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
                    <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;Origin codes: i - IGP, e - EGP, ? - incomplete%s%s&quot;</span>,
                             <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
                    <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, v4_header, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
                    header = 0;
                  }

                <span class="keywordflow">if</span> (rd_header)
                  {
                    u_int16_t <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>;
                    <span class="keyword">struct </span><a class="code" href="structrd__as.html">rd_as</a> <a class="code" href="structrd__as.html">rd_as</a>;
                    <span class="keyword">struct </span><a class="code" href="structrd__ip.html">rd_ip</a> <a class="code" href="structrd__ip.html">rd_ip</a>;
                    u_char *pnt;

                    pnt = rn-&gt;<a class="code" href="structbgp__node.html#a61c7e08de23a3c64f8dd738448567cde">p</a>.u.<a class="code" href="structprefix.html#aff8f7c555d44bdcf53f9e09d3a2d2e68">val</a>;

                    <span class="comment">/* Decode RD type. */</span>
                    type = <a class="code" href="bgp__mplsvpn_8c.html#a47993eeec5984e2f65168c06429de358">decode_rd_type</a> (pnt);
                    <span class="comment">/* Decode RD value. */</span>
                    <span class="keywordflow">if</span> (type == <a class="code" href="bgp__mplsvpn_8h.html#a3bbc700e4f4ab28c235350e4ba7507c0">RD_TYPE_AS</a>)
                      <a class="code" href="bgp__mplsvpn_8c.html#a62179d8e94d4b44b6433ad99d634c137">decode_rd_as</a> (pnt + 2, &amp;<a class="code" href="structrd__as.html">rd_as</a>);
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="bgp__mplsvpn_8h.html#af9b4e8d4a94f686e0b6f72e7f8d3bcbc">RD_TYPE_IP</a>)
                      <a class="code" href="bgp__mplsvpn_8c.html#a5df4485aeff68dcd7993023dec70f5ef">decode_rd_ip</a> (pnt + 2, &amp;<a class="code" href="structrd__ip.html">rd_ip</a>);

                    <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;Route Distinguisher: &quot;</span>);

                    <span class="keywordflow">if</span> (type == <a class="code" href="bgp__mplsvpn_8h.html#a3bbc700e4f4ab28c235350e4ba7507c0">RD_TYPE_AS</a>)
                      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;%u:%d&quot;</span>, <a class="code" href="structrd__as.html">rd_as</a>.<a class="code" href="structrd__as.html#a99398523407ec01cf01938bf7304d25d">as</a>, <a class="code" href="structrd__as.html">rd_as</a>.<a class="code" href="structrd__as.html#a4a684250a2208bcc7300b664387b6869">val</a>);
                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="bgp__mplsvpn_8h.html#af9b4e8d4a94f686e0b6f72e7f8d3bcbc">RD_TYPE_IP</a>)
                      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;%s:%d&quot;</span>, inet_ntoa (<a class="code" href="structrd__ip.html">rd_ip</a>.<a class="code" href="structrd__ip.html#ae2ebc68930cc4d8c1a33297de25dfcfc">ip</a>), <a class="code" href="structrd__ip.html">rd_ip</a>.<a class="code" href="structrd__ip.html#a330e0f20d03c058307b5fb0767c29724">val</a>);

                    <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
                    rd_header = 0;
                  }
                <a class="code" href="bgp__route_8h.html#a0f21f671849f68f41259f9aa94ba9925">route_vty_out_tmp</a> (vty, &amp;rm-&gt;<a class="code" href="structbgp__node.html#a61c7e08de23a3c64f8dd738448567cde">p</a>, attr, SAFI_MPLS_VPN);
              }
        }
    }
  <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a296cfbde78d5b77bb55f852b2e1cabdd"></a><!-- doxytag: member="bgp_mplsvpn.c::str2prefix_rd" ref="a296cfbde78d5b77bb55f852b2e1cabdd" args="(const char *str, struct prefix_rd *prd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int str2prefix_rd </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__rd.html">prefix_rd</a> *&#160;</td>
          <td class="paramname"><em>prd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00174">174</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> ret;
  <span class="keywordtype">char</span> *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keywordtype">char</span> *p2;
  <span class="keyword">struct </span><a class="code" href="structstream.html">stream</a> *<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>;
  <span class="keywordtype">char</span> *half;
  <span class="keyword">struct </span>in_addr addr;

  s = <a class="code" href="stream_8c.html#a7117cdad9fa5e5ae633e0cf08d047459">stream_new</a> (8);

  prd-&gt;<a class="code" href="structprefix__rd.html#aebc7554cffb51de46f09161875fb52ac">family</a> = AF_UNSPEC;
  prd-&gt;<a class="code" href="structprefix__rd.html#a1cbb8003bb847577d7d47a58f42c4873">prefixlen</a> = 64;

  p = strchr (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, <span class="charliteral">&#39;:&#39;</span>);
  <span class="keywordflow">if</span> (! p)
    <span class="keywordflow">return</span> 0;

  <span class="keywordflow">if</span> (! <a class="code" href="prefix_8c.html#abca8c8e6c67ae2442bbdbb028e6b11c8">all_digit</a> (p + 1))
    <span class="keywordflow">return</span> 0;

  half = <a class="code" href="memory_8h.html#a6491adf46c1d769b529a8f2f7d75f2fe">XMALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba563963518edb70d4cd7492b06f48106e">MTYPE_TMP</a>, (p - <a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>) + 1);
  <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (half, <a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, (p - <a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>));
  half[p - <a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>] = <span class="charliteral">&#39;\0&#39;</span>;

  p2 = strchr (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, <span class="charliteral">&#39;.&#39;</span>);

  <span class="keywordflow">if</span> (! p2)
    {
      <span class="keywordflow">if</span> (! <a class="code" href="prefix_8c.html#abca8c8e6c67ae2442bbdbb028e6b11c8">all_digit</a> (half))
    {
      <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba563963518edb70d4cd7492b06f48106e">MTYPE_TMP</a>, half);
      <span class="keywordflow">return</span> 0;
    }
      <a class="code" href="stream_8c.html#a03459a9331e0333d2b396636eca3c2e4">stream_putw</a> (s, <a class="code" href="bgp__mplsvpn_8h.html#a3bbc700e4f4ab28c235350e4ba7507c0">RD_TYPE_AS</a>);
      <a class="code" href="stream_8c.html#a03459a9331e0333d2b396636eca3c2e4">stream_putw</a> (s, atoi (half));
      <a class="code" href="stream_8c.html#af366d780a14cb8de53279378a8a4faeb">stream_putl</a> (s, atol (p + 1));
    }
  <span class="keywordflow">else</span>
    {
      ret = <a class="code" href="sockunion_8c.html#a4203367afaacee3fa5cc1626b2ef63c0">inet_aton</a> (half, &amp;addr);
      <span class="keywordflow">if</span> (! ret)
    {
      <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba563963518edb70d4cd7492b06f48106e">MTYPE_TMP</a>, half);
      <span class="keywordflow">return</span> 0;
    }
      <a class="code" href="stream_8c.html#a03459a9331e0333d2b396636eca3c2e4">stream_putw</a> (s, <a class="code" href="bgp__mplsvpn_8h.html#af9b4e8d4a94f686e0b6f72e7f8d3bcbc">RD_TYPE_IP</a>);
      <a class="code" href="stream_8c.html#a9019a5de70c1b6c2715cf24103109632">stream_put_in_addr</a> (s, &amp;addr);
      <a class="code" href="stream_8c.html#a03459a9331e0333d2b396636eca3c2e4">stream_putw</a> (s, atol (p + 1));
    }
  <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (prd-&gt;val, s-&gt;data, 8);

  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a351be45ea03f40abf1b4247e2a71a8f4"></a><!-- doxytag: member="bgp_mplsvpn.c::str2tag" ref="a351be45ea03f40abf1b4247e2a71a8f4" args="(const char *str, u_char *tag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int str2tag </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_char *&#160;</td>
          <td class="paramname"><em>tag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__mplsvpn_8c_source.html#l00230">230</a> of file <a class="el" href="bgp__mplsvpn_8c_source.html">bgp_mplsvpn.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="spgrid_8c.html#a92119ef27b84f1e2e15792d7ea360ba4">l</a>;
  <span class="keywordtype">char</span> *endptr;
  u_int32_t <a class="code" href="test-sig_8c.html#ab4ed0bba3292270af8ad67b45a21280d">t</a>;

  l = strtoul (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, &amp;endptr, 10);
  
  <span class="keywordflow">if</span> (*endptr == <span class="charliteral">&#39;\0&#39;</span> || l == ULONG_MAX || l &gt; <a class="code" href="zebra_8h.html#ab5eb23180f7cc12b7d6c04a8ec067fdd">UINT32_MAX</a>)
    <span class="keywordflow">return</span> 0;

  t = (u_int32_t) l;
  
  tag[0] = (u_char)(t &gt;&gt; 12);
  tag[1] = (u_char)(t &gt;&gt; 4);
  tag[2] = (u_char)(t &lt;&lt; 4);

  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="bgp__mplsvpn_8c.html">bgp_mplsvpn.c</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:12 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
