<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: ospf6d/ospf6_flood.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('ospf6__flood_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ospf6d/ospf6_flood.h File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ospf6__flood_8h__dep__incl.png" border="0" usemap="#ospf6d_2ospf6__flood_8hdep" alt=""/></div>
<map name="ospf6d_2ospf6__flood_8hdep" id="ospf6d_2ospf6__flood_8hdep">
<area shape="rect" id="node3" href="ospf6__abr_8c.html" title="ospf6d/ospf6_abr.c" alt="" coords="5,80,144,107"/><area shape="rect" id="node5" href="ospf6__asbr_8c.html" title="ospf6d/ospf6_asbr.c" alt="" coords="169,80,313,107"/><area shape="rect" id="node7" href="ospf6__flood_8c.html" title="ospf6d/ospf6_flood.c" alt="" coords="338,80,488,107"/><area shape="rect" id="node9" href="ospf6__intra_8c.html" title="ospf6d/ospf6_intra.c" alt="" coords="513,80,657,107"/><area shape="rect" id="node11" href="ospf6__lsa_8c.html" title="ospf6d/ospf6_lsa.c" alt="" coords="683,80,819,107"/><area shape="rect" id="node13" href="ospf6__message_8c.html" title="ospf6d/ospf6_message.c" alt="" coords="843,80,1017,107"/><area shape="rect" id="node15" href="ospf6__neighbor_8c.html" title="ospf6d/ospf6_neighbor.c" alt="" coords="1042,80,1213,107"/><area shape="rect" id="node17" href="ospf6__top_8c.html" title="ospf6d/ospf6_top.c" alt="" coords="1238,80,1377,107"/><area shape="rect" id="node19" href="ospf6d_8c.html" title="ospf6d/ospf6d.c" alt="" coords="1403,80,1523,107"/></map>
</div>
</div>
<p><a href="ospf6__flood_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#aeb1a812d68734ace211eefbd27b79b51">OSPF6_DEBUG_FLOODING_ON</a>()&#160;&#160;&#160;(<a class="el" href="ospf6__flood_8h.html#ab5ea0cbe048efb63f24cf10f018e8afa">conf_debug_ospf6_flooding</a> = 1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#a6dad1c03a135b6e1dc16366fb09d8211">OSPF6_DEBUG_FLOODING_OFF</a>()&#160;&#160;&#160;(<a class="el" href="ospf6__flood_8h.html#ab5ea0cbe048efb63f24cf10f018e8afa">conf_debug_ospf6_flooding</a> = 0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#ad2c9fd06c28b16f3250f2bf760cb4030">IS_OSPF6_DEBUG_FLOODING</a>&#160;&#160;&#160;(<a class="el" href="ospf6__flood_8h.html#ab5ea0cbe048efb63f24cf10f018e8afa">conf_debug_ospf6_flooding</a>)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#a9c0285ffbb2ec03d9e8951bbffb05eb6">ospf6_get_scoped_lsdb</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#a622d03fd6aa40466ef3d3551b118843e">ospf6_get_scoped_lsdb_self</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#ae9152cb7cf4c07550397913c02d06e5e">ospf6_lsa_originate</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#ae5276f4d60743b472adbbcd7ba08ada1">ospf6_lsa_originate_process</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, struct <a class="el" href="structospf6.html">ospf6</a> *process)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#a3d16e7d20ecaf3dad0a2459d16133cf0">ospf6_lsa_originate_area</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, struct <a class="el" href="structospf6__area.html">ospf6_area</a> *oa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#affcf3da8e7d395a0199d1eb07cd23431">ospf6_lsa_originate_interface</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, struct <a class="el" href="structospf6__interface.html">ospf6_interface</a> *oi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#a249f2b2808a03c8e9998d6bdf209a962">ospf6_lsa_purge</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#a5e4e2b43f317fbb038100a62d6aa089a">ospf6_increment_retrans_count</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#a6bee3a2ba460b276a55915e4f96dae62">ospf6_decrement_retrans_count</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#adbe9dd92c0ae6afb40021b33ce7d7894">ospf6_flood_clear</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#a075f0016b6d4205102b23b32b79b7da3">ospf6_flood</a> (struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *from, struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#a2cb8cc3748f115868ae8cb8a51e1029a">ospf6_receive_lsa</a> (struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *from, struct <a class="el" href="structospf6__lsa__header.html">ospf6_lsa_header</a> *header)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#abb7a5d2b0b4d7595d4fadbf9725ac45f">ospf6_install_lsa</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#a623f7487e66cb1cc908126694d63e7d4">config_write_ospf6_debug_flood</a> (struct <a class="el" href="structvty.html">vty</a> *<a class="el" href="structvty.html">vty</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#ab7dc3fe2a560e2b23ccda7f7387a99d0">install_element_ospf6_debug_flood</a> (void)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8h.html#ab5ea0cbe048efb63f24cf10f018e8afa">conf_debug_ospf6_flooding</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ad2c9fd06c28b16f3250f2bf760cb4030"></a><!-- doxytag: member="ospf6_flood.h::IS_OSPF6_DEBUG_FLOODING" ref="ad2c9fd06c28b16f3250f2bf760cb4030" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_OSPF6_DEBUG_FLOODING&#160;&#160;&#160;(<a class="el" href="ospf6__flood_8h.html#ab5ea0cbe048efb63f24cf10f018e8afa">conf_debug_ospf6_flooding</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8h_source.html#l00031">31</a> of file <a class="el" href="ospf6__flood_8h_source.html">ospf6_flood.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6dad1c03a135b6e1dc16366fb09d8211"></a><!-- doxytag: member="ospf6_flood.h::OSPF6_DEBUG_FLOODING_OFF" ref="a6dad1c03a135b6e1dc16366fb09d8211" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_DEBUG_FLOODING_OFF</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="ospf6__flood_8h.html#ab5ea0cbe048efb63f24cf10f018e8afa">conf_debug_ospf6_flooding</a> = 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8h_source.html#l00029">29</a> of file <a class="el" href="ospf6__flood_8h_source.html">ospf6_flood.h</a>.</p>

</div>
</div>
<a class="anchor" id="aeb1a812d68734ace211eefbd27b79b51"></a><!-- doxytag: member="ospf6_flood.h::OSPF6_DEBUG_FLOODING_ON" ref="aeb1a812d68734ace211eefbd27b79b51" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_DEBUG_FLOODING_ON</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="ospf6__flood_8h.html#ab5ea0cbe048efb63f24cf10f018e8afa">conf_debug_ospf6_flooding</a> = 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8h_source.html#l00027">27</a> of file <a class="el" href="ospf6__flood_8h_source.html">ospf6_flood.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a623f7487e66cb1cc908126694d63e7d4"></a><!-- doxytag: member="ospf6_flood.h::config_write_ospf6_debug_flood" ref="a623f7487e66cb1cc908126694d63e7d4" args="(struct vty *vty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int config_write_ospf6_debug_flood </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname"><em>vty</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l01008">1008</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__flood_8h.html#ad2c9fd06c28b16f3250f2bf760cb4030">IS_OSPF6_DEBUG_FLOODING</a>)
    <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;debug ospf6 flooding%s&quot;</span>, <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab7dc3fe2a560e2b23ccda7f7387a99d0"></a><!-- doxytag: member="ospf6_flood.h::install_element_ospf6_debug_flood" ref="ab7dc3fe2a560e2b23ccda7f7387a99d0" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void install_element_ospf6_debug_flood </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l01016">1016</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;debug_ospf6_flooding_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;no_debug_ospf6_flooding_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50754044f565f7421a152eaa411eebcc">CONFIG_NODE</a>, &amp;debug_ospf6_flooding_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50754044f565f7421a152eaa411eebcc">CONFIG_NODE</a>, &amp;no_debug_ospf6_flooding_cmd);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6bee3a2ba460b276a55915e4f96dae62"></a><!-- doxytag: member="ospf6_flood.h::ospf6_decrement_retrans_count" ref="a6bee3a2ba460b276a55915e4f96dae62" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_decrement_retrans_count </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00185">185</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *orig;

  <span class="comment">/* The LSA must be on the retrans-list of a neighbor. It means</span>
<span class="comment">     the &quot;lsa&quot; is a copied one, and we have to decrement the</span>
<span class="comment">     retransmission count of the original one (instead of this &quot;lsa&quot;&#39;s).</span>
<span class="comment">     In order to find the original LSA, first we have to find</span>
<span class="comment">     appropriate LSDB that have the original LSA. */</span>
  lsdb = <a class="code" href="ospf6__flood_8c.html#a9c0285ffbb2ec03d9e8951bbffb05eb6">ospf6_get_scoped_lsdb</a> (lsa);

  <span class="comment">/* Find the original LSA of which the retrans_count should be decremented */</span>
  orig = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>,
                            lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, lsdb);
  <span class="keywordflow">if</span> (orig)
    {
      orig-&gt;<a class="code" href="structospf6__lsa.html#af45db024602c72e968f5aee86157612d">retrans_count</a>--;
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (orig-&gt;<a class="code" href="structospf6__lsa.html#af45db024602c72e968f5aee86157612d">retrans_count</a> &gt;= 0);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a075f0016b6d4205102b23b32b79b7da3"></a><!-- doxytag: member="ospf6_flood.h::ospf6_flood" ref="a075f0016b6d4205102b23b32b79b7da3" args="(struct ospf6_neighbor *from, struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_flood </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00438">438</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="ospf6__flood_8c.html#aa7b0cba1dacd974db9e8264e0311502c">ospf6_flood_process</a> (from, lsa, <a class="code" href="structospf6.html">ospf6</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="adbe9dd92c0ae6afb40021b33ce7d7894"></a><!-- doxytag: member="ospf6_flood.h::ospf6_flood_clear" ref="adbe9dd92c0ae6afb40021b33ce7d7894" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_flood_clear </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00512">512</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="ospf6__flood_8c.html#ad9a260dae55c84b5fa43af6d5f49e1f5">ospf6_flood_clear_process</a> (lsa, <a class="code" href="structospf6.html">ospf6</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9c0285ffbb2ec03d9e8951bbffb05eb6"></a><!-- doxytag: member="ospf6_flood.h::ospf6_get_scoped_lsdb" ref="a9c0285ffbb2ec03d9e8951bbffb05eb6" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a>* ospf6_get_scoped_lsdb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00048">48</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">switch</span> (<a class="code" href="ospf6__lsa_8h.html#a2d9f0d76bb67a578675e6b78bf69604d">OSPF6_LSA_SCOPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>))
    {
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#ab41aaca88cc27f951f7dbf46b5a6fb5c">OSPF6_SCOPE_LINKLOCAL</a>:
      lsdb = <a class="code" href="ospf6d_8h.html#a2dad4cbf7a1897cb8729c3ac2419703d">OSPF6_INTERFACE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>)-&gt;lsdb;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#a0634f2bb73a043f5782d28e4e3a1ad95">OSPF6_SCOPE_AREA</a>:
      lsdb = <a class="code" href="ospf6d_8h.html#a57a3d73f87bce959acf483eb7514a29d">OSPF6_AREA</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>)-&gt;lsdb;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#a0701d1d9c961cfb8d6da273382ea508a">OSPF6_SCOPE_AS</a>:
      lsdb = <a class="code" href="ospf6d_8h.html#a9d917e6159d9c3125a4784bf0d8e18fd">OSPF6_PROCESS</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>)-&gt;lsdb;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (0);
      <span class="keywordflow">break</span>;
    }
  <span class="keywordflow">return</span> lsdb;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a622d03fd6aa40466ef3d3551b118843e"></a><!-- doxytag: member="ospf6_flood.h::ospf6_get_scoped_lsdb_self" ref="a622d03fd6aa40466ef3d3551b118843e" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a>* ospf6_get_scoped_lsdb_self </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00070">70</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb_self = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">switch</span> (<a class="code" href="ospf6__lsa_8h.html#a2d9f0d76bb67a578675e6b78bf69604d">OSPF6_LSA_SCOPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>))
    {
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#ab41aaca88cc27f951f7dbf46b5a6fb5c">OSPF6_SCOPE_LINKLOCAL</a>:
      lsdb_self = <a class="code" href="ospf6d_8h.html#a2dad4cbf7a1897cb8729c3ac2419703d">OSPF6_INTERFACE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>)-&gt;lsdb_self;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#a0634f2bb73a043f5782d28e4e3a1ad95">OSPF6_SCOPE_AREA</a>:
      lsdb_self = <a class="code" href="ospf6d_8h.html#a57a3d73f87bce959acf483eb7514a29d">OSPF6_AREA</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>)-&gt;lsdb_self;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#a0701d1d9c961cfb8d6da273382ea508a">OSPF6_SCOPE_AS</a>:
      lsdb_self = <a class="code" href="ospf6d_8h.html#a9d917e6159d9c3125a4784bf0d8e18fd">OSPF6_PROCESS</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>)-&gt;lsdb_self;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (0);
      <span class="keywordflow">break</span>;
    }
  <span class="keywordflow">return</span> lsdb_self;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5e4e2b43f317fbb038100a62d6aa089a"></a><!-- doxytag: member="ospf6_flood.h::ospf6_increment_retrans_count" ref="a5e4e2b43f317fbb038100a62d6aa089a" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_increment_retrans_count </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00177">177</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">/* The LSA must be the original one (see the description</span>
<span class="comment">     in ospf6_decrement_retrans_count () below) */</span>
  lsa-&gt;<a class="code" href="structospf6__lsa.html#af45db024602c72e968f5aee86157612d">retrans_count</a>++;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abb7a5d2b0b4d7595d4fadbf9725ac45f"></a><!-- doxytag: member="ospf6_flood.h::ospf6_install_lsa" ref="abb7a5d2b0b4d7595d4fadbf9725ac45f" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_install_lsa </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00209">209</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *old;
  <span class="keyword">struct </span>timeval now;

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a3bf7d5a2afba1551fff365aae68acaea">IS_OSPF6_DEBUG_LSA_TYPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>) ||
      <a class="code" href="ospf6__lsa_8h.html#aaa2084839044bf56e4a49b3c1a8c72cd">IS_OSPF6_DEBUG_EXAMIN_TYPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Install LSA: %s&quot;</span>, lsa-&gt;<a class="code" href="structospf6__lsa.html#a979d21e1c4d2e1753e7d45641b0819ce">name</a>);

  <span class="comment">/* Remove the old instance from all neighbors&#39; Link state</span>
<span class="comment">     retransmission list (RFC2328 13.2 last paragraph) */</span>
  old = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>,
                           lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>);
  <span class="keywordflow">if</span> (old)
    {
      <a class="code" href="thread_8h.html#a7e1de4fc338e4feae498978461742dbb">THREAD_OFF</a> (old-&gt;<a class="code" href="structospf6__lsa.html#a6f546aa95ed513d684623f1b65869f85">expire</a>);
      <a class="code" href="ospf6__flood_8c.html#adbe9dd92c0ae6afb40021b33ce7d7894">ospf6_flood_clear</a> (old);
    }

  <a class="code" href="thread_8c.html#abf5861abe71d6f9a1ddd493be0218de1">quagga_gettime</a> (<a class="code" href="thread_8h.html#a64fff521e88ba8b01645c5bb89085b33a7f92aaa461f13c163b13f96085eb3cd9">QUAGGA_CLK_MONOTONIC</a>, &amp;now);
  <span class="keywordflow">if</span> (! <a class="code" href="ospf6__lsa_8h.html#acde3ad184b10ca14f3eef7b2ab655ce6">OSPF6_LSA_IS_MAXAGE</a> (lsa))
    lsa-&gt;<a class="code" href="structospf6__lsa.html#a6f546aa95ed513d684623f1b65869f85">expire</a> = <a class="code" href="thread_8h.html#aca77b3bbd166d3573de5ecd9756a590c">thread_add_timer</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__lsa_8c.html#aec0a8277db29406323e2f7508b60eebe">ospf6_lsa_expire</a>, lsa,
                                    <a class="code" href="ospf6__proto_8h.html#a7d8ba9ac46dd686ffb8bd269f903b589">MAXAGE</a> + lsa-&gt;<a class="code" href="structospf6__lsa.html#ac5e609908130620c41247b9dbff58b1a">birth</a>.tv_sec - now.tv_sec);
  <span class="keywordflow">else</span>
    lsa-&gt;<a class="code" href="structospf6__lsa.html#a6f546aa95ed513d684623f1b65869f85">expire</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="comment">/* actually install */</span>
  lsa-&gt;<a class="code" href="structospf6__lsa.html#a367291986f9ddaa8157505eca1a31423">installed</a> = now;
  <a class="code" href="ospf6__lsdb_8c.html#a0b328a0b2493e0e549d003f50003a199">ospf6_lsdb_add</a> (lsa, lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>);

  <span class="keywordflow">return</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae9152cb7cf4c07550397913c02d06e5e"></a><!-- doxytag: member="ospf6_flood.h::ospf6_lsa_originate" ref="ae9152cb7cf4c07550397913c02d06e5e" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsa_originate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00092">92</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *old;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb_self;

  <span class="comment">/* find previous LSA */</span>
  old = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>,
                           lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>);

  <span class="comment">/* if the new LSA does not differ from previous,</span>
<span class="comment">     suppress this update of the LSA */</span>
  <span class="keywordflow">if</span> (old &amp;&amp; ! <a class="code" href="ospf6__lsa_8h.html#a4c2aac9a75143fc1972f76e677c24c33">OSPF6_LSA_IS_DIFFER</a> (lsa, old))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a3190b5307da7d9277da288d9fd282b96">IS_OSPF6_DEBUG_ORIGINATE_TYPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Suppress updating LSA: %s&quot;</span>, lsa-&gt;<a class="code" href="structospf6__lsa.html#a979d21e1c4d2e1753e7d45641b0819ce">name</a>);
      <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (lsa);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* store it in the LSDB for self-originated LSAs */</span>
  lsdb_self = <a class="code" href="ospf6__flood_8c.html#a622d03fd6aa40466ef3d3551b118843e">ospf6_get_scoped_lsdb_self</a> (lsa);
  <a class="code" href="ospf6__lsdb_8c.html#a0b328a0b2493e0e549d003f50003a199">ospf6_lsdb_add</a> (<a class="code" href="ospf6__lsa_8c.html#a98dc000e578715b010159ca0c5b38a07">ospf6_lsa_copy</a> (lsa), lsdb_self);

  lsa-&gt;<a class="code" href="structospf6__lsa.html#a8ea4daae222c63b142c5072764b7233f">refresh</a> = <a class="code" href="thread_8h.html#aca77b3bbd166d3573de5ecd9756a590c">thread_add_timer</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__lsa_8c.html#a370c05db1f992a6e7f8657ad937f3a5f">ospf6_lsa_refresh</a>, lsa,
                                   <a class="code" href="ospf6__proto_8h.html#ab08ddbd72ec04be1ff6959a492fc3795">LS_REFRESH_TIME</a>);

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a3bf7d5a2afba1551fff365aae68acaea">IS_OSPF6_DEBUG_LSA_TYPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>) ||
      <a class="code" href="ospf6__lsa_8h.html#a3190b5307da7d9277da288d9fd282b96">IS_OSPF6_DEBUG_ORIGINATE_TYPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>))
    {
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA Originate:&quot;</span>);
      <a class="code" href="ospf6__lsa_8c.html#a6f102ec07a6a8c18ae5567b1fab4e845">ospf6_lsa_header_print</a> (lsa);
    }

  <span class="keywordflow">if</span> (old)
    <a class="code" href="ospf6__flood_8c.html#adbe9dd92c0ae6afb40021b33ce7d7894">ospf6_flood_clear</a> (old);
  <a class="code" href="ospf6__flood_8c.html#a075f0016b6d4205102b23b32b79b7da3">ospf6_flood</a> (<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, lsa);
  <a class="code" href="ospf6__flood_8c.html#abb7a5d2b0b4d7595d4fadbf9725ac45f">ospf6_install_lsa</a> (lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3d16e7d20ecaf3dad0a2459d16133cf0"></a><!-- doxytag: member="ospf6_flood.h::ospf6_lsa_originate_area" ref="a3d16e7d20ecaf3dad0a2459d16133cf0" args="(struct ospf6_lsa *lsa, struct ospf6_area *oa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsa_originate_area </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__area.html">ospf6_area</a> *&#160;</td>
          <td class="paramname"><em>oa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00140">140</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a> = oa-&gt;<a class="code" href="structospf6__area.html#a9e658e62c2d59151531bc03b95b600bb">lsdb</a>;
  <a class="code" href="ospf6__flood_8c.html#ae9152cb7cf4c07550397913c02d06e5e">ospf6_lsa_originate</a> (lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="affcf3da8e7d395a0199d1eb07cd23431"></a><!-- doxytag: member="ospf6_flood.h::ospf6_lsa_originate_interface" ref="affcf3da8e7d395a0199d1eb07cd23431" args="(struct ospf6_lsa *lsa, struct ospf6_interface *oi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsa_originate_interface </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__interface.html">ospf6_interface</a> *&#160;</td>
          <td class="paramname"><em>oi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00148">148</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a> = oi-&gt;<a class="code" href="structospf6__interface.html#ab033cb877fe417705f424d1bd2f411de">lsdb</a>;
  <a class="code" href="ospf6__flood_8c.html#ae9152cb7cf4c07550397913c02d06e5e">ospf6_lsa_originate</a> (lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae5276f4d60743b472adbbcd7ba08ada1"></a><!-- doxytag: member="ospf6_flood.h::ospf6_lsa_originate_process" ref="ae5276f4d60743b472adbbcd7ba08ada1" args="(struct ospf6_lsa *lsa, struct ospf6 *process)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsa_originate_process </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6.html">ospf6</a> *&#160;</td>
          <td class="paramname"><em>process</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00132">132</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a> = process-&gt;<a class="code" href="structospf6.html#ac8cf84e34e8461f5aea2737fc2bf8fcb">lsdb</a>;
  <a class="code" href="ospf6__flood_8c.html#ae9152cb7cf4c07550397913c02d06e5e">ospf6_lsa_originate</a> (lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a249f2b2808a03c8e9998d6bdf209a962"></a><!-- doxytag: member="ospf6_flood.h::ospf6_lsa_purge" ref="a249f2b2808a03c8e9998d6bdf209a962" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsa_purge </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00156">156</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *<span class="keyword">self</span>;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb_self;

  <span class="comment">/* remove it from the LSDB for self-originated LSAs */</span>
  lsdb_self = <a class="code" href="ospf6__flood_8c.html#a622d03fd6aa40466ef3d3551b118843e">ospf6_get_scoped_lsdb_self</a> (lsa);
  <span class="keyword">self</span> = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>,
                            lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, lsdb_self);
  <span class="keywordflow">if</span> (<span class="keyword">self</span>)
    {
      <a class="code" href="thread_8h.html#a7e1de4fc338e4feae498978461742dbb">THREAD_OFF</a> (self-&gt;expire);
      <a class="code" href="thread_8h.html#a7e1de4fc338e4feae498978461742dbb">THREAD_OFF</a> (self-&gt;refresh);
      <a class="code" href="ospf6__lsdb_8c.html#a57848d384aafd619bd84c654fb9ed146">ospf6_lsdb_remove</a> (<span class="keyword">self</span>, lsdb_self);
    }

  <a class="code" href="ospf6__lsa_8c.html#aee63bc21d208725601a588e998ad54a7">ospf6_lsa_premature_aging</a> (lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2cb8cc3748f115868ae8cb8a51e1029a"></a><!-- doxytag: member="ospf6_flood.h::ospf6_receive_lsa" ref="a2cb8cc3748f115868ae8cb8a51e1029a" args="(struct ospf6_neighbor *from, struct ospf6_lsa_header *header)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_receive_lsa </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa__header.html">ospf6_lsa_header</a> *&#160;</td>
          <td class="paramname"><em>header</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00731">731</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *<span class="keyword">new</span> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *old = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *rem = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordtype">int</span> ismore_recent;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> cksum;
  <span class="keywordtype">int</span> is_debug = 0;

  ismore_recent = 1;
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (from);

  <span class="comment">/* make lsa structure for received lsa */</span>
  <span class="keyword">new</span> = <a class="code" href="ospf6__lsa_8c.html#ab8a6a2c7b84b7e0c48eb7be6a3a0cf9c">ospf6_lsa_create</a> (<a class="code" href="structlsa__header.html">lsa_header</a>);

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__flood_8h.html#ad2c9fd06c28b16f3250f2bf760cb4030">IS_OSPF6_DEBUG_FLOODING</a> ||
      <a class="code" href="ospf6__lsa_8h.html#a1f3d4f8aab1a6419a23af4d5c72e5e9d">IS_OSPF6_DEBUG_FLOOD_TYPE</a> (new-&gt;header-&gt;type))
    {
      is_debug++;
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA Receive from %s&quot;</span>, from-&gt;<a class="code" href="structospf6__neighbor.html#aa0ccec2f7b9c56628ce2e4a0bc37d463">name</a>);
      <a class="code" href="ospf6__lsa_8c.html#a6f102ec07a6a8c18ae5567b1fab4e845">ospf6_lsa_header_print</a> (<span class="keyword">new</span>);
    }

  <span class="comment">/* (1) LSA Checksum */</span>
  cksum = ntohs (new-&gt;header-&gt;checksum);
  <span class="keywordflow">if</span> (ntohs (<a class="code" href="ospf6__lsa_8c.html#a033e364d9b61664964b29893c5070c0d">ospf6_lsa_checksum</a> (new-&gt;header)) != cksum)
    {
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Wrong LSA Checksum, discard&quot;</span>);
      <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* (2) Examine the LSA&#39;s LS type. </span>
<span class="comment">     RFC2470 3.5.1. Receiving Link State Update packets  */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__area_8h.html#af08848f9c3f603caf4af634755a5f3c4">IS_AREA_STUB</a> (from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>) &amp;&amp;
      <a class="code" href="ospf6__lsa_8h.html#a2d9f0d76bb67a578675e6b78bf69604d">OSPF6_LSA_SCOPE</a> (new-&gt;header-&gt;type) == <a class="code" href="ospf6__lsa_8h.html#a0701d1d9c961cfb8d6da273382ea508a">OSPF6_SCOPE_AS</a>)
    {
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;AS-External-LSA (or AS-scope LSA) in stub area, discard&quot;</span>);
      <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* (3) LSA which have reserved scope is discarded</span>
<span class="comment">     RFC2470 3.5.1. Receiving Link State Update packets  */</span>
  <span class="comment">/* Flooding scope check. LSAs with unknown scope are discarded here.</span>
<span class="comment">     Set appropriate LSDB for the LSA */</span>
  <span class="keywordflow">switch</span> (<a class="code" href="ospf6__lsa_8h.html#a2d9f0d76bb67a578675e6b78bf69604d">OSPF6_LSA_SCOPE</a> (new-&gt;header-&gt;type))
    {
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#ab41aaca88cc27f951f7dbf46b5a6fb5c">OSPF6_SCOPE_LINKLOCAL</a>:
      <span class="keyword">new</span>-&gt;lsdb = from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#ab033cb877fe417705f424d1bd2f411de">lsdb</a>;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#a0634f2bb73a043f5782d28e4e3a1ad95">OSPF6_SCOPE_AREA</a>:
      <span class="keyword">new</span>-&gt;lsdb = from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a9e658e62c2d59151531bc03b95b600bb">lsdb</a>;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#a0701d1d9c961cfb8d6da273382ea508a">OSPF6_SCOPE_AS</a>:
      <span class="keyword">new</span>-&gt;lsdb = from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#ac8cf84e34e8461f5aea2737fc2bf8fcb">lsdb</a>;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA has reserved scope, discard&quot;</span>);
      <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* (4) if MaxAge LSA and if we have no instance, and no neighbor</span>
<span class="comment">         is in states Exchange or Loading */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__flood_8c.html#a477c17a44d4648a12e3b0c6331c6f289">ospf6_is_maxage_lsa_drop</a> (<span class="keyword">new</span>, from))
    {
      <span class="comment">/* log */</span>
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Drop MaxAge LSA with direct acknowledgement.&quot;</span>);

      <span class="comment">/* a) Acknowledge back to neighbor (Direct acknowledgement, 13.5) */</span>
      <a class="code" href="ospf6__lsdb_8c.html#a0b328a0b2493e0e549d003f50003a199">ospf6_lsdb_add</a> (<a class="code" href="ospf6__lsa_8c.html#a98dc000e578715b010159ca0c5b38a07">ospf6_lsa_copy</a> (<span class="keyword">new</span>), from-&gt;<a class="code" href="structospf6__neighbor.html#ae027726d4952b94fd753b700bd4b7dee">lsack_list</a>);
      <span class="keywordflow">if</span> (from-&gt;<a class="code" href="structospf6__neighbor.html#a3efe4e76725c8138916061f7fbeccd0b">thread_send_lsack</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        from-&gt;<a class="code" href="structospf6__neighbor.html#a3efe4e76725c8138916061f7fbeccd0b">thread_send_lsack</a> =
          <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#abaeba7b19d1caad52e507bd228656385">ospf6_lsack_send_neighbor</a>, from, 0);

      <span class="comment">/* b) Discard */</span>
      <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* (5) */</span>
  <span class="comment">/* lookup the same database copy in lsdb */</span>
  old = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (new-&gt;header-&gt;type, new-&gt;header-&gt;id,
                           new-&gt;header-&gt;adv_router, new-&gt;lsdb);
  <span class="keywordflow">if</span> (old)
    {
      ismore_recent = <a class="code" href="ospf6__lsa_8c.html#af1665de6eac6dab108363c1bf6320c69">ospf6_lsa_compare</a> (<span class="keyword">new</span>, old);
      <span class="keywordflow">if</span> (ntohl (new-&gt;header-&gt;seqnum) == ntohl (old-&gt;header-&gt;seqnum))
        {
          <span class="keywordflow">if</span> (is_debug)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Received is duplicated LSA&quot;</span>);
          <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (new-&gt;flag, <a class="code" href="ospf6__lsa_8h.html#a7296323566ea7398a6c31babdaa6f45c">OSPF6_LSA_DUPLICATE</a>);
        }
    }

  <span class="comment">/* if no database copy or received is more recent */</span>
  <span class="keywordflow">if</span> (old == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || ismore_recent &lt; 0)
    {
      <span class="comment">/* in case we have no database copy */</span>
      ismore_recent = -1;

      <span class="comment">/* (a) MinLSArrival check */</span>
      <span class="keywordflow">if</span> (old)
        {
          <span class="keyword">struct </span>timeval now, res;
          <a class="code" href="thread_8c.html#abf5861abe71d6f9a1ddd493be0218de1">quagga_gettime</a> (<a class="code" href="thread_8h.html#a64fff521e88ba8b01645c5bb89085b33a7f92aaa461f13c163b13f96085eb3cd9">QUAGGA_CLK_MONOTONIC</a>, &amp;now);
          <a class="code" href="ospf6d_8h.html#ad8549d8029286e53812f5d1aab4439e5">timersub</a> (&amp;now, &amp;old-&gt;installed, &amp;res);
          <span class="keywordflow">if</span> (res.tv_sec &lt; <a class="code" href="ospf6__proto_8h.html#abb6f097624398b6ea06b773ef7808e04">MIN_LS_ARRIVAL</a>)
            {
              <span class="keywordflow">if</span> (is_debug)
                <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA can&#39;t be updated within MinLSArrival, discard&quot;</span>);
              <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
              <span class="keywordflow">return</span>;   <span class="comment">/* examin next lsa */</span>
            }
        }

      <a class="code" href="thread_8c.html#abf5861abe71d6f9a1ddd493be0218de1">quagga_gettime</a> (<a class="code" href="thread_8h.html#a64fff521e88ba8b01645c5bb89085b33a7f92aaa461f13c163b13f96085eb3cd9">QUAGGA_CLK_MONOTONIC</a>, &amp;new-&gt;received);

      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Flood, Install, Possibly acknowledge the received LSA&quot;</span>);

      <span class="comment">/* (b) immediately flood and (c) remove from all retrans-list */</span>
      <span class="comment">/* Prevent self-originated LSA to be flooded. this is to make</span>
<span class="comment">      reoriginated instance of the LSA not to be rejected by other routers</span>
<span class="comment">      due to MinLSArrival. */</span>
      <span class="keywordflow">if</span> (new-&gt;header-&gt;adv_router != from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>)
        <a class="code" href="ospf6__flood_8c.html#a075f0016b6d4205102b23b32b79b7da3">ospf6_flood</a> (from, <span class="keyword">new</span>);

      <span class="comment">/* (c) Remove the current database copy from all neighbors&#39; Link</span>
<span class="comment">             state retransmission lists. */</span>
      <span class="comment">/* XXX, flood_clear ? */</span>

      <span class="comment">/* (d), installing lsdb, which may cause routing</span>
<span class="comment">              table calculation (replacing database copy) */</span>
      <a class="code" href="ospf6__flood_8c.html#abb7a5d2b0b4d7595d4fadbf9725ac45f">ospf6_install_lsa</a> (<span class="keyword">new</span>);

      <span class="comment">/* (e) possibly acknowledge */</span>
      <a class="code" href="ospf6__flood_8c.html#a98033432ac67097bcf4c1701a5ed2515">ospf6_acknowledge_lsa</a> (<span class="keyword">new</span>, ismore_recent, from);

      <span class="comment">/* (f) Self Originated LSA, section 13.4 */</span>
      <span class="keywordflow">if</span> (new-&gt;header-&gt;adv_router == from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>)
        {
          <span class="comment">/* Self-originated LSA (newer than ours) is received from</span>
<span class="comment">             another router. We have to make a new instance of the LSA</span>
<span class="comment">             or have to flush this LSA. */</span>
          <span class="keywordflow">if</span> (is_debug)
            {
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Newer instance of the self-originated LSA&quot;</span>);
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Schedule reorigination&quot;</span>);
            }
          <span class="keyword">new</span>-&gt;refresh = <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__lsa_8c.html#a370c05db1f992a6e7f8657ad937f3a5f">ospf6_lsa_refresh</a>, <span class="keyword">new</span>, 0);
        }

      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* (6) if there is instance on sending neighbor&#39;s request list */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (new-&gt;header-&gt;type, new-&gt;header-&gt;id,
                         new-&gt;header-&gt;adv_router, from-&gt;<a class="code" href="structospf6__neighbor.html#a1e0692790f663381e86374ed0e829f95">request_list</a>))
    {
      <span class="comment">/* if no database copy, should go above state (5) */</span>
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (old);

      <span class="keywordflow">if</span> (is_debug)
        {
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Received is not newer, on the neighbor&#39;s request-list&quot;</span>);
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;BadLSReq, discard the received LSA&quot;</span>);
        }

      <span class="comment">/* BadLSReq */</span>
      <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__neighbor_8c.html#ab25760cef92f7e894cdcf23ecad3833f">bad_lsreq</a>, from, 0);

      <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* (7) if neither one is more recent */</span>
  <span class="keywordflow">if</span> (ismore_recent == 0)
    {
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;The same instance as database copy (neither recent)&quot;</span>);

      <span class="comment">/* (a) if on retrans-list, Treat this LSA as an Ack: Implied Ack */</span>
      rem = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (new-&gt;header-&gt;type, new-&gt;header-&gt;id,
                               new-&gt;header-&gt;adv_router, from-&gt;<a class="code" href="structospf6__neighbor.html#a6e96ad2f82d2741e769bc179d35e583f">retrans_list</a>);
      <span class="keywordflow">if</span> (rem)
        {
          <span class="keywordflow">if</span> (is_debug)
            {
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;It is on the neighbor&#39;s retrans-list.&quot;</span>);
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Treat as an Implied acknowledgement&quot;</span>);
            }
          <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (new-&gt;flag, <a class="code" href="ospf6__lsa_8h.html#a842647baa54335f1a394d031f824becc">OSPF6_LSA_IMPLIEDACK</a>);
          <a class="code" href="ospf6__flood_8c.html#a6bee3a2ba460b276a55915e4f96dae62">ospf6_decrement_retrans_count</a> (rem);
          <a class="code" href="ospf6__lsdb_8c.html#a57848d384aafd619bd84c654fb9ed146">ospf6_lsdb_remove</a> (rem, from-&gt;<a class="code" href="structospf6__neighbor.html#a6e96ad2f82d2741e769bc179d35e583f">retrans_list</a>);
        }

      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Possibly acknowledge and then discard&quot;</span>);

      <span class="comment">/* (b) possibly acknowledge */</span>
      <a class="code" href="ospf6__flood_8c.html#a98033432ac67097bcf4c1701a5ed2515">ospf6_acknowledge_lsa</a> (<span class="keyword">new</span>, ismore_recent, from);

      <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* (8) previous database copy is more recent */</span>
    {
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (old);

      <span class="comment">/* If database copy is in &#39;Seqnumber Wrapping&#39;,</span>
<span class="comment">         simply discard the received LSA */</span>
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#acde3ad184b10ca14f3eef7b2ab655ce6">OSPF6_LSA_IS_MAXAGE</a> (old) &amp;&amp;
          old-&gt;header-&gt;seqnum == htonl (<a class="code" href="ospf6__proto_8h.html#a35f49b34e56993fe20d3a21d144c16d3">MAX_SEQUENCE_NUMBER</a>))
        {
          <span class="keywordflow">if</span> (is_debug)
            {
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;The LSA is in Seqnumber Wrapping&quot;</span>);
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;MaxAge &amp; MaxSeqNum, discard&quot;</span>);
            }
          <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
          <span class="keywordflow">return</span>;
        }

      <span class="comment">/* Otherwise, Send database copy of this LSA to this neighbor */</span>
        {
          <span class="keywordflow">if</span> (is_debug)
            {
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Database copy is more recent.&quot;</span>);
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Send back directly and then discard&quot;</span>);
            }

          <span class="comment">/* XXX, MinLSArrival check !? RFC 2328 13 (8) */</span>

          <a class="code" href="ospf6__lsdb_8c.html#a0b328a0b2493e0e549d003f50003a199">ospf6_lsdb_add</a> (<a class="code" href="ospf6__lsa_8c.html#a98dc000e578715b010159ca0c5b38a07">ospf6_lsa_copy</a> (old), from-&gt;<a class="code" href="structospf6__neighbor.html#ac3f142375bf4e9e7c8e54daed55b4ca4">lsupdate_list</a>);
          <span class="keywordflow">if</span> (from-&gt;<a class="code" href="structospf6__neighbor.html#ac7e6540e3ce6bd90bc1603a529648a86">thread_send_lsupdate</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
            from-&gt;<a class="code" href="structospf6__neighbor.html#ac7e6540e3ce6bd90bc1603a529648a86">thread_send_lsupdate</a> =
              <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#a50608f7c51e0c039c4735781d1f66690">ospf6_lsupdate_send_neighbor</a>, from, 0);
          <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
          <span class="keywordflow">return</span>;
        }
      <span class="keywordflow">return</span>;
    }
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ab5ea0cbe048efb63f24cf10f018e8afa"></a><!-- doxytag: member="ospf6_flood.h::conf_debug_ospf6_flooding" ref="ab5ea0cbe048efb63f24cf10f018e8afa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char <a class="el" href="ospf6__flood_8h.html#ab5ea0cbe048efb63f24cf10f018e8afa">conf_debug_ospf6_flooding</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00045">45</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="ospf6__flood_8h.html">ospf6_flood.h</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:26 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
