<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: isisd/isis_circuit.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('isis__circuit_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">isisd/isis_circuit.c</div>  </div>
</div>
<div class="contents">
<a href="isis__circuit_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * IS-IS Rout(e)ing protocol - isis_circuit.h</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright (C) 2001,2002   Sampo Saaristo</span>
<a name="l00005"></a>00005 <span class="comment"> *                           Tampere University of Technology      </span>
<a name="l00006"></a>00006 <span class="comment"> *                           Institute of Communications Engineering</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * This program is free software; you can redistribute it and/or modify it </span>
<a name="l00009"></a>00009 <span class="comment"> * under the terms of the GNU General Public Licenseas published by the Free </span>
<a name="l00010"></a>00010 <span class="comment"> * Software Foundation; either version 2 of the License, or (at your option) </span>
<a name="l00011"></a>00011 <span class="comment"> * any later version.</span>
<a name="l00012"></a>00012 <span class="comment"> *</span>
<a name="l00013"></a>00013 <span class="comment"> * This program is distributed in the hope that it will be useful,but WITHOUT </span>
<a name="l00014"></a>00014 <span class="comment"> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or </span>
<a name="l00015"></a>00015 <span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for </span>
<a name="l00016"></a>00016 <span class="comment"> * more details.</span>
<a name="l00017"></a>00017 <span class="comment"></span>
<a name="l00018"></a>00018 <span class="comment"> * You should have received a copy of the GNU General Public License along </span>
<a name="l00019"></a>00019 <span class="comment"> * with this program; if not, write to the Free Software Foundation, Inc., </span>
<a name="l00020"></a>00020 <span class="comment"> * 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</span>
<a name="l00021"></a>00021 <span class="comment"> */</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;<a class="code" href="zebra_8h.html">zebra.h</a>&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#ifdef GNU_LINUX</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span><span class="preprocessor">#include &lt;net/ethernet.h&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#else</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span><span class="preprocessor">#include &lt;netinet/if_ether.h&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#endif</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span>
<a name="l00029"></a>00029 <span class="preprocessor">#ifndef ETHER_ADDR_LEN</span>
<a name="l00030"></a><a class="code" href="isis__circuit_8c.html#abf4fcaacb1ad2010711b7c880ec2ed20">00030</a> <span class="preprocessor"></span><span class="preprocessor">#define ETHER_ADDR_LEN  ETHERADDRL</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="log_8h.html">log.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="memory_8h.html">memory.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="if_8h.html">if.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="linklist_8h.html">linklist.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="command_8h.html">command.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="thread_8h.html">thread.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="hash_8h.html">hash.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="prefix_8h.html">prefix.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="stream_8h.html">stream.h</a>&quot;</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="dict_8h.html">isisd/dict.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="iso_8h.html">isisd/include-netbsd/iso.h</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="isis__constants_8h.html">isisd/isis_constants.h</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="isis__common_8h.html">isisd/isis_common.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="isis__circuit_8h.html">isisd/isis_circuit.h</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="isis__tlv_8h.html">isisd/isis_tlv.h</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="isis__lsp_8h.html">isisd/isis_lsp.h</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="isis__pdu_8h.html">isisd/isis_pdu.h</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="isis__network_8h.html">isisd/isis_network.h</a>&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="isis__misc_8h.html">isisd/isis_misc.h</a>&quot;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="isis__constants_8h.html">isisd/isis_constants.h</a>&quot;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;<a class="code" href="isis__adjacency_8h.html">isisd/isis_adjacency.h</a>&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;<a class="code" href="isis__dr_8h.html">isisd/isis_dr.h</a>&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;<a class="code" href="isis__flags_8h.html">isisd/isis_flags.h</a>&quot;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &quot;<a class="code" href="isisd_8h.html">isisd/isisd.h</a>&quot;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;<a class="code" href="isis__csm_8h.html">isisd/isis_csm.h</a>&quot;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &quot;<a class="code" href="isis__events_8h.html">isisd/isis_events.h</a>&quot;</span>
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structthread__master.html">thread_master</a> *<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>;
<a name="l00062"></a>00062 <span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structisis.html">isis</a> *<a class="code" href="isis__adjacency_8c.html#aa8cfdc8f7777fd242bd2c45f3a48b950">isis</a>;
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 <span class="comment">/*</span>
<a name="l00065"></a>00065 <span class="comment"> * Prototypes.</span>
<a name="l00066"></a>00066 <span class="comment"> */</span>
<a name="l00067"></a>00067 <span class="keywordtype">void</span> <a class="code" href="isis__circuit_8c.html#a45bfcf431df2ee8c5d4bbf23b5d3104e">isis_circuit_down</a>(<span class="keyword">struct</span> <a class="code" href="structisis__circuit.html">isis_circuit</a> *);
<a name="l00068"></a>00068 <span class="keywordtype">int</span> <a class="code" href="isis__circuit_8c.html#a30f2f4ba1a5ce5e5d838e38e5bb5a32e">isis_interface_config_write</a>(<span class="keyword">struct</span> <a class="code" href="structvty.html">vty</a> *);
<a name="l00069"></a>00069 <span class="keywordtype">int</span> <a class="code" href="isis__circuit_8c.html#a8105376f97b6cc730ec0daeeff8d21a3">isis_if_new_hook</a>(<span class="keyword">struct</span> <a class="code" href="structinterface.html">interface</a> *);
<a name="l00070"></a>00070 <span class="keywordtype">int</span> <a class="code" href="isis__circuit_8c.html#ae0cff0254c709b737c11ad3827e2deee">isis_if_delete_hook</a>(<span class="keyword">struct</span> <a class="code" href="structinterface.html">interface</a> *);
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *
<a name="l00073"></a><a class="code" href="isis__circuit_8h.html#a7e535af52a96721b303a5c3617873f42">00073</a> <a class="code" href="isis__circuit_8c.html#a9ceb5807f17c758f59952a6861ab2d3a">isis_circuit_new</a> ()
<a name="l00074"></a>00074 {
<a name="l00075"></a>00075   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l00076"></a>00076   <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>;
<a name="l00077"></a>00077 
<a name="l00078"></a>00078   circuit = <a class="code" href="memory_8h.html#a7826e4ed1d152cad0666dcf43f11f663">XCALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba21e19415e532cc6bcf00314650a5a8f4">MTYPE_ISIS_CIRCUIT</a>, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structisis__circuit.html">isis_circuit</a>));
<a name="l00079"></a>00079   <span class="keywordflow">if</span> (circuit)
<a name="l00080"></a>00080     {
<a name="l00081"></a>00081       <span class="comment">/* set default metrics for circuit */</span>
<a name="l00082"></a>00082       <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++)
<a name="l00083"></a>00083     {
<a name="l00084"></a>00084       circuit-&gt;<a class="code" href="structisis__circuit.html#a33545b43653e59a814cbd283c3f8c056">metrics</a>[<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>].<a class="code" href="structmetric.html#ae927ddb546511096f632820b678d73bf">metric_default</a> = <a class="code" href="isis__constants_8h.html#ae0395bf404df3647661120cefe80c298">DEFAULT_CIRCUIT_METRICS</a>;
<a name="l00085"></a>00085       circuit-&gt;<a class="code" href="structisis__circuit.html#a33545b43653e59a814cbd283c3f8c056">metrics</a>[<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>].<a class="code" href="structmetric.html#ad32785c7cdf67ab7a3f5c5da004a7e9c">metric_expense</a> = <a class="code" href="isis__constants_8h.html#a8e4a0ce9ffbaa12adf610ab7d67653c5">METRICS_UNSUPPORTED</a>;
<a name="l00086"></a>00086       circuit-&gt;<a class="code" href="structisis__circuit.html#a33545b43653e59a814cbd283c3f8c056">metrics</a>[<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>].<a class="code" href="structmetric.html#a315704ab59d2e6c334f2e2b6b4901e18">metric_error</a> = <a class="code" href="isis__constants_8h.html#a8e4a0ce9ffbaa12adf610ab7d67653c5">METRICS_UNSUPPORTED</a>;
<a name="l00087"></a>00087       circuit-&gt;<a class="code" href="structisis__circuit.html#a33545b43653e59a814cbd283c3f8c056">metrics</a>[<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>].<a class="code" href="structmetric.html#aa373451a3966142956168440f174d1c5">metric_delay</a> = <a class="code" href="isis__constants_8h.html#a8e4a0ce9ffbaa12adf610ab7d67653c5">METRICS_UNSUPPORTED</a>;
<a name="l00088"></a>00088       circuit-&gt;<a class="code" href="structisis__circuit.html#abf3f18b710cf84b23e7005c08e6594b2">te_metric</a>[<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>] = <a class="code" href="isis__constants_8h.html#ae0395bf404df3647661120cefe80c298">DEFAULT_CIRCUIT_METRICS</a>;
<a name="l00089"></a>00089     }
<a name="l00090"></a>00090     }
<a name="l00091"></a>00091   <span class="keywordflow">else</span>
<a name="l00092"></a>00092     {
<a name="l00093"></a>00093       <a class="code" href="log_8h.html#aaf50b52a949696adb9e77153b08545ad">zlog_err</a> (<span class="stringliteral">&quot;Can&#39;t malloc isis circuit&quot;</span>);
<a name="l00094"></a>00094       <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00095"></a>00095     }
<a name="l00096"></a>00096 
<a name="l00097"></a>00097   <span class="keywordflow">return</span> circuit;
<a name="l00098"></a>00098 }
<a name="l00099"></a>00099 
<a name="l00100"></a>00100 <span class="keywordtype">void</span>
<a name="l00101"></a><a class="code" href="isis__circuit_8h.html#a93edd9bcc18156fda5f2a2e261e422f8">00101</a> <a class="code" href="isis__circuit_8c.html#a93edd9bcc18156fda5f2a2e261e422f8">isis_circuit_configure</a> (<span class="keyword">struct</span> <a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit, <span class="keyword">struct</span> <a class="code" href="structisis__area.html">isis_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>)
<a name="l00102"></a>00102 {
<a name="l00103"></a>00103   <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>;
<a name="l00104"></a>00104   circuit-&gt;<a class="code" href="structisis__circuit.html#a4284617c89806a77b3c2314e15ac508b">area</a> = <a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
<a name="l00105"></a>00105   <span class="comment">/*</span>
<a name="l00106"></a>00106 <span class="comment">   * The level for the circuit is same as for the area, unless configured</span>
<a name="l00107"></a>00107 <span class="comment">   * otherwise.</span>
<a name="l00108"></a>00108 <span class="comment">   */</span>
<a name="l00109"></a>00109   circuit-&gt;<a class="code" href="structisis__circuit.html#ab222d6d0b054faa159d72bcb9768b3fb">circuit_is_type</a> = area-&gt;<a class="code" href="structisis__area.html#a81021eb6fb20d16db0d13c335baecdae">is_type</a>;
<a name="l00110"></a>00110   <span class="comment">/*</span>
<a name="l00111"></a>00111 <span class="comment">   * Default values</span>
<a name="l00112"></a>00112 <span class="comment">   */</span>
<a name="l00113"></a>00113   <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++)
<a name="l00114"></a>00114     {
<a name="l00115"></a>00115       circuit-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>] = <a class="code" href="isis__constants_8h.html#ad91e2777a540273c5c76b631c2cafe06">HELLO_INTERVAL</a>;
<a name="l00116"></a>00116       circuit-&gt;<a class="code" href="structisis__circuit.html#a9af263fd35717a7f759e4a0cf2fd1a2b">hello_multiplier</a>[<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>] = <a class="code" href="isis__constants_8h.html#a78063dfa967b692d4129669779c4b5d9">HELLO_MULTIPLIER</a>;
<a name="l00117"></a>00117       circuit-&gt;<a class="code" href="structisis__circuit.html#a1b3a587132c475f3b90b5f8b03ec182d">csnp_interval</a>[<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>] = <a class="code" href="isis__constants_8h.html#ade8e15a2ed12580594384b1d7efff5b8">CSNP_INTERVAL</a>;
<a name="l00118"></a>00118       circuit-&gt;<a class="code" href="structisis__circuit.html#ab73d895f1c1588eb68e5b467f7f1b479">psnp_interval</a>[<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>] = <a class="code" href="isis__constants_8h.html#a906a329e6db489e444fe165ee84f4a12">PSNP_INTERVAL</a>;
<a name="l00119"></a>00119       circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a9087f16298d7bbf26ac8b480c932ab8d">priority</a>[<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>] = <a class="code" href="isis__constants_8h.html#a0756f011ef667460d583017366823244">DEFAULT_PRIORITY</a>;
<a name="l00120"></a>00120     }
<a name="l00121"></a>00121   <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a569e39bbf7fafd533eae2eeafa671b8c">circ_type</a> == <a class="code" href="isis__circuit_8h.html#a01a94c5f24c88efb64f791a749ae8f95">CIRCUIT_T_BROADCAST</a>)
<a name="l00122"></a>00122     {
<a name="l00123"></a>00123       circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#ada9bf2584373a37aed06b2e4c9e796f9">adjdb</a>[0] = <a class="code" href="linklist_8c.html#af156f4ae343ef4a625f75b6c38845aef">list_new</a> ();
<a name="l00124"></a>00124       circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#ada9bf2584373a37aed06b2e4c9e796f9">adjdb</a>[1] = <a class="code" href="linklist_8c.html#af156f4ae343ef4a625f75b6c38845aef">list_new</a> ();
<a name="l00125"></a>00125       circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a83676730231d3a5aad5d5914957a2b68">pad_hellos</a> = 1;
<a name="l00126"></a>00126     }
<a name="l00127"></a>00127   circuit-&gt;<a class="code" href="structisis__circuit.html#af1aaab2f0fb562b9c38d9b67828fa8f1">lsp_interval</a> = <a class="code" href="isis__constants_8h.html#a1c070fe4231b3f93ea76aeba0e75e7ca">LSP_INTERVAL</a>;
<a name="l00128"></a>00128 
<a name="l00129"></a>00129   <span class="comment">/*</span>
<a name="l00130"></a>00130 <span class="comment">   * Add the circuit into area</span>
<a name="l00131"></a>00131 <span class="comment">   */</span>
<a name="l00132"></a>00132   <a class="code" href="linklist_8c.html#adb2a0478aba995441aaf691d1f6fe5db">listnode_add</a> (area-&gt;<a class="code" href="structisis__area.html#a1ef8753b22245b7d8fff0331deef3b21">circuit_list</a>, circuit);
<a name="l00133"></a>00133 
<a name="l00134"></a>00134   circuit-&gt;<a class="code" href="structisis__circuit.html#abac1ddd5e6459cc84fe32064f6643471">idx</a> = <a class="code" href="isis__flags_8c.html#a38e4b3f065493a2d165f28cc76402624">flags_get_index</a> (&amp;area-&gt;<a class="code" href="structisis__area.html#ac786b50a7d59469f38a0a74310a7bfa4">flags</a>);
<a name="l00135"></a>00135   circuit-&gt;<a class="code" href="structisis__circuit.html#a3540c30e2a6967daf9f9e1b76b00e2be">lsp_queue</a> = <a class="code" href="linklist_8c.html#af156f4ae343ef4a625f75b6c38845aef">list_new</a> ();
<a name="l00136"></a>00136 
<a name="l00137"></a>00137   <span class="keywordflow">return</span>;
<a name="l00138"></a>00138 }
<a name="l00139"></a>00139 
<a name="l00140"></a>00140 <span class="keywordtype">void</span>
<a name="l00141"></a><a class="code" href="isis__circuit_8h.html#ae430309397e7149d83c28730eb4a9c0b">00141</a> <a class="code" href="isis__circuit_8c.html#ae430309397e7149d83c28730eb4a9c0b">isis_circuit_deconfigure</a> (<span class="keyword">struct</span> <a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit,
<a name="l00142"></a>00142               <span class="keyword">struct</span> <a class="code" href="structisis__area.html">isis_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>)
<a name="l00143"></a>00143 {
<a name="l00144"></a>00144 
<a name="l00145"></a>00145   <span class="comment">/* Remove circuit from area */</span>
<a name="l00146"></a>00146   <a class="code" href="linklist_8c.html#a8cbdaa18db1ceacaadbc457a0c634e02">listnode_delete</a> (area-&gt;<a class="code" href="structisis__area.html#a1ef8753b22245b7d8fff0331deef3b21">circuit_list</a>, circuit);
<a name="l00147"></a>00147   <span class="comment">/* Free the index of SRM and SSN flags */</span>
<a name="l00148"></a>00148   <a class="code" href="isis__flags_8c.html#a76d181d8ee84e85cc39e217788ef16c5">flags_free_index</a> (&amp;area-&gt;<a class="code" href="structisis__area.html#ac786b50a7d59469f38a0a74310a7bfa4">flags</a>, circuit-&gt;<a class="code" href="structisis__circuit.html#abac1ddd5e6459cc84fe32064f6643471">idx</a>);
<a name="l00149"></a>00149 
<a name="l00150"></a>00150   <span class="keywordflow">return</span>;
<a name="l00151"></a>00151 }
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *
<a name="l00154"></a><a class="code" href="isis__circuit_8h.html#af5503c527a2e390b90d9fb6fca3639d0">00154</a> <a class="code" href="isis__circuit_8c.html#af5503c527a2e390b90d9fb6fca3639d0">circuit_lookup_by_ifp</a> (<span class="keyword">struct</span> <a class="code" href="structinterface.html">interface</a> *ifp, <span class="keyword">struct</span> <a class="code" href="structlist.html">list</a> *<a class="code" href="structlist.html">list</a>)
<a name="l00155"></a>00155 {
<a name="l00156"></a>00156   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00157"></a>00157   <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;
<a name="l00158"></a>00158 
<a name="l00159"></a>00159   <span class="keywordflow">if</span> (!list)
<a name="l00160"></a>00160     <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00161"></a>00161 
<a name="l00162"></a>00162   <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (list, node, circuit))
<a name="l00163"></a>00163     <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#ab03cac6463284a4ce8c1eb19e49f3b6d">interface</a> == ifp)
<a name="l00164"></a>00164       <span class="keywordflow">return</span> circuit;
<a name="l00165"></a>00165   
<a name="l00166"></a>00166   <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00167"></a>00167 }
<a name="l00168"></a>00168 
<a name="l00169"></a>00169 <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *
<a name="l00170"></a><a class="code" href="isis__circuit_8h.html#ac745f22b7616f69709cf336bfe91c9cc">00170</a> <a class="code" href="isis__circuit_8c.html#ac745f22b7616f69709cf336bfe91c9cc">circuit_scan_by_ifp</a> (<span class="keyword">struct</span> <a class="code" href="structinterface.html">interface</a> *ifp)
<a name="l00171"></a>00171 {
<a name="l00172"></a>00172   <span class="keyword">struct </span><a class="code" href="structisis__area.html">isis_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
<a name="l00173"></a>00173   <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;
<a name="l00174"></a>00174   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l00175"></a>00175 
<a name="l00176"></a>00176   <span class="keywordflow">if</span> (!isis-&gt;<a class="code" href="structisis.html#a0898d0cb839d3d63fc69f5a4cd02e512">area_list</a>)
<a name="l00177"></a>00177     <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00178"></a>00178 
<a name="l00179"></a>00179   <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (isis-&gt;<a class="code" href="structisis.html#a0898d0cb839d3d63fc69f5a4cd02e512">area_list</a>, node, area))
<a name="l00180"></a>00180     {
<a name="l00181"></a>00181       circuit = <a class="code" href="isis__circuit_8c.html#af5503c527a2e390b90d9fb6fca3639d0">circuit_lookup_by_ifp</a> (ifp, area-&gt;<a class="code" href="structisis__area.html#a1ef8753b22245b7d8fff0331deef3b21">circuit_list</a>);
<a name="l00182"></a>00182       <span class="keywordflow">if</span> (circuit)
<a name="l00183"></a>00183     <span class="keywordflow">return</span> circuit;
<a name="l00184"></a>00184     }
<a name="l00185"></a>00185 
<a name="l00186"></a>00186   <span class="keywordflow">return</span> <a class="code" href="isis__circuit_8c.html#af5503c527a2e390b90d9fb6fca3639d0">circuit_lookup_by_ifp</a> (ifp, isis-&gt;<a class="code" href="structisis.html#a464d8575b5b93d8eb6d869144b4a3220">init_circ_list</a>);
<a name="l00187"></a>00187 }
<a name="l00188"></a>00188 
<a name="l00189"></a>00189 <span class="keywordtype">void</span>
<a name="l00190"></a><a class="code" href="isis__circuit_8h.html#a790e44fd592225c189c35ef503f4f117">00190</a> <a class="code" href="isis__circuit_8c.html#a790e44fd592225c189c35ef503f4f117">isis_circuit_del</a> (<span class="keyword">struct</span> <a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit)
<a name="l00191"></a>00191 {
<a name="l00192"></a>00192 
<a name="l00193"></a>00193   <span class="keywordflow">if</span> (!circuit)
<a name="l00194"></a>00194     <span class="keywordflow">return</span>;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196   <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a569e39bbf7fafd533eae2eeafa671b8c">circ_type</a> == <a class="code" href="isis__circuit_8h.html#a01a94c5f24c88efb64f791a749ae8f95">CIRCUIT_T_BROADCAST</a>)
<a name="l00197"></a>00197     {
<a name="l00198"></a>00198       <span class="comment">/* destroy adjacency databases */</span>
<a name="l00199"></a>00199       <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#ada9bf2584373a37aed06b2e4c9e796f9">adjdb</a>[0])
<a name="l00200"></a>00200     <a class="code" href="linklist_8c.html#ab5fdf1a904264be077ce19a432b1b119">list_delete</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#ada9bf2584373a37aed06b2e4c9e796f9">adjdb</a>[0]);
<a name="l00201"></a>00201       <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#ada9bf2584373a37aed06b2e4c9e796f9">adjdb</a>[1])
<a name="l00202"></a>00202     <a class="code" href="linklist_8c.html#ab5fdf1a904264be077ce19a432b1b119">list_delete</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#ada9bf2584373a37aed06b2e4c9e796f9">adjdb</a>[1]);
<a name="l00203"></a>00203       <span class="comment">/* destroy neighbour lists */</span>
<a name="l00204"></a>00204       <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a1a8b5b8fcf6defb0b21b509d99953742">lan_neighs</a>[0])
<a name="l00205"></a>00205     <a class="code" href="linklist_8c.html#ab5fdf1a904264be077ce19a432b1b119">list_delete</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a1a8b5b8fcf6defb0b21b509d99953742">lan_neighs</a>[0]);
<a name="l00206"></a>00206       <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a1a8b5b8fcf6defb0b21b509d99953742">lan_neighs</a>[1])
<a name="l00207"></a>00207     <a class="code" href="linklist_8c.html#ab5fdf1a904264be077ce19a432b1b119">list_delete</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a1a8b5b8fcf6defb0b21b509d99953742">lan_neighs</a>[1]);
<a name="l00208"></a>00208       <span class="comment">/* destroy addresses */</span>
<a name="l00209"></a>00209     }
<a name="l00210"></a>00210   <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#adcde796f44a1e725abe092f95a6cb075">ip_addrs</a>)
<a name="l00211"></a>00211     <a class="code" href="linklist_8c.html#ab5fdf1a904264be077ce19a432b1b119">list_delete</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#adcde796f44a1e725abe092f95a6cb075">ip_addrs</a>);
<a name="l00212"></a>00212 <span class="preprocessor">#ifdef HAVE_IPV6</span>
<a name="l00213"></a>00213 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (circuit-&gt;ipv6_link)
<a name="l00214"></a>00214     <a class="code" href="linklist_8c.html#ab5fdf1a904264be077ce19a432b1b119">list_delete</a> (circuit-&gt;ipv6_link);
<a name="l00215"></a>00215   <span class="keywordflow">if</span> (circuit-&gt;ipv6_non_link)
<a name="l00216"></a>00216     <a class="code" href="linklist_8c.html#ab5fdf1a904264be077ce19a432b1b119">list_delete</a> (circuit-&gt;ipv6_non_link);
<a name="l00217"></a>00217 <span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
<a name="l00218"></a>00218 
<a name="l00219"></a>00219   <span class="comment">/* and lastly the circuit itself */</span>
<a name="l00220"></a>00220   <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba21e19415e532cc6bcf00314650a5a8f4">MTYPE_ISIS_CIRCUIT</a>, circuit);
<a name="l00221"></a>00221 
<a name="l00222"></a>00222   <span class="keywordflow">return</span>;
<a name="l00223"></a>00223 }
<a name="l00224"></a>00224 
<a name="l00225"></a>00225 <span class="keywordtype">void</span>
<a name="l00226"></a><a class="code" href="isis__circuit_8h.html#a495d9b0310d866b75438c453c12a899f">00226</a> <a class="code" href="isis__circuit_8c.html#a52dfd04507c31c59f97c524f4b042483">isis_circuit_add_addr</a> (<span class="keyword">struct</span> <a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit,
<a name="l00227"></a>00227                <span class="keyword">struct</span> <a class="code" href="structconnected.html">connected</a> *<a class="code" href="structconnected.html">connected</a>)
<a name="l00228"></a>00228 {
<a name="l00229"></a>00229   <span class="keyword">struct </span><a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *ipv4;
<a name="l00230"></a>00230   u_char buf[BUFSIZ];
<a name="l00231"></a>00231 <span class="preprocessor">#ifdef HAVE_IPV6</span>
<a name="l00232"></a>00232 <span class="preprocessor"></span>  <span class="keyword">struct </span>prefix_ipv6 *ipv6;
<a name="l00233"></a>00233 <span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
<a name="l00234"></a>00234 
<a name="l00235"></a>00235   <span class="keywordflow">if</span> (!circuit-&gt;<a class="code" href="structisis__circuit.html#adcde796f44a1e725abe092f95a6cb075">ip_addrs</a>)
<a name="l00236"></a>00236     circuit-&gt;<a class="code" href="structisis__circuit.html#adcde796f44a1e725abe092f95a6cb075">ip_addrs</a> = <a class="code" href="linklist_8c.html#af156f4ae343ef4a625f75b6c38845aef">list_new</a> ();
<a name="l00237"></a>00237 <span class="preprocessor">#ifdef HAVE_IPV6</span>
<a name="l00238"></a>00238 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (!circuit-&gt;ipv6_link)
<a name="l00239"></a>00239     circuit-&gt;ipv6_link = <a class="code" href="linklist_8c.html#af156f4ae343ef4a625f75b6c38845aef">list_new</a> ();
<a name="l00240"></a>00240   <span class="keywordflow">if</span> (!circuit-&gt;ipv6_non_link)
<a name="l00241"></a>00241     circuit-&gt;ipv6_non_link = <a class="code" href="linklist_8c.html#af156f4ae343ef4a625f75b6c38845aef">list_new</a> ();
<a name="l00242"></a>00242 <span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
<a name="l00243"></a>00243 
<a name="l00244"></a>00244   memset (&amp;buf, 0, BUFSIZ);
<a name="l00245"></a>00245   <span class="keywordflow">if</span> (connected-&gt;<a class="code" href="structconnected.html#a288d9248b21b8e3999e03ceaa9bb70db">address</a>-&gt;<a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a> == AF_INET)
<a name="l00246"></a>00246     {
<a name="l00247"></a>00247       ipv4 = <a class="code" href="prefix_8c.html#af674876d8d874e88225f559322d797ac">prefix_ipv4_new</a> ();
<a name="l00248"></a>00248       ipv4-&gt;<a class="code" href="structprefix__ipv4.html#ab96da4bf1eb37195bd564bcf1126a16a">prefixlen</a> = connected-&gt;<a class="code" href="structconnected.html#a288d9248b21b8e3999e03ceaa9bb70db">address</a>-&gt;<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a>;
<a name="l00249"></a>00249       ipv4-&gt;prefix = connected-&gt;<a class="code" href="structconnected.html#a288d9248b21b8e3999e03ceaa9bb70db">address</a>-&gt;u.<a class="code" href="structprefix.html#ab37b8922554b41b7dc2417d8f37e7829">prefix4</a>;
<a name="l00250"></a>00250       <a class="code" href="linklist_8c.html#adb2a0478aba995441aaf691d1f6fe5db">listnode_add</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#adcde796f44a1e725abe092f95a6cb075">ip_addrs</a>, ipv4);
<a name="l00251"></a>00251       <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a4284617c89806a77b3c2314e15ac508b">area</a>)
<a name="l00252"></a>00252     <a class="code" href="isis__lsp_8c.html#a31456cf3ff9953708c1d0328a99bfacc">lsp_regenerate_schedule</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a4284617c89806a77b3c2314e15ac508b">area</a>);
<a name="l00253"></a>00253 
<a name="l00254"></a>00254 <span class="preprocessor">#ifdef EXTREME_DEBUG</span>
<a name="l00255"></a>00255 <span class="preprocessor"></span>      <a class="code" href="prefix_8c.html#a8b848557695ae5694bd2282eba23e367">prefix2str</a> (connected-&gt;<a class="code" href="structconnected.html#a288d9248b21b8e3999e03ceaa9bb70db">address</a>, buf, BUFSIZ);
<a name="l00256"></a>00256       <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Added IP address %s to circuit %d&quot;</span>, buf,
<a name="l00257"></a>00257          circuit-&gt;<a class="code" href="structisis__circuit.html#a10453f6bcc1e8f1cb466240a81836ba9">circuit_id</a>);
<a name="l00258"></a>00258 <span class="preprocessor">#endif </span><span class="comment">/* EXTREME_DEBUG */</span>
<a name="l00259"></a>00259     }
<a name="l00260"></a>00260 <span class="preprocessor">#ifdef HAVE_IPV6</span>
<a name="l00261"></a>00261 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (connected-&gt;<a class="code" href="structconnected.html#a288d9248b21b8e3999e03ceaa9bb70db">address</a>-&gt;<a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a> == AF_INET6)
<a name="l00262"></a>00262     {
<a name="l00263"></a>00263       ipv6 = prefix_ipv6_new ();
<a name="l00264"></a>00264       ipv6-&gt;prefixlen = connected-&gt;<a class="code" href="structconnected.html#a288d9248b21b8e3999e03ceaa9bb70db">address</a>-&gt;<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a>;
<a name="l00265"></a>00265       ipv6-&gt;prefix = connected-&gt;<a class="code" href="structconnected.html#a288d9248b21b8e3999e03ceaa9bb70db">address</a>-&gt;u.prefix6;
<a name="l00266"></a>00266 
<a name="l00267"></a>00267       <span class="keywordflow">if</span> (IN6_IS_ADDR_LINKLOCAL (&amp;ipv6-&gt;prefix))
<a name="l00268"></a>00268     <a class="code" href="linklist_8c.html#adb2a0478aba995441aaf691d1f6fe5db">listnode_add</a> (circuit-&gt;ipv6_link, ipv6);
<a name="l00269"></a>00269       <span class="keywordflow">else</span>
<a name="l00270"></a>00270     <a class="code" href="linklist_8c.html#adb2a0478aba995441aaf691d1f6fe5db">listnode_add</a> (circuit-&gt;ipv6_non_link, ipv6);
<a name="l00271"></a>00271       <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a4284617c89806a77b3c2314e15ac508b">area</a>)
<a name="l00272"></a>00272     <a class="code" href="isis__lsp_8c.html#a31456cf3ff9953708c1d0328a99bfacc">lsp_regenerate_schedule</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a4284617c89806a77b3c2314e15ac508b">area</a>);
<a name="l00273"></a>00273 
<a name="l00274"></a>00274 <span class="preprocessor">#ifdef EXTREME_DEBUG</span>
<a name="l00275"></a>00275 <span class="preprocessor"></span>      <a class="code" href="prefix_8c.html#a8b848557695ae5694bd2282eba23e367">prefix2str</a> (connected-&gt;<a class="code" href="structconnected.html#a288d9248b21b8e3999e03ceaa9bb70db">address</a>, buf, BUFSIZ);
<a name="l00276"></a>00276       <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Added IPv6 address %s to circuit %d&quot;</span>, buf,
<a name="l00277"></a>00277          circuit-&gt;<a class="code" href="structisis__circuit.html#a10453f6bcc1e8f1cb466240a81836ba9">circuit_id</a>);
<a name="l00278"></a>00278 <span class="preprocessor">#endif </span><span class="comment">/* EXTREME_DEBUG */</span>
<a name="l00279"></a>00279     }
<a name="l00280"></a>00280 <span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
<a name="l00281"></a>00281   <span class="keywordflow">return</span>;
<a name="l00282"></a>00282 }
<a name="l00283"></a>00283 
<a name="l00284"></a>00284 <span class="keywordtype">void</span>
<a name="l00285"></a><a class="code" href="isis__circuit_8h.html#ad859d65f3ad5e90d06b06e228701c3ec">00285</a> <a class="code" href="isis__circuit_8c.html#a40467f80d25a3d5fc46184634d38a163">isis_circuit_del_addr</a> (<span class="keyword">struct</span> <a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit,
<a name="l00286"></a>00286                <span class="keyword">struct</span> <a class="code" href="structconnected.html">connected</a> *<a class="code" href="structconnected.html">connected</a>)
<a name="l00287"></a>00287 {
<a name="l00288"></a>00288   <span class="keyword">struct </span><a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *ipv4, *<a class="code" href="spgrid_8c.html#addd335afdb9230f431842ebb6cbbce62">ip</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00289"></a>00289   <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;
<a name="l00290"></a>00290   u_char buf[BUFSIZ];
<a name="l00291"></a>00291 <span class="preprocessor">#ifdef HAVE_IPV6</span>
<a name="l00292"></a>00292 <span class="preprocessor"></span>  <span class="keyword">struct </span>prefix_ipv6 *ipv6, *ip6 = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00293"></a>00293   <span class="keywordtype">int</span> found = 0;
<a name="l00294"></a>00294 <span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
<a name="l00295"></a>00295 
<a name="l00296"></a>00296   memset (&amp;buf, 0, BUFSIZ);
<a name="l00297"></a>00297   <span class="keywordflow">if</span> (connected-&gt;<a class="code" href="structconnected.html#a288d9248b21b8e3999e03ceaa9bb70db">address</a>-&gt;<a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a> == AF_INET)
<a name="l00298"></a>00298     {
<a name="l00299"></a>00299       ipv4 = <a class="code" href="prefix_8c.html#af674876d8d874e88225f559322d797ac">prefix_ipv4_new</a> ();
<a name="l00300"></a>00300       ipv4-&gt;<a class="code" href="structprefix__ipv4.html#ab96da4bf1eb37195bd564bcf1126a16a">prefixlen</a> = connected-&gt;<a class="code" href="structconnected.html#a288d9248b21b8e3999e03ceaa9bb70db">address</a>-&gt;<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a>;
<a name="l00301"></a>00301       ipv4-&gt;prefix = connected-&gt;<a class="code" href="structconnected.html#a288d9248b21b8e3999e03ceaa9bb70db">address</a>-&gt;u.<a class="code" href="structprefix.html#ab37b8922554b41b7dc2417d8f37e7829">prefix4</a>;
<a name="l00302"></a>00302 
<a name="l00303"></a>00303       <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#adcde796f44a1e725abe092f95a6cb075">ip_addrs</a>, node, ip))
<a name="l00304"></a>00304         <span class="keywordflow">if</span> (<a class="code" href="prefix_8c.html#ac3645297b5669182b5052aa7689712af">prefix_same</a> ((<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) ip, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) &amp;ipv4))
<a name="l00305"></a>00305           <span class="keywordflow">break</span>;
<a name="l00306"></a>00306 
<a name="l00307"></a>00307       <span class="keywordflow">if</span> (ip)
<a name="l00308"></a>00308     {
<a name="l00309"></a>00309       <a class="code" href="linklist_8c.html#a8cbdaa18db1ceacaadbc457a0c634e02">listnode_delete</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#adcde796f44a1e725abe092f95a6cb075">ip_addrs</a>, ip);
<a name="l00310"></a>00310       <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a4284617c89806a77b3c2314e15ac508b">area</a>)
<a name="l00311"></a>00311         <a class="code" href="isis__lsp_8c.html#a31456cf3ff9953708c1d0328a99bfacc">lsp_regenerate_schedule</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a4284617c89806a77b3c2314e15ac508b">area</a>);
<a name="l00312"></a>00312     }
<a name="l00313"></a>00313       <span class="keywordflow">else</span>
<a name="l00314"></a>00314     {
<a name="l00315"></a>00315       <a class="code" href="prefix_8c.html#a8b848557695ae5694bd2282eba23e367">prefix2str</a> (connected-&gt;<a class="code" href="structconnected.html#a288d9248b21b8e3999e03ceaa9bb70db">address</a>, (<span class="keywordtype">char</span> *)buf, BUFSIZ);
<a name="l00316"></a>00316       <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a>(<span class="stringliteral">&quot;Nonexitant ip address %s removal attempt from circuit \</span>
<a name="l00317"></a>00317 <span class="stringliteral">             %d&quot;</span>, buf, circuit-&gt;<a class="code" href="structisis__circuit.html#a10453f6bcc1e8f1cb466240a81836ba9">circuit_id</a>);
<a name="l00318"></a>00318     }
<a name="l00319"></a>00319     }
<a name="l00320"></a>00320 <span class="preprocessor">#ifdef HAVE_IPV6</span>
<a name="l00321"></a>00321 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (connected-&gt;<a class="code" href="structconnected.html#a288d9248b21b8e3999e03ceaa9bb70db">address</a>-&gt;<a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a> == AF_INET6)
<a name="l00322"></a>00322     {
<a name="l00323"></a>00323       ipv6 = prefix_ipv6_new ();
<a name="l00324"></a>00324       ipv6-&gt;prefixlen = connected-&gt;<a class="code" href="structconnected.html#a288d9248b21b8e3999e03ceaa9bb70db">address</a>-&gt;<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a>;
<a name="l00325"></a>00325       ipv6-&gt;prefix = connected-&gt;<a class="code" href="structconnected.html#a288d9248b21b8e3999e03ceaa9bb70db">address</a>-&gt;u.prefix6;
<a name="l00326"></a>00326 
<a name="l00327"></a>00327       <span class="keywordflow">if</span> (IN6_IS_ADDR_LINKLOCAL (&amp;ipv6-&gt;prefix))
<a name="l00328"></a>00328     {
<a name="l00329"></a>00329       <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (circuit-&gt;ipv6_link, node, ip6))
<a name="l00330"></a>00330         {
<a name="l00331"></a>00331           <span class="keywordflow">if</span> (<a class="code" href="prefix_8c.html#ac3645297b5669182b5052aa7689712af">prefix_same</a> ((<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) ip6, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) ipv6))
<a name="l00332"></a>00332         <span class="keywordflow">break</span>;
<a name="l00333"></a>00333         }
<a name="l00334"></a>00334       <span class="keywordflow">if</span> (ip6)
<a name="l00335"></a>00335         {
<a name="l00336"></a>00336           <a class="code" href="linklist_8c.html#a8cbdaa18db1ceacaadbc457a0c634e02">listnode_delete</a> (circuit-&gt;ipv6_link, ip6);
<a name="l00337"></a>00337           found = 1;
<a name="l00338"></a>00338         }
<a name="l00339"></a>00339     }
<a name="l00340"></a>00340       <span class="keywordflow">else</span>
<a name="l00341"></a>00341     {
<a name="l00342"></a>00342       <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (circuit-&gt;ipv6_non_link, node, ip6))
<a name="l00343"></a>00343         {
<a name="l00344"></a>00344           <span class="keywordflow">if</span> (<a class="code" href="prefix_8c.html#ac3645297b5669182b5052aa7689712af">prefix_same</a> ((<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) ip6, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) ipv6))
<a name="l00345"></a>00345         <span class="keywordflow">break</span>;
<a name="l00346"></a>00346         }
<a name="l00347"></a>00347       <span class="keywordflow">if</span> (ip6)
<a name="l00348"></a>00348         {
<a name="l00349"></a>00349           <a class="code" href="linklist_8c.html#a8cbdaa18db1ceacaadbc457a0c634e02">listnode_delete</a> (circuit-&gt;ipv6_non_link, ip6);
<a name="l00350"></a>00350           found = 1;
<a name="l00351"></a>00351         }
<a name="l00352"></a>00352     }
<a name="l00353"></a>00353 
<a name="l00354"></a>00354       <span class="keywordflow">if</span> (!found)
<a name="l00355"></a>00355     {
<a name="l00356"></a>00356       <a class="code" href="prefix_8c.html#a8b848557695ae5694bd2282eba23e367">prefix2str</a> (connected-&gt;<a class="code" href="structconnected.html#a288d9248b21b8e3999e03ceaa9bb70db">address</a>, (<span class="keywordtype">char</span> *)buf, BUFSIZ);
<a name="l00357"></a>00357       <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a>(<span class="stringliteral">&quot;Nonexitant ip address %s removal attempt from \</span>
<a name="l00358"></a>00358 <span class="stringliteral">             circuit %d&quot;</span>, buf, circuit-&gt;<a class="code" href="structisis__circuit.html#a10453f6bcc1e8f1cb466240a81836ba9">circuit_id</a>);
<a name="l00359"></a>00359     }
<a name="l00360"></a>00360       <span class="keywordflow">else</span>
<a name="l00361"></a>00361     <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a4284617c89806a77b3c2314e15ac508b">area</a>)
<a name="l00362"></a>00362       <a class="code" href="isis__lsp_8c.html#a31456cf3ff9953708c1d0328a99bfacc">lsp_regenerate_schedule</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a4284617c89806a77b3c2314e15ac508b">area</a>);
<a name="l00363"></a>00363     }
<a name="l00364"></a>00364 <span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
<a name="l00365"></a>00365   <span class="keywordflow">return</span>;
<a name="l00366"></a>00366 }
<a name="l00367"></a>00367 
<a name="l00368"></a>00368 <span class="keywordtype">void</span>
<a name="l00369"></a><a class="code" href="isis__circuit_8h.html#ae400c0f8f0ed2502bdb49875a3b972f1">00369</a> <a class="code" href="isis__circuit_8c.html#ae400c0f8f0ed2502bdb49875a3b972f1">isis_circuit_if_add</a> (<span class="keyword">struct</span> <a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit, <span class="keyword">struct</span> <a class="code" href="structinterface.html">interface</a> *ifp)
<a name="l00370"></a>00370 {
<a name="l00371"></a>00371   <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
<a name="l00372"></a>00372   <span class="keyword">struct </span><a class="code" href="structconnected.html">connected</a> *conn;
<a name="l00373"></a>00373 
<a name="l00374"></a>00374   circuit-&gt;<a class="code" href="structisis__circuit.html#ab03cac6463284a4ce8c1eb19e49f3b6d">interface</a> = <a class="code" href="structconnected.html#a93c575385a71507f8c29ec26344d09d3">ifp</a>;
<a name="l00375"></a>00375   ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a> = circuit;
<a name="l00376"></a>00376 
<a name="l00377"></a>00377   circuit-&gt;<a class="code" href="structisis__circuit.html#a10453f6bcc1e8f1cb466240a81836ba9">circuit_id</a> = ifp-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a> % 255; <span class="comment">/* FIXME: Why not ? */</span>
<a name="l00378"></a>00378 
<a name="l00379"></a>00379   <span class="comment">/*  isis_circuit_update_addrs (circuit, ifp); */</span>
<a name="l00380"></a>00380 
<a name="l00381"></a>00381   <span class="keywordflow">if</span> (<a class="code" href="if_8c.html#a88f3bd141d217db7e4118a78b1db1b60">if_is_broadcast</a> (ifp))
<a name="l00382"></a>00382     {
<a name="l00383"></a>00383       circuit-&gt;<a class="code" href="structisis__circuit.html#a569e39bbf7fafd533eae2eeafa671b8c">circ_type</a> = <a class="code" href="isis__circuit_8h.html#a01a94c5f24c88efb64f791a749ae8f95">CIRCUIT_T_BROADCAST</a>;
<a name="l00384"></a>00384       <span class="comment">/*</span>
<a name="l00385"></a>00385 <span class="comment">       * Get the Hardware Address</span>
<a name="l00386"></a>00386 <span class="comment">       */</span>
<a name="l00387"></a>00387 <span class="preprocessor">#ifdef HAVE_STRUCT_SOCKADDR_DL</span>
<a name="l00388"></a>00388 <span class="preprocessor"></span><span class="preprocessor">#ifndef SUNOS_5</span>
<a name="l00389"></a>00389 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#ab03cac6463284a4ce8c1eb19e49f3b6d">interface</a>-&gt;sdl.sdl_alen != <a class="code" href="isis__circuit_8c.html#abf4fcaacb1ad2010711b7c880ec2ed20">ETHER_ADDR_LEN</a>)
<a name="l00390"></a>00390     <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;unsupported link layer&quot;</span>);
<a name="l00391"></a>00391       <span class="keywordflow">else</span>
<a name="l00392"></a>00392     <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#ac7adabf9b24b03c93e73bb9b03c2192b">snpa</a>, LLADDR (&amp;circuit-&gt;<a class="code" href="structisis__circuit.html#ab03cac6463284a4ce8c1eb19e49f3b6d">interface</a>-&gt;sdl),
<a name="l00393"></a>00393         <a class="code" href="isis__constants_8h.html#a9822d89774e0d6ddaa06503950130423">ETH_ALEN</a>);
<a name="l00394"></a>00394 <span class="preprocessor">#endif</span>
<a name="l00395"></a>00395 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00396"></a>00396 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#ab03cac6463284a4ce8c1eb19e49f3b6d">interface</a>-&gt;<a class="code" href="structinterface.html#a6521c9be15367445abca01bbba9c2cb4">hw_addr_len</a> != <a class="code" href="isis__constants_8h.html#a9822d89774e0d6ddaa06503950130423">ETH_ALEN</a>)
<a name="l00397"></a>00397     {
<a name="l00398"></a>00398       <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;unsupported link layer&quot;</span>);
<a name="l00399"></a>00399     }
<a name="l00400"></a>00400       <span class="keywordflow">else</span>
<a name="l00401"></a>00401     {
<a name="l00402"></a>00402       <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#ac7adabf9b24b03c93e73bb9b03c2192b">snpa</a>, circuit-&gt;<a class="code" href="structisis__circuit.html#ab03cac6463284a4ce8c1eb19e49f3b6d">interface</a>-&gt;<a class="code" href="structinterface.html#a6fe2f3c7e5be26c4e376b514d86f5c22">hw_addr</a>, <a class="code" href="isis__constants_8h.html#a9822d89774e0d6ddaa06503950130423">ETH_ALEN</a>);
<a name="l00403"></a>00403     }
<a name="l00404"></a>00404 <span class="preprocessor">#ifdef EXTREME_DEGUG</span>
<a name="l00405"></a>00405 <span class="preprocessor"></span>      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;isis_circuit_if_add: if_id %d, isomtu %d snpa %s&quot;</span>,
<a name="l00406"></a>00406          circuit-&gt;<a class="code" href="structisis__circuit.html#ab03cac6463284a4ce8c1eb19e49f3b6d">interface</a>-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a>, <a class="code" href="isis__constants_8h.html#aa507eb18af6ca6d6db6e3db750ab0737">ISO_MTU</a> (circuit),
<a name="l00407"></a>00407          <a class="code" href="isis__misc_8c.html#a9ff6d4a3900eef27814548c4c5357090">snpa_print</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#ac7adabf9b24b03c93e73bb9b03c2192b">snpa</a>));
<a name="l00408"></a>00408 
<a name="l00409"></a>00409 <span class="preprocessor">#endif </span><span class="comment">/* EXTREME_DEBUG */</span>
<a name="l00410"></a>00410 <span class="preprocessor">#endif </span><span class="comment">/* HAVE_STRUCT_SOCKADDR_DL */</span>
<a name="l00411"></a>00411     }
<a name="l00412"></a>00412   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="if_8c.html#a61aed2ccc7ec47d6822546664ea77f0c">if_is_pointopoint</a> (ifp))
<a name="l00413"></a>00413     {
<a name="l00414"></a>00414       circuit-&gt;<a class="code" href="structisis__circuit.html#a569e39bbf7fafd533eae2eeafa671b8c">circ_type</a> = <a class="code" href="isis__circuit_8h.html#aa2113a49e7c75a5d4997d59df0530726">CIRCUIT_T_P2P</a>;
<a name="l00415"></a>00415     }
<a name="l00416"></a>00416   <span class="keywordflow">else</span>
<a name="l00417"></a>00417     {
<a name="l00418"></a>00418       <span class="comment">/* It&#39;s normal in case of loopback etc. */</span>
<a name="l00419"></a>00419       <span class="keywordflow">if</span> (isis-&gt;<a class="code" href="structisis.html#a6e64127e274c1aa6a52cb0f4b541dfaa">debugs</a> &amp; <a class="code" href="isisd_8h.html#a133d8993848d3fa2c41270511f133eb7">DEBUG_EVENTS</a>)
<a name="l00420"></a>00420     <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;isis_circuit_if_add: unsupported media&quot;</span>);
<a name="l00421"></a>00421     }
<a name="l00422"></a>00422 
<a name="l00423"></a>00423   <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (ifp-&gt;<a class="code" href="structinterface.html#ac7c47b5cc1df81e51bf1ecea97b4d4b3">connected</a>, node, nnode, conn))
<a name="l00424"></a>00424     <a class="code" href="isis__circuit_8c.html#a52dfd04507c31c59f97c524f4b042483">isis_circuit_add_addr</a> (circuit, conn);
<a name="l00425"></a>00425 
<a name="l00426"></a>00426   <span class="keywordflow">return</span>;
<a name="l00427"></a>00427 }
<a name="l00428"></a>00428 
<a name="l00429"></a>00429 <span class="keywordtype">void</span>
<a name="l00430"></a><a class="code" href="isis__circuit_8h.html#aec239848920be5d6c27e0468ee98f723">00430</a> <a class="code" href="isis__circuit_8c.html#aec239848920be5d6c27e0468ee98f723">isis_circuit_update_params</a> (<span class="keyword">struct</span> <a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit,
<a name="l00431"></a>00431                 <span class="keyword">struct</span> <a class="code" href="structinterface.html">interface</a> *<a class="code" href="structconnected.html#a93c575385a71507f8c29ec26344d09d3">ifp</a>)
<a name="l00432"></a>00432 {
<a name="l00433"></a>00433   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l00434"></a>00434 
<a name="l00435"></a>00435   <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a10453f6bcc1e8f1cb466240a81836ba9">circuit_id</a> != ifp-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a>)
<a name="l00436"></a>00436     {
<a name="l00437"></a>00437       <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;changing circuit_id %d-&gt;%d&quot;</span>, circuit-&gt;<a class="code" href="structisis__circuit.html#a10453f6bcc1e8f1cb466240a81836ba9">circuit_id</a>,
<a name="l00438"></a>00438          ifp-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a>);
<a name="l00439"></a>00439       circuit-&gt;<a class="code" href="structisis__circuit.html#a10453f6bcc1e8f1cb466240a81836ba9">circuit_id</a> = ifp-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a> % 255;
<a name="l00440"></a>00440     }
<a name="l00441"></a>00441 
<a name="l00442"></a>00442   <span class="comment">/* FIXME: Why is this needed? shouldn&#39;t we compare to the area&#39;s mtu */</span>
<a name="l00443"></a>00443   <span class="comment">/* Ofer, this was here in case someone changes the mtu (e.g. with ifconfig) </span>
<a name="l00444"></a>00444 <span class="comment">     The areas MTU is the minimum of mtu&#39;s of circuits in the area</span>
<a name="l00445"></a>00445 <span class="comment">     now we can&#39;t catch the change</span>
<a name="l00446"></a>00446 <span class="comment">     if (circuit-&gt;mtu != ifp-&gt;mtu) {</span>
<a name="l00447"></a>00447 <span class="comment">     zlog_warn (&quot;changing circuit mtu %d-&gt;%d&quot;, circuit-&gt;mtu, </span>
<a name="l00448"></a>00448 <span class="comment">     ifp-&gt;mtu);    </span>
<a name="l00449"></a>00449 <span class="comment">     circuit-&gt;mtu = ifp-&gt;mtu;</span>
<a name="l00450"></a>00450 <span class="comment">     }</span>
<a name="l00451"></a>00451 <span class="comment">   */</span>
<a name="l00452"></a>00452   <span class="comment">/*</span>
<a name="l00453"></a>00453 <span class="comment">   * Get the Hardware Address</span>
<a name="l00454"></a>00454 <span class="comment">   */</span>
<a name="l00455"></a>00455 <span class="preprocessor">#ifdef HAVE_STRUCT_SOCKADDR_DL</span>
<a name="l00456"></a>00456 <span class="preprocessor"></span><span class="preprocessor">#ifndef SUNOS_5</span>
<a name="l00457"></a>00457 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#ab03cac6463284a4ce8c1eb19e49f3b6d">interface</a>-&gt;sdl.sdl_alen != <a class="code" href="isis__circuit_8c.html#abf4fcaacb1ad2010711b7c880ec2ed20">ETHER_ADDR_LEN</a>)
<a name="l00458"></a>00458     <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;unsupported link layer&quot;</span>);
<a name="l00459"></a>00459   <span class="keywordflow">else</span>
<a name="l00460"></a>00460     <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#ac7adabf9b24b03c93e73bb9b03c2192b">snpa</a>, LLADDR (&amp;circuit-&gt;<a class="code" href="structisis__circuit.html#ab03cac6463284a4ce8c1eb19e49f3b6d">interface</a>-&gt;sdl), <a class="code" href="isis__constants_8h.html#a9822d89774e0d6ddaa06503950130423">ETH_ALEN</a>);
<a name="l00461"></a>00461 <span class="preprocessor">#endif</span>
<a name="l00462"></a>00462 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00463"></a>00463 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#ab03cac6463284a4ce8c1eb19e49f3b6d">interface</a>-&gt;<a class="code" href="structinterface.html#a6521c9be15367445abca01bbba9c2cb4">hw_addr_len</a> != <a class="code" href="isis__constants_8h.html#a9822d89774e0d6ddaa06503950130423">ETH_ALEN</a>)
<a name="l00464"></a>00464     {
<a name="l00465"></a>00465       <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;unsupported link layer&quot;</span>);
<a name="l00466"></a>00466     }
<a name="l00467"></a>00467   <span class="keywordflow">else</span>
<a name="l00468"></a>00468     {
<a name="l00469"></a>00469       <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a98d0dff0c7366f08562d8e8583df9bb9">memcmp</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#ac7adabf9b24b03c93e73bb9b03c2192b">snpa</a>, circuit-&gt;<a class="code" href="structisis__circuit.html#ab03cac6463284a4ce8c1eb19e49f3b6d">interface</a>-&gt;<a class="code" href="structinterface.html#a6fe2f3c7e5be26c4e376b514d86f5c22">hw_addr</a>, <a class="code" href="isis__constants_8h.html#a9822d89774e0d6ddaa06503950130423">ETH_ALEN</a>))
<a name="l00470"></a>00470     {
<a name="l00471"></a>00471       <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;changing circuit snpa %s-&gt;%s&quot;</span>,
<a name="l00472"></a>00472              <a class="code" href="isis__misc_8c.html#a9ff6d4a3900eef27814548c4c5357090">snpa_print</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#ac7adabf9b24b03c93e73bb9b03c2192b">snpa</a>),
<a name="l00473"></a>00473              <a class="code" href="isis__misc_8c.html#a9ff6d4a3900eef27814548c4c5357090">snpa_print</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#ab03cac6463284a4ce8c1eb19e49f3b6d">interface</a>-&gt;<a class="code" href="structinterface.html#a6fe2f3c7e5be26c4e376b514d86f5c22">hw_addr</a>));
<a name="l00474"></a>00474     }
<a name="l00475"></a>00475     }
<a name="l00476"></a>00476 <span class="preprocessor">#endif</span>
<a name="l00477"></a>00477 <span class="preprocessor"></span>
<a name="l00478"></a>00478   <span class="keywordflow">if</span> (<a class="code" href="if_8c.html#a88f3bd141d217db7e4118a78b1db1b60">if_is_broadcast</a> (ifp))
<a name="l00479"></a>00479     {
<a name="l00480"></a>00480       circuit-&gt;<a class="code" href="structisis__circuit.html#a569e39bbf7fafd533eae2eeafa671b8c">circ_type</a> = <a class="code" href="isis__circuit_8h.html#a01a94c5f24c88efb64f791a749ae8f95">CIRCUIT_T_BROADCAST</a>;
<a name="l00481"></a>00481     }
<a name="l00482"></a>00482   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="if_8c.html#a61aed2ccc7ec47d6822546664ea77f0c">if_is_pointopoint</a> (ifp))
<a name="l00483"></a>00483     {
<a name="l00484"></a>00484       circuit-&gt;<a class="code" href="structisis__circuit.html#a569e39bbf7fafd533eae2eeafa671b8c">circ_type</a> = <a class="code" href="isis__circuit_8h.html#aa2113a49e7c75a5d4997d59df0530726">CIRCUIT_T_P2P</a>;
<a name="l00485"></a>00485     }
<a name="l00486"></a>00486   <span class="keywordflow">else</span>
<a name="l00487"></a>00487     {
<a name="l00488"></a>00488       <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;isis_circuit_update_params: unsupported media&quot;</span>);
<a name="l00489"></a>00489     }
<a name="l00490"></a>00490 
<a name="l00491"></a>00491   <span class="keywordflow">return</span>;
<a name="l00492"></a>00492 }
<a name="l00493"></a>00493 
<a name="l00494"></a>00494 <span class="keywordtype">void</span>
<a name="l00495"></a><a class="code" href="isis__circuit_8h.html#af329d161db12da43e1361ac390ac0ec5">00495</a> <a class="code" href="isis__circuit_8c.html#af329d161db12da43e1361ac390ac0ec5">isis_circuit_if_del</a> (<span class="keyword">struct</span> <a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit)
<a name="l00496"></a>00496 {
<a name="l00497"></a>00497   circuit-&gt;<a class="code" href="structisis__circuit.html#ab03cac6463284a4ce8c1eb19e49f3b6d">interface</a>-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00498"></a>00498   circuit-&gt;<a class="code" href="structisis__circuit.html#ab03cac6463284a4ce8c1eb19e49f3b6d">interface</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00499"></a>00499 
<a name="l00500"></a>00500   <span class="keywordflow">return</span>;
<a name="l00501"></a>00501 }
<a name="l00502"></a>00502 
<a name="l00503"></a>00503 <span class="keywordtype">void</span>
<a name="l00504"></a><a class="code" href="isis__circuit_8h.html#a48da6c4124ce91ea2a2be712ab7c37b9">00504</a> <a class="code" href="isis__circuit_8c.html#a48da6c4124ce91ea2a2be712ab7c37b9">isis_circuit_up</a> (<span class="keyword">struct</span> <a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit)
<a name="l00505"></a>00505 {
<a name="l00506"></a>00506 
<a name="l00507"></a>00507   <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a569e39bbf7fafd533eae2eeafa671b8c">circ_type</a> == <a class="code" href="isis__circuit_8h.html#a01a94c5f24c88efb64f791a749ae8f95">CIRCUIT_T_BROADCAST</a>)
<a name="l00508"></a>00508     {
<a name="l00509"></a>00509       <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a4284617c89806a77b3c2314e15ac508b">area</a>-&gt;<a class="code" href="structisis__area.html#a0005638db8e0ad98679efbe89ab2ef14">min_bcast_mtu</a> == 0 ||
<a name="l00510"></a>00510       <a class="code" href="isis__constants_8h.html#aa507eb18af6ca6d6db6e3db750ab0737">ISO_MTU</a> (circuit) &lt; circuit-&gt;<a class="code" href="structisis__circuit.html#a4284617c89806a77b3c2314e15ac508b">area</a>-&gt;<a class="code" href="structisis__area.html#a0005638db8e0ad98679efbe89ab2ef14">min_bcast_mtu</a>)
<a name="l00511"></a>00511     circuit-&gt;<a class="code" href="structisis__circuit.html#a4284617c89806a77b3c2314e15ac508b">area</a>-&gt;<a class="code" href="structisis__area.html#a0005638db8e0ad98679efbe89ab2ef14">min_bcast_mtu</a> = <a class="code" href="isis__constants_8h.html#aa507eb18af6ca6d6db6e3db750ab0737">ISO_MTU</a> (circuit);
<a name="l00512"></a>00512       <span class="comment">/*</span>
<a name="l00513"></a>00513 <span class="comment">       * ISO 10589 - 8.4.1 Enabling of broadcast circuits</span>
<a name="l00514"></a>00514 <span class="comment">       */</span>
<a name="l00515"></a>00515 
<a name="l00516"></a>00516       <span class="comment">/* initilizing the hello sending threads</span>
<a name="l00517"></a>00517 <span class="comment">       * for a broadcast IF</span>
<a name="l00518"></a>00518 <span class="comment">       */</span>
<a name="l00519"></a>00519 
<a name="l00520"></a>00520       <span class="comment">/* 8.4.1 a) commence sending of IIH PDUs */</span>
<a name="l00521"></a>00521 
<a name="l00522"></a>00522       <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#ab222d6d0b054faa159d72bcb9768b3fb">circuit_is_type</a> &amp; <a class="code" href="isis__constants_8h.html#a4806dbcd4c094ef55cecd6aca29520d7">IS_LEVEL_1</a>)
<a name="l00523"></a>00523     {
<a name="l00524"></a>00524       <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (master, <a class="code" href="isis__pdu_8c.html#ac3719e0f27b001ab4b863944a14d2727">send_lan_l1_hello</a>, circuit, 0);
<a name="l00525"></a>00525       circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a1a8b5b8fcf6defb0b21b509d99953742">lan_neighs</a>[0] = <a class="code" href="linklist_8c.html#af156f4ae343ef4a625f75b6c38845aef">list_new</a> ();
<a name="l00526"></a>00526     }
<a name="l00527"></a>00527 
<a name="l00528"></a>00528       <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#ab222d6d0b054faa159d72bcb9768b3fb">circuit_is_type</a> &amp; <a class="code" href="isis__constants_8h.html#a9daa7fbf09b604c718f3bbe189aedd1a">IS_LEVEL_2</a>)
<a name="l00529"></a>00529     {
<a name="l00530"></a>00530       <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (master, <a class="code" href="isis__pdu_8c.html#a395c19db187c485c02eb41b63fc024ac">send_lan_l2_hello</a>, circuit, 0);
<a name="l00531"></a>00531       circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a1a8b5b8fcf6defb0b21b509d99953742">lan_neighs</a>[1] = <a class="code" href="linklist_8c.html#af156f4ae343ef4a625f75b6c38845aef">list_new</a> ();
<a name="l00532"></a>00532     }
<a name="l00533"></a>00533 
<a name="l00534"></a>00534       <span class="comment">/* 8.4.1 b) FIXME: solicit ES - 8.4.6 */</span>
<a name="l00535"></a>00535       <span class="comment">/* 8.4.1 c) FIXME: listen for ESH PDUs */</span>
<a name="l00536"></a>00536 
<a name="l00537"></a>00537       <span class="comment">/* 8.4.1 d) */</span>
<a name="l00538"></a>00538       <span class="comment">/* dr election will commence in... */</span>
<a name="l00539"></a>00539       <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#ab222d6d0b054faa159d72bcb9768b3fb">circuit_is_type</a> &amp; <a class="code" href="isis__constants_8h.html#a4806dbcd4c094ef55cecd6aca29520d7">IS_LEVEL_1</a>)
<a name="l00540"></a>00540     <a class="code" href="thread_8h.html#a898ebeae19eb435889cbf53ea8b5120e">THREAD_TIMER_ON</a> (master, circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a0eff61cf3ddb83196c960a96ce7f8242">t_run_dr</a>[0], <a class="code" href="isis__dr_8c.html#ae35c5d9be60cd5f01bcbe0bb6e79654e">isis_run_dr_l1</a>,
<a name="l00541"></a>00541              circuit, 2 * circuit-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[0]);
<a name="l00542"></a>00542       <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#ab222d6d0b054faa159d72bcb9768b3fb">circuit_is_type</a> &amp; <a class="code" href="isis__constants_8h.html#a9daa7fbf09b604c718f3bbe189aedd1a">IS_LEVEL_2</a>)
<a name="l00543"></a>00543     <a class="code" href="thread_8h.html#a898ebeae19eb435889cbf53ea8b5120e">THREAD_TIMER_ON</a> (master, circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a0eff61cf3ddb83196c960a96ce7f8242">t_run_dr</a>[1], <a class="code" href="isis__dr_8c.html#a858591bc68bc249bd3a775e8f9ca2694">isis_run_dr_l2</a>,
<a name="l00544"></a>00544              circuit, 2 * circuit-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[1]);
<a name="l00545"></a>00545     }
<a name="l00546"></a>00546   <span class="keywordflow">else</span>
<a name="l00547"></a>00547     {
<a name="l00548"></a>00548       <span class="comment">/* initializing the hello send threads</span>
<a name="l00549"></a>00549 <span class="comment">       * for a ptp IF</span>
<a name="l00550"></a>00550 <span class="comment">       */</span>
<a name="l00551"></a>00551       <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (master, <a class="code" href="isis__pdu_8c.html#add55c6255271cf958880489585619db9">send_p2p_hello</a>, circuit, 0);
<a name="l00552"></a>00552 
<a name="l00553"></a>00553     }
<a name="l00554"></a>00554 
<a name="l00555"></a>00555   <span class="comment">/* initializing PSNP timers */</span>
<a name="l00556"></a>00556   <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#ab222d6d0b054faa159d72bcb9768b3fb">circuit_is_type</a> &amp; <a class="code" href="isis__constants_8h.html#a4806dbcd4c094ef55cecd6aca29520d7">IS_LEVEL_1</a>)
<a name="l00557"></a>00557     {
<a name="l00558"></a>00558       <a class="code" href="thread_8h.html#a898ebeae19eb435889cbf53ea8b5120e">THREAD_TIMER_ON</a> (master, circuit-&gt;<a class="code" href="structisis__circuit.html#a3ad206840c48b3ff93d5160f5a402e2e">t_send_psnp</a>[0], <a class="code" href="isis__pdu_8c.html#a001cd2fbdf45b46870187e20b3cc7efc">send_l1_psnp</a>, circuit,
<a name="l00559"></a>00559                <a class="code" href="isis__misc_8c.html#a177a75676b1916fefb4eb7275911fb6e">isis_jitter</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#ab73d895f1c1588eb68e5b467f7f1b479">psnp_interval</a>[0], <a class="code" href="isis__constants_8h.html#a8ebe0205326ccb2592f752237c21729b">PSNP_JITTER</a>));
<a name="l00560"></a>00560     }
<a name="l00561"></a>00561 
<a name="l00562"></a>00562   <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#ab222d6d0b054faa159d72bcb9768b3fb">circuit_is_type</a> &amp; <a class="code" href="isis__constants_8h.html#a9daa7fbf09b604c718f3bbe189aedd1a">IS_LEVEL_2</a>)
<a name="l00563"></a>00563     {
<a name="l00564"></a>00564       <a class="code" href="thread_8h.html#a898ebeae19eb435889cbf53ea8b5120e">THREAD_TIMER_ON</a> (master, circuit-&gt;<a class="code" href="structisis__circuit.html#a3ad206840c48b3ff93d5160f5a402e2e">t_send_psnp</a>[1], <a class="code" href="isis__pdu_8c.html#ada5c84113d20d6c83fce25bfea104e93">send_l2_psnp</a>, circuit,
<a name="l00565"></a>00565                <a class="code" href="isis__misc_8c.html#a177a75676b1916fefb4eb7275911fb6e">isis_jitter</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#ab73d895f1c1588eb68e5b467f7f1b479">psnp_interval</a>[1], <a class="code" href="isis__constants_8h.html#a8ebe0205326ccb2592f752237c21729b">PSNP_JITTER</a>));
<a name="l00566"></a>00566     }
<a name="l00567"></a>00567 
<a name="l00568"></a>00568   <span class="comment">/* initialize the circuit streams */</span>
<a name="l00569"></a>00569   <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#abc0c4c6484b34715228b6811f442f9aa">rcv_stream</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00570"></a>00570     circuit-&gt;<a class="code" href="structisis__circuit.html#abc0c4c6484b34715228b6811f442f9aa">rcv_stream</a> = <a class="code" href="stream_8c.html#a7117cdad9fa5e5ae633e0cf08d047459">stream_new</a> (<a class="code" href="isis__constants_8h.html#aa507eb18af6ca6d6db6e3db750ab0737">ISO_MTU</a> (circuit));
<a name="l00571"></a>00571 
<a name="l00572"></a>00572   <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a282678da28cc5e426019913c913ea490">snd_stream</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00573"></a>00573     circuit-&gt;<a class="code" href="structisis__circuit.html#a282678da28cc5e426019913c913ea490">snd_stream</a> = <a class="code" href="stream_8c.html#a7117cdad9fa5e5ae633e0cf08d047459">stream_new</a> (<a class="code" href="isis__constants_8h.html#aa507eb18af6ca6d6db6e3db750ab0737">ISO_MTU</a> (circuit));
<a name="l00574"></a>00574 
<a name="l00575"></a>00575   <span class="comment">/* unified init for circuits */</span>
<a name="l00576"></a>00576   <a class="code" href="isis__bpf_8c.html#a4fb54543ed3a433aa2b883518d7be81f">isis_sock_init</a> (circuit);
<a name="l00577"></a>00577 
<a name="l00578"></a>00578 <span class="preprocessor">#ifdef GNU_LINUX</span>
<a name="l00579"></a>00579 <span class="preprocessor"></span>  <a class="code" href="thread_8h.html#aa1c80a0def008e6c3439baa8b49a1dab">THREAD_READ_ON</a> (master, circuit-&gt;<a class="code" href="structisis__circuit.html#afa7165030b312ae2ce406ec15a4624df">t_read</a>, <a class="code" href="isis__pdu_8c.html#a75016a6ce480bc69cba2753bce7c52e1">isis_receive</a>, circuit,
<a name="l00580"></a>00580           circuit-&gt;<a class="code" href="structisis__circuit.html#a2fa1849a71a356f206776c2329f27dbc">fd</a>);
<a name="l00581"></a>00581 <span class="preprocessor">#else</span>
<a name="l00582"></a>00582 <span class="preprocessor"></span>  <a class="code" href="thread_8h.html#a898ebeae19eb435889cbf53ea8b5120e">THREAD_TIMER_ON</a> (master, circuit-&gt;<a class="code" href="structisis__circuit.html#afa7165030b312ae2ce406ec15a4624df">t_read</a>, <a class="code" href="isis__pdu_8c.html#a75016a6ce480bc69cba2753bce7c52e1">isis_receive</a>, circuit,
<a name="l00583"></a>00583            circuit-&gt;<a class="code" href="structisis__circuit.html#a2fa1849a71a356f206776c2329f27dbc">fd</a>);
<a name="l00584"></a>00584 <span class="preprocessor">#endif</span>
<a name="l00585"></a>00585 <span class="preprocessor"></span>  <span class="keywordflow">return</span>;
<a name="l00586"></a>00586 }
<a name="l00587"></a>00587 
<a name="l00588"></a>00588 <span class="keywordtype">void</span>
<a name="l00589"></a><a class="code" href="isis__circuit_8c.html#a45bfcf431df2ee8c5d4bbf23b5d3104e">00589</a> <a class="code" href="isis__circuit_8c.html#a45bfcf431df2ee8c5d4bbf23b5d3104e">isis_circuit_down</a> (<span class="keyword">struct</span> <a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit)
<a name="l00590"></a>00590 {
<a name="l00591"></a>00591   <span class="comment">/* Cancel all active threads -- FIXME: wrong place */</span>
<a name="l00592"></a>00592   <span class="comment">/* HT: Read thread if GNU_LINUX, TIMER thread otherwise. */</span>
<a name="l00593"></a>00593   <a class="code" href="thread_8h.html#a7e1de4fc338e4feae498978461742dbb">THREAD_OFF</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#afa7165030b312ae2ce406ec15a4624df">t_read</a>);
<a name="l00594"></a>00594   <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a569e39bbf7fafd533eae2eeafa671b8c">circ_type</a> == <a class="code" href="isis__circuit_8h.html#a01a94c5f24c88efb64f791a749ae8f95">CIRCUIT_T_BROADCAST</a>)
<a name="l00595"></a>00595     {
<a name="l00596"></a>00596       <a class="code" href="thread_8h.html#ae1dfd3f5f643212148d60a41d9f2192a">THREAD_TIMER_OFF</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#ae47a7d7fa924f3848bff4793fc250826">t_send_lan_hello</a>[0]);
<a name="l00597"></a>00597       <a class="code" href="thread_8h.html#ae1dfd3f5f643212148d60a41d9f2192a">THREAD_TIMER_OFF</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#ae47a7d7fa924f3848bff4793fc250826">t_send_lan_hello</a>[1]);
<a name="l00598"></a>00598       <a class="code" href="thread_8h.html#ae1dfd3f5f643212148d60a41d9f2192a">THREAD_TIMER_OFF</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a0eff61cf3ddb83196c960a96ce7f8242">t_run_dr</a>[0]);
<a name="l00599"></a>00599       <a class="code" href="thread_8h.html#ae1dfd3f5f643212148d60a41d9f2192a">THREAD_TIMER_OFF</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a0eff61cf3ddb83196c960a96ce7f8242">t_run_dr</a>[1]);
<a name="l00600"></a>00600     }
<a name="l00601"></a>00601   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a569e39bbf7fafd533eae2eeafa671b8c">circ_type</a> == <a class="code" href="isis__circuit_8h.html#aa2113a49e7c75a5d4997d59df0530726">CIRCUIT_T_P2P</a>)
<a name="l00602"></a>00602     {
<a name="l00603"></a>00603       <a class="code" href="thread_8h.html#ae1dfd3f5f643212148d60a41d9f2192a">THREAD_TIMER_OFF</a> (circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a15852a59ea8be80680abac2070659440">p2p</a>.<a class="code" href="structisis__p2p__info.html#adaa34f30db7fc536f5aec39d08fcbf64">t_send_p2p_hello</a>);
<a name="l00604"></a>00604     }
<a name="l00605"></a>00605   <span class="comment">/* close the socket */</span>
<a name="l00606"></a>00606   close (circuit-&gt;<a class="code" href="structisis__circuit.html#a2fa1849a71a356f206776c2329f27dbc">fd</a>);
<a name="l00607"></a>00607 
<a name="l00608"></a>00608   <span class="keywordflow">return</span>;
<a name="l00609"></a>00609 }
<a name="l00610"></a>00610 
<a name="l00611"></a>00611 <span class="keywordtype">void</span>
<a name="l00612"></a><a class="code" href="isis__circuit_8h.html#a0e981ef34777d26b91cbee95612ba505">00612</a> <a class="code" href="isis__circuit_8c.html#a0e981ef34777d26b91cbee95612ba505">circuit_update_nlpids</a> (<span class="keyword">struct</span> <a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit)
<a name="l00613"></a>00613 {
<a name="l00614"></a>00614   circuit-&gt;<a class="code" href="structisis__circuit.html#aa9672d51825e67d22c772575a9d8624a">nlpids</a>.<a class="code" href="structnlpids.html#a73f0f5f1e7aa64694d5802b91af6533b">count</a> = 0;
<a name="l00615"></a>00615 
<a name="l00616"></a>00616   <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a9dbb2266ee5b76604a27fd0855e910f5">ip_router</a>)
<a name="l00617"></a>00617     {
<a name="l00618"></a>00618       circuit-&gt;<a class="code" href="structisis__circuit.html#aa9672d51825e67d22c772575a9d8624a">nlpids</a>.<a class="code" href="structnlpids.html#a6dbd263750da21187880986a50fd5857">nlpids</a>[0] = <a class="code" href="isis__constants_8h.html#a9c1ffc4a81108d901cd8914d20cd4caf">NLPID_IP</a>;
<a name="l00619"></a>00619       circuit-&gt;<a class="code" href="structisis__circuit.html#aa9672d51825e67d22c772575a9d8624a">nlpids</a>.<a class="code" href="structnlpids.html#a73f0f5f1e7aa64694d5802b91af6533b">count</a>++;
<a name="l00620"></a>00620     }
<a name="l00621"></a>00621 <span class="preprocessor">#ifdef HAVE_IPV6</span>
<a name="l00622"></a>00622 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (circuit-&gt;ipv6_router)
<a name="l00623"></a>00623     {
<a name="l00624"></a>00624       circuit-&gt;<a class="code" href="structisis__circuit.html#aa9672d51825e67d22c772575a9d8624a">nlpids</a>.<a class="code" href="structnlpids.html#a6dbd263750da21187880986a50fd5857">nlpids</a>[circuit-&gt;<a class="code" href="structisis__circuit.html#aa9672d51825e67d22c772575a9d8624a">nlpids</a>.<a class="code" href="structnlpids.html#a73f0f5f1e7aa64694d5802b91af6533b">count</a>] = <a class="code" href="isis__constants_8h.html#af33b1ac580353b4a2ec3b766d5f90464">NLPID_IPV6</a>;
<a name="l00625"></a>00625       circuit-&gt;<a class="code" href="structisis__circuit.html#aa9672d51825e67d22c772575a9d8624a">nlpids</a>.<a class="code" href="structnlpids.html#a73f0f5f1e7aa64694d5802b91af6533b">count</a>++;
<a name="l00626"></a>00626     }
<a name="l00627"></a>00627 <span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
<a name="l00628"></a>00628   <span class="keywordflow">return</span>;
<a name="l00629"></a>00629 }
<a name="l00630"></a>00630 
<a name="l00631"></a>00631 <span class="keywordtype">int</span>
<a name="l00632"></a><a class="code" href="isis__circuit_8c.html#a30f2f4ba1a5ce5e5d838e38e5bb5a32e">00632</a> <a class="code" href="isis__circuit_8c.html#a30f2f4ba1a5ce5e5d838e38e5bb5a32e">isis_interface_config_write</a> (<span class="keyword">struct</span> <a class="code" href="structvty.html">vty</a> *<a class="code" href="structvty.html">vty</a>)
<a name="l00633"></a>00633 {
<a name="l00634"></a>00634 
<a name="l00635"></a>00635   <span class="keywordtype">int</span> write = 0;
<a name="l00636"></a>00636   <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *node2;
<a name="l00637"></a>00637   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l00638"></a>00638   <span class="keyword">struct </span><a class="code" href="structisis__area.html">isis_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
<a name="l00639"></a>00639   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *c;
<a name="l00640"></a>00640   <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>;
<a name="l00641"></a>00641 
<a name="l00642"></a>00642   <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (<a class="code" href="if_8c.html#a45ef98e2f5776142773b95ec60bc294f">iflist</a>, node, ifp))
<a name="l00643"></a>00643   {
<a name="l00644"></a>00644     <span class="comment">/* IF name */</span>
<a name="l00645"></a>00645     <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;interface %s%s&quot;</span>, ifp-&gt;<a class="code" href="structinterface.html#a98cadce768ec5aacb4c5fc4ca2c3eaa8">name</a>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00646"></a>00646     write++;
<a name="l00647"></a>00647     <span class="comment">/* IF desc */</span>
<a name="l00648"></a>00648     <span class="keywordflow">if</span> (ifp-&gt;<a class="code" href="structinterface.html#a273b8698448bacdf46b32b3665e7b8d2">desc</a>)
<a name="l00649"></a>00649       {
<a name="l00650"></a>00650     <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot; description %s%s&quot;</span>, ifp-&gt;<a class="code" href="structinterface.html#a273b8698448bacdf46b32b3665e7b8d2">desc</a>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00651"></a>00651     write++;
<a name="l00652"></a>00652       }
<a name="l00653"></a>00653     <span class="comment">/* ISIS Circuit */</span>
<a name="l00654"></a>00654     <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (isis-&gt;<a class="code" href="structisis.html#a0898d0cb839d3d63fc69f5a4cd02e512">area_list</a>, node2, area))
<a name="l00655"></a>00655     {
<a name="l00656"></a>00656       c = <a class="code" href="isis__circuit_8c.html#af5503c527a2e390b90d9fb6fca3639d0">circuit_lookup_by_ifp</a> (ifp, area-&gt;<a class="code" href="structisis__area.html#a1ef8753b22245b7d8fff0331deef3b21">circuit_list</a>);
<a name="l00657"></a>00657       <span class="keywordflow">if</span> (c)
<a name="l00658"></a>00658     {
<a name="l00659"></a>00659       <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#a9dbb2266ee5b76604a27fd0855e910f5">ip_router</a>)
<a name="l00660"></a>00660         {
<a name="l00661"></a>00661           <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot; ip router isis %s%s&quot;</span>, area-&gt;<a class="code" href="structisis__area.html#aef5ef529e28214a477a6a7c2fe03c350">area_tag</a>,
<a name="l00662"></a>00662                <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00663"></a>00663           write++;
<a name="l00664"></a>00664         }
<a name="l00665"></a>00665 <span class="preprocessor">#ifdef HAVE_IPV6</span>
<a name="l00666"></a>00666 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (c-&gt;ipv6_router)
<a name="l00667"></a>00667         {
<a name="l00668"></a>00668           <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot; ipv6 router isis %s%s&quot;</span>, area-&gt;<a class="code" href="structisis__area.html#aef5ef529e28214a477a6a7c2fe03c350">area_tag</a>,
<a name="l00669"></a>00669                <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00670"></a>00670           write++;
<a name="l00671"></a>00671         }
<a name="l00672"></a>00672 <span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
<a name="l00673"></a>00673 
<a name="l00674"></a>00674       <span class="comment">/* ISIS - circuit type */</span>
<a name="l00675"></a>00675       <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#ab222d6d0b054faa159d72bcb9768b3fb">circuit_is_type</a> == <a class="code" href="isis__constants_8h.html#a4806dbcd4c094ef55cecd6aca29520d7">IS_LEVEL_1</a>)
<a name="l00676"></a>00676         {
<a name="l00677"></a>00677           <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot; isis circuit-type level-1%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00678"></a>00678           write++;
<a name="l00679"></a>00679         }
<a name="l00680"></a>00680       <span class="keywordflow">else</span>
<a name="l00681"></a>00681         {
<a name="l00682"></a>00682           <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#ab222d6d0b054faa159d72bcb9768b3fb">circuit_is_type</a> == <a class="code" href="isis__constants_8h.html#a9daa7fbf09b604c718f3bbe189aedd1a">IS_LEVEL_2</a>)
<a name="l00683"></a>00683         {
<a name="l00684"></a>00684           <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot; isis circuit-type level-2-only%s&quot;</span>,
<a name="l00685"></a>00685                <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00686"></a>00686           write++;
<a name="l00687"></a>00687         }
<a name="l00688"></a>00688         }
<a name="l00689"></a>00689 
<a name="l00690"></a>00690       <span class="comment">/* ISIS - CSNP interval - FIXME: compare to cisco */</span>
<a name="l00691"></a>00691       <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#a1b3a587132c475f3b90b5f8b03ec182d">csnp_interval</a>[0] == c-&gt;<a class="code" href="structisis__circuit.html#a1b3a587132c475f3b90b5f8b03ec182d">csnp_interval</a>[1])
<a name="l00692"></a>00692         {
<a name="l00693"></a>00693           <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#a1b3a587132c475f3b90b5f8b03ec182d">csnp_interval</a>[0] != <a class="code" href="isis__constants_8h.html#ade8e15a2ed12580594384b1d7efff5b8">CSNP_INTERVAL</a>)
<a name="l00694"></a>00694         {
<a name="l00695"></a>00695           <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot; isis csnp-interval %d%s&quot;</span>,
<a name="l00696"></a>00696                c-&gt;<a class="code" href="structisis__circuit.html#a1b3a587132c475f3b90b5f8b03ec182d">csnp_interval</a>[0], <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00697"></a>00697           write++;
<a name="l00698"></a>00698         }
<a name="l00699"></a>00699         }
<a name="l00700"></a>00700       <span class="keywordflow">else</span>
<a name="l00701"></a>00701         {
<a name="l00702"></a>00702           <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++)
<a name="l00703"></a>00703         {
<a name="l00704"></a>00704           <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#a1b3a587132c475f3b90b5f8b03ec182d">csnp_interval</a>[1] != <a class="code" href="isis__constants_8h.html#ade8e15a2ed12580594384b1d7efff5b8">CSNP_INTERVAL</a>)
<a name="l00705"></a>00705             {
<a name="l00706"></a>00706               <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot; isis csnp-interval %d level-%d%s&quot;</span>,
<a name="l00707"></a>00707                    c-&gt;<a class="code" href="structisis__circuit.html#a1b3a587132c475f3b90b5f8b03ec182d">csnp_interval</a>[1], i + 1, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00708"></a>00708               write++;
<a name="l00709"></a>00709             }
<a name="l00710"></a>00710         }
<a name="l00711"></a>00711         }
<a name="l00712"></a>00712 
<a name="l00713"></a>00713       <span class="comment">/* ISIS - Hello padding - Defaults to true so only display if false */</span>
<a name="l00714"></a>00714       <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#a569e39bbf7fafd533eae2eeafa671b8c">circ_type</a> == <a class="code" href="isis__circuit_8h.html#a01a94c5f24c88efb64f791a749ae8f95">CIRCUIT_T_BROADCAST</a> &amp;&amp; !c-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a83676730231d3a5aad5d5914957a2b68">pad_hellos</a>)
<a name="l00715"></a>00715         {
<a name="l00716"></a>00716           <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot; no isis hello padding%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00717"></a>00717           write++;
<a name="l00718"></a>00718         }
<a name="l00719"></a>00719 
<a name="l00720"></a>00720       <span class="comment">/* ISIS - Hello interval - FIXME: compare to cisco */</span>
<a name="l00721"></a>00721       <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[0] == c-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[1])
<a name="l00722"></a>00722         {
<a name="l00723"></a>00723           <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[0] != <a class="code" href="isis__constants_8h.html#ad91e2777a540273c5c76b631c2cafe06">HELLO_INTERVAL</a>)
<a name="l00724"></a>00724         {
<a name="l00725"></a>00725           <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot; isis hello-interval %d%s&quot;</span>,
<a name="l00726"></a>00726                c-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[0], <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00727"></a>00727           write++;
<a name="l00728"></a>00728         }
<a name="l00729"></a>00729         }
<a name="l00730"></a>00730       <span class="keywordflow">else</span>
<a name="l00731"></a>00731         {
<a name="l00732"></a>00732           <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++)
<a name="l00733"></a>00733         {
<a name="l00734"></a>00734           <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[i] != <a class="code" href="isis__constants_8h.html#ad91e2777a540273c5c76b631c2cafe06">HELLO_INTERVAL</a>)
<a name="l00735"></a>00735             {
<a name="l00736"></a>00736               <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[i] == <a class="code" href="isis__constants_8h.html#a6e83fd249aefcc54af420f8456239ac5">HELLO_MINIMAL</a>)
<a name="l00737"></a>00737             {
<a name="l00738"></a>00738               <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty,
<a name="l00739"></a>00739                    <span class="stringliteral">&quot; isis hello-interval minimal level-%d%s&quot;</span>,
<a name="l00740"></a>00740                    i + 1, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00741"></a>00741             }
<a name="l00742"></a>00742               <span class="keywordflow">else</span>
<a name="l00743"></a>00743             {
<a name="l00744"></a>00744               <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot; isis hello-interval %d level-%d%s&quot;</span>,
<a name="l00745"></a>00745                    c-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[i], i + 1, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00746"></a>00746             }
<a name="l00747"></a>00747               write++;
<a name="l00748"></a>00748             }
<a name="l00749"></a>00749         }
<a name="l00750"></a>00750         }
<a name="l00751"></a>00751 
<a name="l00752"></a>00752       <span class="comment">/* ISIS - Hello Multiplier */</span>
<a name="l00753"></a>00753       <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#a9af263fd35717a7f759e4a0cf2fd1a2b">hello_multiplier</a>[0] == c-&gt;<a class="code" href="structisis__circuit.html#a9af263fd35717a7f759e4a0cf2fd1a2b">hello_multiplier</a>[1])
<a name="l00754"></a>00754         {
<a name="l00755"></a>00755           <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#a9af263fd35717a7f759e4a0cf2fd1a2b">hello_multiplier</a>[0] != <a class="code" href="isis__constants_8h.html#a78063dfa967b692d4129669779c4b5d9">HELLO_MULTIPLIER</a>)
<a name="l00756"></a>00756         {
<a name="l00757"></a>00757           <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot; isis hello-multiplier %d%s&quot;</span>,
<a name="l00758"></a>00758                c-&gt;<a class="code" href="structisis__circuit.html#a9af263fd35717a7f759e4a0cf2fd1a2b">hello_multiplier</a>[0], <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00759"></a>00759           write++;
<a name="l00760"></a>00760         }
<a name="l00761"></a>00761         }
<a name="l00762"></a>00762       <span class="keywordflow">else</span>
<a name="l00763"></a>00763         {
<a name="l00764"></a>00764           <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++)
<a name="l00765"></a>00765         {
<a name="l00766"></a>00766           <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#a9af263fd35717a7f759e4a0cf2fd1a2b">hello_multiplier</a>[i] != <a class="code" href="isis__constants_8h.html#a78063dfa967b692d4129669779c4b5d9">HELLO_MULTIPLIER</a>)
<a name="l00767"></a>00767             {
<a name="l00768"></a>00768               <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot; isis hello-multiplier %d level-%d%s&quot;</span>,
<a name="l00769"></a>00769                    c-&gt;<a class="code" href="structisis__circuit.html#a9af263fd35717a7f759e4a0cf2fd1a2b">hello_multiplier</a>[i], i + 1, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00770"></a>00770               write++;
<a name="l00771"></a>00771             }
<a name="l00772"></a>00772         }
<a name="l00773"></a>00773         }
<a name="l00774"></a>00774       <span class="comment">/* ISIS - Priority */</span>
<a name="l00775"></a>00775       <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#a569e39bbf7fafd533eae2eeafa671b8c">circ_type</a> == <a class="code" href="isis__circuit_8h.html#a01a94c5f24c88efb64f791a749ae8f95">CIRCUIT_T_BROADCAST</a>)
<a name="l00776"></a>00776         {
<a name="l00777"></a>00777           <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a9087f16298d7bbf26ac8b480c932ab8d">priority</a>[0] == c-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a9087f16298d7bbf26ac8b480c932ab8d">priority</a>[1])
<a name="l00778"></a>00778         {
<a name="l00779"></a>00779           <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a9087f16298d7bbf26ac8b480c932ab8d">priority</a>[0] != <a class="code" href="isis__constants_8h.html#a0756f011ef667460d583017366823244">DEFAULT_PRIORITY</a>)
<a name="l00780"></a>00780             {
<a name="l00781"></a>00781               <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot; isis priority %d%s&quot;</span>,
<a name="l00782"></a>00782                    c-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a9087f16298d7bbf26ac8b480c932ab8d">priority</a>[0], <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00783"></a>00783               write++;
<a name="l00784"></a>00784             }
<a name="l00785"></a>00785         }
<a name="l00786"></a>00786           <span class="keywordflow">else</span>
<a name="l00787"></a>00787         {
<a name="l00788"></a>00788           <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++)
<a name="l00789"></a>00789             {
<a name="l00790"></a>00790               <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a9087f16298d7bbf26ac8b480c932ab8d">priority</a>[i] != <a class="code" href="isis__constants_8h.html#a0756f011ef667460d583017366823244">DEFAULT_PRIORITY</a>)
<a name="l00791"></a>00791             {
<a name="l00792"></a>00792               <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot; isis priority %d level-%d%s&quot;</span>,
<a name="l00793"></a>00793                    c-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a9087f16298d7bbf26ac8b480c932ab8d">priority</a>[i], i + 1, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00794"></a>00794               write++;
<a name="l00795"></a>00795             }
<a name="l00796"></a>00796             }
<a name="l00797"></a>00797         }
<a name="l00798"></a>00798         }
<a name="l00799"></a>00799       <span class="comment">/* ISIS - Metric */</span>
<a name="l00800"></a>00800       <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#abf3f18b710cf84b23e7005c08e6594b2">te_metric</a>[0] == c-&gt;<a class="code" href="structisis__circuit.html#abf3f18b710cf84b23e7005c08e6594b2">te_metric</a>[1])
<a name="l00801"></a>00801         {
<a name="l00802"></a>00802           <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#abf3f18b710cf84b23e7005c08e6594b2">te_metric</a>[0] != <a class="code" href="isis__constants_8h.html#ae0395bf404df3647661120cefe80c298">DEFAULT_CIRCUIT_METRICS</a>)
<a name="l00803"></a>00803         {
<a name="l00804"></a>00804           <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot; isis metric %d%s&quot;</span>, c-&gt;<a class="code" href="structisis__circuit.html#abf3f18b710cf84b23e7005c08e6594b2">te_metric</a>[0],
<a name="l00805"></a>00805                <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00806"></a>00806           write++;
<a name="l00807"></a>00807         }
<a name="l00808"></a>00808         }
<a name="l00809"></a>00809       <span class="keywordflow">else</span>
<a name="l00810"></a>00810         {
<a name="l00811"></a>00811           <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++)
<a name="l00812"></a>00812         {
<a name="l00813"></a>00813           <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#abf3f18b710cf84b23e7005c08e6594b2">te_metric</a>[i] != <a class="code" href="isis__constants_8h.html#ae0395bf404df3647661120cefe80c298">DEFAULT_CIRCUIT_METRICS</a>)
<a name="l00814"></a>00814             {
<a name="l00815"></a>00815               <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot; isis metric %d level-%d%s&quot;</span>,
<a name="l00816"></a>00816                    c-&gt;<a class="code" href="structisis__circuit.html#abf3f18b710cf84b23e7005c08e6594b2">te_metric</a>[i], i + 1, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00817"></a>00817               write++;
<a name="l00818"></a>00818             }
<a name="l00819"></a>00819         }
<a name="l00820"></a>00820         }
<a name="l00821"></a>00821 
<a name="l00822"></a>00822     }
<a name="l00823"></a>00823     }
<a name="l00824"></a>00824     <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;!%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00825"></a>00825   }
<a name="l00826"></a>00826 
<a name="l00827"></a>00827   <span class="keywordflow">return</span> write;
<a name="l00828"></a>00828 }
<a name="l00829"></a>00829 
<a name="l00830"></a><a class="code" href="isis__circuit_8c.html#a2f7e0f03eabf63ba1805b678b1f559ad">00830</a> <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (ip_router_isis,
<a name="l00831"></a>00831        ip_router_isis_cmd,
<a name="l00832"></a>00832        <span class="stringliteral">&quot;ip router isis WORD&quot;</span>,
<a name="l00833"></a>00833        <span class="stringliteral">&quot;Interface Internet Protocol config commands\n&quot;</span>
<a name="l00834"></a>00834        <span class="stringliteral">&quot;IP router interface commands\n&quot;</span>
<a name="l00835"></a>00835        <span class="stringliteral">&quot;IS-IS Routing for IP\n&quot;</span>
<a name="l00836"></a>00836        <span class="stringliteral">&quot;Routing process tag\n&quot;</span>)
<a name="l00837"></a>00837 {
<a name="l00838"></a>00838   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *c;
<a name="l00839"></a>00839   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l00840"></a>00840   <span class="keyword">struct </span><a class="code" href="structisis__area.html">isis_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
<a name="l00841"></a>00841 
<a name="l00842"></a>00842   ifp = (<span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *) <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l00843"></a>00843   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (ifp);
<a name="l00844"></a>00844 
<a name="l00845"></a>00845   area = <a class="code" href="isisd_8c.html#ae30541232d52f533602c5475e8c7a123">isis_area_lookup</a> (argv[0]);
<a name="l00846"></a>00846 
<a name="l00847"></a>00847   <span class="comment">/* Prevent more than one circuit per interface */</span>
<a name="l00848"></a>00848   <span class="keywordflow">if</span> (area)
<a name="l00849"></a>00849     c = <a class="code" href="isis__circuit_8c.html#af5503c527a2e390b90d9fb6fca3639d0">circuit_lookup_by_ifp</a> (ifp, area-&gt;<a class="code" href="structisis__area.html#a1ef8753b22245b7d8fff0331deef3b21">circuit_list</a>);
<a name="l00850"></a>00850   <span class="keywordflow">else</span>
<a name="l00851"></a>00851     c = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00852"></a>00852   <span class="keywordflow">if</span> (c &amp;&amp; (ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a> != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))
<a name="l00853"></a>00853     {
<a name="l00854"></a>00854 <span class="preprocessor">#ifdef HAVE_IPV6</span>
<a name="l00855"></a>00855 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (c-&gt;ipv6_router == 0)
<a name="l00856"></a>00856     {
<a name="l00857"></a>00857 <span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
<a name="l00858"></a>00858       <span class="comment">/* FIXME: Find the way to warn only vty users. */</span>
<a name="l00859"></a>00859       <span class="comment">/* vty_out (vty, &quot;ISIS circuit is already defined%s&quot;, VTY_NEWLINE); */</span>
<a name="l00860"></a>00860       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l00861"></a>00861 <span class="preprocessor">#ifdef HAVE_IPV6</span>
<a name="l00862"></a>00862 <span class="preprocessor"></span>    }
<a name="l00863"></a>00863 <span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
<a name="l00864"></a>00864     }
<a name="l00865"></a>00865 
<a name="l00866"></a>00866   <span class="comment">/* this is here for ciscopability */</span>
<a name="l00867"></a>00867   <span class="keywordflow">if</span> (!area)
<a name="l00868"></a>00868     {
<a name="l00869"></a>00869       <span class="comment">/* FIXME: Find the way to warn only vty users. */</span>
<a name="l00870"></a>00870       <span class="comment">/* vty_out (vty, &quot;Can&#39;t find ISIS instance %s&quot;, VTY_NEWLINE); */</span>
<a name="l00871"></a>00871       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l00872"></a>00872     }
<a name="l00873"></a>00873 
<a name="l00874"></a>00874   <span class="keywordflow">if</span> (!c)
<a name="l00875"></a>00875     {
<a name="l00876"></a>00876       c = <a class="code" href="isis__circuit_8c.html#af5503c527a2e390b90d9fb6fca3639d0">circuit_lookup_by_ifp</a> (ifp, isis-&gt;<a class="code" href="structisis.html#a464d8575b5b93d8eb6d869144b4a3220">init_circ_list</a>);
<a name="l00877"></a>00877       c = <a class="code" href="isis__csm_8c.html#a96513c42708761fe8f65230cc2cfbb46">isis_csm_state_change</a> (<a class="code" href="isis__csm_8h.html#aa4e8fb3f5707745d784424f543218162">ISIS_ENABLE</a>, c, area);
<a name="l00878"></a>00878       c-&gt;<a class="code" href="structisis__circuit.html#ab03cac6463284a4ce8c1eb19e49f3b6d">interface</a> = ifp;   <span class="comment">/* this is automatic */</span>
<a name="l00879"></a>00879       ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a> = c;        <span class="comment">/* hardly related to the FSM */</span>
<a name="l00880"></a>00880     }
<a name="l00881"></a>00881 
<a name="l00882"></a>00882   <span class="keywordflow">if</span> (!c)
<a name="l00883"></a>00883     <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l00884"></a>00884 
<a name="l00885"></a>00885   c-&gt;<a class="code" href="structisis__circuit.html#a9dbb2266ee5b76604a27fd0855e910f5">ip_router</a> = 1;
<a name="l00886"></a>00886   area-&gt;<a class="code" href="structisis__area.html#a0b7b9b7b8a3eb903a0deb5c20791d761">ip_circuits</a>++;
<a name="l00887"></a>00887   <a class="code" href="isis__circuit_8c.html#a0e981ef34777d26b91cbee95612ba505">circuit_update_nlpids</a> (c);
<a name="l00888"></a>00888 
<a name="l00889"></a>00889   <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9ac72abb8e0411b52a9d91d1a11aeaff">node</a> = <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>;
<a name="l00890"></a>00890 
<a name="l00891"></a>00891   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l00892"></a>00892 }
<a name="l00893"></a>00893 
<a name="l00894"></a><a class="code" href="isis__circuit_8c.html#a72e3e0e8b41634bb08466c0bf641c69b">00894</a> <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_ip_router_isis,
<a name="l00895"></a>00895        no_ip_router_isis_cmd,
<a name="l00896"></a>00896        <span class="stringliteral">&quot;no ip router isis WORD&quot;</span>,
<a name="l00897"></a>00897        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l00898"></a>00898        <span class="stringliteral">&quot;Interface Internet Protocol config commands\n&quot;</span>
<a name="l00899"></a>00899        <span class="stringliteral">&quot;IP router interface commands\n&quot;</span>
<a name="l00900"></a>00900        <span class="stringliteral">&quot;IS-IS Routing for IP\n&quot;</span>
<a name="l00901"></a>00901        <span class="stringliteral">&quot;Routing process tag\n&quot;</span>)
<a name="l00902"></a>00902 {
<a name="l00903"></a>00903   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00904"></a>00904   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l00905"></a>00905   <span class="keyword">struct </span><a class="code" href="structisis__area.html">isis_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
<a name="l00906"></a>00906   <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;
<a name="l00907"></a>00907 
<a name="l00908"></a>00908   ifp = (<span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *) <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l00909"></a>00909   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (ifp);
<a name="l00910"></a>00910 
<a name="l00911"></a>00911   area = <a class="code" href="isisd_8c.html#ae30541232d52f533602c5475e8c7a123">isis_area_lookup</a> (argv[0]);
<a name="l00912"></a>00912   <span class="keywordflow">if</span> (!area)
<a name="l00913"></a>00913     {
<a name="l00914"></a>00914       <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (<a class="code" href="structvty.html">vty</a>, <span class="stringliteral">&quot;Can&#39;t find ISIS instance %s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00915"></a>00915       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l00916"></a>00916     }
<a name="l00917"></a>00917   <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (area-&gt;<a class="code" href="structisis__area.html#a1ef8753b22245b7d8fff0331deef3b21">circuit_list</a>, node, circuit))
<a name="l00918"></a>00918     <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#ab03cac6463284a4ce8c1eb19e49f3b6d">interface</a> == ifp)
<a name="l00919"></a>00919       <span class="keywordflow">break</span>;
<a name="l00920"></a>00920   <span class="keywordflow">if</span> (!circuit)
<a name="l00921"></a>00921     {
<a name="l00922"></a>00922       <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (<a class="code" href="structvty.html">vty</a>, <span class="stringliteral">&quot;Can&#39;t find ISIS interface %s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00923"></a>00923       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l00924"></a>00924     }
<a name="l00925"></a>00925   circuit-&gt;<a class="code" href="structisis__circuit.html#a9dbb2266ee5b76604a27fd0855e910f5">ip_router</a> = 0;
<a name="l00926"></a>00926   area-&gt;<a class="code" href="structisis__area.html#a0b7b9b7b8a3eb903a0deb5c20791d761">ip_circuits</a>--;
<a name="l00927"></a>00927 <span class="preprocessor">#ifdef HAVE_IPV6</span>
<a name="l00928"></a>00928 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (circuit-&gt;ipv6_router == 0)
<a name="l00929"></a>00929 <span class="preprocessor">#endif</span>
<a name="l00930"></a>00930 <span class="preprocessor"></span>    <a class="code" href="isis__csm_8c.html#a96513c42708761fe8f65230cc2cfbb46">isis_csm_state_change</a> (<a class="code" href="isis__csm_8h.html#afbc76a923b68b468bd45c60b3ff39c0e">ISIS_DISABLE</a>, circuit, area);
<a name="l00931"></a>00931 
<a name="l00932"></a>00932   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l00933"></a>00933 }
<a name="l00934"></a>00934 
<a name="l00935"></a><a class="code" href="isis__circuit_8c.html#a882e500e6a1bea888707043948c56cd3">00935</a> <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (isis_circuit_type,
<a name="l00936"></a>00936        isis_circuit_type_cmd,
<a name="l00937"></a>00937        <span class="stringliteral">&quot;isis circuit-type (level-1|level-1-2|level-2-only)&quot;</span>,
<a name="l00938"></a>00938        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l00939"></a>00939        <span class="stringliteral">&quot;Configure circuit type for interface\n&quot;</span>
<a name="l00940"></a>00940        <span class="stringliteral">&quot;Level-1 only adjacencies are formed\n&quot;</span>
<a name="l00941"></a>00941        <span class="stringliteral">&quot;Level-1-2 adjacencies are formed\n&quot;</span>
<a name="l00942"></a>00942        <span class="stringliteral">&quot;Level-2 only adjacencies are formed\n&quot;</span>)
<a name="l00943"></a>00943 {
<a name="l00944"></a>00944   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l00945"></a>00945   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l00946"></a>00946   <span class="keywordtype">int</span> <a class="code" href="isis__pdu_8h.html#a4237fb9b680bb5a92208b7e02eccb6a1">circuit_t</a>;
<a name="l00947"></a>00947   <span class="keywordtype">int</span> is_type;
<a name="l00948"></a>00948 
<a name="l00949"></a>00949   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l00950"></a>00950   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l00951"></a>00951   <span class="comment">/* UGLY - will remove l8r */</span>
<a name="l00952"></a>00952   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00953"></a>00953     {
<a name="l00954"></a>00954       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l00955"></a>00955     }
<a name="l00956"></a>00956 
<a name="l00957"></a>00957   <span class="comment">/* XXX what to do when ip_router_isis is not executed */</span>
<a name="l00958"></a>00958   <span class="keywordflow">if</span> (circuit-&gt;<a class="code" href="structisis__circuit.html#a4284617c89806a77b3c2314e15ac508b">area</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00959"></a>00959     <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l00960"></a>00960 
<a name="l00961"></a>00961   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l00962"></a>00962 
<a name="l00963"></a>00963   circuit_t = <a class="code" href="isis__misc_8c.html#a97e42328beb4a58038f0c2cbd0c4c238">string2circuit_t</a> (argv[0]);
<a name="l00964"></a>00964 
<a name="l00965"></a>00965   <span class="keywordflow">if</span> (!circuit_t)
<a name="l00966"></a>00966     {
<a name="l00967"></a>00967       <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (<a class="code" href="structvty.html">vty</a>, <span class="stringliteral">&quot;Unknown circuit-type %s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00968"></a>00968       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l00969"></a>00969     }
<a name="l00970"></a>00970 
<a name="l00971"></a>00971   is_type = circuit-&gt;<a class="code" href="structisis__circuit.html#a4284617c89806a77b3c2314e15ac508b">area</a>-&gt;<a class="code" href="structisis__area.html#a81021eb6fb20d16db0d13c335baecdae">is_type</a>;
<a name="l00972"></a>00972   <span class="keywordflow">if</span> (is_type == <a class="code" href="isis__constants_8h.html#a9906fe43cc332e34827b3c233d509da6">IS_LEVEL_1_AND_2</a> || is_type == circuit_t)
<a name="l00973"></a>00973     <a class="code" href="isis__events_8c.html#a82a475c364fbb826267b9fd4c0ec34a0">isis_event_circuit_type_change</a> (circuit, circuit_t);
<a name="l00974"></a>00974   <span class="keywordflow">else</span>
<a name="l00975"></a>00975     {
<a name="l00976"></a>00976       <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (<a class="code" href="structvty.html">vty</a>, <span class="stringliteral">&quot;invalid circuit level for area %s.%s&quot;</span>,
<a name="l00977"></a>00977            circuit-&gt;<a class="code" href="structisis__circuit.html#a4284617c89806a77b3c2314e15ac508b">area</a>-&gt;<a class="code" href="structisis__area.html#aef5ef529e28214a477a6a7c2fe03c350">area_tag</a>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l00978"></a>00978     }
<a name="l00979"></a>00979 
<a name="l00980"></a>00980   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l00981"></a>00981 }
<a name="l00982"></a>00982 
<a name="l00983"></a><a class="code" href="isis__circuit_8c.html#a5059cf2189650e55c9dfb0d706d19b2e">00983</a> <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_isis_circuit_type,
<a name="l00984"></a>00984        no_isis_circuit_type_cmd,
<a name="l00985"></a>00985        <span class="stringliteral">&quot;no isis circuit-type (level-1|level-1-2|level-2-only)&quot;</span>,
<a name="l00986"></a>00986        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l00987"></a>00987        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l00988"></a>00988        <span class="stringliteral">&quot;Configure circuit type for interface\n&quot;</span>
<a name="l00989"></a>00989        <span class="stringliteral">&quot;Level-1 only adjacencies are formed\n&quot;</span>
<a name="l00990"></a>00990        <span class="stringliteral">&quot;Level-1-2 adjacencies are formed\n&quot;</span>
<a name="l00991"></a>00991        <span class="stringliteral">&quot;Level-2 only adjacencies are formed\n&quot;</span>)
<a name="l00992"></a>00992 {
<a name="l00993"></a>00993   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l00994"></a>00994   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l00995"></a>00995 
<a name="l00996"></a>00996   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l00997"></a>00997   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l00998"></a>00998   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00999"></a>00999     {
<a name="l01000"></a>01000       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01001"></a>01001     }
<a name="l01002"></a>01002 
<a name="l01003"></a>01003   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01004"></a>01004 
<a name="l01005"></a>01005   <span class="comment">/*</span>
<a name="l01006"></a>01006 <span class="comment">   * Set the circuits level to its default value which is that of the area</span>
<a name="l01007"></a>01007 <span class="comment">   */</span>
<a name="l01008"></a>01008   <a class="code" href="isis__events_8c.html#a82a475c364fbb826267b9fd4c0ec34a0">isis_event_circuit_type_change</a> (circuit, circuit-&gt;<a class="code" href="structisis__circuit.html#a4284617c89806a77b3c2314e15ac508b">area</a>-&gt;<a class="code" href="structisis__area.html#a81021eb6fb20d16db0d13c335baecdae">is_type</a>);
<a name="l01009"></a>01009 
<a name="l01010"></a>01010   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01011"></a>01011 }
<a name="l01012"></a>01012 
<a name="l01013"></a><a class="code" href="isis__circuit_8c.html#ae19643ced3250c0c13f9069768ba9dfd">01013</a> <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (<a class="code" href="structisis__passwd.html">isis_passwd</a>,
<a name="l01014"></a>01014        isis_passwd_cmd,
<a name="l01015"></a>01015        <span class="stringliteral">&quot;isis password WORD&quot;</span>,
<a name="l01016"></a>01016        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01017"></a>01017        <span class="stringliteral">&quot;Configure the authentication password for interface\n&quot;</span>
<a name="l01018"></a>01018        <span class="stringliteral">&quot;Password\n&quot;</span>)
<a name="l01019"></a>01019 {
<a name="l01020"></a>01020   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01021"></a>01021   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01022"></a>01022   <span class="keywordtype">int</span> len;
<a name="l01023"></a>01023 
<a name="l01024"></a>01024   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01025"></a>01025   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01026"></a>01026   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01027"></a>01027     {
<a name="l01028"></a>01028       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01029"></a>01029     }
<a name="l01030"></a>01030 
<a name="l01031"></a>01031   len = strlen (argv[0]);
<a name="l01032"></a>01032   <span class="keywordflow">if</span> (len &gt; 254)
<a name="l01033"></a>01033     {
<a name="l01034"></a>01034       <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (<a class="code" href="structvty.html">vty</a>, <span class="stringliteral">&quot;Too long circuit password (&gt;254)%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l01035"></a>01035       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01036"></a>01036     }
<a name="l01037"></a>01037   circuit-&gt;<a class="code" href="structisis__circuit.html#a601d2b4b3220757f8f7212f2a1628ab2">passwd</a>.<a class="code" href="structisis__passwd.html#a3981443a6501783995b003ab8fd82f48">len</a> = len;
<a name="l01038"></a>01038   circuit-&gt;<a class="code" href="structisis__circuit.html#a601d2b4b3220757f8f7212f2a1628ab2">passwd</a>.<a class="code" href="structisis__passwd.html#a874984e0745fbcb41df9f463d831be67">type</a> = <a class="code" href="isis__common_8h.html#a1883f8c30a26198657877c3860ae1160">ISIS_PASSWD_TYPE_CLEARTXT</a>;
<a name="l01039"></a>01039   strncpy ((<span class="keywordtype">char</span> *)circuit-&gt;<a class="code" href="structisis__circuit.html#a601d2b4b3220757f8f7212f2a1628ab2">passwd</a>.<a class="code" href="structisis__passwd.html#a4af92e1126df2d7d2abeef451c082567">passwd</a>, argv[0], 255);
<a name="l01040"></a>01040 
<a name="l01041"></a>01041   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01042"></a>01042 }
<a name="l01043"></a>01043 
<a name="l01044"></a><a class="code" href="isis__circuit_8c.html#abd034a7d0dddb7ac3f4dd9c07b746dca">01044</a> <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_isis_passwd,
<a name="l01045"></a>01045        no_isis_passwd_cmd,
<a name="l01046"></a>01046        <span class="stringliteral">&quot;no isis password&quot;</span>,
<a name="l01047"></a>01047        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01048"></a>01048        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01049"></a>01049        <span class="stringliteral">&quot;Configure the authentication password for interface\n&quot;</span>)
<a name="l01050"></a>01050 {
<a name="l01051"></a>01051   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01052"></a>01052   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01053"></a>01053 
<a name="l01054"></a>01054   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01055"></a>01055   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01056"></a>01056   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01057"></a>01057     {
<a name="l01058"></a>01058       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01059"></a>01059     }
<a name="l01060"></a>01060 
<a name="l01061"></a>01061   memset (&amp;circuit-&gt;<a class="code" href="structisis__circuit.html#a601d2b4b3220757f8f7212f2a1628ab2">passwd</a>, 0, sizeof (<span class="keyword">struct</span> <a class="code" href="structisis__passwd.html">isis_passwd</a>));
<a name="l01062"></a>01062 
<a name="l01063"></a>01063   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01064"></a>01064 }
<a name="l01065"></a>01065 
<a name="l01066"></a>01066 
<a name="l01067"></a><a class="code" href="isis__circuit_8c.html#a8cd79a6f4021320ed391dd680155acc3">01067</a> <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (isis_priority,
<a name="l01068"></a>01068        isis_priority_cmd,
<a name="l01069"></a>01069        <span class="stringliteral">&quot;isis priority &lt;0-127&gt;&quot;</span>,
<a name="l01070"></a>01070        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01071"></a>01071        <span class="stringliteral">&quot;Set priority for Designated Router election\n&quot;</span>
<a name="l01072"></a>01072        <span class="stringliteral">&quot;Priority value\n&quot;</span>)
<a name="l01073"></a>01073 {
<a name="l01074"></a>01074   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01075"></a>01075   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01076"></a>01076   <span class="keywordtype">int</span> <a class="code" href="isis__pdu_8h.html#a455591b58ffb2f0744e071145c7e7207">prio</a>;
<a name="l01077"></a>01077 
<a name="l01078"></a>01078   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01079"></a>01079   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01080"></a>01080   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01081"></a>01081     {
<a name="l01082"></a>01082       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01083"></a>01083     }
<a name="l01084"></a>01084   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01085"></a>01085 
<a name="l01086"></a>01086   prio = atoi (argv[0]);
<a name="l01087"></a>01087 
<a name="l01088"></a>01088   circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a9087f16298d7bbf26ac8b480c932ab8d">priority</a>[0] = <a class="code" href="isis__pdu_8h.html#a455591b58ffb2f0744e071145c7e7207">prio</a>;
<a name="l01089"></a>01089   circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a9087f16298d7bbf26ac8b480c932ab8d">priority</a>[1] = <a class="code" href="isis__pdu_8h.html#a455591b58ffb2f0744e071145c7e7207">prio</a>;
<a name="l01090"></a>01090 
<a name="l01091"></a>01091   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01092"></a>01092 }
<a name="l01093"></a>01093 
<a name="l01094"></a><a class="code" href="isis__circuit_8c.html#a3ce2f91a07aa04c3263efdedc1dc56e0">01094</a> <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_isis_priority,
<a name="l01095"></a>01095        no_isis_priority_cmd,
<a name="l01096"></a>01096        <span class="stringliteral">&quot;no isis priority&quot;</span>,
<a name="l01097"></a>01097        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01098"></a>01098        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01099"></a>01099        <span class="stringliteral">&quot;Set priority for Designated Router election\n&quot;</span>)
<a name="l01100"></a>01100 {
<a name="l01101"></a>01101   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01102"></a>01102   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01103"></a>01103 
<a name="l01104"></a>01104   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01105"></a>01105   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01106"></a>01106   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01107"></a>01107     {
<a name="l01108"></a>01108       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01109"></a>01109     }
<a name="l01110"></a>01110   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01111"></a>01111 
<a name="l01112"></a>01112   circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a9087f16298d7bbf26ac8b480c932ab8d">priority</a>[0] = <a class="code" href="isis__constants_8h.html#a0756f011ef667460d583017366823244">DEFAULT_PRIORITY</a>;
<a name="l01113"></a>01113   circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a9087f16298d7bbf26ac8b480c932ab8d">priority</a>[1] = <a class="code" href="isis__constants_8h.html#a0756f011ef667460d583017366823244">DEFAULT_PRIORITY</a>;
<a name="l01114"></a>01114 
<a name="l01115"></a>01115   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01116"></a>01116 }
<a name="l01117"></a>01117 
<a name="l01118"></a><a class="code" href="isis__circuit_8c.html#a48d33461bfc97a96306ed3101349e18c">01118</a> <a class="code" href="command_8h.html#a7a8f1df2b731617ea7ada9ba5cbdb704">ALIAS</a> (no_isis_priority,
<a name="l01119"></a>01119        no_isis_priority_arg_cmd,
<a name="l01120"></a>01120        <span class="stringliteral">&quot;no isis priority &lt;0-127&gt;&quot;</span>,
<a name="l01121"></a>01121        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01122"></a>01122        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01123"></a>01123        <span class="stringliteral">&quot;Set priority for Designated Router election\n&quot;</span>
<a name="l01124"></a>01124        <span class="stringliteral">&quot;Priority value\n&quot;</span>)
<a name="l01125"></a>01125 
<a name="l01126"></a>01126 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (isis_priority_l1,
<a name="l01127"></a>01127        isis_priority_l1_cmd,
<a name="l01128"></a>01128        &quot;isis priority &lt;0-127&gt; level-1&quot;,
<a name="l01129"></a>01129        &quot;IS-IS commands\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01130"></a>01130        &quot;Set priority for Designated Router election\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01131"></a>01131        &quot;Priority value\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01132"></a>01132        &quot;Specify priority for level-1 routing\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)
<a name="l01133"></a>01133 {
<a name="l01134"></a>01134   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01135"></a>01135   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01136"></a>01136   <span class="keywordtype">int</span> <a class="code" href="isis__pdu_8h.html#a455591b58ffb2f0744e071145c7e7207">prio</a>;
<a name="l01137"></a>01137 
<a name="l01138"></a>01138   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01139"></a>01139   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01140"></a>01140   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01141"></a>01141     {
<a name="l01142"></a>01142       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01143"></a>01143     }
<a name="l01144"></a>01144   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01145"></a>01145 
<a name="l01146"></a>01146   prio = atoi (argv[0]);
<a name="l01147"></a>01147 
<a name="l01148"></a>01148   circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a9087f16298d7bbf26ac8b480c932ab8d">priority</a>[0] = <a class="code" href="isis__pdu_8h.html#a455591b58ffb2f0744e071145c7e7207">prio</a>;
<a name="l01149"></a>01149 
<a name="l01150"></a>01150   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01151"></a>01151 }
<a name="l01152"></a>01152 
<a name="l01153"></a><a class="code" href="isis__circuit_8c.html#a1fa339fb7de3bef35c0300ecc939788a">01153</a> <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_isis_priority_l1,
<a name="l01154"></a>01154        no_isis_priority_l1_cmd,
<a name="l01155"></a>01155        <span class="stringliteral">&quot;no isis priority level-1&quot;</span>,
<a name="l01156"></a>01156        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01157"></a>01157        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01158"></a>01158        <span class="stringliteral">&quot;Set priority for Designated Router election\n&quot;</span>
<a name="l01159"></a>01159        <span class="stringliteral">&quot;Specify priority for level-1 routing\n&quot;</span>)
<a name="l01160"></a>01160 {
<a name="l01161"></a>01161   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01162"></a>01162   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01163"></a>01163 
<a name="l01164"></a>01164   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01165"></a>01165   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01166"></a>01166   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01167"></a>01167     {
<a name="l01168"></a>01168       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01169"></a>01169     }
<a name="l01170"></a>01170   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01171"></a>01171 
<a name="l01172"></a>01172   circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a9087f16298d7bbf26ac8b480c932ab8d">priority</a>[0] = <a class="code" href="isis__constants_8h.html#a0756f011ef667460d583017366823244">DEFAULT_PRIORITY</a>;
<a name="l01173"></a>01173 
<a name="l01174"></a>01174   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01175"></a>01175 }
<a name="l01176"></a>01176 
<a name="l01177"></a><a class="code" href="isis__circuit_8c.html#a2eb36dce6fa40876b1a5dd55e25a3b0a">01177</a> <a class="code" href="command_8h.html#a7a8f1df2b731617ea7ada9ba5cbdb704">ALIAS</a> (no_isis_priority_l1,
<a name="l01178"></a>01178        no_isis_priority_l1_arg_cmd,
<a name="l01179"></a>01179        <span class="stringliteral">&quot;no isis priority &lt;0-127&gt; level-1&quot;</span>,
<a name="l01180"></a>01180        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01181"></a>01181        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01182"></a>01182        <span class="stringliteral">&quot;Set priority for Designated Router election\n&quot;</span>
<a name="l01183"></a>01183        <span class="stringliteral">&quot;Priority value\n&quot;</span>
<a name="l01184"></a>01184        <span class="stringliteral">&quot;Specify priority for level-1 routing\n&quot;</span>)
<a name="l01185"></a>01185 
<a name="l01186"></a>01186 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (isis_priority_l2,
<a name="l01187"></a>01187        isis_priority_l2_cmd,
<a name="l01188"></a>01188        &quot;isis priority &lt;0-127&gt; level-2&quot;,
<a name="l01189"></a>01189        &quot;IS-IS commands\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01190"></a>01190        &quot;Set priority for Designated Router election\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01191"></a>01191        &quot;Priority value\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01192"></a>01192        &quot;Specify priority for level-2 routing\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)
<a name="l01193"></a>01193 {
<a name="l01194"></a>01194   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01195"></a>01195   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01196"></a>01196   <span class="keywordtype">int</span> <a class="code" href="isis__pdu_8h.html#a455591b58ffb2f0744e071145c7e7207">prio</a>;
<a name="l01197"></a>01197 
<a name="l01198"></a>01198   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01199"></a>01199   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01200"></a>01200   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01201"></a>01201     {
<a name="l01202"></a>01202       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01203"></a>01203     }
<a name="l01204"></a>01204   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01205"></a>01205 
<a name="l01206"></a>01206   prio = atoi (argv[0]);
<a name="l01207"></a>01207 
<a name="l01208"></a>01208   circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a9087f16298d7bbf26ac8b480c932ab8d">priority</a>[1] = <a class="code" href="isis__pdu_8h.html#a455591b58ffb2f0744e071145c7e7207">prio</a>;
<a name="l01209"></a>01209 
<a name="l01210"></a>01210   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01211"></a>01211 }
<a name="l01212"></a>01212 
<a name="l01213"></a><a class="code" href="isis__circuit_8c.html#ae4203f23e501a5f67205ecd885e6b5b6">01213</a> <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_isis_priority_l2,
<a name="l01214"></a>01214        no_isis_priority_l2_cmd,
<a name="l01215"></a>01215        <span class="stringliteral">&quot;no isis priority level-2&quot;</span>,
<a name="l01216"></a>01216        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01217"></a>01217        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01218"></a>01218        <span class="stringliteral">&quot;Set priority for Designated Router election\n&quot;</span>
<a name="l01219"></a>01219        <span class="stringliteral">&quot;Specify priority for level-2 routing\n&quot;</span>)
<a name="l01220"></a>01220 {
<a name="l01221"></a>01221   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01222"></a>01222   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01223"></a>01223 
<a name="l01224"></a>01224   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01225"></a>01225   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01226"></a>01226   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01227"></a>01227     {
<a name="l01228"></a>01228       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01229"></a>01229     }
<a name="l01230"></a>01230   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01231"></a>01231 
<a name="l01232"></a>01232   circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a9087f16298d7bbf26ac8b480c932ab8d">priority</a>[1] = <a class="code" href="isis__constants_8h.html#a0756f011ef667460d583017366823244">DEFAULT_PRIORITY</a>;
<a name="l01233"></a>01233 
<a name="l01234"></a>01234   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01235"></a>01235 }
<a name="l01236"></a>01236 
<a name="l01237"></a><a class="code" href="isis__circuit_8c.html#af5574dda855316908cef69164834665e">01237</a> <a class="code" href="command_8h.html#a7a8f1df2b731617ea7ada9ba5cbdb704">ALIAS</a> (no_isis_priority_l2,
<a name="l01238"></a>01238        no_isis_priority_l2_arg_cmd,
<a name="l01239"></a>01239        <span class="stringliteral">&quot;no isis priority &lt;0-127&gt; level-2&quot;</span>,
<a name="l01240"></a>01240        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01241"></a>01241        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01242"></a>01242        <span class="stringliteral">&quot;Set priority for Designated Router election\n&quot;</span>
<a name="l01243"></a>01243        <span class="stringliteral">&quot;Priority value\n&quot;</span>
<a name="l01244"></a>01244        <span class="stringliteral">&quot;Specify priority for level-2 routing\n&quot;</span>)
<a name="l01245"></a>01245 
<a name="l01246"></a>01246 <span class="comment">/* Metric command */</span>
<a name="l01247"></a>01247   <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (isis_metric,
<a name="l01248"></a>01248        isis_metric_cmd,
<a name="l01249"></a>01249        &quot;isis <a class="code" href="structmetric.html">metric</a> &lt;0-16777215&gt;&quot;,
<a name="l01250"></a>01250        &quot;IS-IS commands\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01251"></a>01251        &quot;Set default metric for circuit\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01252"></a>01252        &quot;Default metric value\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)
<a name="l01253"></a>01253 {
<a name="l01254"></a>01254   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01255"></a>01255   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01256"></a>01256   <span class="keywordtype">int</span> met;
<a name="l01257"></a>01257 
<a name="l01258"></a>01258   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01259"></a>01259   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01260"></a>01260   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01261"></a>01261     {
<a name="l01262"></a>01262       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01263"></a>01263     }
<a name="l01264"></a>01264   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01265"></a>01265 
<a name="l01266"></a>01266   met = atoi (argv[0]);
<a name="l01267"></a>01267 
<a name="l01268"></a>01268   circuit-&gt;<a class="code" href="structisis__circuit.html#abf3f18b710cf84b23e7005c08e6594b2">te_metric</a>[0] = met;
<a name="l01269"></a>01269   circuit-&gt;<a class="code" href="structisis__circuit.html#abf3f18b710cf84b23e7005c08e6594b2">te_metric</a>[1] = met;
<a name="l01270"></a>01270 
<a name="l01271"></a>01271   <span class="keywordflow">if</span> (met &gt; 63)
<a name="l01272"></a>01272     met = 63;
<a name="l01273"></a>01273 
<a name="l01274"></a>01274   circuit-&gt;<a class="code" href="structisis__circuit.html#a33545b43653e59a814cbd283c3f8c056">metrics</a>[0].<a class="code" href="structmetric.html#ae927ddb546511096f632820b678d73bf">metric_default</a> = met;
<a name="l01275"></a>01275   circuit-&gt;<a class="code" href="structisis__circuit.html#a33545b43653e59a814cbd283c3f8c056">metrics</a>[1].<a class="code" href="structmetric.html#ae927ddb546511096f632820b678d73bf">metric_default</a> = met;
<a name="l01276"></a>01276 
<a name="l01277"></a>01277   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01278"></a>01278 }
<a name="l01279"></a>01279 
<a name="l01280"></a><a class="code" href="isis__circuit_8c.html#a1189f123f15b23c62310cf35f0bf7fa9">01280</a> <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_isis_metric,
<a name="l01281"></a>01281        no_isis_metric_cmd,
<a name="l01282"></a>01282        <span class="stringliteral">&quot;no isis metric&quot;</span>,
<a name="l01283"></a>01283        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01284"></a>01284        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01285"></a>01285        <span class="stringliteral">&quot;Set default metric for circuit\n&quot;</span>)
<a name="l01286"></a>01286 {
<a name="l01287"></a>01287   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01288"></a>01288   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01289"></a>01289 
<a name="l01290"></a>01290   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01291"></a>01291   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01292"></a>01292   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01293"></a>01293     {
<a name="l01294"></a>01294       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01295"></a>01295     }
<a name="l01296"></a>01296   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01297"></a>01297 
<a name="l01298"></a>01298   circuit-&gt;<a class="code" href="structisis__circuit.html#abf3f18b710cf84b23e7005c08e6594b2">te_metric</a>[0] = <a class="code" href="isis__constants_8h.html#ae0395bf404df3647661120cefe80c298">DEFAULT_CIRCUIT_METRICS</a>;
<a name="l01299"></a>01299   circuit-&gt;<a class="code" href="structisis__circuit.html#abf3f18b710cf84b23e7005c08e6594b2">te_metric</a>[1] = <a class="code" href="isis__constants_8h.html#ae0395bf404df3647661120cefe80c298">DEFAULT_CIRCUIT_METRICS</a>;
<a name="l01300"></a>01300   circuit-&gt;<a class="code" href="structisis__circuit.html#a33545b43653e59a814cbd283c3f8c056">metrics</a>[0].<a class="code" href="structmetric.html#ae927ddb546511096f632820b678d73bf">metric_default</a> = <a class="code" href="isis__constants_8h.html#ae0395bf404df3647661120cefe80c298">DEFAULT_CIRCUIT_METRICS</a>;
<a name="l01301"></a>01301   circuit-&gt;<a class="code" href="structisis__circuit.html#a33545b43653e59a814cbd283c3f8c056">metrics</a>[1].<a class="code" href="structmetric.html#ae927ddb546511096f632820b678d73bf">metric_default</a> = <a class="code" href="isis__constants_8h.html#ae0395bf404df3647661120cefe80c298">DEFAULT_CIRCUIT_METRICS</a>;
<a name="l01302"></a>01302 
<a name="l01303"></a>01303   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01304"></a>01304 }
<a name="l01305"></a>01305 
<a name="l01306"></a><a class="code" href="isis__circuit_8c.html#a64662ed69c17c656e7af5653e05bcdbe">01306</a> <a class="code" href="command_8h.html#a7a8f1df2b731617ea7ada9ba5cbdb704">ALIAS</a> (no_isis_metric,
<a name="l01307"></a>01307        no_isis_metric_arg_cmd,
<a name="l01308"></a>01308        <span class="stringliteral">&quot;no isis metric &lt;0-16777215&gt;&quot;</span>,
<a name="l01309"></a>01309        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01310"></a>01310        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01311"></a>01311        <span class="stringliteral">&quot;Set default metric for circuit\n&quot;</span>
<a name="l01312"></a>01312        <span class="stringliteral">&quot;Default metric value\n&quot;</span>)
<a name="l01313"></a>01313 
<a name="l01314"></a>01314 <span class="comment">/* end of metrics */</span>
<a name="l01315"></a>01315 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (isis_hello_interval,
<a name="l01316"></a>01316        isis_hello_interval_cmd,
<a name="l01317"></a>01317        &quot;isis hello-<a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a> (&lt;1-65535&gt;|minimal)&quot;,
<a name="l01318"></a>01318        &quot;IS-IS commands\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01319"></a>01319        &quot;Set Hello <a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a>\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01320"></a>01320        &quot;Hello <a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a> value\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01321"></a>01321        &quot;Holdtime 1 seconds, <a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a> depends on multiplier\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)
<a name="l01322"></a>01322 {
<a name="l01323"></a>01323   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01324"></a>01324   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01325"></a>01325   <span class="keywordtype">int</span> <a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a>;
<a name="l01326"></a>01326   <span class="keywordtype">char</span> c;
<a name="l01327"></a>01327 
<a name="l01328"></a>01328   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01329"></a>01329   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01330"></a>01330   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01331"></a>01331     {
<a name="l01332"></a>01332       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01333"></a>01333     }
<a name="l01334"></a>01334   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01335"></a>01335   c = *argv[0];
<a name="l01336"></a>01336   <span class="keywordflow">if</span> (isdigit ((<span class="keywordtype">int</span>) c))
<a name="l01337"></a>01337     {
<a name="l01338"></a>01338       interval = atoi (argv[0]);
<a name="l01339"></a>01339     }
<a name="l01340"></a>01340   <span class="keywordflow">else</span>
<a name="l01341"></a>01341     interval = <a class="code" href="isis__constants_8h.html#a6e83fd249aefcc54af420f8456239ac5">HELLO_MINIMAL</a>;   <span class="comment">/* FIXME: should be calculated */</span>
<a name="l01342"></a>01342 
<a name="l01343"></a>01343   circuit-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[0] = (u_int16_t) interval;
<a name="l01344"></a>01344   circuit-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[1] = (u_int16_t) interval;
<a name="l01345"></a>01345 
<a name="l01346"></a>01346   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01347"></a>01347 }
<a name="l01348"></a>01348 
<a name="l01349"></a><a class="code" href="isis__circuit_8c.html#a9fa39e937c52235551eecdee2bacb3a9">01349</a> <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_isis_hello_interval,
<a name="l01350"></a>01350        no_isis_hello_interval_cmd,
<a name="l01351"></a>01351        <span class="stringliteral">&quot;no isis hello-interval&quot;</span>,
<a name="l01352"></a>01352        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01353"></a>01353        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01354"></a>01354        <span class="stringliteral">&quot;Set Hello interval\n&quot;</span>)
<a name="l01355"></a>01355 {
<a name="l01356"></a>01356   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01357"></a>01357   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01358"></a>01358 
<a name="l01359"></a>01359   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01360"></a>01360   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01361"></a>01361   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01362"></a>01362     {
<a name="l01363"></a>01363       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01364"></a>01364     }
<a name="l01365"></a>01365   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01366"></a>01366 
<a name="l01367"></a>01367 
<a name="l01368"></a>01368   circuit-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[0] = <a class="code" href="isis__constants_8h.html#ad91e2777a540273c5c76b631c2cafe06">HELLO_INTERVAL</a>;  <span class="comment">/* Default is 1 sec. */</span>
<a name="l01369"></a>01369   circuit-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[1] = <a class="code" href="isis__constants_8h.html#ad91e2777a540273c5c76b631c2cafe06">HELLO_INTERVAL</a>;
<a name="l01370"></a>01370 
<a name="l01371"></a>01371   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01372"></a>01372 }
<a name="l01373"></a>01373 
<a name="l01374"></a>01374 <a class="code" href="command_8h.html#a7a8f1df2b731617ea7ada9ba5cbdb704">ALIAS</a> (no_isis_hello_interval,
<a name="l01375"></a>01375        no_isis_hello_interval_arg_cmd,
<a name="l01376"></a>01376        <span class="stringliteral">&quot;no isis hello-interval (&lt;1-65535&gt;|minimal)&quot;</span>,
<a name="l01377"></a>01377        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01378"></a>01378        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01379"></a>01379        <span class="stringliteral">&quot;Set Hello interval\n&quot;</span>
<a name="l01380"></a>01380        <span class="stringliteral">&quot;Hello interval value\n&quot;</span>
<a name="l01381"></a>01381        <span class="stringliteral">&quot;Holdtime 1 second, interval depends on multiplier\n&quot;</span>)
<a name="l01382"></a>01382 
<a name="l01383"></a>01383 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (isis_hello_interval_l1,
<a name="l01384"></a><a class="code" href="isis__circuit_8c.html#acdc3e3e190f3d90d9ee7c51a4aaf7c7c">01384</a>        <a class="code" href="isis__circuit_8c.html#acdc3e3e190f3d90d9ee7c51a4aaf7c7c">isis_hello_interval_l1_cmd</a>,
<a name="l01385"></a>01385        &quot;isis hello-<a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a> (&lt;1-65535&gt;|minimal) level-1&quot;,
<a name="l01386"></a>01386        &quot;IS-IS commands\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01387"></a>01387        &quot;Set Hello <a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a>\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01388"></a>01388        &quot;Hello <a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a> value\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01389"></a><a class="code" href="isis__circuit_8c.html#a9330cf63cb76c1de52610f3a5eab39b5">01389</a>        &quot;Holdtime 1 <a class="code" href="isis__circuit_8c.html#a9330cf63cb76c1de52610f3a5eab39b5">second</a>, <a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a> depends on multiplier\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01390"></a>01390        &quot;Specify hello-<a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a> for level-1 IIHs\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)
<a name="l01391"></a>01391 {
<a name="l01392"></a>01392   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01393"></a>01393   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01394"></a>01394   <span class="keywordtype">long</span> <a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a>;
<a name="l01395"></a>01395   <span class="keywordtype">char</span> c;
<a name="l01396"></a>01396 
<a name="l01397"></a>01397   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01398"></a>01398   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01399"></a>01399   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01400"></a>01400     {
<a name="l01401"></a>01401       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01402"></a>01402     }
<a name="l01403"></a>01403   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01404"></a>01404 
<a name="l01405"></a>01405   c = *argv[0];
<a name="l01406"></a>01406   <span class="keywordflow">if</span> (isdigit ((<span class="keywordtype">int</span>) c))
<a name="l01407"></a>01407     {
<a name="l01408"></a>01408       interval = atoi (argv[0]);
<a name="l01409"></a>01409     }
<a name="l01410"></a>01410   <span class="keywordflow">else</span>
<a name="l01411"></a>01411     interval = <a class="code" href="isis__constants_8h.html#a6e83fd249aefcc54af420f8456239ac5">HELLO_MINIMAL</a>;
<a name="l01412"></a>01412 
<a name="l01413"></a>01413   circuit-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[0] = (u_int16_t) interval;
<a name="l01414"></a>01414 
<a name="l01415"></a>01415   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01416"></a>01416 }
<a name="l01417"></a>01417 
<a name="l01418"></a>01418 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_isis_hello_interval_l1,
<a name="l01419"></a>01419        no_isis_hello_interval_l1_cmd,
<a name="l01420"></a>01420        <span class="stringliteral">&quot;no isis hello-interval level-1&quot;</span>,
<a name="l01421"></a>01421        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01422"></a>01422        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01423"></a>01423        <span class="stringliteral">&quot;Set Hello interval\n&quot;</span>
<a name="l01424"></a>01424        <span class="stringliteral">&quot;Specify hello-interval for level-1 IIHs\n&quot;</span>)
<a name="l01425"></a>01425 {
<a name="l01426"></a>01426   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01427"></a>01427   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01428"></a>01428 
<a name="l01429"></a>01429   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01430"></a>01430   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01431"></a>01431   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01432"></a>01432     {
<a name="l01433"></a>01433       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01434"></a>01434     }
<a name="l01435"></a>01435   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01436"></a>01436 
<a name="l01437"></a>01437 
<a name="l01438"></a>01438   circuit-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[0] = <a class="code" href="isis__constants_8h.html#ad91e2777a540273c5c76b631c2cafe06">HELLO_INTERVAL</a>;  <span class="comment">/* Default is 1 sec. */</span>
<a name="l01439"></a>01439 
<a name="l01440"></a>01440   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01441"></a>01441 }
<a name="l01442"></a>01442 
<a name="l01443"></a>01443 <a class="code" href="command_8h.html#a7a8f1df2b731617ea7ada9ba5cbdb704">ALIAS</a> (no_isis_hello_interval_l1,
<a name="l01444"></a>01444        no_isis_hello_interval_l1_arg_cmd,
<a name="l01445"></a>01445        <span class="stringliteral">&quot;no isis hello-interval (&lt;1-65535&gt;|minimal) level-1&quot;</span>,
<a name="l01446"></a>01446        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01447"></a>01447        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01448"></a>01448        <span class="stringliteral">&quot;Set Hello interval\n&quot;</span>
<a name="l01449"></a>01449        <span class="stringliteral">&quot;Hello interval value\n&quot;</span>
<a name="l01450"></a>01450        <span class="stringliteral">&quot;Holdtime 1 second, interval depends on multiplier\n&quot;</span>
<a name="l01451"></a>01451        <span class="stringliteral">&quot;Specify hello-interval for level-1 IIHs\n&quot;</span>)
<a name="l01452"></a>01452 
<a name="l01453"></a>01453 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (isis_hello_interval_l2,
<a name="l01454"></a>01454        isis_hello_interval_l2_cmd,
<a name="l01455"></a>01455        &quot;isis hello-<a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a> (&lt;1-65535&gt;|minimal) level-2&quot;,
<a name="l01456"></a>01456        &quot;IS-IS commands\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01457"></a>01457        &quot;Set Hello <a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a>\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01458"></a>01458        &quot;Hello <a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a> value\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01459"></a>01459        &quot;Holdtime 1 <a class="code" href="isis__circuit_8c.html#a9330cf63cb76c1de52610f3a5eab39b5">second</a>, <a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a> depends on multiplier\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;
<a name="l01460"></a>01460        &quot;Specify hello-<a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a> for level-2 IIHs\<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)
<a name="l01461"></a>01461 {
<a name="l01462"></a>01462   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01463"></a>01463   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01464"></a>01464   <span class="keywordtype">long</span> <a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a>;
<a name="l01465"></a>01465   <span class="keywordtype">char</span> c;
<a name="l01466"></a>01466 
<a name="l01467"></a>01467   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01468"></a>01468   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01469"></a>01469   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01470"></a>01470     {
<a name="l01471"></a>01471       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01472"></a>01472     }
<a name="l01473"></a>01473   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01474"></a>01474 
<a name="l01475"></a>01475   c = *argv[0];
<a name="l01476"></a>01476   <span class="keywordflow">if</span> (isdigit ((<span class="keywordtype">int</span>) c))
<a name="l01477"></a>01477     {
<a name="l01478"></a>01478       interval = atoi (argv[0]);
<a name="l01479"></a>01479     }
<a name="l01480"></a>01480   <span class="keywordflow">else</span>
<a name="l01481"></a>01481     interval = <a class="code" href="isis__constants_8h.html#a6e83fd249aefcc54af420f8456239ac5">HELLO_MINIMAL</a>;
<a name="l01482"></a>01482 
<a name="l01483"></a>01483   circuit-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[1] = (u_int16_t) interval;
<a name="l01484"></a>01484 
<a name="l01485"></a>01485   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01486"></a>01486 }
<a name="l01487"></a>01487 
<a name="l01488"></a>01488 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_isis_hello_interval_l2,
<a name="l01489"></a>01489        no_isis_hello_interval_l2_cmd,
<a name="l01490"></a>01490        <span class="stringliteral">&quot;no isis hello-interval level-2&quot;</span>,
<a name="l01491"></a>01491        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01492"></a>01492        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01493"></a>01493        <span class="stringliteral">&quot;Set Hello interval\n&quot;</span>
<a name="l01494"></a>01494        <span class="stringliteral">&quot;Specify hello-interval for level-2 IIHs\n&quot;</span>)
<a name="l01495"></a>01495 {
<a name="l01496"></a>01496   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01497"></a>01497   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01498"></a>01498 
<a name="l01499"></a>01499   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01500"></a>01500   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01501"></a>01501   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01502"></a>01502     {
<a name="l01503"></a>01503       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01504"></a>01504     }
<a name="l01505"></a>01505   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01506"></a>01506 
<a name="l01507"></a>01507 
<a name="l01508"></a>01508   circuit-&gt;<a class="code" href="structisis__circuit.html#a7edd39f2abe11ecbbd758dc1a0d3f8c0">hello_interval</a>[1] = <a class="code" href="isis__constants_8h.html#ad91e2777a540273c5c76b631c2cafe06">HELLO_INTERVAL</a>;  <span class="comment">/* Default is 1 sec. */</span>
<a name="l01509"></a>01509 
<a name="l01510"></a>01510   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01511"></a>01511 }
<a name="l01512"></a>01512 
<a name="l01513"></a>01513 <a class="code" href="command_8h.html#a7a8f1df2b731617ea7ada9ba5cbdb704">ALIAS</a> (no_isis_hello_interval_l2,
<a name="l01514"></a>01514        no_isis_hello_interval_l2_arg_cmd,
<a name="l01515"></a>01515        <span class="stringliteral">&quot;no isis hello-interval (&lt;1-65535&gt;|minimal) level-2&quot;</span>,
<a name="l01516"></a>01516        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01517"></a>01517        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01518"></a>01518        <span class="stringliteral">&quot;Set Hello interval\n&quot;</span>
<a name="l01519"></a>01519        <span class="stringliteral">&quot;Hello interval value\n&quot;</span>
<a name="l01520"></a>01520        <span class="stringliteral">&quot;Holdtime 1 second, interval depends on multiplier\n&quot;</span>
<a name="l01521"></a>01521        <span class="stringliteral">&quot;Specify hello-interval for level-2 IIHs\n&quot;</span>)
<a name="l01522"></a>01522 
<a name="l01523"></a>01523 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (isis_hello_multiplier,
<a name="l01524"></a>01524        isis_hello_multiplier_cmd,
<a name="l01525"></a>01525        &quot;isis hello-multiplier &lt;3-1000&gt;&quot;,
<a name="l01526"></a>01526        &quot;IS-IS commands\n&quot;
<a name="l01527"></a>01527        &quot;Set multiplier for Hello holding time\n&quot;
<a name="l01528"></a>01528        &quot;Hello multiplier value\n&quot;)
<a name="l01529"></a>01529 {
<a name="l01530"></a>01530   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01531"></a>01531   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01532"></a>01532   <span class="keywordtype">int</span> mult;
<a name="l01533"></a>01533 
<a name="l01534"></a>01534   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01535"></a>01535   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01536"></a>01536   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01537"></a>01537     {
<a name="l01538"></a>01538       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01539"></a>01539     }
<a name="l01540"></a>01540   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01541"></a>01541 
<a name="l01542"></a>01542   mult = atoi (argv[0]);
<a name="l01543"></a>01543 
<a name="l01544"></a>01544   circuit-&gt;<a class="code" href="structisis__circuit.html#a9af263fd35717a7f759e4a0cf2fd1a2b">hello_multiplier</a>[0] = (u_int16_t) mult;
<a name="l01545"></a>01545   circuit-&gt;<a class="code" href="structisis__circuit.html#a9af263fd35717a7f759e4a0cf2fd1a2b">hello_multiplier</a>[1] = (u_int16_t) mult;
<a name="l01546"></a>01546 
<a name="l01547"></a>01547   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01548"></a>01548 }
<a name="l01549"></a>01549 
<a name="l01550"></a>01550 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_isis_hello_multiplier,
<a name="l01551"></a>01551        no_isis_hello_multiplier_cmd,
<a name="l01552"></a>01552        <span class="stringliteral">&quot;no isis hello-multiplier&quot;</span>,
<a name="l01553"></a>01553        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01554"></a>01554        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01555"></a>01555        <span class="stringliteral">&quot;Set multiplier for Hello holding time\n&quot;</span>)
<a name="l01556"></a>01556 {
<a name="l01557"></a>01557   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01558"></a>01558   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01559"></a>01559 
<a name="l01560"></a>01560   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01561"></a>01561   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01562"></a>01562   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01563"></a>01563     {
<a name="l01564"></a>01564       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01565"></a>01565     }
<a name="l01566"></a>01566   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01567"></a>01567 
<a name="l01568"></a>01568   circuit-&gt;<a class="code" href="structisis__circuit.html#a9af263fd35717a7f759e4a0cf2fd1a2b">hello_multiplier</a>[0] = <a class="code" href="isis__constants_8h.html#a78063dfa967b692d4129669779c4b5d9">HELLO_MULTIPLIER</a>;
<a name="l01569"></a>01569   circuit-&gt;<a class="code" href="structisis__circuit.html#a9af263fd35717a7f759e4a0cf2fd1a2b">hello_multiplier</a>[1] = <a class="code" href="isis__constants_8h.html#a78063dfa967b692d4129669779c4b5d9">HELLO_MULTIPLIER</a>;
<a name="l01570"></a>01570 
<a name="l01571"></a>01571   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01572"></a>01572 }
<a name="l01573"></a>01573 
<a name="l01574"></a>01574 <a class="code" href="command_8h.html#a7a8f1df2b731617ea7ada9ba5cbdb704">ALIAS</a> (no_isis_hello_multiplier,
<a name="l01575"></a>01575        no_isis_hello_multiplier_arg_cmd,
<a name="l01576"></a>01576        <span class="stringliteral">&quot;no isis hello-multiplier &lt;3-1000&gt;&quot;</span>,
<a name="l01577"></a>01577        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01578"></a>01578        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01579"></a>01579        <span class="stringliteral">&quot;Set multiplier for Hello holding time\n&quot;</span>
<a name="l01580"></a>01580        <span class="stringliteral">&quot;Hello multiplier value\n&quot;</span>)
<a name="l01581"></a>01581 
<a name="l01582"></a>01582 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (isis_hello_multiplier_l1,
<a name="l01583"></a>01583        isis_hello_multiplier_l1_cmd,
<a name="l01584"></a>01584        &quot;isis hello-multiplier &lt;3-1000&gt; level-1&quot;,
<a name="l01585"></a>01585        &quot;IS-IS commands\n&quot;
<a name="l01586"></a>01586        &quot;Set multiplier for Hello holding time\n&quot;
<a name="l01587"></a>01587        &quot;Hello multiplier value\n&quot;
<a name="l01588"></a>01588        &quot;Specify hello multiplier for level-1 IIHs\n&quot;)
<a name="l01589"></a>01589 {
<a name="l01590"></a>01590   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01591"></a>01591   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01592"></a>01592   <span class="keywordtype">int</span> mult;
<a name="l01593"></a>01593 
<a name="l01594"></a>01594   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01595"></a>01595   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01596"></a>01596   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01597"></a>01597     {
<a name="l01598"></a>01598       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01599"></a>01599     }
<a name="l01600"></a>01600   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01601"></a>01601 
<a name="l01602"></a>01602   mult = atoi (argv[0]);
<a name="l01603"></a>01603 
<a name="l01604"></a>01604   circuit-&gt;<a class="code" href="structisis__circuit.html#a9af263fd35717a7f759e4a0cf2fd1a2b">hello_multiplier</a>[0] = (u_int16_t) mult;
<a name="l01605"></a>01605 
<a name="l01606"></a>01606   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01607"></a>01607 }
<a name="l01608"></a>01608 
<a name="l01609"></a>01609 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_isis_hello_multiplier_l1,
<a name="l01610"></a>01610        no_isis_hello_multiplier_l1_cmd,
<a name="l01611"></a>01611        <span class="stringliteral">&quot;no isis hello-multiplier level-1&quot;</span>,
<a name="l01612"></a>01612        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01613"></a>01613        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01614"></a>01614        <span class="stringliteral">&quot;Set multiplier for Hello holding time\n&quot;</span>
<a name="l01615"></a>01615        <span class="stringliteral">&quot;Specify hello multiplier for level-1 IIHs\n&quot;</span>)
<a name="l01616"></a>01616 {
<a name="l01617"></a>01617   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01618"></a>01618   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01619"></a>01619 
<a name="l01620"></a>01620   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01621"></a>01621   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01622"></a>01622   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01623"></a>01623     {
<a name="l01624"></a>01624       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01625"></a>01625     }
<a name="l01626"></a>01626   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01627"></a>01627 
<a name="l01628"></a>01628   circuit-&gt;<a class="code" href="structisis__circuit.html#a9af263fd35717a7f759e4a0cf2fd1a2b">hello_multiplier</a>[0] = <a class="code" href="isis__constants_8h.html#a78063dfa967b692d4129669779c4b5d9">HELLO_MULTIPLIER</a>;
<a name="l01629"></a>01629 
<a name="l01630"></a>01630   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01631"></a>01631 }
<a name="l01632"></a>01632 
<a name="l01633"></a>01633 <a class="code" href="command_8h.html#a7a8f1df2b731617ea7ada9ba5cbdb704">ALIAS</a> (no_isis_hello_multiplier_l1,
<a name="l01634"></a>01634        no_isis_hello_multiplier_l1_arg_cmd,
<a name="l01635"></a>01635        <span class="stringliteral">&quot;no isis hello-multiplier &lt;3-1000&gt; level-1&quot;</span>,
<a name="l01636"></a>01636        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01637"></a>01637        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01638"></a>01638        <span class="stringliteral">&quot;Set multiplier for Hello holding time\n&quot;</span>
<a name="l01639"></a>01639        <span class="stringliteral">&quot;Hello multiplier value\n&quot;</span>
<a name="l01640"></a>01640        <span class="stringliteral">&quot;Specify hello multiplier for level-1 IIHs\n&quot;</span>)
<a name="l01641"></a>01641 
<a name="l01642"></a>01642 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (isis_hello_multiplier_l2,
<a name="l01643"></a>01643        isis_hello_multiplier_l2_cmd,
<a name="l01644"></a>01644        &quot;isis hello-multiplier &lt;3-1000&gt; level-2&quot;,
<a name="l01645"></a>01645        &quot;IS-IS commands\n&quot;
<a name="l01646"></a>01646        &quot;Set multiplier for Hello holding time\n&quot;
<a name="l01647"></a>01647        &quot;Hello multiplier value\n&quot;
<a name="l01648"></a>01648        &quot;Specify hello multiplier for level-2 IIHs\n&quot;)
<a name="l01649"></a>01649 {
<a name="l01650"></a>01650   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01651"></a>01651   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01652"></a>01652   <span class="keywordtype">int</span> mult;
<a name="l01653"></a>01653 
<a name="l01654"></a>01654   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01655"></a>01655   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01656"></a>01656   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01657"></a>01657     {
<a name="l01658"></a>01658       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01659"></a>01659     }
<a name="l01660"></a>01660   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01661"></a>01661 
<a name="l01662"></a>01662   mult = atoi (argv[0]);
<a name="l01663"></a>01663 
<a name="l01664"></a>01664   circuit-&gt;<a class="code" href="structisis__circuit.html#a9af263fd35717a7f759e4a0cf2fd1a2b">hello_multiplier</a>[1] = (u_int16_t) mult;
<a name="l01665"></a>01665 
<a name="l01666"></a>01666   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01667"></a>01667 }
<a name="l01668"></a>01668 
<a name="l01669"></a>01669 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_isis_hello_multiplier_l2,
<a name="l01670"></a>01670        no_isis_hello_multiplier_l2_cmd,
<a name="l01671"></a>01671        <span class="stringliteral">&quot;no isis hello-multiplier level-2&quot;</span>,
<a name="l01672"></a>01672        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01673"></a>01673        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01674"></a>01674        <span class="stringliteral">&quot;Set multiplier for Hello holding time\n&quot;</span>
<a name="l01675"></a>01675        <span class="stringliteral">&quot;Specify hello multiplier for level-2 IIHs\n&quot;</span>)
<a name="l01676"></a>01676 {
<a name="l01677"></a>01677   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01678"></a>01678   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01679"></a>01679 
<a name="l01680"></a>01680   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01681"></a>01681   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01682"></a>01682   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01683"></a>01683     {
<a name="l01684"></a>01684       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01685"></a>01685     }
<a name="l01686"></a>01686   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01687"></a>01687 
<a name="l01688"></a>01688   circuit-&gt;<a class="code" href="structisis__circuit.html#a9af263fd35717a7f759e4a0cf2fd1a2b">hello_multiplier</a>[1] = <a class="code" href="isis__constants_8h.html#a78063dfa967b692d4129669779c4b5d9">HELLO_MULTIPLIER</a>;
<a name="l01689"></a>01689 
<a name="l01690"></a>01690   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01691"></a>01691 }
<a name="l01692"></a>01692 
<a name="l01693"></a>01693 <a class="code" href="command_8h.html#a7a8f1df2b731617ea7ada9ba5cbdb704">ALIAS</a> (no_isis_hello_multiplier_l2,
<a name="l01694"></a>01694        no_isis_hello_multiplier_l2_arg_cmd,
<a name="l01695"></a>01695        <span class="stringliteral">&quot;no isis hello-multiplier &lt;3-1000&gt; level-2&quot;</span>,
<a name="l01696"></a>01696        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01697"></a>01697        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01698"></a>01698        <span class="stringliteral">&quot;Set multiplier for Hello holding time\n&quot;</span>
<a name="l01699"></a>01699        <span class="stringliteral">&quot;Hello multiplier value\n&quot;</span>
<a name="l01700"></a>01700        <span class="stringliteral">&quot;Specify hello multiplier for level-2 IIHs\n&quot;</span>)
<a name="l01701"></a>01701 
<a name="l01702"></a>01702 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (isis_hello,
<a name="l01703"></a>01703        isis_hello_cmd,
<a name="l01704"></a>01704        &quot;isis hello padding&quot;,
<a name="l01705"></a>01705        &quot;IS-IS commands\n&quot;
<a name="l01706"></a>01706        &quot;Add padding to IS-IS hello packets\n&quot;
<a name="l01707"></a>01707        &quot;Pad hello packets\n&quot;
<a name="l01708"></a>01708        &quot;&lt;cr&gt;\n&quot;)
<a name="l01709"></a>01709 {
<a name="l01710"></a>01710   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01711"></a>01711   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01712"></a>01712 
<a name="l01713"></a>01713   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01714"></a>01714   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01715"></a>01715   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01716"></a>01716     {
<a name="l01717"></a>01717       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01718"></a>01718     }
<a name="l01719"></a>01719   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01720"></a>01720 
<a name="l01721"></a>01721   circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a83676730231d3a5aad5d5914957a2b68">pad_hellos</a> = 1;
<a name="l01722"></a>01722 
<a name="l01723"></a>01723   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01724"></a>01724 }
<a name="l01725"></a>01725 
<a name="l01726"></a>01726 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_isis_hello,
<a name="l01727"></a>01727        no_isis_hello_cmd,
<a name="l01728"></a>01728        <span class="stringliteral">&quot;no isis hello padding&quot;</span>,
<a name="l01729"></a>01729        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01730"></a>01730        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01731"></a>01731        <span class="stringliteral">&quot;Add padding to IS-IS hello packets\n&quot;</span>
<a name="l01732"></a>01732        <span class="stringliteral">&quot;Pad hello packets\n&quot;</span>
<a name="l01733"></a>01733        <span class="stringliteral">&quot;&lt;cr&gt;\n&quot;</span>)
<a name="l01734"></a>01734 {
<a name="l01735"></a>01735   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01736"></a>01736   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01737"></a>01737 
<a name="l01738"></a>01738   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01739"></a>01739   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01740"></a>01740   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01741"></a>01741     {
<a name="l01742"></a>01742       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01743"></a>01743     }
<a name="l01744"></a>01744   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01745"></a>01745 
<a name="l01746"></a>01746   circuit-&gt;<a class="code" href="structisis__circuit.html#a054734bc8d5a177c375cd28ab313dfc4">u</a>.<a class="code" href="structisis__circuit.html#a921ef29acc454e98615e0269f3bc926e">bc</a>.<a class="code" href="structisis__bcast__info.html#a83676730231d3a5aad5d5914957a2b68">pad_hellos</a> = 0;
<a name="l01747"></a>01747 
<a name="l01748"></a>01748   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01749"></a>01749 }
<a name="l01750"></a>01750 
<a name="l01751"></a>01751 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (csnp_interval,
<a name="l01752"></a>01752        csnp_interval_cmd,
<a name="l01753"></a>01753        <span class="stringliteral">&quot;isis csnp-interval &lt;0-65535&gt;&quot;</span>,
<a name="l01754"></a>01754        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01755"></a>01755        <span class="stringliteral">&quot;Set CSNP interval in seconds\n&quot;</span>
<a name="l01756"></a>01756        <span class="stringliteral">&quot;CSNP interval value\n&quot;</span>)
<a name="l01757"></a>01757 {
<a name="l01758"></a>01758   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01759"></a>01759   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01760"></a>01760   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a>;
<a name="l01761"></a>01761 
<a name="l01762"></a>01762   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01763"></a>01763   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01764"></a>01764   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01765"></a>01765     {
<a name="l01766"></a>01766       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01767"></a>01767     }
<a name="l01768"></a>01768   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01769"></a>01769 
<a name="l01770"></a>01770   interval = atol (argv[0]);
<a name="l01771"></a>01771 
<a name="l01772"></a>01772   circuit-&gt;<a class="code" href="structisis__circuit.html#a1b3a587132c475f3b90b5f8b03ec182d">csnp_interval</a>[0] = (u_int16_t) interval;
<a name="l01773"></a>01773   circuit-&gt;<a class="code" href="structisis__circuit.html#a1b3a587132c475f3b90b5f8b03ec182d">csnp_interval</a>[1] = (u_int16_t) interval;
<a name="l01774"></a>01774 
<a name="l01775"></a>01775   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01776"></a>01776 }
<a name="l01777"></a>01777 
<a name="l01778"></a>01778 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_csnp_interval,
<a name="l01779"></a>01779        no_csnp_interval_cmd,
<a name="l01780"></a>01780        <span class="stringliteral">&quot;no isis csnp-interval&quot;</span>,
<a name="l01781"></a>01781        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01782"></a>01782        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01783"></a>01783        <span class="stringliteral">&quot;Set CSNP interval in seconds\n&quot;</span>)
<a name="l01784"></a>01784 {
<a name="l01785"></a>01785   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01786"></a>01786   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01787"></a>01787 
<a name="l01788"></a>01788   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01789"></a>01789   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01790"></a>01790   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01791"></a>01791     {
<a name="l01792"></a>01792       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01793"></a>01793     }
<a name="l01794"></a>01794   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01795"></a>01795 
<a name="l01796"></a>01796   circuit-&gt;<a class="code" href="structisis__circuit.html#a1b3a587132c475f3b90b5f8b03ec182d">csnp_interval</a>[0] = <a class="code" href="isis__constants_8h.html#ade8e15a2ed12580594384b1d7efff5b8">CSNP_INTERVAL</a>;
<a name="l01797"></a>01797   circuit-&gt;<a class="code" href="structisis__circuit.html#a1b3a587132c475f3b90b5f8b03ec182d">csnp_interval</a>[1] = <a class="code" href="isis__constants_8h.html#ade8e15a2ed12580594384b1d7efff5b8">CSNP_INTERVAL</a>;
<a name="l01798"></a>01798 
<a name="l01799"></a>01799   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01800"></a>01800 }
<a name="l01801"></a>01801 
<a name="l01802"></a>01802 <a class="code" href="command_8h.html#a7a8f1df2b731617ea7ada9ba5cbdb704">ALIAS</a> (no_csnp_interval,
<a name="l01803"></a>01803        no_csnp_interval_arg_cmd,
<a name="l01804"></a>01804        <span class="stringliteral">&quot;no isis csnp-interval &lt;0-65535&gt;&quot;</span>,
<a name="l01805"></a>01805        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01806"></a>01806        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01807"></a>01807        <span class="stringliteral">&quot;Set CSNP interval in seconds\n&quot;</span>
<a name="l01808"></a>01808        <span class="stringliteral">&quot;CSNP interval value\n&quot;</span>)
<a name="l01809"></a>01809 
<a name="l01810"></a>01810 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (csnp_interval_l1,
<a name="l01811"></a>01811        csnp_interval_l1_cmd,
<a name="l01812"></a>01812        &quot;isis csnp-interval &lt;0-65535&gt; level-1&quot;,
<a name="l01813"></a>01813        &quot;IS-IS commands\n&quot;
<a name="l01814"></a>01814        &quot;Set CSNP interval <a class="code" href="spgrid_8c.html#a89e1c555af4b92f6ee8d6f112f47ed12">in</a> seconds\n&quot;
<a name="l01815"></a>01815        &quot;CSNP interval value\n&quot;
<a name="l01816"></a>01816        &quot;Specify interval for level-1 CSNPs\n&quot;)
<a name="l01817"></a>01817 {
<a name="l01818"></a>01818   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01819"></a>01819   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01820"></a>01820   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a>;
<a name="l01821"></a>01821 
<a name="l01822"></a>01822   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01823"></a>01823   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01824"></a>01824   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01825"></a>01825     {
<a name="l01826"></a>01826       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01827"></a>01827     }
<a name="l01828"></a>01828   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01829"></a>01829 
<a name="l01830"></a>01830   interval = atol (argv[0]);
<a name="l01831"></a>01831 
<a name="l01832"></a>01832   circuit-&gt;<a class="code" href="structisis__circuit.html#a1b3a587132c475f3b90b5f8b03ec182d">csnp_interval</a>[0] = (u_int16_t) interval;
<a name="l01833"></a>01833 
<a name="l01834"></a>01834   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01835"></a>01835 }
<a name="l01836"></a>01836 
<a name="l01837"></a>01837 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_csnp_interval_l1,
<a name="l01838"></a>01838        no_csnp_interval_l1_cmd,
<a name="l01839"></a>01839        <span class="stringliteral">&quot;no isis csnp-interval level-1&quot;</span>,
<a name="l01840"></a>01840        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01841"></a>01841        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01842"></a>01842        <span class="stringliteral">&quot;Set CSNP interval in seconds\n&quot;</span>
<a name="l01843"></a>01843        <span class="stringliteral">&quot;Specify interval for level-1 CSNPs\n&quot;</span>)
<a name="l01844"></a>01844 {
<a name="l01845"></a>01845   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01846"></a>01846   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01847"></a>01847 
<a name="l01848"></a>01848   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01849"></a>01849   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01850"></a>01850   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01851"></a>01851     {
<a name="l01852"></a>01852       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01853"></a>01853     }
<a name="l01854"></a>01854   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01855"></a>01855 
<a name="l01856"></a>01856   circuit-&gt;<a class="code" href="structisis__circuit.html#a1b3a587132c475f3b90b5f8b03ec182d">csnp_interval</a>[0] = <a class="code" href="isis__constants_8h.html#ade8e15a2ed12580594384b1d7efff5b8">CSNP_INTERVAL</a>;
<a name="l01857"></a>01857 
<a name="l01858"></a>01858   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01859"></a>01859 }
<a name="l01860"></a>01860 
<a name="l01861"></a>01861 <a class="code" href="command_8h.html#a7a8f1df2b731617ea7ada9ba5cbdb704">ALIAS</a> (no_csnp_interval_l1,
<a name="l01862"></a>01862        no_csnp_interval_l1_arg_cmd,
<a name="l01863"></a>01863        <span class="stringliteral">&quot;no isis csnp-interval &lt;0-65535&gt; level-1&quot;</span>,
<a name="l01864"></a>01864        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01865"></a>01865        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01866"></a>01866        <span class="stringliteral">&quot;Set CSNP interval in seconds\n&quot;</span>
<a name="l01867"></a>01867        <span class="stringliteral">&quot;CSNP interval value\n&quot;</span>
<a name="l01868"></a>01868        <span class="stringliteral">&quot;Specify interval for level-1 CSNPs\n&quot;</span>)
<a name="l01869"></a>01869 
<a name="l01870"></a>01870 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (csnp_interval_l2,
<a name="l01871"></a>01871        csnp_interval_l2_cmd,
<a name="l01872"></a>01872        &quot;isis csnp-interval &lt;0-65535&gt; level-2&quot;,
<a name="l01873"></a>01873        &quot;IS-IS commands\n&quot;
<a name="l01874"></a>01874        &quot;Set CSNP interval <a class="code" href="spgrid_8c.html#a89e1c555af4b92f6ee8d6f112f47ed12">in</a> seconds\n&quot;
<a name="l01875"></a>01875        &quot;CSNP interval value\n&quot;
<a name="l01876"></a>01876        &quot;Specify interval for level-2 CSNPs\n&quot;)
<a name="l01877"></a>01877 {
<a name="l01878"></a>01878   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01879"></a>01879   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01880"></a>01880   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="isis__circuit_8c.html#a900b5f9651c07bafd5d81cc876b93885">interval</a>;
<a name="l01881"></a>01881 
<a name="l01882"></a>01882   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01883"></a>01883   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01884"></a>01884   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01885"></a>01885     {
<a name="l01886"></a>01886       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01887"></a>01887     }
<a name="l01888"></a>01888   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01889"></a>01889 
<a name="l01890"></a>01890   interval = atol (argv[0]);
<a name="l01891"></a>01891 
<a name="l01892"></a>01892   circuit-&gt;<a class="code" href="structisis__circuit.html#a1b3a587132c475f3b90b5f8b03ec182d">csnp_interval</a>[1] = (u_int16_t) interval;
<a name="l01893"></a>01893 
<a name="l01894"></a>01894   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01895"></a>01895 }
<a name="l01896"></a>01896 
<a name="l01897"></a>01897 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_csnp_interval_l2,
<a name="l01898"></a>01898        no_csnp_interval_l2_cmd,
<a name="l01899"></a>01899        <span class="stringliteral">&quot;no isis csnp-interval level-2&quot;</span>,
<a name="l01900"></a>01900        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01901"></a>01901        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01902"></a>01902        <span class="stringliteral">&quot;Set CSNP interval in seconds\n&quot;</span>
<a name="l01903"></a>01903        <span class="stringliteral">&quot;Specify interval for level-2 CSNPs\n&quot;</span>)
<a name="l01904"></a>01904 {
<a name="l01905"></a>01905   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *circuit;
<a name="l01906"></a>01906   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01907"></a>01907 
<a name="l01908"></a>01908   ifp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01909"></a>01909   circuit = ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a>;
<a name="l01910"></a>01910   <span class="keywordflow">if</span> (circuit == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01911"></a>01911     {
<a name="l01912"></a>01912       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01913"></a>01913     }
<a name="l01914"></a>01914   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (circuit);
<a name="l01915"></a>01915 
<a name="l01916"></a>01916   circuit-&gt;<a class="code" href="structisis__circuit.html#a1b3a587132c475f3b90b5f8b03ec182d">csnp_interval</a>[1] = <a class="code" href="isis__constants_8h.html#ade8e15a2ed12580594384b1d7efff5b8">CSNP_INTERVAL</a>;
<a name="l01917"></a>01917 
<a name="l01918"></a>01918   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01919"></a>01919 }
<a name="l01920"></a>01920 
<a name="l01921"></a>01921 <a class="code" href="command_8h.html#a7a8f1df2b731617ea7ada9ba5cbdb704">ALIAS</a> (no_csnp_interval_l2,
<a name="l01922"></a>01922        no_csnp_interval_l2_arg_cmd,
<a name="l01923"></a>01923        <span class="stringliteral">&quot;no isis csnp-interval &lt;0-65535&gt; level-2&quot;</span>,
<a name="l01924"></a>01924        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01925"></a>01925        <span class="stringliteral">&quot;IS-IS commands\n&quot;</span>
<a name="l01926"></a>01926        <span class="stringliteral">&quot;Set CSNP interval in seconds\n&quot;</span>
<a name="l01927"></a>01927        <span class="stringliteral">&quot;CSNP interval value\n&quot;</span>
<a name="l01928"></a>01928        <span class="stringliteral">&quot;Specify interval for level-2 CSNPs\n&quot;</span>)
<a name="l01929"></a>01929 
<a name="l01930"></a>01930 <span class="preprocessor">#ifdef HAVE_IPV6</span>
<a name="l01931"></a>01931 <span class="preprocessor"></span><a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (ipv6_router_isis,
<a name="l01932"></a>01932        ipv6_router_isis_cmd,
<a name="l01933"></a>01933        <span class="stringliteral">&quot;ipv6 router isis WORD&quot;</span>,
<a name="l01934"></a>01934        <span class="stringliteral">&quot;IPv6 interface subcommands\n&quot;</span>
<a name="l01935"></a>01935        <span class="stringliteral">&quot;IPv6 Router interface commands\n&quot;</span>
<a name="l01936"></a>01936        <span class="stringliteral">&quot;IS-IS Routing for IPv6\n&quot;</span>
<a name="l01937"></a>01937        <span class="stringliteral">&quot;Routing process tag\n&quot;</span>)
<a name="l01938"></a>01938 {
<a name="l01939"></a>01939   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *c;
<a name="l01940"></a>01940   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l01941"></a>01941   <span class="keyword">struct </span><a class="code" href="structisis__area.html">isis_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
<a name="l01942"></a>01942 
<a name="l01943"></a>01943   ifp = (<span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *) <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l01944"></a>01944   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (ifp);
<a name="l01945"></a>01945 
<a name="l01946"></a>01946   area = <a class="code" href="isisd_8c.html#ae30541232d52f533602c5475e8c7a123">isis_area_lookup</a> (argv[0]);
<a name="l01947"></a>01947 
<a name="l01948"></a>01948   <span class="comment">/* Prevent more than one circuit per interface */</span>
<a name="l01949"></a>01949   <span class="keywordflow">if</span> (area)
<a name="l01950"></a>01950     c = <a class="code" href="isis__circuit_8c.html#af5503c527a2e390b90d9fb6fca3639d0">circuit_lookup_by_ifp</a> (ifp, area-&gt;<a class="code" href="structisis__area.html#a1ef8753b22245b7d8fff0331deef3b21">circuit_list</a>);
<a name="l01951"></a>01951   <span class="keywordflow">else</span>
<a name="l01952"></a>01952     c = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01953"></a>01953 
<a name="l01954"></a>01954   <span class="keywordflow">if</span> (c &amp;&amp; (ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a> != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))
<a name="l01955"></a>01955     {
<a name="l01956"></a>01956       <span class="keywordflow">if</span> (c-&gt;ipv6_router == 1)
<a name="l01957"></a>01957     {
<a name="l01958"></a>01958       <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (<a class="code" href="structvty.html">vty</a>, <span class="stringliteral">&quot;ISIS circuit is already defined for IPv6%s&quot;</span>,
<a name="l01959"></a>01959            <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l01960"></a>01960       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01961"></a>01961     }
<a name="l01962"></a>01962     }
<a name="l01963"></a>01963 
<a name="l01964"></a>01964   <span class="comment">/* this is here for ciscopability */</span>
<a name="l01965"></a>01965   <span class="keywordflow">if</span> (!area)
<a name="l01966"></a>01966     {
<a name="l01967"></a>01967       <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (<a class="code" href="structvty.html">vty</a>, <span class="stringliteral">&quot;Can&#39;t find ISIS instance %s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l01968"></a>01968       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01969"></a>01969     }
<a name="l01970"></a>01970 
<a name="l01971"></a>01971   <span class="keywordflow">if</span> (!c)
<a name="l01972"></a>01972     {
<a name="l01973"></a>01973       c = <a class="code" href="isis__circuit_8c.html#af5503c527a2e390b90d9fb6fca3639d0">circuit_lookup_by_ifp</a> (ifp, isis-&gt;<a class="code" href="structisis.html#a464d8575b5b93d8eb6d869144b4a3220">init_circ_list</a>);
<a name="l01974"></a>01974       c = <a class="code" href="isis__csm_8c.html#a96513c42708761fe8f65230cc2cfbb46">isis_csm_state_change</a> (<a class="code" href="isis__csm_8h.html#aa4e8fb3f5707745d784424f543218162">ISIS_ENABLE</a>, c, area);
<a name="l01975"></a>01975       c-&gt;<a class="code" href="structisis__circuit.html#ab03cac6463284a4ce8c1eb19e49f3b6d">interface</a> = ifp;
<a name="l01976"></a>01976       ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a> = c;
<a name="l01977"></a>01977     }
<a name="l01978"></a>01978 
<a name="l01979"></a>01979   <span class="keywordflow">if</span> (!c)
<a name="l01980"></a>01980     <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l01981"></a>01981 
<a name="l01982"></a>01982   c-&gt;ipv6_router = 1;
<a name="l01983"></a>01983   area-&gt;ipv6_circuits++;
<a name="l01984"></a>01984   <a class="code" href="isis__circuit_8c.html#a0e981ef34777d26b91cbee95612ba505">circuit_update_nlpids</a> (c);
<a name="l01985"></a>01985 
<a name="l01986"></a>01986   <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9ac72abb8e0411b52a9d91d1a11aeaff">node</a> = <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>;
<a name="l01987"></a>01987 
<a name="l01988"></a>01988   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l01989"></a>01989 }
<a name="l01990"></a>01990 
<a name="l01991"></a>01991 <a class="code" href="command_8h.html#acc29190d35966eddbcfeceed3aab6d25">DEFUN</a> (no_ipv6_router_isis,
<a name="l01992"></a>01992        no_ipv6_router_isis_cmd,
<a name="l01993"></a>01993        <span class="stringliteral">&quot;no ipv6 router isis WORD&quot;</span>,
<a name="l01994"></a>01994        <a class="code" href="command_8h.html#a5b14384572729c1d1b3755d1bea1f17d">NO_STR</a>
<a name="l01995"></a>01995        <span class="stringliteral">&quot;IPv6 interface subcommands\n&quot;</span>
<a name="l01996"></a>01996        <span class="stringliteral">&quot;IPv6 Router interface commands\n&quot;</span>
<a name="l01997"></a>01997        <span class="stringliteral">&quot;IS-IS Routing for IPv6\n&quot;</span>
<a name="l01998"></a>01998        <span class="stringliteral">&quot;Routing process tag\n&quot;</span>)
<a name="l01999"></a>01999 {
<a name="l02000"></a>02000   <span class="keyword">struct </span><a class="code" href="structisis__circuit.html">isis_circuit</a> *c;
<a name="l02001"></a>02001   <span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *ifp;
<a name="l02002"></a>02002   <span class="keyword">struct </span><a class="code" href="structisis__area.html">isis_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
<a name="l02003"></a>02003 
<a name="l02004"></a>02004   ifp = (<span class="keyword">struct </span><a class="code" href="structinterface.html">interface</a> *) <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;
<a name="l02005"></a>02005   <span class="comment">/* UGLY - will remove l8r</span>
<a name="l02006"></a>02006 <span class="comment">     if (circuit == NULL) {</span>
<a name="l02007"></a>02007 <span class="comment">     return CMD_WARNING;</span>
<a name="l02008"></a>02008 <span class="comment">     } */</span>
<a name="l02009"></a>02009   <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (ifp);
<a name="l02010"></a>02010 
<a name="l02011"></a>02011   area = <a class="code" href="isisd_8c.html#ae30541232d52f533602c5475e8c7a123">isis_area_lookup</a> (argv[0]);
<a name="l02012"></a>02012   <span class="keywordflow">if</span> (!area)
<a name="l02013"></a>02013     {
<a name="l02014"></a>02014       <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (<a class="code" href="structvty.html">vty</a>, <span class="stringliteral">&quot;Can&#39;t find ISIS instance %s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
<a name="l02015"></a>02015       <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l02016"></a>02016     }
<a name="l02017"></a>02017 
<a name="l02018"></a>02018   c = <a class="code" href="isis__circuit_8c.html#af5503c527a2e390b90d9fb6fca3639d0">circuit_lookup_by_ifp</a> (ifp, area-&gt;<a class="code" href="structisis__area.html#a1ef8753b22245b7d8fff0331deef3b21">circuit_list</a>);
<a name="l02019"></a>02019   <span class="keywordflow">if</span> (!c)
<a name="l02020"></a>02020     <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
<a name="l02021"></a>02021 
<a name="l02022"></a>02022   c-&gt;ipv6_router = 0;
<a name="l02023"></a>02023   area-&gt;ipv6_circuits--;
<a name="l02024"></a>02024   <span class="keywordflow">if</span> (c-&gt;<a class="code" href="structisis__circuit.html#a9dbb2266ee5b76604a27fd0855e910f5">ip_router</a> == 0)
<a name="l02025"></a>02025     <a class="code" href="isis__csm_8c.html#a96513c42708761fe8f65230cc2cfbb46">isis_csm_state_change</a> (<a class="code" href="isis__csm_8h.html#afbc76a923b68b468bd45c60b3ff39c0e">ISIS_DISABLE</a>, c, area);
<a name="l02026"></a>02026 
<a name="l02027"></a>02027   <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
<a name="l02028"></a>02028 }
<a name="l02029"></a>02029 <span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
<a name="l02030"></a>02030 
<a name="l02031"></a>02031 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcmd__node.html">cmd_node</a> <a class="code" href="interface_8c.html#a16f01e8f31d361deea8af5ea55c2d2ec">interface_node</a> = {
<a name="l02032"></a>02032   <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>,
<a name="l02033"></a>02033   <span class="stringliteral">&quot;%s(config-if)# &quot;</span>,
<a name="l02034"></a>02034   1,
<a name="l02035"></a>02035 };
<a name="l02036"></a>02036 
<a name="l02037"></a>02037 <span class="keywordtype">int</span>
<a name="l02038"></a><a class="code" href="isis__circuit_8c.html#a8105376f97b6cc730ec0daeeff8d21a3">02038</a> <a class="code" href="isis__circuit_8c.html#a8105376f97b6cc730ec0daeeff8d21a3">isis_if_new_hook</a> (<span class="keyword">struct</span> <a class="code" href="structinterface.html">interface</a> *ifp)
<a name="l02039"></a>02039 {
<a name="l02040"></a>02040 <span class="comment">/* FIXME: Discuss if the circuit should be created here</span>
<a name="l02041"></a>02041 <span class="comment">  ifp-&gt;info = XMALLOC (MTYPE_ISIS_IF_INFO, sizeof (struct isis_if_info)); */</span>
<a name="l02042"></a>02042   ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02043"></a>02043   <span class="keywordflow">return</span> 0;
<a name="l02044"></a>02044 }
<a name="l02045"></a>02045 
<a name="l02046"></a>02046 <span class="keywordtype">int</span>
<a name="l02047"></a><a class="code" href="isis__circuit_8c.html#ae0cff0254c709b737c11ad3827e2deee">02047</a> <a class="code" href="isis__circuit_8c.html#ae0cff0254c709b737c11ad3827e2deee">isis_if_delete_hook</a> (<span class="keyword">struct</span> <a class="code" href="structinterface.html">interface</a> *ifp)
<a name="l02048"></a>02048 {
<a name="l02049"></a>02049 <span class="comment">/* FIXME: Discuss if the circuit should be created here</span>
<a name="l02050"></a>02050 <span class="comment">  XFREE (MTYPE_ISIS_IF_INFO, ifp-&gt;info);*/</span>
<a name="l02051"></a>02051   ifp-&gt;<a class="code" href="structinterface.html#a580b288c96c34d57028bfecee2b912c8">info</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02052"></a>02052   <span class="keywordflow">return</span> 0;
<a name="l02053"></a>02053 }
<a name="l02054"></a>02054 
<a name="l02055"></a>02055 <span class="keywordtype">void</span>
<a name="l02056"></a><a class="code" href="isis__circuit_8h.html#a75981352f0c8989c6896be9daf8ca52c">02056</a> <a class="code" href="isis__circuit_8c.html#a2f6bceb3c6efaf164afd01a4b872320f">isis_circuit_init</a> ()
<a name="l02057"></a>02057 {
<a name="l02058"></a>02058   <span class="comment">/* Initialize Zebra interface data structure */</span>
<a name="l02059"></a>02059   <a class="code" href="if_8c.html#ac78cad8082fa880e50b2c945f8a3c33d">if_init</a> ();
<a name="l02060"></a>02060   <a class="code" href="if_8c.html#af0a4090e849fe0dff798e976d8fa2482">if_add_hook</a> (<a class="code" href="if_8h.html#a4185c142d0c9619a6cab25061dfd50f3">IF_NEW_HOOK</a>, <a class="code" href="isis__circuit_8c.html#a8105376f97b6cc730ec0daeeff8d21a3">isis_if_new_hook</a>);
<a name="l02061"></a>02061   <a class="code" href="if_8c.html#af0a4090e849fe0dff798e976d8fa2482">if_add_hook</a> (<a class="code" href="if_8h.html#afa0a12fa62fd3fd8b5fb9a1b917f3afa">IF_DELETE_HOOK</a>, <a class="code" href="isis__circuit_8c.html#ae0cff0254c709b737c11ad3827e2deee">isis_if_delete_hook</a>);
<a name="l02062"></a>02062 
<a name="l02063"></a>02063   <span class="comment">/* Install interface node */</span>
<a name="l02064"></a>02064   <a class="code" href="command_8c.html#a7ee8a7c258e1e5a6e3ff6173dd1658e3">install_node</a> (&amp;interface_node, <a class="code" href="isis__circuit_8c.html#a30f2f4ba1a5ce5e5d838e38e5bb5a32e">isis_interface_config_write</a>);
<a name="l02065"></a>02065   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50754044f565f7421a152eaa411eebcc">CONFIG_NODE</a>, &amp;<a class="code" href="if_8h.html#ab6e8f13999936ceba12d9a8e36484c49">interface_cmd</a>);
<a name="l02066"></a>02066 
<a name="l02067"></a>02067   <a class="code" href="command_8h.html#affb2f399c88b8a225b2719bbe928e4de">install_default</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>);
<a name="l02068"></a>02068   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;<a class="code" href="if_8h.html#a51777a76e1c996fcf81ab577db829158">interface_desc_cmd</a>);
<a name="l02069"></a>02069   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;<a class="code" href="if_8h.html#aee31b677aae5a7d464c06d1aabc3f87a">no_interface_desc_cmd</a>);
<a name="l02070"></a>02070 
<a name="l02071"></a>02071   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;ip_router_isis_cmd);
<a name="l02072"></a>02072   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_ip_router_isis_cmd);
<a name="l02073"></a>02073 
<a name="l02074"></a>02074   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;isis_circuit_type_cmd);
<a name="l02075"></a>02075   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_circuit_type_cmd);
<a name="l02076"></a>02076 
<a name="l02077"></a>02077   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;isis_passwd_cmd);
<a name="l02078"></a>02078   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_passwd_cmd);
<a name="l02079"></a>02079 
<a name="l02080"></a>02080   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;isis_priority_cmd);
<a name="l02081"></a>02081   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_priority_cmd);
<a name="l02082"></a>02082   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_priority_arg_cmd);
<a name="l02083"></a>02083   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;isis_priority_l1_cmd);
<a name="l02084"></a>02084   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_priority_l1_cmd);
<a name="l02085"></a>02085   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_priority_l1_arg_cmd);
<a name="l02086"></a>02086   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;isis_priority_l2_cmd);
<a name="l02087"></a>02087   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_priority_l2_cmd);
<a name="l02088"></a>02088   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_priority_l2_arg_cmd);
<a name="l02089"></a>02089 
<a name="l02090"></a>02090   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;isis_metric_cmd);
<a name="l02091"></a>02091   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_metric_cmd);
<a name="l02092"></a>02092   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_metric_arg_cmd);
<a name="l02093"></a>02093 
<a name="l02094"></a>02094   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;isis_hello_interval_cmd);
<a name="l02095"></a>02095   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_hello_interval_cmd);
<a name="l02096"></a>02096   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_hello_interval_arg_cmd);
<a name="l02097"></a>02097   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;<a class="code" href="isis__circuit_8c.html#acdc3e3e190f3d90d9ee7c51a4aaf7c7c">isis_hello_interval_l1_cmd</a>);
<a name="l02098"></a>02098   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_hello_interval_l1_cmd);
<a name="l02099"></a>02099   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_hello_interval_l1_arg_cmd);
<a name="l02100"></a>02100   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;isis_hello_interval_l2_cmd);
<a name="l02101"></a>02101   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_hello_interval_l2_cmd);
<a name="l02102"></a>02102   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_hello_interval_l2_arg_cmd);
<a name="l02103"></a>02103 
<a name="l02104"></a>02104   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;isis_hello_multiplier_cmd);
<a name="l02105"></a>02105   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_hello_multiplier_cmd);
<a name="l02106"></a>02106   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_hello_multiplier_arg_cmd);
<a name="l02107"></a>02107   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;isis_hello_multiplier_l1_cmd);
<a name="l02108"></a>02108   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_hello_multiplier_l1_cmd);
<a name="l02109"></a>02109   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_hello_multiplier_l1_arg_cmd);
<a name="l02110"></a>02110   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;isis_hello_multiplier_l2_cmd);
<a name="l02111"></a>02111   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_hello_multiplier_l2_cmd);
<a name="l02112"></a>02112   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_hello_multiplier_l2_arg_cmd);
<a name="l02113"></a>02113 
<a name="l02114"></a>02114   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;isis_hello_cmd);
<a name="l02115"></a>02115   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_isis_hello_cmd);
<a name="l02116"></a>02116   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;csnp_interval_cmd);
<a name="l02117"></a>02117   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_csnp_interval_cmd);
<a name="l02118"></a>02118   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_csnp_interval_arg_cmd);
<a name="l02119"></a>02119   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;csnp_interval_l1_cmd);
<a name="l02120"></a>02120   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_csnp_interval_l1_cmd);
<a name="l02121"></a>02121   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_csnp_interval_l1_arg_cmd);
<a name="l02122"></a>02122   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;csnp_interval_l2_cmd);
<a name="l02123"></a>02123   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_csnp_interval_l2_cmd);
<a name="l02124"></a>02124   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_csnp_interval_l2_arg_cmd);
<a name="l02125"></a>02125 
<a name="l02126"></a>02126 <span class="preprocessor">#ifdef HAVE_IPV6</span>
<a name="l02127"></a>02127 <span class="preprocessor"></span>  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;ipv6_router_isis_cmd);
<a name="l02128"></a>02128   <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, &amp;no_ipv6_router_isis_cmd);
<a name="l02129"></a>02129 <span class="preprocessor">#endif</span>
<a name="l02130"></a>02130 <span class="preprocessor"></span>}
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="isis__circuit_8c.html">isis_circuit.c</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:04 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
