<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: ospf6d/ospf6_intra.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('ospf6__intra_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ospf6d/ospf6_intra.c File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="zebra_8h_source.html">zebra.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="log_8h_source.html">log.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="linklist_8h_source.html">linklist.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="thread_8h_source.html">thread.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="memory_8h_source.html">memory.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="if_8h_source.html">if.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="prefix_8h_source.html">prefix.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="table_8h_source.html">table.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="vty_8h_source.html">vty.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="command_8h_source.html">command.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__proto_8h_source.html">ospf6_proto.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__route_8h_source.html">ospf6_route.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__lsa_8h_source.html">ospf6_lsa.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__lsdb_8h_source.html">ospf6_lsdb.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__top_8h_source.html">ospf6_top.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__area_8h_source.html">ospf6_area.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__interface_8h_source.html">ospf6_interface.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__neighbor_8h_source.html">ospf6_neighbor.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__intra_8h_source.html">ospf6_intra.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__asbr_8h_source.html">ospf6_asbr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__abr_8h_source.html">ospf6_abr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__flood_8h_source.html">ospf6_flood.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6d_8h_source.html">ospf6d.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ospf6_intra.c:</div>
<div class="dyncontent">
<div class="center"><img src="ospf6__intra_8c__incl.png" border="0" usemap="#ospf6d_2ospf6__intra_8c" alt=""/></div>
<map name="ospf6d_2ospf6__intra_8c" id="ospf6d_2ospf6__intra_8c">
<area shape="rect" id="node3" href="zebra_8h.html" title="zebra.h" alt="" coords="1147,80,1213,107"/><area shape="rect" id="node55" href="log_8h.html" title="log.h" alt="" coords="2499,229,2551,256"/><area shape="rect" id="node58" href="linklist_8h.html" title="linklist.h" alt="" coords="2911,229,2981,256"/><area shape="rect" id="node60" href="thread_8h.html" title="thread.h" alt="" coords="2631,229,2703,256"/><area shape="rect" id="node62" href="memory_8h.html" title="memory.h" alt="" coords="3035,80,3117,107"/><area shape="rect" id="node64" href="if_8h.html" title="if.h" alt="" coords="2876,155,2916,181"/><area shape="rect" id="node67" href="prefix_8h.html" title="prefix.h" alt="" coords="3211,155,3279,181"/><area shape="rect" id="node69" href="table_8h.html" title="table.h" alt="" coords="3341,155,3405,181"/><area shape="rect" id="node71" href="vty_8h.html" title="vty.h" alt="" coords="2599,155,2651,181"/><area shape="rect" id="node75" href="command_8h.html" title="command.h" alt="" coords="2614,80,2705,107"/><area shape="rect" id="node78" href="ospf6__proto_8h.html" title="ospf6_proto.h" alt="" coords="3499,80,3605,107"/><area shape="rect" id="node80" href="ospf6__message_8h.html" title="ospf6_message.h" alt="" coords="3629,80,3760,107"/><area shape="rect" id="node82" href="ospf6__route_8h.html" title="ospf6_route.h" alt="" coords="3192,80,3299,107"/><area shape="rect" id="node86" href="ospf6__lsa_8h.html" title="ospf6_lsa.h" alt="" coords="3784,80,3875,107"/><area shape="rect" id="node88" href="ospf6__lsdb_8h.html" title="ospf6_lsdb.h" alt="" coords="3323,80,3423,107"/><area shape="rect" id="node92" href="ospf6__top_8h.html" title="ospf6_top.h" alt="" coords="3909,155,4003,181"/><area shape="rect" id="node94" href="ospf6__area_8h.html" title="ospf6_area.h" alt="" coords="3950,80,4049,107"/><area shape="rect" id="node97" href="ospf6__interface_8h.html" title="ospf6_interface.h" alt="" coords="2833,80,2959,107"/><area shape="rect" id="node100" href="ospf6__neighbor_8h.html" title="ospf6_neighbor.h" alt="" coords="4074,80,4200,107"/><area shape="rect" id="node102" href="ospf6__intra_8h.html" title="ospf6_intra.h" alt="" coords="4225,80,4324,107"/><area shape="rect" id="node104" href="ospf6__asbr_8h.html" title="ospf6_asbr.h" alt="" coords="4349,80,4448,107"/><area shape="rect" id="node106" href="ospf6__abr_8h.html" title="ospf6_abr.h" alt="" coords="4473,80,4567,107"/><area shape="rect" id="node108" href="ospf6__flood_8h.html" title="ospf6_flood.h" alt="" coords="4591,80,4696,107"/><area shape="rect" id="node110" href="ospf6d_8h.html" title="ospf6d.h" alt="" coords="4721,80,4796,107"/></map>
</div>
</div>
<p><a href="ospf6__intra_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a97fb04e20252dcc4e6d20c4c21f567c8">ospf6_router_lsa_show</a> (struct <a class="el" href="structvty.html">vty</a> *<a class="el" href="structvty.html">vty</a>, struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a3258bf30e0f12d4fb9012c487713f811">ospf6_router_lsa_originate</a> (struct <a class="el" href="structthread.html">thread</a> *<a class="el" href="structthread.html">thread</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#aae40057b235626caf9e67debb9df4f93">ospf6_network_lsa_show</a> (struct <a class="el" href="structvty.html">vty</a> *<a class="el" href="structvty.html">vty</a>, struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a2cca7ec82521456cd603c374503993e0">ospf6_network_lsa_originate</a> (struct <a class="el" href="structthread.html">thread</a> *<a class="el" href="structthread.html">thread</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a54e9876b95f6bfcb7b132a843263bb67">ospf6_link_lsa_show</a> (struct <a class="el" href="structvty.html">vty</a> *<a class="el" href="structvty.html">vty</a>, struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a294596401d62531f70760e3ef0968c54">ospf6_link_lsa_originate</a> (struct <a class="el" href="structthread.html">thread</a> *<a class="el" href="structthread.html">thread</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a24832378793232623a288041fda4e75a">ospf6_intra_prefix_lsa_show</a> (struct <a class="el" href="structvty.html">vty</a> *<a class="el" href="structvty.html">vty</a>, struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a374b1cc84d7e97282e03860d870733b2">ospf6_intra_prefix_lsa_originate_stub</a> (struct <a class="el" href="structthread.html">thread</a> *<a class="el" href="structthread.html">thread</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#aa3bd886b9f7da9c4a72f36a5f971053d">ospf6_intra_prefix_lsa_originate_transit</a> (struct <a class="el" href="structthread.html">thread</a> *<a class="el" href="structthread.html">thread</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a5d175a55e75ebc16d0b9588b41eae825">ospf6_intra_prefix_lsa_add</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#aec94c4898139ac8cf6cb0ca3cbd1536a">ospf6_intra_prefix_lsa_remove</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a23619e86f770d418b1dac56746080b57">ospf6_intra_route_calculation</a> (struct <a class="el" href="structospf6__area.html">ospf6_area</a> *oa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a6a17348f6400e44a8cb4fd08778c63ba">ospf6_brouter_debug_print</a> (struct <a class="el" href="structospf6__route.html">ospf6_route</a> *brouter)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#aa5bea4a31a30ea5508165b571a23d422">ospf6_intra_brouter_calculation</a> (struct <a class="el" href="structospf6__area.html">ospf6_area</a> *oa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a05f1694d9681409b839ce5d8acc06d1c">ospf6_intra_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a5174915f5a45f4cd0340d5fd3199a19e">DEFUN</a> (debug_ospf6_brouter, debug_ospf6_brouter_cmd,&quot;debug <a class="el" href="structospf6.html">ospf6</a> border-routers&quot;, DEBUG_STR OSPF6_STR&quot;Debug border router\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#ac8454235150eb5172f6d1c9eb0e6d940">DEFUN</a> (no_debug_ospf6_brouter, no_debug_ospf6_brouter_cmd,&quot;no debug <a class="el" href="structospf6.html">ospf6</a> border-routers&quot;, NO_STR DEBUG_STR OSPF6_STR&quot;Debug border router\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a7f71897736fd759c3403540613273eb2">DEFUN</a> (debug_ospf6_brouter_router, debug_ospf6_brouter_router_cmd,&quot;debug <a class="el" href="structospf6.html">ospf6</a> border-routers router-<a class="el" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a> A.B.C.D&quot;, DEBUG_STR OSPF6_STR&quot;Debug border router\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Debug specific border router\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Specify border-router'<a class="el" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a> router-<a class="el" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#adb0991acd6cd6cf26def8463670c808c">DEFUN</a> (no_debug_ospf6_brouter_router, no_debug_ospf6_brouter_router_cmd,&quot;no debug <a class="el" href="structospf6.html">ospf6</a> border-routers router-<a class="el" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>&quot;, NO_STR DEBUG_STR OSPF6_STR&quot;Debug border router\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Debug specific border router\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#af58a7f9ed53e47be375c315680535a6a">DEFUN</a> (debug_ospf6_brouter_area, debug_ospf6_brouter_area_cmd,&quot;debug <a class="el" href="structospf6.html">ospf6</a> border-routers area-<a class="el" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a> A.B.C.D&quot;, DEBUG_STR OSPF6_STR&quot;Debug border router\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Debug border routers <a class="el" href="spgrid_8c.html#a89e1c555af4b92f6ee8d6f112f47ed12">in</a> specific Area\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Specify Area-ID\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a4f4436c5d7980568b710e85e3850ce56">DEFUN</a> (no_debug_ospf6_brouter_area, no_debug_ospf6_brouter_area_cmd,&quot;no debug <a class="el" href="structospf6.html">ospf6</a> border-routers area-<a class="el" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>&quot;, NO_STR DEBUG_STR OSPF6_STR&quot;Debug border router\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Debug border routers <a class="el" href="spgrid_8c.html#a89e1c555af4b92f6ee8d6f112f47ed12">in</a> specific Area\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#ae975832edf46598f72e95ef20fa67aeb">config_write_ospf6_debug_brouter</a> (struct <a class="el" href="structvty.html">vty</a> *<a class="el" href="structvty.html">vty</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#ade2e979f9e4dedb86a2baed884145433">install_element_ospf6_debug_brouter</a> (void)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#ab2126ee3a03c2f836488166e640d2a72">conf_debug_ospf6_brouter</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">u_int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a89f928cc55574e8794acd5feb2995bb2">conf_debug_ospf6_brouter_specific_router_id</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">u_int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a0e18cc0994381836e2816541cf9b2d18">conf_debug_ospf6_brouter_specific_area_id</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf6__lsa__handler.html">ospf6_lsa_handler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a29fef2201eec7d2175fd081c5619574e">router_handler</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf6__lsa__handler.html">ospf6_lsa_handler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#af9acd642554698eb01f79c122d9c4e85">network_handler</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf6__lsa__handler.html">ospf6_lsa_handler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a8e394bf3b0f07de77c13a2b0de1aee25">link_handler</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf6__lsa__handler.html">ospf6_lsa_handler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__intra_8c.html#a7cbbc0bcfe9e99a141e18aa4f55624e1">intra_prefix_handler</a></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae975832edf46598f72e95ef20fa67aeb"></a><!-- doxytag: member="ospf6_intra.c::config_write_ospf6_debug_brouter" ref="ae975832edf46598f72e95ef20fa67aeb" args="(struct vty *vty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int config_write_ospf6_debug_brouter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname"><em>vty</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01539">1539</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span> buf[16];
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__intra_8h.html#a86960fea9dc15f56e0cdede452c49f61">IS_OSPF6_DEBUG_BROUTER</a>)
    <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;debug ospf6 border-routers%s&quot;</span>, <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__intra_8h.html#a90e4fef1e8180fd8a9e3e7b7dbfa5ce8">IS_OSPF6_DEBUG_BROUTER_SPECIFIC_ROUTER</a>)
    {
      <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;<a class="code" href="ospf6__intra_8c.html#a89f928cc55574e8794acd5feb2995bb2">conf_debug_ospf6_brouter_specific_router_id</a>,
                 buf, <span class="keyword">sizeof</span> (buf));
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;debug ospf6 border-routers router-id %s%s&quot;</span>, buf, <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);
    }
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__intra_8h.html#a2c72dee560df6ff623714c81fac31ea3">IS_OSPF6_DEBUG_BROUTER_SPECIFIC_AREA</a>)
    {
      <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;<a class="code" href="ospf6__intra_8c.html#a0e18cc0994381836e2816541cf9b2d18">conf_debug_ospf6_brouter_specific_area_id</a>,
                 buf, <span class="keyword">sizeof</span> (buf));
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;debug ospf6 border-routers area-id %s%s&quot;</span>, buf, <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);
    }
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5174915f5a45f4cd0340d5fd3199a19e"></a><!-- doxytag: member="ospf6_intra.c::DEFUN" ref="a5174915f5a45f4cd0340d5fd3199a19e" args="(debug_ospf6_brouter, debug_ospf6_brouter_cmd,&quot;debug ospf6 border&#45;routers&quot;, DEBUG_STR OSPF6_STR&quot;Debug border router\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">debug_ospf6_brouter&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">debug_ospf6_brouter_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;debug <a class="el" href="structospf6.html">ospf6</a> border-routers&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DEBUG_STR OSPF6_STR&quot;Debug border router\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01453">1453</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="ospf6__intra_8h.html#ae5d5682292cf39a6e5a23d6de9cb9167">OSPF6_DEBUG_BROUTER_ON</a> ();
  <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac8454235150eb5172f6d1c9eb0e6d940"></a><!-- doxytag: member="ospf6_intra.c::DEFUN" ref="ac8454235150eb5172f6d1c9eb0e6d940" args="(no_debug_ospf6_brouter, no_debug_ospf6_brouter_cmd,&quot;no debug ospf6 border&#45;routers&quot;, NO_STR DEBUG_STR OSPF6_STR&quot;Debug border router\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">no_debug_ospf6_brouter&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">no_debug_ospf6_brouter_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;no debug <a class="el" href="structospf6.html">ospf6</a> border-routers&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NO_STR DEBUG_STR OSPF6_STR&quot;Debug border router\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01465">1465</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="ospf6__intra_8h.html#a1aa75e5dacfc0ef3475eeefe645aeb88">OSPF6_DEBUG_BROUTER_OFF</a> ();
  <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7f71897736fd759c3403540613273eb2"></a><!-- doxytag: member="ospf6_intra.c::DEFUN" ref="a7f71897736fd759c3403540613273eb2" args="(debug_ospf6_brouter_router, debug_ospf6_brouter_router_cmd,&quot;debug ospf6 border&#45;routers router&#45;id A.B.C.D&quot;, DEBUG_STR OSPF6_STR&quot;Debug border router\n&quot;&quot;Debug specific border router\n&quot;&quot;Specify border&#45;router's router&#45;id\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">debug_ospf6_brouter_router&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">debug_ospf6_brouter_router_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;debug <a class="el" href="structospf6.html">ospf6</a> border-routers router-<a class="el" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a> A.B.C.D&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DEBUG_STR OSPF6_STR&quot;Debug border router\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Debug specific border router\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Specify border-router'<a class="el" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a> router-<a class="el" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01478">1478</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  u_int32_t router_id;
  <a class="code" href="sockunion_8c.html#ac13c2042641ea5031bc7e244e8061b84">inet_pton</a> (AF_INET, argv[0], &amp;router_id);
  <a class="code" href="ospf6__intra_8h.html#a219c26c7355feed7433cbe35211b3c19">OSPF6_DEBUG_BROUTER_SPECIFIC_ROUTER_ON</a> (router_id);
  <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adb0991acd6cd6cf26def8463670c808c"></a><!-- doxytag: member="ospf6_intra.c::DEFUN" ref="adb0991acd6cd6cf26def8463670c808c" args="(no_debug_ospf6_brouter_router, no_debug_ospf6_brouter_router_cmd,&quot;no debug ospf6 border&#45;routers router&#45;id&quot;, NO_STR DEBUG_STR OSPF6_STR&quot;Debug border router\n&quot;&quot;Debug specific border router\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">no_debug_ospf6_brouter_router&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">no_debug_ospf6_brouter_router_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;no debug <a class="el" href="structospf6.html">ospf6</a> border-routers router-<a class="el" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NO_STR DEBUG_STR OSPF6_STR&quot;Debug border router\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Debug specific border router\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01494">1494</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="ospf6__intra_8h.html#ad608253280d339e75bd711ecdf98d809">OSPF6_DEBUG_BROUTER_SPECIFIC_ROUTER_OFF</a> ();
  <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af58a7f9ed53e47be375c315680535a6a"></a><!-- doxytag: member="ospf6_intra.c::DEFUN" ref="af58a7f9ed53e47be375c315680535a6a" args="(debug_ospf6_brouter_area, debug_ospf6_brouter_area_cmd,&quot;debug ospf6 border&#45;routers area&#45;id A.B.C.D&quot;, DEBUG_STR OSPF6_STR&quot;Debug border router\n&quot;&quot;Debug border routers in specific Area\n&quot;&quot;Specify Area&#45;ID\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">debug_ospf6_brouter_area&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">debug_ospf6_brouter_area_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;debug <a class="el" href="structospf6.html">ospf6</a> border-routers area-<a class="el" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a> A.B.C.D&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DEBUG_STR OSPF6_STR&quot;Debug border router\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Debug border routers <a class="el" href="spgrid_8c.html#a89e1c555af4b92f6ee8d6f112f47ed12">in</a> specific Area\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Specify Area-ID\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01508">1508</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  u_int32_t area_id;
  <a class="code" href="sockunion_8c.html#ac13c2042641ea5031bc7e244e8061b84">inet_pton</a> (AF_INET, argv[0], &amp;area_id);
  <a class="code" href="ospf6__intra_8h.html#ae591404ec2f5efe84cf1bdc0cadf179e">OSPF6_DEBUG_BROUTER_SPECIFIC_AREA_ON</a> (area_id);
  <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4f4436c5d7980568b710e85e3850ce56"></a><!-- doxytag: member="ospf6_intra.c::DEFUN" ref="a4f4436c5d7980568b710e85e3850ce56" args="(no_debug_ospf6_brouter_area, no_debug_ospf6_brouter_area_cmd,&quot;no debug ospf6 border&#45;routers area&#45;id&quot;, NO_STR DEBUG_STR OSPF6_STR&quot;Debug border router\n&quot;&quot;Debug border routers in specific Area\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">no_debug_ospf6_brouter_area&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">no_debug_ospf6_brouter_area_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;no debug <a class="el" href="structospf6.html">ospf6</a> border-routers area-<a class="el" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NO_STR DEBUG_STR OSPF6_STR&quot;Debug border router\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&quot;Debug border routers <a class="el" href="spgrid_8c.html#a89e1c555af4b92f6ee8d6f112f47ed12">in</a> specific Area\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01524">1524</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="ospf6__intra_8h.html#aae49cc621c309941460d2bb1b0edb72f">OSPF6_DEBUG_BROUTER_SPECIFIC_AREA_OFF</a> ();
  <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ade2e979f9e4dedb86a2baed884145433"></a><!-- doxytag: member="ospf6_intra.c::install_element_ospf6_debug_brouter" ref="ade2e979f9e4dedb86a2baed884145433" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void install_element_ospf6_debug_brouter </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01560">1560</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;debug_ospf6_brouter_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;debug_ospf6_brouter_router_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;debug_ospf6_brouter_area_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;no_debug_ospf6_brouter_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;no_debug_ospf6_brouter_router_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;no_debug_ospf6_brouter_area_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50754044f565f7421a152eaa411eebcc">CONFIG_NODE</a>, &amp;debug_ospf6_brouter_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50754044f565f7421a152eaa411eebcc">CONFIG_NODE</a>, &amp;debug_ospf6_brouter_router_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50754044f565f7421a152eaa411eebcc">CONFIG_NODE</a>, &amp;debug_ospf6_brouter_area_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50754044f565f7421a152eaa411eebcc">CONFIG_NODE</a>, &amp;no_debug_ospf6_brouter_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50754044f565f7421a152eaa411eebcc">CONFIG_NODE</a>, &amp;no_debug_ospf6_brouter_router_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50754044f565f7421a152eaa411eebcc">CONFIG_NODE</a>, &amp;no_debug_ospf6_brouter_area_cmd);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6a17348f6400e44a8cb4fd08778c63ba"></a><!-- doxytag: member="ospf6_intra.c::ospf6_brouter_debug_print" ref="a6a17348f6400e44a8cb4fd08778c63ba" args="(struct ospf6_route *brouter)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf6_brouter_debug_print </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__route.html">ospf6_route</a> *&#160;</td>
          <td class="paramname"><em>brouter</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01242">1242</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  u_int32_t brouter_id;
  <span class="keywordtype">char</span> brouter_name[16];
  <span class="keywordtype">char</span> area_name[16];
  <span class="keywordtype">char</span> destination[64];
  <span class="keywordtype">char</span> installed[16], changed[16];
  <span class="keyword">struct </span>timeval now, res;
  <span class="keywordtype">char</span> <span class="keywordtype">id</span>[16], <a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>[16];
  <span class="keywordtype">char</span> capa[16], options[16];

  brouter_id = <a class="code" href="ospf6__route_8h.html#abe7756da14600493b65f298e52850619">ADV_ROUTER_IN_PREFIX</a> (&amp;brouter-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>);
  <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;brouter_id, brouter_name, <span class="keyword">sizeof</span> (brouter_name));
  <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;brouter-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#ad4fc384dbcd343e1ba3e5918e4d25c15">area_id</a>, area_name, sizeof (area_name));
  <a class="code" href="ospf6__route_8c.html#a6cd3c9be4769715b219b63202f5cd802">ospf6_linkstate_prefix2str</a> (&amp;brouter-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>, destination,
                              sizeof (destination));

  <a class="code" href="thread_8c.html#abf5861abe71d6f9a1ddd493be0218de1">quagga_gettime</a> (<a class="code" href="thread_8h.html#a64fff521e88ba8b01645c5bb89085b33a7f92aaa461f13c163b13f96085eb3cd9">QUAGGA_CLK_MONOTONIC</a>, &amp;now);
  <a class="code" href="ospf6d_8h.html#ad8549d8029286e53812f5d1aab4439e5">timersub</a> (&amp;now, &amp;brouter-&gt;<a class="code" href="structospf6__route.html#a927c15a4c44ad75a74d8386e2c8deea3">installed</a>, &amp;res);
  <a class="code" href="ospf6d_8h.html#aac49ca805b11c1540def0721e069a851">timerstring</a> (&amp;res, installed, <span class="keyword">sizeof</span> (installed));

  <a class="code" href="thread_8c.html#abf5861abe71d6f9a1ddd493be0218de1">quagga_gettime</a> (<a class="code" href="thread_8h.html#a64fff521e88ba8b01645c5bb89085b33a7f92aaa461f13c163b13f96085eb3cd9">QUAGGA_CLK_MONOTONIC</a>, &amp;now);
  <a class="code" href="ospf6d_8h.html#ad8549d8029286e53812f5d1aab4439e5">timersub</a> (&amp;now, &amp;brouter-&gt;<a class="code" href="structospf6__route.html#a22eb727157fffbb2b611795562329b9d">changed</a>, &amp;res);
  <a class="code" href="ospf6d_8h.html#aac49ca805b11c1540def0721e069a851">timerstring</a> (&amp;res, changed, <span class="keyword">sizeof</span> (changed));

  <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;brouter-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a7f174fe7a9fdaded7fc074cb1c51b351">origin</a>.<a class="code" href="structospf6__ls__origin.html#a5462d6c847d9cddd5e0bace437f2199a">id</a>, <span class="keywordtype">id</span>, sizeof (<span class="keywordtype">id</span>));
  <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;brouter-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a7f174fe7a9fdaded7fc074cb1c51b351">origin</a>.<a class="code" href="structospf6__ls__origin.html#aad4727f62192e5db63a98474f9845694">adv_router</a>, adv_router,
             sizeof (adv_router));

  <a class="code" href="ospf6__proto_8c.html#a70fba8cd2453bf33405c98ff2ff14a38">ospf6_options_printbuf</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a1c10b3d1f386486e496d7196ec16e5e5">options</a>, options, sizeof (options));
  <a class="code" href="ospf6__proto_8c.html#acfafe064fed258582397cfd39d7d69ba">ospf6_capability_printbuf</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#ad4c22e82497e95ddac15345fbdf50245">router_bits</a>, capa, sizeof (capa));

  <a class="code" href="log_8h.html#a383184727341e7ad985deb9e4f2156c7">zlog_info</a> (<span class="stringliteral">&quot;Brouter: %s via area %s&quot;</span>, brouter_name, area_name);
  <a class="code" href="log_8h.html#a383184727341e7ad985deb9e4f2156c7">zlog_info</a> (<span class="stringliteral">&quot;  memory: prev: %p this: %p next: %p parent rnode: %p&quot;</span>,
             brouter-&gt;<a class="code" href="structospf6__route.html#a5c1146c72a8aeebba166d22b57baf005">prev</a>, brouter, brouter-&gt;<a class="code" href="structospf6__route.html#ae263097eea30f7d0de5ca576770012ab">next</a>, brouter-&gt;<a class="code" href="structospf6__route.html#a400b25094c113ad6cca921b696b77f8b">rnode</a>);
  <a class="code" href="log_8h.html#a383184727341e7ad985deb9e4f2156c7">zlog_info</a> (<span class="stringliteral">&quot;  type: %d prefix: %s installed: %s changed: %s&quot;</span>,
             brouter-&gt;<a class="code" href="structospf6__route.html#a74705096f252ccb17294f45fe3945757">type</a>, destination, installed, changed);
  <a class="code" href="log_8h.html#a383184727341e7ad985deb9e4f2156c7">zlog_info</a> (<span class="stringliteral">&quot;  lock: %d flags: %s%s%s%s&quot;</span>, brouter-&gt;<a class="code" href="structospf6__route.html#a7c548e8e59600e136436ce9aaf378baa">lock</a>,
           (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#a15a16e004b7ad8a332e55f65fa81bc88">OSPF6_ROUTE_BEST</a>)   ? <span class="stringliteral">&quot;B&quot;</span> : <span class="stringliteral">&quot;-&quot;</span>),
           (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#af81460bb17acb9299c98ef5e703f29fa">OSPF6_ROUTE_ADD</a>)    ? <span class="stringliteral">&quot;A&quot;</span> : <span class="stringliteral">&quot;-&quot;</span>),
           (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#a35dc694fea451eddcc4e6d5fa14ed8cd">OSPF6_ROUTE_REMOVE</a>) ? <span class="stringliteral">&quot;R&quot;</span> : <span class="stringliteral">&quot;-&quot;</span>),
           (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#a2e34d8560d88a78a2243622c923dde72">OSPF6_ROUTE_CHANGE</a>) ? <span class="stringliteral">&quot;C&quot;</span> : <span class="stringliteral">&quot;-&quot;</span>));
  <a class="code" href="log_8h.html#a383184727341e7ad985deb9e4f2156c7">zlog_info</a> (<span class="stringliteral">&quot;  path type: %s ls-origin %s id: %s adv-router %s&quot;</span>,
             <a class="code" href="ospf6__route_8h.html#aa450597cf8eef04535375a88c66bde88">OSPF6_PATH_TYPE_NAME</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a9cffc83cee981501db820772cab34b7e">type</a>),
             <a class="code" href="ospf6__lsa_8c.html#aef56342b1e39d23bf9977353c1c2deb1">ospf6_lstype_name</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a7f174fe7a9fdaded7fc074cb1c51b351">origin</a>.<a class="code" href="structospf6__ls__origin.html#a88f1d08bddf61718681883834fd9990e">type</a>),
             <span class="keywordtype">id</span>, adv_router);
  <a class="code" href="log_8h.html#a383184727341e7ad985deb9e4f2156c7">zlog_info</a> (<span class="stringliteral">&quot;  options: %s router-bits: %s metric-type: %d metric: %d/%d&quot;</span>,
             options, capa, brouter-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a5723668da86dfd4caea4f50e8ad0457f">metric_type</a>,
             brouter-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#ab33bf3c3ce1f07b918167dbfa4af30e6">cost</a>, brouter-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#afbe458c0a581463749e46edf6ae726c3">cost_e2</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa5bea4a31a30ea5508165b571a23d422"></a><!-- doxytag: member="ospf6_intra.c::ospf6_intra_brouter_calculation" ref="aa5bea4a31a30ea5508165b571a23d422" args="(struct ospf6_area *oa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_intra_brouter_calculation </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__area.html">ospf6_area</a> *&#160;</td>
          <td class="paramname"><em>oa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01294">1294</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__route.html">ospf6_route</a> *brouter, *copy;
  void (*hook_add) (<span class="keyword">struct </span><a class="code" href="structospf6__route.html">ospf6_route</a> *) = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  void (*hook_remove) (<span class="keyword">struct </span><a class="code" href="structospf6__route.html">ospf6_route</a> *) = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  u_int32_t brouter_id;
  <span class="keywordtype">char</span> brouter_name[16];
  
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__intra_8h.html#af8867b2326b8c41c5b7910aa739c9f81">IS_OSPF6_DEBUG_BROUTER_SPECIFIC_AREA_ID</a> (oa-&gt;<a class="code" href="structospf6__area.html#aec3bacc0c813ff937b5675595a3aefa6">area_id</a>))
    <a class="code" href="log_8h.html#a383184727341e7ad985deb9e4f2156c7">zlog_info</a> (<span class="stringliteral">&quot;border-router calculation for area %s&quot;</span>, oa-&gt;<a class="code" href="structospf6__area.html#a24bd4ccc38c4e10de1b66b2d0cf885cf">name</a>);
  
  hook_add = oa-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#adb6e884ec587387ef1174da7a6cb426c">brouter_table</a>-&gt;<a class="code" href="structospf6__route__table.html#a150a5f55306ff86d6b220fb0658b4c18">hook_add</a>;
  hook_remove = oa-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#adb6e884ec587387ef1174da7a6cb426c">brouter_table</a>-&gt;<a class="code" href="structospf6__route__table.html#a1c69b4917bafb6ef7a03299b262f0839">hook_remove</a>;
  oa-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#adb6e884ec587387ef1174da7a6cb426c">brouter_table</a>-&gt;<a class="code" href="structospf6__route__table.html#a150a5f55306ff86d6b220fb0658b4c18">hook_add</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  oa-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#adb6e884ec587387ef1174da7a6cb426c">brouter_table</a>-&gt;<a class="code" href="structospf6__route__table.html#a1c69b4917bafb6ef7a03299b262f0839">hook_remove</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="comment">/* withdraw the previous router entries for the area */</span>
  <span class="keywordflow">for</span> (brouter = <a class="code" href="ospf6__route_8c.html#a400d24a67548089d8a59242677ef33cf">ospf6_route_head</a> (oa-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#adb6e884ec587387ef1174da7a6cb426c">brouter_table</a>); brouter;
       brouter = <a class="code" href="ospf6__route_8c.html#a4cdecc41a86097a7d0871397f7a80fb8">ospf6_route_next</a> (brouter))
    {
      brouter_id = <a class="code" href="ospf6__route_8h.html#abe7756da14600493b65f298e52850619">ADV_ROUTER_IN_PREFIX</a> (&amp;brouter-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>);
      <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;brouter_id, brouter_name, <span class="keyword">sizeof</span> (brouter_name));
      <span class="keywordflow">if</span> (brouter-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#ad4fc384dbcd343e1ba3e5918e4d25c15">area_id</a> != oa-&gt;<a class="code" href="structospf6__area.html#aec3bacc0c813ff937b5675595a3aefa6">area_id</a>)
        <span class="keywordflow">continue</span>;
      brouter-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a> = <a class="code" href="ospf6__route_8h.html#a35dc694fea451eddcc4e6d5fa14ed8cd">OSPF6_ROUTE_REMOVE</a>;

      <span class="keywordflow">if</span> (<a class="code" href="ospf6__intra_8h.html#ad122ac17b092cba968dce7778824c873">IS_OSPF6_DEBUG_BROUTER_SPECIFIC_ROUTER_ID</a> (brouter_id) ||
          <a class="code" href="ospf6__route_8h.html#a93829ee05fb7c64e1b29f7d808383383">IS_OSPF6_DEBUG_ROUTE</a> (MEMORY))
        {
          <a class="code" href="log_8h.html#a383184727341e7ad985deb9e4f2156c7">zlog_info</a> (<span class="stringliteral">&quot;%p: mark as removing: area %s brouter %s&quot;</span>,
                     brouter, oa-&gt;<a class="code" href="structospf6__area.html#a24bd4ccc38c4e10de1b66b2d0cf885cf">name</a>, brouter_name);
          <a class="code" href="ospf6__intra_8c.html#a6a17348f6400e44a8cb4fd08778c63ba">ospf6_brouter_debug_print</a> (brouter);
        }
    }

  <span class="keywordflow">for</span> (brouter = <a class="code" href="ospf6__route_8c.html#a400d24a67548089d8a59242677ef33cf">ospf6_route_head</a> (oa-&gt;<a class="code" href="structospf6__area.html#ac762d6a6f09b6db6c961b2f781022473">spf_table</a>); brouter;
       brouter = <a class="code" href="ospf6__route_8c.html#a4cdecc41a86097a7d0871397f7a80fb8">ospf6_route_next</a> (brouter))
    {
      brouter_id = <a class="code" href="ospf6__route_8h.html#abe7756da14600493b65f298e52850619">ADV_ROUTER_IN_PREFIX</a> (&amp;brouter-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>);
      <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;brouter_id, brouter_name, <span class="keyword">sizeof</span> (brouter_name));

      <span class="keywordflow">if</span> (brouter-&gt;<a class="code" href="structospf6__route.html#a74705096f252ccb17294f45fe3945757">type</a> != <a class="code" href="ospf6__route_8h.html#aa7dc51fbd11971c3f8dff933ea524492">OSPF6_DEST_TYPE_LINKSTATE</a>)
        <span class="keywordflow">continue</span>;
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__route_8h.html#a9a6edcbcd65205cf8454ae194f2c41b2">ospf6_linkstate_prefix_id</a> (&amp;brouter-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>) != htonl (0))
        <span class="keywordflow">continue</span>;
      <span class="keywordflow">if</span> (! <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#ad4c22e82497e95ddac15345fbdf50245">router_bits</a>, <a class="code" href="ospf6__proto_8h.html#a001990a29c38d5f3b4da6bf596ccc2c5">OSPF6_ROUTER_BIT_E</a>) &amp;&amp;
          ! <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#ad4c22e82497e95ddac15345fbdf50245">router_bits</a>, <a class="code" href="ospf6__proto_8h.html#a4508b95dd106578cb85a89f654f07ab9">OSPF6_ROUTER_BIT_B</a>))
        <span class="keywordflow">continue</span>;

      copy = <a class="code" href="ospf6__route_8c.html#aa406f9a6fff899c6c153b2d208efd1a0">ospf6_route_copy</a> (brouter);
      copy-&gt;<a class="code" href="structospf6__route.html#a74705096f252ccb17294f45fe3945757">type</a> = <a class="code" href="ospf6__route_8h.html#a0dcb3d4e20fc75a249f2091ba481d37b">OSPF6_DEST_TYPE_ROUTER</a>;
      copy-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#ad4fc384dbcd343e1ba3e5918e4d25c15">area_id</a> = oa-&gt;<a class="code" href="structospf6__area.html#aec3bacc0c813ff937b5675595a3aefa6">area_id</a>;
      <a class="code" href="ospf6__route_8c.html#ab35c4efbc72f9bf772e334f1725da353">ospf6_route_add</a> (copy, oa-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#adb6e884ec587387ef1174da7a6cb426c">brouter_table</a>);

      <span class="keywordflow">if</span> (<a class="code" href="ospf6__intra_8h.html#ad122ac17b092cba968dce7778824c873">IS_OSPF6_DEBUG_BROUTER_SPECIFIC_ROUTER_ID</a> (brouter_id) ||
          <a class="code" href="ospf6__route_8h.html#a93829ee05fb7c64e1b29f7d808383383">IS_OSPF6_DEBUG_ROUTE</a> (MEMORY))
        {
          <a class="code" href="log_8h.html#a383184727341e7ad985deb9e4f2156c7">zlog_info</a> (<span class="stringliteral">&quot;%p: transfer: area %s brouter %s&quot;</span>,
                     brouter, oa-&gt;<a class="code" href="structospf6__area.html#a24bd4ccc38c4e10de1b66b2d0cf885cf">name</a>, brouter_name);
          <a class="code" href="ospf6__intra_8c.html#a6a17348f6400e44a8cb4fd08778c63ba">ospf6_brouter_debug_print</a> (brouter);
        }
    }

  oa-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#adb6e884ec587387ef1174da7a6cb426c">brouter_table</a>-&gt;<a class="code" href="structospf6__route__table.html#a150a5f55306ff86d6b220fb0658b4c18">hook_add</a> = hook_add;
  oa-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#adb6e884ec587387ef1174da7a6cb426c">brouter_table</a>-&gt;<a class="code" href="structospf6__route__table.html#a1c69b4917bafb6ef7a03299b262f0839">hook_remove</a> = hook_remove;

  <span class="keywordflow">for</span> (brouter = <a class="code" href="ospf6__route_8c.html#a400d24a67548089d8a59242677ef33cf">ospf6_route_head</a> (oa-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#adb6e884ec587387ef1174da7a6cb426c">brouter_table</a>); brouter;
       brouter = <a class="code" href="ospf6__route_8c.html#a4cdecc41a86097a7d0871397f7a80fb8">ospf6_route_next</a> (brouter))
    {
      brouter_id = <a class="code" href="ospf6__route_8h.html#abe7756da14600493b65f298e52850619">ADV_ROUTER_IN_PREFIX</a> (&amp;brouter-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>);
      <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;brouter_id, brouter_name, <span class="keyword">sizeof</span> (brouter_name));
      
      <span class="keywordflow">if</span> (brouter-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#ad4fc384dbcd343e1ba3e5918e4d25c15">area_id</a> != oa-&gt;<a class="code" href="structospf6__area.html#aec3bacc0c813ff937b5675595a3aefa6">area_id</a>)
        <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#a369671cf7e53eb4fe9277650c49f5240">OSPF6_ROUTE_WAS_REMOVED</a>))
        <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#a35dc694fea451eddcc4e6d5fa14ed8cd">OSPF6_ROUTE_REMOVE</a>) &amp;&amp;
          <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#af81460bb17acb9299c98ef5e703f29fa">OSPF6_ROUTE_ADD</a>))
        {
          <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#a35dc694fea451eddcc4e6d5fa14ed8cd">OSPF6_ROUTE_REMOVE</a>);
          <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#af81460bb17acb9299c98ef5e703f29fa">OSPF6_ROUTE_ADD</a>);
        }

      <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#a35dc694fea451eddcc4e6d5fa14ed8cd">OSPF6_ROUTE_REMOVE</a>))
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf6__intra_8h.html#a86960fea9dc15f56e0cdede452c49f61">IS_OSPF6_DEBUG_BROUTER</a> ||
              <a class="code" href="ospf6__intra_8h.html#ad122ac17b092cba968dce7778824c873">IS_OSPF6_DEBUG_BROUTER_SPECIFIC_ROUTER_ID</a> (brouter_id) ||
              <a class="code" href="ospf6__intra_8h.html#af8867b2326b8c41c5b7910aa739c9f81">IS_OSPF6_DEBUG_BROUTER_SPECIFIC_AREA_ID</a> (oa-&gt;<a class="code" href="structospf6__area.html#aec3bacc0c813ff937b5675595a3aefa6">area_id</a>))
            <a class="code" href="log_8h.html#a383184727341e7ad985deb9e4f2156c7">zlog_info</a> (<span class="stringliteral">&quot;brouter %s disappears via area %s&quot;</span>,
                       brouter_name, oa-&gt;<a class="code" href="structospf6__area.html#a24bd4ccc38c4e10de1b66b2d0cf885cf">name</a>);
          <a class="code" href="ospf6__route_8c.html#a89c513ce389875d0c89a20017db2c410">ospf6_route_remove</a> (brouter, oa-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#adb6e884ec587387ef1174da7a6cb426c">brouter_table</a>);
        }
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#af81460bb17acb9299c98ef5e703f29fa">OSPF6_ROUTE_ADD</a>) ||
               <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (brouter-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#a2e34d8560d88a78a2243622c923dde72">OSPF6_ROUTE_CHANGE</a>))
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf6__intra_8h.html#a86960fea9dc15f56e0cdede452c49f61">IS_OSPF6_DEBUG_BROUTER</a> ||
              <a class="code" href="ospf6__intra_8h.html#ad122ac17b092cba968dce7778824c873">IS_OSPF6_DEBUG_BROUTER_SPECIFIC_ROUTER_ID</a> (brouter_id) ||
              <a class="code" href="ospf6__intra_8h.html#af8867b2326b8c41c5b7910aa739c9f81">IS_OSPF6_DEBUG_BROUTER_SPECIFIC_AREA_ID</a> (oa-&gt;<a class="code" href="structospf6__area.html#aec3bacc0c813ff937b5675595a3aefa6">area_id</a>))
            <a class="code" href="log_8h.html#a383184727341e7ad985deb9e4f2156c7">zlog_info</a> (<span class="stringliteral">&quot;brouter %s appears via area %s&quot;</span>,
                       brouter_name, oa-&gt;<a class="code" href="structospf6__area.html#a24bd4ccc38c4e10de1b66b2d0cf885cf">name</a>);

          <span class="comment">/* newly added */</span>
          <span class="keywordflow">if</span> (hook_add)
            (*hook_add) (brouter);
        }
      <span class="keywordflow">else</span>
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf6__intra_8h.html#ad122ac17b092cba968dce7778824c873">IS_OSPF6_DEBUG_BROUTER_SPECIFIC_ROUTER_ID</a> (brouter_id) ||
              <a class="code" href="ospf6__intra_8h.html#af8867b2326b8c41c5b7910aa739c9f81">IS_OSPF6_DEBUG_BROUTER_SPECIFIC_AREA_ID</a> (oa-&gt;<a class="code" href="structospf6__area.html#aec3bacc0c813ff937b5675595a3aefa6">area_id</a>))
            <a class="code" href="log_8h.html#a383184727341e7ad985deb9e4f2156c7">zlog_info</a> (<span class="stringliteral">&quot;brouter %s still exists via area %s&quot;</span>,
                       brouter_name, oa-&gt;<a class="code" href="structospf6__area.html#a24bd4ccc38c4e10de1b66b2d0cf885cf">name</a>);
        }

      brouter-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a> = 0;
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__intra_8h.html#af8867b2326b8c41c5b7910aa739c9f81">IS_OSPF6_DEBUG_BROUTER_SPECIFIC_AREA_ID</a> (oa-&gt;<a class="code" href="structospf6__area.html#aec3bacc0c813ff937b5675595a3aefa6">area_id</a>))
    <a class="code" href="log_8h.html#a383184727341e7ad985deb9e4f2156c7">zlog_info</a> (<span class="stringliteral">&quot;border-router calculation for area %s: done&quot;</span>, oa-&gt;<a class="code" href="structospf6__area.html#a24bd4ccc38c4e10de1b66b2d0cf885cf">name</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a05f1694d9681409b839ce5d8acc06d1c"></a><!-- doxytag: member="ospf6_intra.c::ospf6_intra_init" ref="a05f1694d9681409b839ce5d8acc06d1c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_intra_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01445">1445</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="ospf6__lsa_8c.html#a26b635cec93c3aecb54d331bff6afe8e">ospf6_install_lsa_handler</a> (&amp;<a class="code" href="ospf6__intra_8c.html#a29fef2201eec7d2175fd081c5619574e">router_handler</a>);
  <a class="code" href="ospf6__lsa_8c.html#a26b635cec93c3aecb54d331bff6afe8e">ospf6_install_lsa_handler</a> (&amp;<a class="code" href="ospf6__intra_8c.html#af9acd642554698eb01f79c122d9c4e85">network_handler</a>);
  <a class="code" href="ospf6__lsa_8c.html#a26b635cec93c3aecb54d331bff6afe8e">ospf6_install_lsa_handler</a> (&amp;<a class="code" href="ospf6__intra_8c.html#a8e394bf3b0f07de77c13a2b0de1aee25">link_handler</a>);
  <a class="code" href="ospf6__lsa_8c.html#a26b635cec93c3aecb54d331bff6afe8e">ospf6_install_lsa_handler</a> (&amp;<a class="code" href="ospf6__intra_8c.html#a7cbbc0bcfe9e99a141e18aa4f55624e1">intra_prefix_handler</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5d175a55e75ebc16d0b9588b41eae825"></a><!-- doxytag: member="ospf6_intra.c::ospf6_intra_prefix_lsa_add" ref="a5d175a55e75ebc16d0b9588b41eae825" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_intra_prefix_lsa_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01022">1022</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__area.html">ospf6_area</a> *oa;
  <span class="keyword">struct </span><a class="code" href="structospf6__intra__prefix__lsa.html">ospf6_intra_prefix_lsa</a> *intra_prefix_lsa;
  <span class="keyword">struct </span><a class="code" href="structprefix.html">prefix</a> ls_prefix;
  <span class="keyword">struct </span><a class="code" href="structospf6__route.html">ospf6_route</a> *route, *ls_entry;
  <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>, prefix_num;
  <span class="keyword">struct </span><a class="code" href="structospf6__prefix.html">ospf6_prefix</a> *op;
  <span class="keywordtype">char</span> *start, *current, *end;
  <span class="keywordtype">char</span> buf[64];

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#acde3ad184b10ca14f3eef7b2ab655ce6">OSPF6_LSA_IS_MAXAGE</a> (lsa))
    <span class="keywordflow">return</span>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a406c0c0d50f887bcff40c875b15499c2">IS_OSPF6_DEBUG_EXAMIN</a> (INTRA_PREFIX))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;%s found&quot;</span>, lsa-&gt;<a class="code" href="structospf6__lsa.html#a979d21e1c4d2e1753e7d45641b0819ce">name</a>);

  oa = <a class="code" href="ospf6d_8h.html#a57a3d73f87bce959acf483eb7514a29d">OSPF6_AREA</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>);

  intra_prefix_lsa = (<span class="keyword">struct </span><a class="code" href="structospf6__intra__prefix__lsa.html">ospf6_intra_prefix_lsa</a> *)
    <a class="code" href="ospf6__lsa_8h.html#ade3057c51a01c081c6c753a03c1ffc3f">OSPF6_LSA_HEADER_END</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>);
  <span class="keywordflow">if</span> (intra_prefix_lsa-&gt;<a class="code" href="structospf6__intra__prefix__lsa.html#a40d17aa33e27f9a873f3d458a26b53e3">ref_type</a> == htons (<a class="code" href="ospf6__lsa_8h.html#a5d3fd0013f7454017d88a45393c028a2">OSPF6_LSTYPE_ROUTER</a>))
    <a class="code" href="ospf6__route_8c.html#a5190b1a4d8babac390d4504e6119ffde">ospf6_linkstate_prefix</a> (intra_prefix_lsa-&gt;<a class="code" href="structospf6__intra__prefix__lsa.html#a832355f70d5e716876273e5d5386da6c">ref_adv_router</a>,
                            htonl (0), &amp;ls_prefix);
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (intra_prefix_lsa-&gt;<a class="code" href="structospf6__intra__prefix__lsa.html#a40d17aa33e27f9a873f3d458a26b53e3">ref_type</a> == htons (<a class="code" href="ospf6__lsa_8h.html#a812d6d1be4227ced8bb60b401caeecaa">OSPF6_LSTYPE_NETWORK</a>))
    <a class="code" href="ospf6__route_8c.html#a5190b1a4d8babac390d4504e6119ffde">ospf6_linkstate_prefix</a> (intra_prefix_lsa-&gt;<a class="code" href="structospf6__intra__prefix__lsa.html#a832355f70d5e716876273e5d5386da6c">ref_adv_router</a>,
                            intra_prefix_lsa-&gt;<a class="code" href="structospf6__intra__prefix__lsa.html#a3529cca64a1bca463c2351ce7c2a2515">ref_id</a>, &amp;ls_prefix);
  <span class="keywordflow">else</span>
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a406c0c0d50f887bcff40c875b15499c2">IS_OSPF6_DEBUG_EXAMIN</a> (INTRA_PREFIX))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Unknown reference LS-type: %#hx&quot;</span>,
            ntohs (intra_prefix_lsa-&gt;<a class="code" href="structospf6__intra__prefix__lsa.html#a40d17aa33e27f9a873f3d458a26b53e3">ref_type</a>));
      <span class="keywordflow">return</span>;
    }

  ls_entry = <a class="code" href="ospf6__route_8c.html#aa7d8f56a2e18e2dc561dfda78a980fb2">ospf6_route_lookup</a> (&amp;ls_prefix, oa-&gt;<a class="code" href="structospf6__area.html#ac762d6a6f09b6db6c961b2f781022473">spf_table</a>);
  <span class="keywordflow">if</span> (ls_entry == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a406c0c0d50f887bcff40c875b15499c2">IS_OSPF6_DEBUG_EXAMIN</a> (INTRA_PREFIX))
        {
          <a class="code" href="ospf6__route_8c.html#a6cd3c9be4769715b219b63202f5cd802">ospf6_linkstate_prefix2str</a> (&amp;ls_prefix, buf, <span class="keyword">sizeof</span> (buf));
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LS entry does not exist: %s&quot;</span>, buf);
        }
      <span class="keywordflow">return</span>;
    }

  prefix_num = ntohs (intra_prefix_lsa-&gt;<a class="code" href="structospf6__intra__prefix__lsa.html#a245827d5b8045d2c116321a8a10c00c2">prefix_num</a>);
  start = (caddr_t) intra_prefix_lsa +
          <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__intra__prefix__lsa.html">ospf6_intra_prefix_lsa</a>);
  end = <a class="code" href="ospf6__lsa_8h.html#a87b31ede65cbe50b8cbf50c6b630569c">OSPF6_LSA_END</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>);
  <span class="keywordflow">for</span> (current = start; current &lt; end; current += <a class="code" href="ospf6__proto_8h.html#a962c0cb70bf0ee906c0022daed58b15d">OSPF6_PREFIX_SIZE</a> (op))
    {
      op = (<span class="keyword">struct </span><a class="code" href="structospf6__prefix.html">ospf6_prefix</a> *) current;
      <span class="keywordflow">if</span> (prefix_num == 0)
        <span class="keywordflow">break</span>;
      <span class="keywordflow">if</span> (end &lt; current + <a class="code" href="ospf6__proto_8h.html#a962c0cb70bf0ee906c0022daed58b15d">OSPF6_PREFIX_SIZE</a> (op))
        <span class="keywordflow">break</span>;

      route = <a class="code" href="ospf6__route_8c.html#af4307729ed4bcbcb064c0a7363f3084f">ospf6_route_create</a> ();

      memset (&amp;route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>, 0, sizeof (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a>));
      route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>.<a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a> = AF_INET6;
      route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>.<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a> = op-&gt;<a class="code" href="structospf6__prefix.html#a308c8780392bd7557d20759cb1d93b45">prefix_length</a>;
      <a class="code" href="ospf6__proto_8h.html#a01c336c921d3df5dc60e501439617d7a">ospf6_prefix_in6_addr</a> (&amp;route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>.u.prefix6, op);

      route-&gt;<a class="code" href="structospf6__route.html#a74705096f252ccb17294f45fe3945757">type</a> = <a class="code" href="ospf6__route_8h.html#a2f4b4255cc7cd17befa380178d67e819">OSPF6_DEST_TYPE_NETWORK</a>;
      route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a7f174fe7a9fdaded7fc074cb1c51b351">origin</a>.<a class="code" href="structospf6__ls__origin.html#a88f1d08bddf61718681883834fd9990e">type</a> = lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>;
      route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a7f174fe7a9fdaded7fc074cb1c51b351">origin</a>.<a class="code" href="structospf6__ls__origin.html#a5462d6c847d9cddd5e0bace437f2199a">id</a> = lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>;
      route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a7f174fe7a9fdaded7fc074cb1c51b351">origin</a>.<a class="code" href="structospf6__ls__origin.html#aad4727f62192e5db63a98474f9845694">adv_router</a> = lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>;
      route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#aff47b01abb3043868430317017d8f1c7">prefix_options</a> = op-&gt;<a class="code" href="structospf6__prefix.html#aeac807a42ff5d2e15dfa844203fec5c8">prefix_options</a>;
      route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#ad4fc384dbcd343e1ba3e5918e4d25c15">area_id</a> = oa-&gt;<a class="code" href="structospf6__area.html#aec3bacc0c813ff937b5675595a3aefa6">area_id</a>;
      route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a9cffc83cee981501db820772cab34b7e">type</a> = <a class="code" href="ospf6__route_8h.html#a6cda40031860bfed6184599f4ac957ec">OSPF6_PATH_TYPE_INTRA</a>;
      route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a5723668da86dfd4caea4f50e8ad0457f">metric_type</a> = 1;
      route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#ab33bf3c3ce1f07b918167dbfa4af30e6">cost</a> = ls_entry-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#ab33bf3c3ce1f07b918167dbfa4af30e6">cost</a> +
                         ntohs (op-&gt;prefix_metric);

      <span class="keywordflow">for</span> (i = 0; <a class="code" href="ospf6__route_8h.html#ab3d4b67ab2b8648021096e2fca7d980b">ospf6_nexthop_is_set</a> (&amp;ls_entry-&gt;<a class="code" href="structospf6__route.html#aeff840303635790b4975364a57c300a3">nexthop</a>[i]) &amp;&amp;
           i &lt; <a class="code" href="ospf6__route_8h.html#a722b45cea00290e2da6ebe98934f8749">OSPF6_MULTI_PATH_LIMIT</a>; i++)
        <a class="code" href="ospf6__route_8h.html#a984d5a07fada4d6bb60561677a1f79a1">ospf6_nexthop_copy</a> (&amp;route-&gt;<a class="code" href="structospf6__route.html#aeff840303635790b4975364a57c300a3">nexthop</a>[i], &amp;ls_entry-&gt;<a class="code" href="structospf6__route.html#aeff840303635790b4975364a57c300a3">nexthop</a>[i]);

      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a406c0c0d50f887bcff40c875b15499c2">IS_OSPF6_DEBUG_EXAMIN</a> (INTRA_PREFIX))
        {
          <a class="code" href="prefix_8c.html#a8b848557695ae5694bd2282eba23e367">prefix2str</a> (&amp;route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>, buf, sizeof (buf));
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;  add %s&quot;</span>, buf);
        }

      <a class="code" href="ospf6__route_8c.html#ab35c4efbc72f9bf772e334f1725da353">ospf6_route_add</a> (route, oa-&gt;<a class="code" href="structospf6__area.html#ac2e9bbd4222e14831f775ad2ecfed654">route_table</a>);
      prefix_num--;
    }

  <span class="keywordflow">if</span> (current != end &amp;&amp; <a class="code" href="ospf6__lsa_8h.html#a406c0c0d50f887bcff40c875b15499c2">IS_OSPF6_DEBUG_EXAMIN</a> (INTRA_PREFIX))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Trailing garbage ignored&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a374b1cc84d7e97282e03860d870733b2"></a><!-- doxytag: member="ospf6_intra.c::ospf6_intra_prefix_lsa_originate_stub" ref="a374b1cc84d7e97282e03860d870733b2" args="(struct thread *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf6_intra_prefix_lsa_originate_stub </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l00676">676</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__area.html">ospf6_area</a> *oa;

  <span class="keywordtype">char</span> <a class="code" href="structbuffer.html">buffer</a>[<a class="code" href="ospf6__lsa_8h.html#af4991cd5f3743ff818891605ce515085">OSPF6_MAX_LSASIZE</a>];
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a> *<a class="code" href="structlsa__header.html">lsa_header</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *old, *lsa;

  <span class="keyword">struct </span><a class="code" href="structospf6__intra__prefix__lsa.html">ospf6_intra_prefix_lsa</a> *intra_prefix_lsa;
  <span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *oi;
  <span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *on;
  <span class="keyword">struct </span><a class="code" href="structospf6__route.html">ospf6_route</a> *route;
  <span class="keyword">struct </span><a class="code" href="structospf6__prefix.html">ospf6_prefix</a> *op;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>, *<a class="code" href="spgrid_8c.html#a7113d77fc628f14d4e7d1262969c613e">j</a>;
  <span class="keywordtype">int</span> full_count = 0;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> prefix_num = 0;
  <span class="keywordtype">char</span> buf[BUFSIZ];
  <span class="keyword">struct </span><a class="code" href="structospf6__route__table.html">ospf6_route_table</a> *route_advertise;

  oa = (<span class="keyword">struct </span><a class="code" href="structospf6__area.html">ospf6_area</a> *) <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (thread);
  oa-&gt;<a class="code" href="structospf6__area.html#a72f49f238edf4d483de51339fb841116">thread_intra_prefix_lsa</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="comment">/* find previous LSA */</span>
  old = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (htons (<a class="code" href="ospf6__lsa_8h.html#a3966973bf5d4ff4ed7478036a608deff">OSPF6_LSTYPE_INTRA_PREFIX</a>),
                           htonl (0), oa-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>, oa-&gt;<a class="code" href="structospf6__area.html#a9e658e62c2d59151531bc03b95b600bb">lsdb</a>);

  <span class="keywordflow">if</span> (! <a class="code" href="ospf6__area_8h.html#a5fdea4736864718eddd8f0b02d10eaf9">IS_AREA_ENABLED</a> (oa))
    {
      <span class="keywordflow">if</span> (old)
        <a class="code" href="ospf6__flood_8c.html#a249f2b2808a03c8e9998d6bdf209a962">ospf6_lsa_purge</a> (old);
      <span class="keywordflow">return</span> 0;
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (INTRA_PREFIX))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Originate Intra-Area-Prefix-LSA for area %s&#39;s stub prefix&quot;</span>,
               oa-&gt;<a class="code" href="structospf6__area.html#a24bd4ccc38c4e10de1b66b2d0cf885cf">name</a>);

  <span class="comment">/* prepare buffer */</span>
  memset (buffer, 0, <span class="keyword">sizeof</span> (buffer));
  lsa_header = (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a> *) buffer;
  intra_prefix_lsa = (<span class="keyword">struct </span><a class="code" href="structospf6__intra__prefix__lsa.html">ospf6_intra_prefix_lsa</a> *)
    ((caddr_t) lsa_header + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>));

  <span class="comment">/* Fill Intra-Area-Prefix-LSA */</span>
  intra_prefix_lsa-&gt;<a class="code" href="structospf6__intra__prefix__lsa.html#a40d17aa33e27f9a873f3d458a26b53e3">ref_type</a> = htons (<a class="code" href="ospf6__lsa_8h.html#a5d3fd0013f7454017d88a45393c028a2">OSPF6_LSTYPE_ROUTER</a>);
  intra_prefix_lsa-&gt;<a class="code" href="structospf6__intra__prefix__lsa.html#a3529cca64a1bca463c2351ce7c2a2515">ref_id</a> = htonl (0);
  intra_prefix_lsa-&gt;<a class="code" href="structospf6__intra__prefix__lsa.html#a832355f70d5e716876273e5d5386da6c">ref_adv_router</a> = oa-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>;

  route_advertise = <a class="code" href="ospf6__route_8c.html#a79652b40c9c81bf3ef56b21732b5ee8e">ospf6_route_table_create</a> (0, 0);

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (oa-&gt;<a class="code" href="structospf6__area.html#ab06f65e38225287ac3fb4c67cf9dfdcd">if_list</a>, i, oi))
    {
      <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> == <a class="code" href="ospf6__interface_8h.html#a49b579760cabb266eb7331686381fc51">OSPF6_INTERFACE_DOWN</a>)
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (INTRA_PREFIX))
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;  Interface %s is down, ignore&quot;</span>, oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#a98cadce768ec5aacb4c5fc4ca2c3eaa8">name</a>);
          <span class="keywordflow">continue</span>;
        }

      full_count = 0;

      <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (oi-&gt;<a class="code" href="structospf6__interface.html#ada404f0a64a2f3783445fdf2c2dccf6d">neighbor_list</a>, j, on))
        <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> == <a class="code" href="ospf6__neighbor_8h.html#aae1490b2e9d8ca36df8b2127dcc289c1">OSPF6_NEIGHBOR_FULL</a>)
          full_count++;

      <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> != <a class="code" href="ospf6__interface_8h.html#a96eca89278770c21b63b0a4e14fb64d9">OSPF6_INTERFACE_LOOPBACK</a> &amp;&amp;
          oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> != <a class="code" href="ospf6__interface_8h.html#ae27eee5093f2c674cf5d3f00324c81b7">OSPF6_INTERFACE_POINTTOPOINT</a> &amp;&amp;
          full_count != 0)
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (INTRA_PREFIX))
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;  Interface %s is not stub, ignore&quot;</span>,
                       oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#a98cadce768ec5aacb4c5fc4ca2c3eaa8">name</a>);
          <span class="keywordflow">continue</span>;
        }

      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (INTRA_PREFIX))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;  Interface %s:&quot;</span>, oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#a98cadce768ec5aacb4c5fc4ca2c3eaa8">name</a>);

      <span class="comment">/* connected prefix to advertise */</span>
      <span class="keywordflow">for</span> (route = <a class="code" href="ospf6__route_8c.html#a400d24a67548089d8a59242677ef33cf">ospf6_route_head</a> (oi-&gt;<a class="code" href="structospf6__interface.html#af278bb16b6e8833b3f43c3e1cdc3e129">route_connected</a>); route;
           route = <a class="code" href="ospf6__route_8c.html#ad6c22f4091c972c555827dc1632f2fd8">ospf6_route_best_next</a> (route))
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (INTRA_PREFIX))
            {
              <a class="code" href="prefix_8c.html#a8b848557695ae5694bd2282eba23e367">prefix2str</a> (&amp;route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>, buf, sizeof (buf));
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;    include %s&quot;</span>, buf);
            }
          <a class="code" href="ospf6__route_8c.html#ab35c4efbc72f9bf772e334f1725da353">ospf6_route_add</a> (<a class="code" href="ospf6__route_8c.html#aa406f9a6fff899c6c153b2d208efd1a0">ospf6_route_copy</a> (route), route_advertise);
        }
    }

  <span class="keywordflow">if</span> (route_advertise-&gt;<a class="code" href="structospf6__route__table.html#ac242748e782f2dbbc1f2d69ce7d9a140">count</a> == 0)
    {
      <span class="keywordflow">if</span> (old)
        <a class="code" href="ospf6__flood_8c.html#a249f2b2808a03c8e9998d6bdf209a962">ospf6_lsa_purge</a> (old);
      <a class="code" href="ospf6__route_8c.html#a02985ae1fd04f0ab2826100b9dae38b2">ospf6_route_table_delete</a> (route_advertise);
      <span class="keywordflow">return</span> 0;
    }

  <span class="comment">/* put prefixes to advertise */</span>
  prefix_num = 0;
  op = (<span class="keyword">struct </span><a class="code" href="structospf6__prefix.html">ospf6_prefix</a> *)
    ((caddr_t) intra_prefix_lsa + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__intra__prefix__lsa.html">ospf6_intra_prefix_lsa</a>));
  <span class="keywordflow">for</span> (route = <a class="code" href="ospf6__route_8c.html#a400d24a67548089d8a59242677ef33cf">ospf6_route_head</a> (route_advertise); route;
       route = <a class="code" href="ospf6__route_8c.html#ad6c22f4091c972c555827dc1632f2fd8">ospf6_route_best_next</a> (route))
    {
      op-&gt;<a class="code" href="structospf6__prefix.html#a308c8780392bd7557d20759cb1d93b45">prefix_length</a> = route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>.<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a>;
      op-&gt;<a class="code" href="structospf6__prefix.html#aeac807a42ff5d2e15dfa844203fec5c8">prefix_options</a> = route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#aff47b01abb3043868430317017d8f1c7">prefix_options</a>;
      op-&gt;prefix_metric = htons (route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#ab33bf3c3ce1f07b918167dbfa4af30e6">cost</a>);
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (<a class="code" href="ospf6__proto_8h.html#ab6bb3df310bf454962ae3fd8e836c0b5">OSPF6_PREFIX_BODY</a> (op), &amp;route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>.u.prefix6,
              <a class="code" href="ospf6__proto_8h.html#a95b30d77b5749feed0b8e400df5ee378">OSPF6_PREFIX_SPACE</a> (op-&gt;<a class="code" href="structospf6__prefix.html#a308c8780392bd7557d20759cb1d93b45">prefix_length</a>));
      op = <a class="code" href="ospf6__proto_8h.html#a1d35a4da552490de4d89067794f819c1">OSPF6_PREFIX_NEXT</a> (op);
      prefix_num++;
    }

  <a class="code" href="ospf6__route_8c.html#a02985ae1fd04f0ab2826100b9dae38b2">ospf6_route_table_delete</a> (route_advertise);

  <span class="keywordflow">if</span> (prefix_num == 0)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (INTRA_PREFIX))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Quit to Advertise Intra-Prefix: no route to advertise&quot;</span>);
      <span class="keywordflow">return</span> 0;
    }

  intra_prefix_lsa-&gt;<a class="code" href="structospf6__intra__prefix__lsa.html#a245827d5b8045d2c116321a8a10c00c2">prefix_num</a> = htons (prefix_num);

  <span class="comment">/* Fill LSA Header */</span>
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#aa7582f351501b3642ad32ed3a26f9319">age</a> = 0;
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a> = htons (<a class="code" href="ospf6__lsa_8h.html#a3966973bf5d4ff4ed7478036a608deff">OSPF6_LSTYPE_INTRA_PREFIX</a>);
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a> = htonl (0);
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a> = oa-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>;
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a438027b9b7303569a6bb41b2ee97d734">seqnum</a> =
    <a class="code" href="ospf6__lsdb_8c.html#ad286ac62b7fc40113b536203ecd9499d">ospf6_new_ls_seqnum</a> (lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>,
                         lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, oa-&gt;<a class="code" href="structospf6__area.html#a9e658e62c2d59151531bc03b95b600bb">lsdb</a>);
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a427863854cd3905598a50ce53167285c">length</a> = htons ((caddr_t) op - (caddr_t) lsa_header);

  <span class="comment">/* LSA checksum */</span>
  <a class="code" href="ospf6__lsa_8c.html#a033e364d9b61664964b29893c5070c0d">ospf6_lsa_checksum</a> (lsa_header);

  <span class="comment">/* create LSA */</span>
  lsa = <a class="code" href="ospf6__lsa_8c.html#ab8a6a2c7b84b7e0c48eb7be6a3a0cf9c">ospf6_lsa_create</a> (lsa_header);

  <span class="comment">/* Originate */</span>
  <a class="code" href="ospf6__flood_8c.html#a3d16e7d20ecaf3dad0a2459d16133cf0">ospf6_lsa_originate_area</a> (lsa, oa);

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa3bd886b9f7da9c4a72f36a5f971053d"></a><!-- doxytag: member="ospf6_intra.c::ospf6_intra_prefix_lsa_originate_transit" ref="aa3bd886b9f7da9c4a72f36a5f971053d" args="(struct thread *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf6_intra_prefix_lsa_originate_transit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l00826">826</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *oi;

  <span class="keywordtype">char</span> <a class="code" href="structbuffer.html">buffer</a>[<a class="code" href="ospf6__lsa_8h.html#af4991cd5f3743ff818891605ce515085">OSPF6_MAX_LSASIZE</a>];
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a> *<a class="code" href="structlsa__header.html">lsa_header</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *old, *lsa;

  <span class="keyword">struct </span><a class="code" href="structospf6__intra__prefix__lsa.html">ospf6_intra_prefix_lsa</a> *intra_prefix_lsa;
  <span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *on;
  <span class="keyword">struct </span><a class="code" href="structospf6__route.html">ospf6_route</a> *route;
  <span class="keyword">struct </span><a class="code" href="structospf6__prefix.html">ospf6_prefix</a> *op;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>;
  <span class="keywordtype">int</span> full_count = 0;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> prefix_num = 0;
  <span class="keyword">struct </span><a class="code" href="structospf6__route__table.html">ospf6_route_table</a> *route_advertise;
  <span class="keyword">struct </span><a class="code" href="structospf6__link__lsa.html">ospf6_link_lsa</a> *link_lsa;
  <span class="keywordtype">char</span> *start, *end, *current;
  u_int16_t <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>;
  <span class="keywordtype">char</span> buf[BUFSIZ];

  oi = (<span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *) <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (thread);
  oi-&gt;<a class="code" href="structospf6__interface.html#a835ccc3e463c6cc9da9a7f0fec45f3a5">thread_intra_prefix_lsa</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>);

  <span class="comment">/* find previous LSA */</span>
  old = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (htons (<a class="code" href="ospf6__lsa_8h.html#a3966973bf5d4ff4ed7478036a608deff">OSPF6_LSTYPE_INTRA_PREFIX</a>),
                           htonl (oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a>),
                           oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>, oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a9e658e62c2d59151531bc03b95b600bb">lsdb</a>);

  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (oi-&gt;<a class="code" href="structospf6__interface.html#aa5dbc797ed38482907f57c66458a3e87">flag</a>, <a class="code" href="ospf6__interface_8h.html#a6bb21f7bcfd7aa0b5d6d7c8640db4848">OSPF6_INTERFACE_DISABLE</a>))
    {
      <span class="keywordflow">if</span> (old)
        <a class="code" href="ospf6__flood_8c.html#a249f2b2808a03c8e9998d6bdf209a962">ospf6_lsa_purge</a> (old);
      <span class="keywordflow">return</span> 0;
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (INTRA_PREFIX))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Originate Intra-Area-Prefix-LSA for interface %s&#39;s prefix&quot;</span>,
               oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#a98cadce768ec5aacb4c5fc4ca2c3eaa8">name</a>);

  <span class="comment">/* prepare buffer */</span>
  memset (buffer, 0, <span class="keyword">sizeof</span> (buffer));
  lsa_header = (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a> *) buffer;
  intra_prefix_lsa = (<span class="keyword">struct </span><a class="code" href="structospf6__intra__prefix__lsa.html">ospf6_intra_prefix_lsa</a> *)
    ((caddr_t) lsa_header + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>));

  <span class="comment">/* Fill Intra-Area-Prefix-LSA */</span>
  intra_prefix_lsa-&gt;<a class="code" href="structospf6__intra__prefix__lsa.html#a40d17aa33e27f9a873f3d458a26b53e3">ref_type</a> = htons (<a class="code" href="ospf6__lsa_8h.html#a812d6d1be4227ced8bb60b401caeecaa">OSPF6_LSTYPE_NETWORK</a>);
  intra_prefix_lsa-&gt;<a class="code" href="structospf6__intra__prefix__lsa.html#a3529cca64a1bca463c2351ce7c2a2515">ref_id</a> = htonl (oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a>);
  intra_prefix_lsa-&gt;<a class="code" href="structospf6__intra__prefix__lsa.html#a832355f70d5e716876273e5d5386da6c">ref_adv_router</a> = oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>;

  <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> != <a class="code" href="ospf6__interface_8h.html#ad83f536f4674c165d7f393d28f087843">OSPF6_INTERFACE_DR</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (INTRA_PREFIX))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;  Interface is not DR&quot;</span>);
      <span class="keywordflow">if</span> (old)
        <a class="code" href="ospf6__flood_8c.html#a249f2b2808a03c8e9998d6bdf209a962">ospf6_lsa_purge</a> (old);
      <span class="keywordflow">return</span> 0;
    }

  full_count = 0;
  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (oi-&gt;<a class="code" href="structospf6__interface.html#ada404f0a64a2f3783445fdf2c2dccf6d">neighbor_list</a>, i, on))
    <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> == <a class="code" href="ospf6__neighbor_8h.html#aae1490b2e9d8ca36df8b2127dcc289c1">OSPF6_NEIGHBOR_FULL</a>)
      full_count++;
  
  <span class="keywordflow">if</span> (full_count == 0)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (INTRA_PREFIX))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;  Interface is stub&quot;</span>);
      <span class="keywordflow">if</span> (old)
        <a class="code" href="ospf6__flood_8c.html#a249f2b2808a03c8e9998d6bdf209a962">ospf6_lsa_purge</a> (old);
      <span class="keywordflow">return</span> 0;
    }

  <span class="comment">/* connected prefix to advertise */</span>
  route_advertise = <a class="code" href="ospf6__route_8c.html#a79652b40c9c81bf3ef56b21732b5ee8e">ospf6_route_table_create</a> (0, 0);

  type = ntohs (<a class="code" href="ospf6__lsa_8h.html#ae9921adf750616ded4d14b6aaa64267d">OSPF6_LSTYPE_LINK</a>);
  <span class="keywordflow">for</span> (lsa = <a class="code" href="ospf6__lsdb_8c.html#a7056073f69eb0339fcbe90fed4ba404d">ospf6_lsdb_type_head</a> (type, oi-&gt;<a class="code" href="structospf6__interface.html#ab033cb877fe417705f424d1bd2f411de">lsdb</a>); lsa;
       lsa = <a class="code" href="ospf6__lsdb_8c.html#af61f7812e7125f7ac5f54f2e23c72292">ospf6_lsdb_type_next</a> (type, lsa))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#acde3ad184b10ca14f3eef7b2ab655ce6">OSPF6_LSA_IS_MAXAGE</a> (lsa))
        <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (INTRA_PREFIX))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;  include prefix from %s&quot;</span>, lsa-&gt;<a class="code" href="structospf6__lsa.html#a979d21e1c4d2e1753e7d45641b0819ce">name</a>);

      <span class="keywordflow">if</span> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a> != oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>)
        {
          on = <a class="code" href="ospf6__neighbor_8c.html#a4b081b7bf89453a1d197bd4ccd21fb14">ospf6_neighbor_lookup</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, oi);
          <span class="keywordflow">if</span> (on == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> != <a class="code" href="ospf6__neighbor_8h.html#aae1490b2e9d8ca36df8b2127dcc289c1">OSPF6_NEIGHBOR_FULL</a>)
            {
              <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (INTRA_PREFIX))
                <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;    Neighbor not found or not Full, ignore&quot;</span>);
              <span class="keywordflow">continue</span>;
            }
        }

      link_lsa = (<span class="keyword">struct </span><a class="code" href="structospf6__link__lsa.html">ospf6_link_lsa</a> *)
        ((caddr_t) lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a> + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>));

      prefix_num = (<span class="keywordtype">unsigned</span> short) ntohl (link_lsa-&gt;<a class="code" href="structospf6__link__lsa.html#a8fd7546dfb276d0c904c8ce86123c2da">prefix_num</a>);
      start = (<span class="keywordtype">char</span> *) link_lsa + <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__link__lsa.html">ospf6_link_lsa</a>);
      end = (<span class="keywordtype">char</span> *) lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a> + ntohs (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a427863854cd3905598a50ce53167285c">length</a>); 
      <span class="keywordflow">for</span> (current = start; current &lt; end &amp;&amp; prefix_num;
           current += <a class="code" href="ospf6__proto_8h.html#a962c0cb70bf0ee906c0022daed58b15d">OSPF6_PREFIX_SIZE</a> (op))
        {
          op = (<span class="keyword">struct </span><a class="code" href="structospf6__prefix.html">ospf6_prefix</a> *) current;
          <span class="keywordflow">if</span> (op-&gt;<a class="code" href="structospf6__prefix.html#a308c8780392bd7557d20759cb1d93b45">prefix_length</a> == 0 ||
              current + <a class="code" href="ospf6__proto_8h.html#a962c0cb70bf0ee906c0022daed58b15d">OSPF6_PREFIX_SIZE</a> (op) &gt; end)
            <span class="keywordflow">break</span>;

          route = <a class="code" href="ospf6__route_8c.html#af4307729ed4bcbcb064c0a7363f3084f">ospf6_route_create</a> ();

          route-&gt;<a class="code" href="structospf6__route.html#a74705096f252ccb17294f45fe3945757">type</a> = <a class="code" href="ospf6__route_8h.html#a2f4b4255cc7cd17befa380178d67e819">OSPF6_DEST_TYPE_NETWORK</a>;
          route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>.<a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a> = AF_INET6;
          route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>.<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a> = op-&gt;<a class="code" href="structospf6__prefix.html#a308c8780392bd7557d20759cb1d93b45">prefix_length</a>;
          memset (&amp;route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>.u.prefix6, 0, sizeof (<span class="keyword">struct</span> in6_addr));
          <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (&amp;route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>.u.prefix6, <a class="code" href="ospf6__proto_8h.html#ab6bb3df310bf454962ae3fd8e836c0b5">OSPF6_PREFIX_BODY</a> (op),
                  <a class="code" href="ospf6__proto_8h.html#a95b30d77b5749feed0b8e400df5ee378">OSPF6_PREFIX_SPACE</a> (op-&gt;<a class="code" href="structospf6__prefix.html#a308c8780392bd7557d20759cb1d93b45">prefix_length</a>));

          route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a7f174fe7a9fdaded7fc074cb1c51b351">origin</a>.<a class="code" href="structospf6__ls__origin.html#a88f1d08bddf61718681883834fd9990e">type</a> = lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>;
          route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a7f174fe7a9fdaded7fc074cb1c51b351">origin</a>.<a class="code" href="structospf6__ls__origin.html#a5462d6c847d9cddd5e0bace437f2199a">id</a> = lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>;
          route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a7f174fe7a9fdaded7fc074cb1c51b351">origin</a>.<a class="code" href="structospf6__ls__origin.html#aad4727f62192e5db63a98474f9845694">adv_router</a> = lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>;
          route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a1c10b3d1f386486e496d7196ec16e5e5">options</a>[0] = link_lsa-&gt;<a class="code" href="structospf6__link__lsa.html#a224d1c77e464c8a38acf5c76e8c8814e">options</a>[0];
          route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a1c10b3d1f386486e496d7196ec16e5e5">options</a>[1] = link_lsa-&gt;<a class="code" href="structospf6__link__lsa.html#a224d1c77e464c8a38acf5c76e8c8814e">options</a>[1];
          route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a1c10b3d1f386486e496d7196ec16e5e5">options</a>[2] = link_lsa-&gt;<a class="code" href="structospf6__link__lsa.html#a224d1c77e464c8a38acf5c76e8c8814e">options</a>[2];
          route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#aff47b01abb3043868430317017d8f1c7">prefix_options</a> = op-&gt;<a class="code" href="structospf6__prefix.html#aeac807a42ff5d2e15dfa844203fec5c8">prefix_options</a>;
          route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#ad4fc384dbcd343e1ba3e5918e4d25c15">area_id</a> = oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#aec3bacc0c813ff937b5675595a3aefa6">area_id</a>;
          route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a9cffc83cee981501db820772cab34b7e">type</a> = <a class="code" href="ospf6__route_8h.html#a6cda40031860bfed6184599f4ac957ec">OSPF6_PATH_TYPE_INTRA</a>;

          <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (INTRA_PREFIX))
            {
              <a class="code" href="prefix_8c.html#a8b848557695ae5694bd2282eba23e367">prefix2str</a> (&amp;route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>, buf, sizeof (buf));
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;    include %s&quot;</span>, buf);
            }

          <a class="code" href="ospf6__route_8c.html#ab35c4efbc72f9bf772e334f1725da353">ospf6_route_add</a> (route, route_advertise);
          prefix_num--;
        }
      <span class="keywordflow">if</span> (current != end &amp;&amp; <a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (INTRA_PREFIX))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Trailing garbage in %s&quot;</span>, lsa-&gt;<a class="code" href="structospf6__lsa.html#a979d21e1c4d2e1753e7d45641b0819ce">name</a>);
    }

  op = (<span class="keyword">struct </span><a class="code" href="structospf6__prefix.html">ospf6_prefix</a> *)
    ((caddr_t) intra_prefix_lsa + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__intra__prefix__lsa.html">ospf6_intra_prefix_lsa</a>));

  prefix_num = 0;
  <span class="keywordflow">for</span> (route = <a class="code" href="ospf6__route_8c.html#a400d24a67548089d8a59242677ef33cf">ospf6_route_head</a> (route_advertise); route;
       route = <a class="code" href="ospf6__route_8c.html#ad6c22f4091c972c555827dc1632f2fd8">ospf6_route_best_next</a> (route))
    {
      op-&gt;<a class="code" href="structospf6__prefix.html#a308c8780392bd7557d20759cb1d93b45">prefix_length</a> = route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>.<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a>;
      op-&gt;<a class="code" href="structospf6__prefix.html#aeac807a42ff5d2e15dfa844203fec5c8">prefix_options</a> = route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#aff47b01abb3043868430317017d8f1c7">prefix_options</a>;
      op-&gt;prefix_metric = htons (0);
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (<a class="code" href="ospf6__proto_8h.html#ab6bb3df310bf454962ae3fd8e836c0b5">OSPF6_PREFIX_BODY</a> (op), &amp;route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>.u.prefix6,
              <a class="code" href="ospf6__proto_8h.html#a95b30d77b5749feed0b8e400df5ee378">OSPF6_PREFIX_SPACE</a> (op-&gt;<a class="code" href="structospf6__prefix.html#a308c8780392bd7557d20759cb1d93b45">prefix_length</a>));
      op = <a class="code" href="ospf6__proto_8h.html#a1d35a4da552490de4d89067794f819c1">OSPF6_PREFIX_NEXT</a> (op);
      prefix_num++;
    }

  <a class="code" href="ospf6__route_8c.html#a02985ae1fd04f0ab2826100b9dae38b2">ospf6_route_table_delete</a> (route_advertise);

  <span class="keywordflow">if</span> (prefix_num == 0)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (INTRA_PREFIX))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Quit to Advertise Intra-Prefix: no route to advertise&quot;</span>);
      <span class="keywordflow">return</span> 0;
    }

  intra_prefix_lsa-&gt;<a class="code" href="structospf6__intra__prefix__lsa.html#a245827d5b8045d2c116321a8a10c00c2">prefix_num</a> = htons (prefix_num);

  <span class="comment">/* Fill LSA Header */</span>
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#aa7582f351501b3642ad32ed3a26f9319">age</a> = 0;
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a> = htons (<a class="code" href="ospf6__lsa_8h.html#a3966973bf5d4ff4ed7478036a608deff">OSPF6_LSTYPE_INTRA_PREFIX</a>);
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a> = htonl (oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a>);
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a> = oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>;
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a438027b9b7303569a6bb41b2ee97d734">seqnum</a> =
    <a class="code" href="ospf6__lsdb_8c.html#ad286ac62b7fc40113b536203ecd9499d">ospf6_new_ls_seqnum</a> (lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>,
                         lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a9e658e62c2d59151531bc03b95b600bb">lsdb</a>);
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a427863854cd3905598a50ce53167285c">length</a> = htons ((caddr_t) op - (caddr_t) lsa_header);

  <span class="comment">/* LSA checksum */</span>
  <a class="code" href="ospf6__lsa_8c.html#a033e364d9b61664964b29893c5070c0d">ospf6_lsa_checksum</a> (lsa_header);

  <span class="comment">/* create LSA */</span>
  lsa = <a class="code" href="ospf6__lsa_8c.html#ab8a6a2c7b84b7e0c48eb7be6a3a0cf9c">ospf6_lsa_create</a> (lsa_header);

  <span class="comment">/* Originate */</span>
  <a class="code" href="ospf6__flood_8c.html#a3d16e7d20ecaf3dad0a2459d16133cf0">ospf6_lsa_originate_area</a> (lsa, oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>);

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aec94c4898139ac8cf6cb0ca3cbd1536a"></a><!-- doxytag: member="ospf6_intra.c::ospf6_intra_prefix_lsa_remove" ref="aec94c4898139ac8cf6cb0ca3cbd1536a" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_intra_prefix_lsa_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01117">1117</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__area.html">ospf6_area</a> *oa;
  <span class="keyword">struct </span><a class="code" href="structospf6__intra__prefix__lsa.html">ospf6_intra_prefix_lsa</a> *intra_prefix_lsa;
  <span class="keyword">struct </span><a class="code" href="structprefix.html">prefix</a> <a class="code" href="structprefix.html">prefix</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__route.html">ospf6_route</a> *route;
  <span class="keywordtype">int</span> prefix_num;
  <span class="keyword">struct </span><a class="code" href="structospf6__prefix.html">ospf6_prefix</a> *op;
  <span class="keywordtype">char</span> *start, *current, *end;
  <span class="keywordtype">char</span> buf[64];

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a406c0c0d50f887bcff40c875b15499c2">IS_OSPF6_DEBUG_EXAMIN</a> (INTRA_PREFIX))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;%s disappearing&quot;</span>, lsa-&gt;<a class="code" href="structospf6__lsa.html#a979d21e1c4d2e1753e7d45641b0819ce">name</a>);

  oa = <a class="code" href="ospf6d_8h.html#a57a3d73f87bce959acf483eb7514a29d">OSPF6_AREA</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>);

  intra_prefix_lsa = (<span class="keyword">struct </span><a class="code" href="structospf6__intra__prefix__lsa.html">ospf6_intra_prefix_lsa</a> *)
    <a class="code" href="ospf6__lsa_8h.html#ade3057c51a01c081c6c753a03c1ffc3f">OSPF6_LSA_HEADER_END</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>);

  prefix_num = ntohs (intra_prefix_lsa-&gt;<a class="code" href="structospf6__intra__prefix__lsa.html#a245827d5b8045d2c116321a8a10c00c2">prefix_num</a>);
  start = (caddr_t) intra_prefix_lsa +
          <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__intra__prefix__lsa.html">ospf6_intra_prefix_lsa</a>);
  end = <a class="code" href="ospf6__lsa_8h.html#a87b31ede65cbe50b8cbf50c6b630569c">OSPF6_LSA_END</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>);
  <span class="keywordflow">for</span> (current = start; current &lt; end; current += <a class="code" href="ospf6__proto_8h.html#a962c0cb70bf0ee906c0022daed58b15d">OSPF6_PREFIX_SIZE</a> (op))
    {
      op = (<span class="keyword">struct </span><a class="code" href="structospf6__prefix.html">ospf6_prefix</a> *) current;
      <span class="keywordflow">if</span> (prefix_num == 0)
        <span class="keywordflow">break</span>;
      <span class="keywordflow">if</span> (end &lt; current + <a class="code" href="ospf6__proto_8h.html#a962c0cb70bf0ee906c0022daed58b15d">OSPF6_PREFIX_SIZE</a> (op))
        <span class="keywordflow">break</span>;
      prefix_num--;

      memset (&amp;<a class="code" href="structprefix.html">prefix</a>, 0, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a>));
      <a class="code" href="structprefix.html">prefix</a>.<a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a> = AF_INET6;
      <a class="code" href="structprefix.html">prefix</a>.<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a> = op-&gt;<a class="code" href="structospf6__prefix.html#a308c8780392bd7557d20759cb1d93b45">prefix_length</a>;
      <a class="code" href="ospf6__proto_8h.html#a01c336c921d3df5dc60e501439617d7a">ospf6_prefix_in6_addr</a> (&amp;<a class="code" href="structprefix.html">prefix</a>.u.prefix6, op);

      route = <a class="code" href="ospf6__route_8c.html#aa7d8f56a2e18e2dc561dfda78a980fb2">ospf6_route_lookup</a> (&amp;<a class="code" href="structprefix.html">prefix</a>, oa-&gt;<a class="code" href="structospf6__area.html#ac2e9bbd4222e14831f775ad2ecfed654">route_table</a>);
      <span class="keywordflow">if</span> (route == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        <span class="keywordflow">continue</span>;

      <span class="keywordflow">for</span> (<a class="code" href="ospf6__route_8c.html#a0ad7c43050f40ca3637220835928c2af">ospf6_route_lock</a> (route);
           route &amp;&amp; <a class="code" href="ospf6__route_8h.html#a0a95fc057a8b281526dc83bdda838baf">ospf6_route_is_prefix</a> (&amp;<a class="code" href="structprefix.html">prefix</a>, route);
           route = <a class="code" href="ospf6__route_8c.html#a4cdecc41a86097a7d0871397f7a80fb8">ospf6_route_next</a> (route))
        {
          <span class="keywordflow">if</span> (route-&gt;<a class="code" href="structospf6__route.html#a74705096f252ccb17294f45fe3945757">type</a> != <a class="code" href="ospf6__route_8h.html#a2f4b4255cc7cd17befa380178d67e819">OSPF6_DEST_TYPE_NETWORK</a>)
            <span class="keywordflow">continue</span>;
          <span class="keywordflow">if</span> (route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#ad4fc384dbcd343e1ba3e5918e4d25c15">area_id</a> != oa-&gt;<a class="code" href="structospf6__area.html#aec3bacc0c813ff937b5675595a3aefa6">area_id</a>)
            <span class="keywordflow">continue</span>;
          <span class="keywordflow">if</span> (route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a9cffc83cee981501db820772cab34b7e">type</a> != <a class="code" href="ospf6__route_8h.html#a6cda40031860bfed6184599f4ac957ec">OSPF6_PATH_TYPE_INTRA</a>)
            <span class="keywordflow">continue</span>;
          <span class="keywordflow">if</span> (route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a7f174fe7a9fdaded7fc074cb1c51b351">origin</a>.<a class="code" href="structospf6__ls__origin.html#a88f1d08bddf61718681883834fd9990e">type</a> != lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a> ||
              route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a7f174fe7a9fdaded7fc074cb1c51b351">origin</a>.<a class="code" href="structospf6__ls__origin.html#a5462d6c847d9cddd5e0bace437f2199a">id</a> != lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a> ||
              route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#a7f174fe7a9fdaded7fc074cb1c51b351">origin</a>.<a class="code" href="structospf6__ls__origin.html#aad4727f62192e5db63a98474f9845694">adv_router</a> != lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>)
            <span class="keywordflow">continue</span>;

          <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a406c0c0d50f887bcff40c875b15499c2">IS_OSPF6_DEBUG_EXAMIN</a> (INTRA_PREFIX))
            {
              <a class="code" href="prefix_8c.html#a8b848557695ae5694bd2282eba23e367">prefix2str</a> (&amp;route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>, buf, sizeof (buf));
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;remove %s&quot;</span>, buf);
            }
          <a class="code" href="ospf6__route_8c.html#a89c513ce389875d0c89a20017db2c410">ospf6_route_remove</a> (route, oa-&gt;<a class="code" href="structospf6__area.html#ac2e9bbd4222e14831f775ad2ecfed654">route_table</a>);
        }
    }

  <span class="keywordflow">if</span> (current != end &amp;&amp; <a class="code" href="ospf6__lsa_8h.html#a406c0c0d50f887bcff40c875b15499c2">IS_OSPF6_DEBUG_EXAMIN</a> (INTRA_PREFIX))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Trailing garbage ignored&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a24832378793232623a288041fda4e75a"></a><!-- doxytag: member="ospf6_intra.c::ospf6_intra_prefix_lsa_show" ref="a24832378793232623a288041fda4e75a" args="(struct vty *vty, struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ospf6_intra_prefix_lsa_show </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname"><em>vty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l00619">619</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span> *start, *end, *current;
  <span class="keyword">struct </span><a class="code" href="structospf6__intra__prefix__lsa.html">ospf6_intra_prefix_lsa</a> *intra_prefix_lsa;
  <span class="keywordtype">int</span> prefixnum;
  <span class="keywordtype">char</span> buf[128];
  <span class="keyword">struct </span><a class="code" href="structospf6__prefix.html">ospf6_prefix</a> *<a class="code" href="prefix_8h.html#a6b458105367a186babd858fd008a66be">prefix</a>;
  <span class="keywordtype">char</span> <span class="keywordtype">id</span>[16], <a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>[16];
  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, *<a class="code" href="spgrid_8c.html#a685f4e5f6d78546e82fff08449054b92">mc</a>, *la, *nu;
  <span class="keyword">struct </span>in6_addr in6;

  intra_prefix_lsa = (<span class="keyword">struct </span><a class="code" href="structospf6__intra__prefix__lsa.html">ospf6_intra_prefix_lsa</a> *)
    ((caddr_t) lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a> + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>));

  prefixnum = ntohs (intra_prefix_lsa-&gt;prefix_num);

  <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;     Number of Prefix: %d%s&quot;</span>, prefixnum, <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);

  <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;intra_prefix_lsa-&gt;ref_id, <span class="keywordtype">id</span>, sizeof (<span class="keywordtype">id</span>));
  <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;intra_prefix_lsa-&gt;ref_adv_router,
             adv_router, sizeof (adv_router));
  <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;     Reference: %s Id: %s Adv: %s%s&quot;</span>,
           <a class="code" href="ospf6__lsa_8c.html#aef56342b1e39d23bf9977353c1c2deb1">ospf6_lstype_name</a> (intra_prefix_lsa-&gt;ref_type), <span class="keywordtype">id</span>, adv_router,
           <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);

  start = (<span class="keywordtype">char</span> *) intra_prefix_lsa + <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__intra__prefix__lsa.html">ospf6_intra_prefix_lsa</a>);
  end = (<span class="keywordtype">char</span> *) lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a> + ntohs (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a427863854cd3905598a50ce53167285c">length</a>); 
  <span class="keywordflow">for</span> (current = start; current &lt; end; current += <a class="code" href="ospf6__proto_8h.html#a962c0cb70bf0ee906c0022daed58b15d">OSPF6_PREFIX_SIZE</a> (prefix))
    {
      prefix = (<span class="keyword">struct </span><a class="code" href="structospf6__prefix.html">ospf6_prefix</a> *) current;
      <span class="keywordflow">if</span> (prefix-&gt;<a class="code" href="structospf6__prefix.html#a308c8780392bd7557d20759cb1d93b45">prefix_length</a> == 0 ||
          current + <a class="code" href="ospf6__proto_8h.html#a962c0cb70bf0ee906c0022daed58b15d">OSPF6_PREFIX_SIZE</a> (prefix) &gt; end)
        <span class="keywordflow">break</span>;

      p = (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (prefix-&gt;<a class="code" href="structospf6__prefix.html#aeac807a42ff5d2e15dfa844203fec5c8">prefix_options</a>, <a class="code" href="ospf6__proto_8h.html#a9047b9c4ee2eb8dce548975dca5b411e">OSPF6_PREFIX_OPTION_P</a>) ?
           <span class="stringliteral">&quot;P&quot;</span> : <span class="stringliteral">&quot;--&quot;</span>);
      mc = (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (prefix-&gt;<a class="code" href="structospf6__prefix.html#aeac807a42ff5d2e15dfa844203fec5c8">prefix_options</a>, <a class="code" href="ospf6__proto_8h.html#a6820f05113201b5c8ed3e5de47a98d55">OSPF6_PREFIX_OPTION_MC</a>) ?
           <span class="stringliteral">&quot;MC&quot;</span> : <span class="stringliteral">&quot;--&quot;</span>);
      la = (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (prefix-&gt;<a class="code" href="structospf6__prefix.html#aeac807a42ff5d2e15dfa844203fec5c8">prefix_options</a>, <a class="code" href="ospf6__proto_8h.html#a8a30073e746abfba64a6c6ec33e9befd">OSPF6_PREFIX_OPTION_LA</a>) ?
           <span class="stringliteral">&quot;LA&quot;</span> : <span class="stringliteral">&quot;--&quot;</span>);
      nu = (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (prefix-&gt;<a class="code" href="structospf6__prefix.html#aeac807a42ff5d2e15dfa844203fec5c8">prefix_options</a>, <a class="code" href="ospf6__proto_8h.html#a88cfdf060cfefabe7cee54a80e434c65">OSPF6_PREFIX_OPTION_NU</a>) ?
           <span class="stringliteral">&quot;NU&quot;</span> : <span class="stringliteral">&quot;--&quot;</span>);
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;     Prefix Options: %s|%s|%s|%s%s&quot;</span>,
               p, mc, la, nu, <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);

      memset (&amp;in6, 0, <span class="keyword">sizeof</span> (in6));
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (&amp;in6, <a class="code" href="ospf6__proto_8h.html#ab6bb3df310bf454962ae3fd8e836c0b5">OSPF6_PREFIX_BODY</a> (prefix),
              <a class="code" href="ospf6__proto_8h.html#a95b30d77b5749feed0b8e400df5ee378">OSPF6_PREFIX_SPACE</a> (prefix-&gt;<a class="code" href="structospf6__prefix.html#a308c8780392bd7557d20759cb1d93b45">prefix_length</a>));
      <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET6, &amp;in6, buf, <span class="keyword">sizeof</span> (buf));
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;     Prefix: %s/%d%s&quot;</span>,
               buf, prefix-&gt;<a class="code" href="structospf6__prefix.html#a308c8780392bd7557d20759cb1d93b45">prefix_length</a>, <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);
    }

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a23619e86f770d418b1dac56746080b57"></a><!-- doxytag: member="ospf6_intra.c::ospf6_intra_route_calculation" ref="a23619e86f770d418b1dac56746080b57" args="(struct ospf6_area *oa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_intra_route_calculation </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__area.html">ospf6_area</a> *&#160;</td>
          <td class="paramname"><em>oa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01187">1187</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__route.html">ospf6_route</a> *route;
  u_int16_t <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa;
  void (*hook_add) (<span class="keyword">struct </span><a class="code" href="structospf6__route.html">ospf6_route</a> *) = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  void (*hook_remove) (<span class="keyword">struct </span><a class="code" href="structospf6__route.html">ospf6_route</a> *) = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a406c0c0d50f887bcff40c875b15499c2">IS_OSPF6_DEBUG_EXAMIN</a> (INTRA_PREFIX))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Re-examin intra-routes for area %s&quot;</span>, oa-&gt;<a class="code" href="structospf6__area.html#a24bd4ccc38c4e10de1b66b2d0cf885cf">name</a>);

  hook_add = oa-&gt;<a class="code" href="structospf6__area.html#ac2e9bbd4222e14831f775ad2ecfed654">route_table</a>-&gt;<a class="code" href="structospf6__route__table.html#a150a5f55306ff86d6b220fb0658b4c18">hook_add</a>;
  hook_remove = oa-&gt;<a class="code" href="structospf6__area.html#ac2e9bbd4222e14831f775ad2ecfed654">route_table</a>-&gt;<a class="code" href="structospf6__route__table.html#a1c69b4917bafb6ef7a03299b262f0839">hook_remove</a>;
  oa-&gt;<a class="code" href="structospf6__area.html#ac2e9bbd4222e14831f775ad2ecfed654">route_table</a>-&gt;<a class="code" href="structospf6__route__table.html#a150a5f55306ff86d6b220fb0658b4c18">hook_add</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  oa-&gt;<a class="code" href="structospf6__area.html#ac2e9bbd4222e14831f775ad2ecfed654">route_table</a>-&gt;<a class="code" href="structospf6__route__table.html#a1c69b4917bafb6ef7a03299b262f0839">hook_remove</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">for</span> (route = <a class="code" href="ospf6__route_8c.html#a400d24a67548089d8a59242677ef33cf">ospf6_route_head</a> (oa-&gt;<a class="code" href="structospf6__area.html#ac2e9bbd4222e14831f775ad2ecfed654">route_table</a>); route;
       route = <a class="code" href="ospf6__route_8c.html#a4cdecc41a86097a7d0871397f7a80fb8">ospf6_route_next</a> (route))
    route-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a> = <a class="code" href="ospf6__route_8h.html#a35dc694fea451eddcc4e6d5fa14ed8cd">OSPF6_ROUTE_REMOVE</a>;

  type = htons (<a class="code" href="ospf6__lsa_8h.html#a3966973bf5d4ff4ed7478036a608deff">OSPF6_LSTYPE_INTRA_PREFIX</a>);
  <span class="keywordflow">for</span> (lsa = <a class="code" href="ospf6__lsdb_8c.html#a7056073f69eb0339fcbe90fed4ba404d">ospf6_lsdb_type_head</a> (type, oa-&gt;<a class="code" href="structospf6__area.html#a9e658e62c2d59151531bc03b95b600bb">lsdb</a>); lsa;
       lsa = <a class="code" href="ospf6__lsdb_8c.html#af61f7812e7125f7ac5f54f2e23c72292">ospf6_lsdb_type_next</a> (type, lsa))
    <a class="code" href="ospf6__intra_8c.html#a5d175a55e75ebc16d0b9588b41eae825">ospf6_intra_prefix_lsa_add</a> (lsa);

  oa-&gt;<a class="code" href="structospf6__area.html#ac2e9bbd4222e14831f775ad2ecfed654">route_table</a>-&gt;<a class="code" href="structospf6__route__table.html#a150a5f55306ff86d6b220fb0658b4c18">hook_add</a> = hook_add;
  oa-&gt;<a class="code" href="structospf6__area.html#ac2e9bbd4222e14831f775ad2ecfed654">route_table</a>-&gt;<a class="code" href="structospf6__route__table.html#a1c69b4917bafb6ef7a03299b262f0839">hook_remove</a> = hook_remove;

  <span class="keywordflow">for</span> (route = <a class="code" href="ospf6__route_8c.html#a400d24a67548089d8a59242677ef33cf">ospf6_route_head</a> (oa-&gt;<a class="code" href="structospf6__area.html#ac2e9bbd4222e14831f775ad2ecfed654">route_table</a>); route;
       route = <a class="code" href="ospf6__route_8c.html#a4cdecc41a86097a7d0871397f7a80fb8">ospf6_route_next</a> (route))
    {
      <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (route-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#a35dc694fea451eddcc4e6d5fa14ed8cd">OSPF6_ROUTE_REMOVE</a>) &amp;&amp;
          <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (route-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#af81460bb17acb9299c98ef5e703f29fa">OSPF6_ROUTE_ADD</a>))
        {
          <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (route-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#a35dc694fea451eddcc4e6d5fa14ed8cd">OSPF6_ROUTE_REMOVE</a>);
          <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (route-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#af81460bb17acb9299c98ef5e703f29fa">OSPF6_ROUTE_ADD</a>);
        }

      <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (route-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#a35dc694fea451eddcc4e6d5fa14ed8cd">OSPF6_ROUTE_REMOVE</a>))
        <a class="code" href="ospf6__route_8c.html#a89c513ce389875d0c89a20017db2c410">ospf6_route_remove</a> (route, oa-&gt;<a class="code" href="structospf6__area.html#ac2e9bbd4222e14831f775ad2ecfed654">route_table</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (route-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#af81460bb17acb9299c98ef5e703f29fa">OSPF6_ROUTE_ADD</a>) ||
               <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (route-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a>, <a class="code" href="ospf6__route_8h.html#a2e34d8560d88a78a2243622c923dde72">OSPF6_ROUTE_CHANGE</a>))
        {
          <span class="keywordflow">if</span> (hook_add)
            (*hook_add) (route);
        }

      route-&gt;<a class="code" href="structospf6__route.html#a6ea0bf028d117b76ebdf829dd1214f86">flag</a> = 0;
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a406c0c0d50f887bcff40c875b15499c2">IS_OSPF6_DEBUG_EXAMIN</a> (INTRA_PREFIX))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Re-examin intra-routes for area %s: Done&quot;</span>, oa-&gt;<a class="code" href="structospf6__area.html#a24bd4ccc38c4e10de1b66b2d0cf885cf">name</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a294596401d62531f70760e3ef0968c54"></a><!-- doxytag: member="ospf6_intra.c::ospf6_link_lsa_originate" ref="a294596401d62531f70760e3ef0968c54" args="(struct thread *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf6_link_lsa_originate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l00520">520</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *oi;

  <span class="keywordtype">char</span> <a class="code" href="structbuffer.html">buffer</a>[<a class="code" href="ospf6__lsa_8h.html#af4991cd5f3743ff818891605ce515085">OSPF6_MAX_LSASIZE</a>];
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a> *<a class="code" href="structlsa__header.html">lsa_header</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *old, *lsa;

  <span class="keyword">struct </span><a class="code" href="structospf6__link__lsa.html">ospf6_link_lsa</a> *link_lsa;
  <span class="keyword">struct </span><a class="code" href="structospf6__route.html">ospf6_route</a> *route;
  <span class="keyword">struct </span><a class="code" href="structospf6__prefix.html">ospf6_prefix</a> *op;

  oi = (<span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *) <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (thread);
  oi-&gt;<a class="code" href="structospf6__interface.html#a2b27944971dfa8997e77f50beaf66ebe">thread_link_lsa</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>);

  <span class="comment">/* find previous LSA */</span>
  old = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (htons (<a class="code" href="ospf6__lsa_8h.html#ae9921adf750616ded4d14b6aaa64267d">OSPF6_LSTYPE_LINK</a>),
                           htonl (oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a>),
                           oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>, oi-&gt;<a class="code" href="structospf6__interface.html#ab033cb877fe417705f424d1bd2f411de">lsdb</a>);

  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (oi-&gt;<a class="code" href="structospf6__interface.html#aa5dbc797ed38482907f57c66458a3e87">flag</a>, <a class="code" href="ospf6__interface_8h.html#a6bb21f7bcfd7aa0b5d6d7c8640db4848">OSPF6_INTERFACE_DISABLE</a>))
    {
      <span class="keywordflow">if</span> (old)
        <a class="code" href="ospf6__flood_8c.html#a249f2b2808a03c8e9998d6bdf209a962">ospf6_lsa_purge</a> (old);
      <span class="keywordflow">return</span> 0;
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (LINK))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Originate Link-LSA for Interface %s&quot;</span>, oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#a98cadce768ec5aacb4c5fc4ca2c3eaa8">name</a>);

  <span class="comment">/* can&#39;t make Link-LSA if linklocal address not set */</span>
  <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#a8df3591fcba060b5f64e35dfdb338888">linklocal_addr</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (LINK))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;No Linklocal address on %s, defer originating&quot;</span>,
                   oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#a98cadce768ec5aacb4c5fc4ca2c3eaa8">name</a>);
      <span class="keywordflow">if</span> (old)
        <a class="code" href="ospf6__flood_8c.html#a249f2b2808a03c8e9998d6bdf209a962">ospf6_lsa_purge</a> (old);
      <span class="keywordflow">return</span> 0;
    }

  <span class="comment">/* prepare buffer */</span>
  memset (buffer, 0, <span class="keyword">sizeof</span> (buffer));
  lsa_header = (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a> *) buffer;
  link_lsa = (<span class="keyword">struct </span><a class="code" href="structospf6__link__lsa.html">ospf6_link_lsa</a> *)
    ((caddr_t) lsa_header + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>));

  <span class="comment">/* Fill Link-LSA */</span>
  link_lsa-&gt;<a class="code" href="structospf6__link__lsa.html#ab16cfca8d37025bf6a9517415e7e2004">priority</a> = oi-&gt;<a class="code" href="structospf6__interface.html#a91a541af8d7b9a9b224b2dbb768f4822">priority</a>;
  <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (link_lsa-&gt;<a class="code" href="structospf6__link__lsa.html#a224d1c77e464c8a38acf5c76e8c8814e">options</a>, oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a4ddb7d4da05f99266462914a8935c976">options</a>, 3);
  <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (&amp;link_lsa-&gt;<a class="code" href="structospf6__link__lsa.html#a5250ca9d065442b493c125a9e7e44d94">linklocal_addr</a>, oi-&gt;<a class="code" href="structospf6__interface.html#a8df3591fcba060b5f64e35dfdb338888">linklocal_addr</a>,
          sizeof (<span class="keyword">struct</span> in6_addr));
  link_lsa-&gt;<a class="code" href="structospf6__link__lsa.html#a8fd7546dfb276d0c904c8ce86123c2da">prefix_num</a> = htonl (oi-&gt;<a class="code" href="structospf6__interface.html#af278bb16b6e8833b3f43c3e1cdc3e129">route_connected</a>-&gt;<a class="code" href="structospf6__route__table.html#ac242748e782f2dbbc1f2d69ce7d9a140">count</a>);

  op = (<span class="keyword">struct </span><a class="code" href="structospf6__prefix.html">ospf6_prefix</a> *)
    ((caddr_t) link_lsa + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__link__lsa.html">ospf6_link_lsa</a>));

  <span class="comment">/* connected prefix to advertise */</span>
  <span class="keywordflow">for</span> (route = <a class="code" href="ospf6__route_8c.html#a400d24a67548089d8a59242677ef33cf">ospf6_route_head</a> (oi-&gt;<a class="code" href="structospf6__interface.html#af278bb16b6e8833b3f43c3e1cdc3e129">route_connected</a>); route;
       route = <a class="code" href="ospf6__route_8c.html#a4cdecc41a86097a7d0871397f7a80fb8">ospf6_route_next</a> (route))
    {
      op-&gt;<a class="code" href="structospf6__prefix.html#a308c8780392bd7557d20759cb1d93b45">prefix_length</a> = route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>.<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a>;
      op-&gt;<a class="code" href="structospf6__prefix.html#aeac807a42ff5d2e15dfa844203fec5c8">prefix_options</a> = route-&gt;<a class="code" href="structospf6__route.html#a5a6311b685c1d76468b47edb218bf4a5">path</a>.<a class="code" href="structospf6__path.html#aff47b01abb3043868430317017d8f1c7">prefix_options</a>;
      op-&gt;prefix_metric = htons (0);
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (<a class="code" href="ospf6__proto_8h.html#ab6bb3df310bf454962ae3fd8e836c0b5">OSPF6_PREFIX_BODY</a> (op), &amp;route-&gt;<a class="code" href="structospf6__route.html#a39f2a986ed391c16d5216ad5797c2eda">prefix</a>.u.prefix6,
              <a class="code" href="ospf6__proto_8h.html#a95b30d77b5749feed0b8e400df5ee378">OSPF6_PREFIX_SPACE</a> (op-&gt;<a class="code" href="structospf6__prefix.html#a308c8780392bd7557d20759cb1d93b45">prefix_length</a>));
      op = <a class="code" href="ospf6__proto_8h.html#a1d35a4da552490de4d89067794f819c1">OSPF6_PREFIX_NEXT</a> (op);
    }

  <span class="comment">/* Fill LSA Header */</span>
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#aa7582f351501b3642ad32ed3a26f9319">age</a> = 0;
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a> = htons (<a class="code" href="ospf6__lsa_8h.html#ae9921adf750616ded4d14b6aaa64267d">OSPF6_LSTYPE_LINK</a>);
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a> = htonl (oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a>);
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a> = oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>;
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a438027b9b7303569a6bb41b2ee97d734">seqnum</a> =
    <a class="code" href="ospf6__lsdb_8c.html#ad286ac62b7fc40113b536203ecd9499d">ospf6_new_ls_seqnum</a> (lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>,
                         lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, oi-&gt;<a class="code" href="structospf6__interface.html#ab033cb877fe417705f424d1bd2f411de">lsdb</a>);
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a427863854cd3905598a50ce53167285c">length</a> = htons ((caddr_t) op - (caddr_t) buffer);

  <span class="comment">/* LSA checksum */</span>
  <a class="code" href="ospf6__lsa_8c.html#a033e364d9b61664964b29893c5070c0d">ospf6_lsa_checksum</a> (lsa_header);

  <span class="comment">/* create LSA */</span>
  lsa = <a class="code" href="ospf6__lsa_8c.html#ab8a6a2c7b84b7e0c48eb7be6a3a0cf9c">ospf6_lsa_create</a> (lsa_header);

  <span class="comment">/* Originate */</span>
  <a class="code" href="ospf6__flood_8c.html#affcf3da8e7d395a0199d1eb07cd23431">ospf6_lsa_originate_interface</a> (lsa, oi);

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a54e9876b95f6bfcb7b132a843263bb67"></a><!-- doxytag: member="ospf6_intra.c::ospf6_link_lsa_show" ref="a54e9876b95f6bfcb7b132a843263bb67" args="(struct vty *vty, struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ospf6_link_lsa_show </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname"><em>vty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l00466">466</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span> *start, *end, *current;
  <span class="keyword">struct </span><a class="code" href="structospf6__link__lsa.html">ospf6_link_lsa</a> *link_lsa;
  <span class="keywordtype">int</span> prefixnum;
  <span class="keywordtype">char</span> buf[128], <a class="code" href="structospf6__link__lsa.html#a224d1c77e464c8a38acf5c76e8c8814e">options</a>[32];
  <span class="keyword">struct </span><a class="code" href="structospf6__prefix.html">ospf6_prefix</a> *<a class="code" href="prefix_8h.html#a6b458105367a186babd858fd008a66be">prefix</a>;
  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, *<a class="code" href="spgrid_8c.html#a685f4e5f6d78546e82fff08449054b92">mc</a>, *la, *nu;
  <span class="keyword">struct </span>in6_addr in6;

  link_lsa = (<span class="keyword">struct </span><a class="code" href="structospf6__link__lsa.html">ospf6_link_lsa</a> *)
    ((caddr_t) lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a> + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>));

  <a class="code" href="ospf6__proto_8c.html#a70fba8cd2453bf33405c98ff2ff14a38">ospf6_options_printbuf</a> (link_lsa-&gt;options, options, sizeof (options));
  <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET6, &amp;link_lsa-&gt;linklocal_addr, buf, sizeof (buf));
  prefixnum = ntohl (link_lsa-&gt;prefix_num);

  <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;     Priority: %d Options: %s%s&quot;</span>,
           link_lsa-&gt;priority, options, <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);
  <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;     LinkLocal Address: %s%s&quot;</span>, buf, <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);
  <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;     Number of Prefix: %d%s&quot;</span>, prefixnum, <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);

  start = (<span class="keywordtype">char</span> *) link_lsa + <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__link__lsa.html">ospf6_link_lsa</a>);
  end = (<span class="keywordtype">char</span> *) lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a> + ntohs (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a427863854cd3905598a50ce53167285c">length</a>); 
  <span class="keywordflow">for</span> (current = start; current &lt; end; current += <a class="code" href="ospf6__proto_8h.html#a962c0cb70bf0ee906c0022daed58b15d">OSPF6_PREFIX_SIZE</a> (prefix))
    {
      prefix = (<span class="keyword">struct </span><a class="code" href="structospf6__prefix.html">ospf6_prefix</a> *) current;
      <span class="keywordflow">if</span> (prefix-&gt;<a class="code" href="structospf6__prefix.html#a308c8780392bd7557d20759cb1d93b45">prefix_length</a> == 0 ||
          current + <a class="code" href="ospf6__proto_8h.html#a962c0cb70bf0ee906c0022daed58b15d">OSPF6_PREFIX_SIZE</a> (prefix) &gt; end)
        <span class="keywordflow">break</span>;

      p = (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (prefix-&gt;<a class="code" href="structospf6__prefix.html#aeac807a42ff5d2e15dfa844203fec5c8">prefix_options</a>, <a class="code" href="ospf6__proto_8h.html#a9047b9c4ee2eb8dce548975dca5b411e">OSPF6_PREFIX_OPTION_P</a>) ?
           <span class="stringliteral">&quot;P&quot;</span> : <span class="stringliteral">&quot;--&quot;</span>);
      mc = (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (prefix-&gt;<a class="code" href="structospf6__prefix.html#aeac807a42ff5d2e15dfa844203fec5c8">prefix_options</a>, <a class="code" href="ospf6__proto_8h.html#a6820f05113201b5c8ed3e5de47a98d55">OSPF6_PREFIX_OPTION_MC</a>) ?
           <span class="stringliteral">&quot;MC&quot;</span> : <span class="stringliteral">&quot;--&quot;</span>);
      la = (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (prefix-&gt;<a class="code" href="structospf6__prefix.html#aeac807a42ff5d2e15dfa844203fec5c8">prefix_options</a>, <a class="code" href="ospf6__proto_8h.html#a8a30073e746abfba64a6c6ec33e9befd">OSPF6_PREFIX_OPTION_LA</a>) ?
           <span class="stringliteral">&quot;LA&quot;</span> : <span class="stringliteral">&quot;--&quot;</span>);
      nu = (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (prefix-&gt;<a class="code" href="structospf6__prefix.html#aeac807a42ff5d2e15dfa844203fec5c8">prefix_options</a>, <a class="code" href="ospf6__proto_8h.html#a88cfdf060cfefabe7cee54a80e434c65">OSPF6_PREFIX_OPTION_NU</a>) ?
           <span class="stringliteral">&quot;NU&quot;</span> : <span class="stringliteral">&quot;--&quot;</span>);
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;     Prefix Options: %s|%s|%s|%s%s&quot;</span>,
               p, mc, la, nu, <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);

      memset (&amp;in6, 0, <span class="keyword">sizeof</span> (in6));
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (&amp;in6, <a class="code" href="ospf6__proto_8h.html#ab6bb3df310bf454962ae3fd8e836c0b5">OSPF6_PREFIX_BODY</a> (prefix),
              <a class="code" href="ospf6__proto_8h.html#a95b30d77b5749feed0b8e400df5ee378">OSPF6_PREFIX_SPACE</a> (prefix-&gt;<a class="code" href="structospf6__prefix.html#a308c8780392bd7557d20759cb1d93b45">prefix_length</a>));
      <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET6, &amp;in6, buf, <span class="keyword">sizeof</span> (buf));
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;     Prefix: %s/%d%s&quot;</span>,
               buf, prefix-&gt;<a class="code" href="structospf6__prefix.html#a308c8780392bd7557d20759cb1d93b45">prefix_length</a>, <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);
    }

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2cca7ec82521456cd603c374503993e0"></a><!-- doxytag: member="ospf6_intra.c::ospf6_network_lsa_originate" ref="a2cca7ec82521456cd603c374503993e0" args="(struct thread *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf6_network_lsa_originate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l00346">346</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *oi;

  <span class="keywordtype">char</span> <a class="code" href="structbuffer.html">buffer</a> [<a class="code" href="ospf6__lsa_8h.html#af4991cd5f3743ff818891605ce515085">OSPF6_MAX_LSASIZE</a>];
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a> *<a class="code" href="structlsa__header.html">lsa_header</a>;

  <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a66e3fedede6aa372e5196e55e5e8d5c1">count</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *old, *lsa;
  <span class="keyword">struct </span><a class="code" href="structospf6__network__lsa.html">ospf6_network_lsa</a> *<a class="code" href="structnetwork__lsa.html">network_lsa</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__network__lsdesc.html">ospf6_network_lsdesc</a> *lsdesc;
  <span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *on;
  <span class="keyword">struct </span><a class="code" href="structospf6__link__lsa.html">ospf6_link_lsa</a> *link_lsa;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>;
  u_int16_t <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>;

  oi = (<span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *) <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (thread);
  oi-&gt;<a class="code" href="structospf6__interface.html#a20b398dfcd968dd30e774f725030ca19">thread_network_lsa</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="comment">/* The interface must be enabled until here. A Network-LSA of a</span>
<span class="comment">     disabled interface (but was once enabled) should be flushed</span>
<span class="comment">     by ospf6_lsa_refresh (), and does not come here. */</span>
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>);

  old = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (htons (<a class="code" href="ospf6__lsa_8h.html#a812d6d1be4227ced8bb60b401caeecaa">OSPF6_LSTYPE_NETWORK</a>),
                           htonl (oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a>),
                           oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>, oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a9e658e62c2d59151531bc03b95b600bb">lsdb</a>);

  <span class="comment">/* Do not originate Network-LSA if not DR */</span>
  <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> != <a class="code" href="ospf6__interface_8h.html#ad83f536f4674c165d7f393d28f087843">OSPF6_INTERFACE_DR</a>)
    {
      <span class="keywordflow">if</span> (old)
        <a class="code" href="ospf6__flood_8c.html#a249f2b2808a03c8e9998d6bdf209a962">ospf6_lsa_purge</a> (old);
      <span class="keywordflow">return</span> 0;
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (NETWORK))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Originate Network-LSA for Interface %s&quot;</span>, oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#a98cadce768ec5aacb4c5fc4ca2c3eaa8">name</a>);

  <span class="comment">/* If none of neighbor is adjacent to us */</span>
  count = 0;
  
  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (oi-&gt;<a class="code" href="structospf6__interface.html#ada404f0a64a2f3783445fdf2c2dccf6d">neighbor_list</a>, i, on))
    <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> == <a class="code" href="ospf6__neighbor_8h.html#aae1490b2e9d8ca36df8b2127dcc289c1">OSPF6_NEIGHBOR_FULL</a>)
      count++;
  
  <span class="keywordflow">if</span> (count == 0)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (NETWORK))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Interface stub, ignore&quot;</span>);
      <span class="keywordflow">if</span> (old)
        <a class="code" href="ospf6__flood_8c.html#a249f2b2808a03c8e9998d6bdf209a962">ospf6_lsa_purge</a> (old);
      <span class="keywordflow">return</span> 0;
    }

  <span class="comment">/* prepare buffer */</span>
  memset (buffer, 0, <span class="keyword">sizeof</span> (buffer));
  lsa_header = (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a> *) buffer;
  network_lsa = (<span class="keyword">struct </span><a class="code" href="structospf6__network__lsa.html">ospf6_network_lsa</a> *)
    ((caddr_t) lsa_header + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>));

  <span class="comment">/* Collect the interface&#39;s Link-LSAs to describe</span>
<span class="comment">     network&#39;s optional capabilities */</span>
  type = htons (<a class="code" href="ospf6__lsa_8h.html#ae9921adf750616ded4d14b6aaa64267d">OSPF6_LSTYPE_LINK</a>);
  <span class="keywordflow">for</span> (lsa = <a class="code" href="ospf6__lsdb_8c.html#a7056073f69eb0339fcbe90fed4ba404d">ospf6_lsdb_type_head</a> (type, oi-&gt;<a class="code" href="structospf6__interface.html#ab033cb877fe417705f424d1bd2f411de">lsdb</a>); lsa;
       lsa = <a class="code" href="ospf6__lsdb_8c.html#af61f7812e7125f7ac5f54f2e23c72292">ospf6_lsdb_type_next</a> (type, lsa))
    {
      link_lsa = (<span class="keyword">struct </span><a class="code" href="structospf6__link__lsa.html">ospf6_link_lsa</a> *)
        ((caddr_t) lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a> + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>));
      network_lsa-&gt;<a class="code" href="structospf6__network__lsa.html#af8a0272113cdf7816bba924544af22e0">options</a>[0] |= link_lsa-&gt;<a class="code" href="structospf6__link__lsa.html#a224d1c77e464c8a38acf5c76e8c8814e">options</a>[0];
      network_lsa-&gt;<a class="code" href="structospf6__network__lsa.html#af8a0272113cdf7816bba924544af22e0">options</a>[1] |= link_lsa-&gt;<a class="code" href="structospf6__link__lsa.html#a224d1c77e464c8a38acf5c76e8c8814e">options</a>[1];
      network_lsa-&gt;<a class="code" href="structospf6__network__lsa.html#af8a0272113cdf7816bba924544af22e0">options</a>[2] |= link_lsa-&gt;<a class="code" href="structospf6__link__lsa.html#a224d1c77e464c8a38acf5c76e8c8814e">options</a>[2];
    }

  lsdesc = (<span class="keyword">struct </span><a class="code" href="structospf6__network__lsdesc.html">ospf6_network_lsdesc</a> *)
    ((caddr_t) network_lsa + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__network__lsa.html">ospf6_network_lsa</a>));

  <span class="comment">/* set Link Description to the router itself */</span>
  lsdesc-&gt;<a class="code" href="structospf6__network__lsdesc.html#ae3ef460aec313077ef811d2dd2a77f3b">router_id</a> = oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>;
  lsdesc++;

  <span class="comment">/* Walk through the neighbors */</span>
  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (oi-&gt;<a class="code" href="structospf6__interface.html#ada404f0a64a2f3783445fdf2c2dccf6d">neighbor_list</a>, i, on))
    {
      <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> != <a class="code" href="ospf6__neighbor_8h.html#aae1490b2e9d8ca36df8b2127dcc289c1">OSPF6_NEIGHBOR_FULL</a>)
        <span class="keywordflow">continue</span>;

      <span class="comment">/* set this neighbor&#39;s Router-ID to LSA */</span>
      lsdesc-&gt;<a class="code" href="structospf6__network__lsdesc.html#ae3ef460aec313077ef811d2dd2a77f3b">router_id</a> = on-&gt;<a class="code" href="structospf6__neighbor.html#ac7e3045fcc29c1083d1b638fd64e07e0">router_id</a>;
      lsdesc++;
    }

  <span class="comment">/* Fill LSA Header */</span>
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#aa7582f351501b3642ad32ed3a26f9319">age</a> = 0;
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a> = htons (<a class="code" href="ospf6__lsa_8h.html#a812d6d1be4227ced8bb60b401caeecaa">OSPF6_LSTYPE_NETWORK</a>);
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a> = htonl (oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a>);
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a> = oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>;
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a438027b9b7303569a6bb41b2ee97d734">seqnum</a> =
    <a class="code" href="ospf6__lsdb_8c.html#ad286ac62b7fc40113b536203ecd9499d">ospf6_new_ls_seqnum</a> (lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>,
                         lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a9e658e62c2d59151531bc03b95b600bb">lsdb</a>);
  lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a427863854cd3905598a50ce53167285c">length</a> = htons ((caddr_t) lsdesc - (caddr_t) buffer);

  <span class="comment">/* LSA checksum */</span>
  <a class="code" href="ospf6__lsa_8c.html#a033e364d9b61664964b29893c5070c0d">ospf6_lsa_checksum</a> (lsa_header);

  <span class="comment">/* create LSA */</span>
  lsa = <a class="code" href="ospf6__lsa_8c.html#ab8a6a2c7b84b7e0c48eb7be6a3a0cf9c">ospf6_lsa_create</a> (lsa_header);

  <span class="comment">/* Originate */</span>
  <a class="code" href="ospf6__flood_8c.html#a3d16e7d20ecaf3dad0a2459d16133cf0">ospf6_lsa_originate_area</a> (lsa, oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>);

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aae40057b235626caf9e67debb9df4f93"></a><!-- doxytag: member="ospf6_intra.c::ospf6_network_lsa_show" ref="aae40057b235626caf9e67debb9df4f93" args="(struct vty *vty, struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ospf6_network_lsa_show </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname"><em>vty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l00320">320</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span> *start, *end, *current;
  <span class="keyword">struct </span><a class="code" href="structospf6__network__lsa.html">ospf6_network_lsa</a> *<a class="code" href="structnetwork__lsa.html">network_lsa</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__network__lsdesc.html">ospf6_network_lsdesc</a> *lsdesc;
  <span class="keywordtype">char</span> buf[128], options[32];

  network_lsa = (<span class="keyword">struct </span><a class="code" href="structospf6__network__lsa.html">ospf6_network_lsa</a> *)
    ((caddr_t) lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a> + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>));

  <a class="code" href="ospf6__proto_8c.html#a70fba8cd2453bf33405c98ff2ff14a38">ospf6_options_printbuf</a> (network_lsa-&gt;<a class="code" href="structospf6__network__lsa.html#af8a0272113cdf7816bba924544af22e0">options</a>, options, sizeof (options));
  <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;     Options: %s%s&quot;</span>, options, <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);

  start = (<span class="keywordtype">char</span> *) network_lsa + <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__network__lsa.html">ospf6_network_lsa</a>);
  end = (<span class="keywordtype">char</span> *) lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a> + ntohs (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a427863854cd3905598a50ce53167285c">length</a>);
  <span class="keywordflow">for</span> (current = start; current + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__network__lsdesc.html">ospf6_network_lsdesc</a>) &lt;= end;
       current += <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__network__lsdesc.html">ospf6_network_lsdesc</a>))
    {
      lsdesc = (<span class="keyword">struct </span><a class="code" href="structospf6__network__lsdesc.html">ospf6_network_lsdesc</a> *) current;
      <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;lsdesc-&gt;<a class="code" href="structospf6__network__lsdesc.html#ae3ef460aec313077ef811d2dd2a77f3b">router_id</a>, buf, sizeof (buf));
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;     Attached Router: %s%s&quot;</span>, buf, <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);
    }
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3258bf30e0f12d4fb9012c487713f811"></a><!-- doxytag: member="ospf6_intra.c::ospf6_router_lsa_originate" ref="a3258bf30e0f12d4fb9012c487713f811" args="(struct thread *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf6_router_lsa_originate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l00108">108</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__area.html">ospf6_area</a> *oa;

  <span class="keywordtype">char</span> <a class="code" href="structbuffer.html">buffer</a> [<a class="code" href="ospf6__lsa_8h.html#af4991cd5f3743ff818891605ce515085">OSPF6_MAX_LSASIZE</a>];
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a> *<a class="code" href="structlsa__header.html">lsa_header</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa;

  u_int32_t link_state_id = 0;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *<a class="code" href="spgrid_8c.html#a7113d77fc628f14d4e7d1262969c613e">j</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *oi;
  <span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *on, *<a class="code" href="structospf6__neighbor.html#a71a9a7c78bf284d3b6ccf019d5724bc4">drouter</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__router__lsa.html">ospf6_router_lsa</a> *<a class="code" href="structrouter__lsa.html">router_lsa</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__router__lsdesc.html">ospf6_router_lsdesc</a> *lsdesc;
  u_int16_t <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>;
  u_int32_t router;
  <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a66e3fedede6aa372e5196e55e5e8d5c1">count</a>;

  oa = (<span class="keyword">struct </span><a class="code" href="structospf6__area.html">ospf6_area</a> *) <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (thread);
  oa-&gt;<a class="code" href="structospf6__area.html#aa1906d2a3bdc282eb7417419fd2b9f9d">thread_router_lsa</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (ROUTER))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Originate Router-LSA for Area %s&quot;</span>, oa-&gt;<a class="code" href="structospf6__area.html#a24bd4ccc38c4e10de1b66b2d0cf885cf">name</a>);

  memset (buffer, 0, <span class="keyword">sizeof</span> (buffer));
  lsa_header = (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a> *) buffer;
  router_lsa = (<span class="keyword">struct </span><a class="code" href="structospf6__router__lsa.html">ospf6_router_lsa</a> *)
    ((caddr_t) lsa_header + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>));

  <a class="code" href="ospf6__proto_8h.html#a1b1c4c6d395a87a3b89a4279ebaba01c">OSPF6_OPT_SET</a> (router_lsa-&gt;<a class="code" href="structospf6__router__lsa.html#a00a7c1a291536f0dc1eaf49d82628cb4">options</a>, <a class="code" href="ospf6__proto_8h.html#a37745595268f6f57d52276e4dc05c54a">OSPF6_OPT_V6</a>);
  <a class="code" href="ospf6__proto_8h.html#a1b1c4c6d395a87a3b89a4279ebaba01c">OSPF6_OPT_SET</a> (router_lsa-&gt;<a class="code" href="structospf6__router__lsa.html#a00a7c1a291536f0dc1eaf49d82628cb4">options</a>, <a class="code" href="ospf6__proto_8h.html#af4dc4ae32aacf5b0758f247de720234e">OSPF6_OPT_E</a>);
  <a class="code" href="ospf6__proto_8h.html#acf4e4e7872c09f14386cd78f1dd17ed9">OSPF6_OPT_CLEAR</a> (router_lsa-&gt;<a class="code" href="structospf6__router__lsa.html#a00a7c1a291536f0dc1eaf49d82628cb4">options</a>, <a class="code" href="ospf6__proto_8h.html#a81a6627fcc4659a04fdcdd79df4d5e1d">OSPF6_OPT_MC</a>);
  <a class="code" href="ospf6__proto_8h.html#acf4e4e7872c09f14386cd78f1dd17ed9">OSPF6_OPT_CLEAR</a> (router_lsa-&gt;<a class="code" href="structospf6__router__lsa.html#a00a7c1a291536f0dc1eaf49d82628cb4">options</a>, <a class="code" href="ospf6__proto_8h.html#a40361e5392537156040bda0ff0909de5">OSPF6_OPT_N</a>);
  <a class="code" href="ospf6__proto_8h.html#a1b1c4c6d395a87a3b89a4279ebaba01c">OSPF6_OPT_SET</a> (router_lsa-&gt;<a class="code" href="structospf6__router__lsa.html#a00a7c1a291536f0dc1eaf49d82628cb4">options</a>, <a class="code" href="ospf6__proto_8h.html#a27976221f798859182ee6c7312f6f9ac">OSPF6_OPT_R</a>);
  <a class="code" href="ospf6__proto_8h.html#acf4e4e7872c09f14386cd78f1dd17ed9">OSPF6_OPT_CLEAR</a> (router_lsa-&gt;<a class="code" href="structospf6__router__lsa.html#a00a7c1a291536f0dc1eaf49d82628cb4">options</a>, <a class="code" href="ospf6__proto_8h.html#aed78f5bef7063e16ea1ef0f52df04d5f">OSPF6_OPT_DC</a>);

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__abr_8c.html#a530ee9b1c2aff241200c5cf93a4e7525">ospf6_is_router_abr</a> (<a class="code" href="structospf6.html">ospf6</a>))
    <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (router_lsa-&gt;<a class="code" href="structospf6__router__lsa.html#ac77b4c7895f789666e29143476df4a18">bits</a>, <a class="code" href="ospf6__proto_8h.html#a4508b95dd106578cb85a89f654f07ab9">OSPF6_ROUTER_BIT_B</a>);
  <span class="keywordflow">else</span>
    <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (router_lsa-&gt;<a class="code" href="structospf6__router__lsa.html#ac77b4c7895f789666e29143476df4a18">bits</a>, <a class="code" href="ospf6__proto_8h.html#a4508b95dd106578cb85a89f654f07ab9">OSPF6_ROUTER_BIT_B</a>);
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__asbr_8c.html#a2bf469c9d8fc0b2a9d17279cd7ae0938">ospf6_asbr_is_asbr</a> (<a class="code" href="structospf6.html">ospf6</a>))
    <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (router_lsa-&gt;<a class="code" href="structospf6__router__lsa.html#ac77b4c7895f789666e29143476df4a18">bits</a>, <a class="code" href="ospf6__proto_8h.html#a001990a29c38d5f3b4da6bf596ccc2c5">OSPF6_ROUTER_BIT_E</a>);
  <span class="keywordflow">else</span>
    <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (router_lsa-&gt;<a class="code" href="structospf6__router__lsa.html#ac77b4c7895f789666e29143476df4a18">bits</a>, <a class="code" href="ospf6__proto_8h.html#a001990a29c38d5f3b4da6bf596ccc2c5">OSPF6_ROUTER_BIT_E</a>);
  <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (router_lsa-&gt;<a class="code" href="structospf6__router__lsa.html#ac77b4c7895f789666e29143476df4a18">bits</a>, <a class="code" href="ospf6__proto_8h.html#ae3c0d0e7a7292842807d077cde57269f">OSPF6_ROUTER_BIT_V</a>);
  <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (router_lsa-&gt;<a class="code" href="structospf6__router__lsa.html#ac77b4c7895f789666e29143476df4a18">bits</a>, <a class="code" href="ospf6__proto_8h.html#ac2e2911de2737886a65a378de0050c8a">OSPF6_ROUTER_BIT_W</a>);

  <span class="comment">/* describe links for each interfaces */</span>
  lsdesc = (<span class="keyword">struct </span><a class="code" href="structospf6__router__lsdesc.html">ospf6_router_lsdesc</a> *)
    ((caddr_t) router_lsa + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__router__lsa.html">ospf6_router_lsa</a>));

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (oa-&gt;<a class="code" href="structospf6__area.html#ab06f65e38225287ac3fb4c67cf9dfdcd">if_list</a>, node, nnode, oi))
    {
      <span class="comment">/* Interfaces in state Down or Loopback are not described */</span>
      <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> == <a class="code" href="ospf6__interface_8h.html#a49b579760cabb266eb7331686381fc51">OSPF6_INTERFACE_DOWN</a> ||
          oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> == <a class="code" href="ospf6__interface_8h.html#a96eca89278770c21b63b0a4e14fb64d9">OSPF6_INTERFACE_LOOPBACK</a>)
        <span class="keywordflow">continue</span>;

      <span class="comment">/* Nor are interfaces without any full adjacencies described */</span>
      count = 0;
      <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (oi-&gt;<a class="code" href="structospf6__interface.html#ada404f0a64a2f3783445fdf2c2dccf6d">neighbor_list</a>, j, on))
        <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> == <a class="code" href="ospf6__neighbor_8h.html#aae1490b2e9d8ca36df8b2127dcc289c1">OSPF6_NEIGHBOR_FULL</a>)
          count++;
      
      <span class="keywordflow">if</span> (count == 0)
        <span class="keywordflow">continue</span>;

      <span class="comment">/* Multiple Router-LSA instance according to size limit setting */</span>
      <span class="keywordflow">if</span> ( (oa-&gt;<a class="code" href="structospf6__area.html#a0c5c8703165b9c9e32df65e42d5f16a8">router_lsa_size_limit</a> != 0)
          &amp;&amp; ((caddr_t) lsdesc + sizeof (<span class="keyword">struct</span> <a class="code" href="structospf6__router__lsdesc.html">ospf6_router_lsdesc</a>) -
          <span class="comment">/* XXX warning: comparison between signed and unsigned */</span>
              (caddr_t) buffer &gt; oa-&gt;<a class="code" href="structospf6__area.html#a0c5c8703165b9c9e32df65e42d5f16a8">router_lsa_size_limit</a>))
        {
          <span class="keywordflow">if</span> ((caddr_t) lsdesc == (caddr_t) router_lsa +
                                  <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__router__lsa.html">ospf6_router_lsa</a>))
            {
              <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (ROUTER))
                <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Size limit setting for Router-LSA too short&quot;</span>);
              <span class="keywordflow">return</span> 0;
            }

          <span class="comment">/* Fill LSA Header */</span>
          lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#aa7582f351501b3642ad32ed3a26f9319">age</a> = 0;
          lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a> = htons (<a class="code" href="ospf6__lsa_8h.html#a5d3fd0013f7454017d88a45393c028a2">OSPF6_LSTYPE_ROUTER</a>);
          lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a> = htonl (link_state_id);
          lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a> = oa-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>;
          lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a438027b9b7303569a6bb41b2ee97d734">seqnum</a> =
            <a class="code" href="ospf6__lsdb_8c.html#ad286ac62b7fc40113b536203ecd9499d">ospf6_new_ls_seqnum</a> (lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>,
                                 lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, oa-&gt;<a class="code" href="structospf6__area.html#a9e658e62c2d59151531bc03b95b600bb">lsdb</a>);
          lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a427863854cd3905598a50ce53167285c">length</a> = htons ((caddr_t) lsdesc - (caddr_t) buffer);

          <span class="comment">/* LSA checksum */</span>
          <a class="code" href="ospf6__lsa_8c.html#a033e364d9b61664964b29893c5070c0d">ospf6_lsa_checksum</a> (lsa_header);

          <span class="comment">/* create LSA */</span>
          lsa = <a class="code" href="ospf6__lsa_8c.html#ab8a6a2c7b84b7e0c48eb7be6a3a0cf9c">ospf6_lsa_create</a> (lsa_header);

          <span class="comment">/* Originate */</span>
          <a class="code" href="ospf6__flood_8c.html#a3d16e7d20ecaf3dad0a2459d16133cf0">ospf6_lsa_originate_area</a> (lsa, oa);

          <span class="comment">/* Reset setting for consecutive origination */</span>
          memset ((caddr_t) router_lsa + <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__router__lsa.html">ospf6_router_lsa</a>),
                  0, (caddr_t) lsdesc - (caddr_t) router_lsa);
          lsdesc = (<span class="keyword">struct </span><a class="code" href="structospf6__router__lsdesc.html">ospf6_router_lsdesc</a> *)
            ((caddr_t) router_lsa + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__router__lsa.html">ospf6_router_lsa</a>));
          link_state_id ++;
        }

      <span class="comment">/* Point-to-Point interfaces */</span>
      <span class="keywordflow">if</span> (<a class="code" href="if_8c.html#a61aed2ccc7ec47d6822546664ea77f0c">if_is_pointopoint</a> (oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>))
        {
          <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (oi-&gt;<a class="code" href="structospf6__interface.html#ada404f0a64a2f3783445fdf2c2dccf6d">neighbor_list</a>, j, on))
            {
              <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> != <a class="code" href="ospf6__neighbor_8h.html#aae1490b2e9d8ca36df8b2127dcc289c1">OSPF6_NEIGHBOR_FULL</a>)
                <span class="keywordflow">continue</span>;

              lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a64721919985f3f6bac8acac367a3d869">type</a> = <a class="code" href="ospf6__intra_8h.html#ac36e75d9473b07dba06f452e4b722733">OSPF6_ROUTER_LSDESC_POINTTOPOINT</a>;
              lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a7915c03e263551cfc3e69e99bb9e50d8">metric</a> = htons (oi-&gt;<a class="code" href="structospf6__interface.html#afe7ec302275d6abc2bab9337ceaef164">cost</a>);
              lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a91be14176a7a54c106affd75c32a909e">interface_id</a> = htonl (oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a>);
              lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a553afe230d0dcc07920599641645e4d2">neighbor_interface_id</a> = htonl (on-&gt;<a class="code" href="structospf6__neighbor.html#a730cf0c52d900626513c59975ff6dd0b">ifindex</a>);
              lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a4a117b7aeba8ce1958cde2dbec9c8675">neighbor_router_id</a> = on-&gt;<a class="code" href="structospf6__neighbor.html#ac7e3045fcc29c1083d1b638fd64e07e0">router_id</a>;

              lsdesc++;
            }
        }

      <span class="comment">/* Broadcast and NBMA interfaces */</span>
      <span class="keywordflow">if</span> (<a class="code" href="if_8c.html#a88f3bd141d217db7e4118a78b1db1b60">if_is_broadcast</a> (oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>))
        {
          <span class="comment">/* If this router is not DR,</span>
<span class="comment">             and If this router not fully adjacent with DR,</span>
<span class="comment">             this interface is not transit yet: ignore. */</span>
          <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> != <a class="code" href="ospf6__interface_8h.html#ad83f536f4674c165d7f393d28f087843">OSPF6_INTERFACE_DR</a>)
            {
              drouter = <a class="code" href="ospf6__neighbor_8c.html#a4b081b7bf89453a1d197bd4ccd21fb14">ospf6_neighbor_lookup</a> (oi-&gt;<a class="code" href="structospf6__interface.html#a5e0184b714337299cd1fa5ae9cc87eb0">drouter</a>, oi);
              <span class="keywordflow">if</span> (drouter == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || drouter-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> != <a class="code" href="ospf6__neighbor_8h.html#aae1490b2e9d8ca36df8b2127dcc289c1">OSPF6_NEIGHBOR_FULL</a>)
                <span class="keywordflow">continue</span>;
            }

          lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a64721919985f3f6bac8acac367a3d869">type</a> = <a class="code" href="ospf6__intra_8h.html#a21417eebda6bfc972acb0f09ff08f368">OSPF6_ROUTER_LSDESC_TRANSIT_NETWORK</a>;
          lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a7915c03e263551cfc3e69e99bb9e50d8">metric</a> = htons (oi-&gt;<a class="code" href="structospf6__interface.html#afe7ec302275d6abc2bab9337ceaef164">cost</a>);
          lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a91be14176a7a54c106affd75c32a909e">interface_id</a> = htonl (oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a>);
          <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> != <a class="code" href="ospf6__interface_8h.html#ad83f536f4674c165d7f393d28f087843">OSPF6_INTERFACE_DR</a>)
            {
              lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a553afe230d0dcc07920599641645e4d2">neighbor_interface_id</a> = htonl (drouter-&gt;<a class="code" href="structospf6__neighbor.html#a730cf0c52d900626513c59975ff6dd0b">ifindex</a>);
              lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a4a117b7aeba8ce1958cde2dbec9c8675">neighbor_router_id</a> = drouter-&gt;<a class="code" href="structospf6__neighbor.html#ac7e3045fcc29c1083d1b638fd64e07e0">router_id</a>;
            }
          <span class="keywordflow">else</span>
            {
              lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a553afe230d0dcc07920599641645e4d2">neighbor_interface_id</a> = htonl (oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a>);
              lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a4a117b7aeba8ce1958cde2dbec9c8675">neighbor_router_id</a> = oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>;
            }

          lsdesc++;
        }

      <span class="comment">/* Virtual links */</span>
        <span class="comment">/* xxx */</span>
      <span class="comment">/* Point-to-Multipoint interfaces */</span>
        <span class="comment">/* xxx */</span>
    }

  <span class="keywordflow">if</span> ((caddr_t) lsdesc != (caddr_t) router_lsa +
                          <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__router__lsa.html">ospf6_router_lsa</a>))
    {
      <span class="comment">/* Fill LSA Header */</span>
      lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#aa7582f351501b3642ad32ed3a26f9319">age</a> = 0;
      lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a> = htons (<a class="code" href="ospf6__lsa_8h.html#a5d3fd0013f7454017d88a45393c028a2">OSPF6_LSTYPE_ROUTER</a>);
      lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a> = htonl (link_state_id);
      lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a> = oa-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>;
      lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a438027b9b7303569a6bb41b2ee97d734">seqnum</a> =
        <a class="code" href="ospf6__lsdb_8c.html#ad286ac62b7fc40113b536203ecd9499d">ospf6_new_ls_seqnum</a> (lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>,
                             lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, oa-&gt;<a class="code" href="structospf6__area.html#a9e658e62c2d59151531bc03b95b600bb">lsdb</a>);
      lsa_header-&gt;<a class="code" href="structospf6__lsa__header.html#a427863854cd3905598a50ce53167285c">length</a> = htons ((caddr_t) lsdesc - (caddr_t) buffer);

      <span class="comment">/* LSA checksum */</span>
      <a class="code" href="ospf6__lsa_8c.html#a033e364d9b61664964b29893c5070c0d">ospf6_lsa_checksum</a> (lsa_header);

      <span class="comment">/* create LSA */</span>
      lsa = <a class="code" href="ospf6__lsa_8c.html#ab8a6a2c7b84b7e0c48eb7be6a3a0cf9c">ospf6_lsa_create</a> (lsa_header);

      <span class="comment">/* Originate */</span>
      <a class="code" href="ospf6__flood_8c.html#a3d16e7d20ecaf3dad0a2459d16133cf0">ospf6_lsa_originate_area</a> (lsa, oa);

      link_state_id ++;
    }
  <span class="keywordflow">else</span>
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9739e0b1947dc74bb0219e400b01bd2f">IS_OSPF6_DEBUG_ORIGINATE</a> (ROUTER))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Nothing to describe in Router-LSA, suppress&quot;</span>);
    }

  <span class="comment">/* Do premature-aging of rest, undesired Router-LSAs */</span>
  type = ntohs (<a class="code" href="ospf6__lsa_8h.html#a5d3fd0013f7454017d88a45393c028a2">OSPF6_LSTYPE_ROUTER</a>);
  router = oa-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>;
  <span class="keywordflow">for</span> (lsa = <a class="code" href="ospf6__lsdb_8c.html#a05c536e9366e1e70e302176636494ff2">ospf6_lsdb_type_router_head</a> (type, router, oa-&gt;<a class="code" href="structospf6__area.html#a9e658e62c2d59151531bc03b95b600bb">lsdb</a>); lsa;
       lsa = <a class="code" href="ospf6__lsdb_8c.html#a5c4427dd8608615a5a34a772e722eca6">ospf6_lsdb_type_router_next</a> (type, router, lsa))
    {
      <span class="keywordflow">if</span> (ntohl (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>) &lt; link_state_id)
        <span class="keywordflow">continue</span>;
      <a class="code" href="ospf6__flood_8c.html#a249f2b2808a03c8e9998d6bdf209a962">ospf6_lsa_purge</a> (lsa);
    }

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a97fb04e20252dcc4e6d20c4c21f567c8"></a><!-- doxytag: member="ospf6_intra.c::ospf6_router_lsa_show" ref="a97fb04e20252dcc4e6d20c4c21f567c8" args="(struct vty *vty, struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ospf6_router_lsa_show </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname"><em>vty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l00060">60</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span> *start, *end, *current;
  <span class="keywordtype">char</span> buf[32], <a class="code" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>[32], <a class="code" href="structospf6__router__lsa.html#ac77b4c7895f789666e29143476df4a18">bits</a>[16], <a class="code" href="structospf6__router__lsa.html#a00a7c1a291536f0dc1eaf49d82628cb4">options</a>[32];
  <span class="keyword">struct </span><a class="code" href="structospf6__router__lsa.html">ospf6_router_lsa</a> *<a class="code" href="structrouter__lsa.html">router_lsa</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__router__lsdesc.html">ospf6_router_lsdesc</a> *lsdesc;

  router_lsa = (<span class="keyword">struct </span><a class="code" href="structospf6__router__lsa.html">ospf6_router_lsa</a> *)
    ((<span class="keywordtype">char</span> *) lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a> + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>));

  <a class="code" href="ospf6__proto_8c.html#acfafe064fed258582397cfd39d7d69ba">ospf6_capability_printbuf</a> (router_lsa-&gt;<a class="code" href="structospf6__router__lsa.html#ac77b4c7895f789666e29143476df4a18">bits</a>, bits, sizeof (bits));
  <a class="code" href="ospf6__proto_8c.html#a70fba8cd2453bf33405c98ff2ff14a38">ospf6_options_printbuf</a> (router_lsa-&gt;<a class="code" href="structospf6__router__lsa.html#a00a7c1a291536f0dc1eaf49d82628cb4">options</a>, options, sizeof (options));
  <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;    Bits: %s Options: %s%s&quot;</span>, bits, options, <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);

  start = (<span class="keywordtype">char</span> *) router_lsa + <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__router__lsa.html">ospf6_router_lsa</a>);
  end = (<span class="keywordtype">char</span> *) lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a> + ntohs (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a427863854cd3905598a50ce53167285c">length</a>);
  <span class="keywordflow">for</span> (current = start; current + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__router__lsdesc.html">ospf6_router_lsdesc</a>) &lt;= end;
       current += <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__router__lsdesc.html">ospf6_router_lsdesc</a>))
    {
      lsdesc = (<span class="keyword">struct </span><a class="code" href="structospf6__router__lsdesc.html">ospf6_router_lsdesc</a> *) current;

      <span class="keywordflow">if</span> (lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a64721919985f3f6bac8acac367a3d869">type</a> == <a class="code" href="ospf6__intra_8h.html#ac36e75d9473b07dba06f452e4b722733">OSPF6_ROUTER_LSDESC_POINTTOPOINT</a>)
        <a class="code" href="str_8c.html#ad76145a6edfc98981ded8815a760e0cd">snprintf</a> (name, <span class="keyword">sizeof</span> (name), <span class="stringliteral">&quot;Point-To-Point&quot;</span>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a64721919985f3f6bac8acac367a3d869">type</a> == <a class="code" href="ospf6__intra_8h.html#a21417eebda6bfc972acb0f09ff08f368">OSPF6_ROUTER_LSDESC_TRANSIT_NETWORK</a>)
        <a class="code" href="str_8c.html#ad76145a6edfc98981ded8815a760e0cd">snprintf</a> (name, <span class="keyword">sizeof</span> (name), <span class="stringliteral">&quot;Transit-Network&quot;</span>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a64721919985f3f6bac8acac367a3d869">type</a> == <a class="code" href="ospf6__intra_8h.html#ad0e6a20d10f98adbc06b324fb569a29b">OSPF6_ROUTER_LSDESC_STUB_NETWORK</a>)
        <a class="code" href="str_8c.html#ad76145a6edfc98981ded8815a760e0cd">snprintf</a> (name, <span class="keyword">sizeof</span> (name), <span class="stringliteral">&quot;Stub-Network&quot;</span>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a64721919985f3f6bac8acac367a3d869">type</a> == <a class="code" href="ospf6__intra_8h.html#ad98cad52f26e2982d739e2ca30084fb2">OSPF6_ROUTER_LSDESC_VIRTUAL_LINK</a>)
        <a class="code" href="str_8c.html#ad76145a6edfc98981ded8815a760e0cd">snprintf</a> (name, <span class="keyword">sizeof</span> (name), <span class="stringliteral">&quot;Virtual-Link&quot;</span>);
      <span class="keywordflow">else</span>
        <a class="code" href="str_8c.html#ad76145a6edfc98981ded8815a760e0cd">snprintf</a> (name, <span class="keyword">sizeof</span> (name), <span class="stringliteral">&quot;Unknown (%#x)&quot;</span>, lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a64721919985f3f6bac8acac367a3d869">type</a>);

      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;    Type: %s Metric: %d%s&quot;</span>,
               name, ntohs (lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a7915c03e263551cfc3e69e99bb9e50d8">metric</a>), <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;    Interface ID: %s%s&quot;</span>,
               <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a91be14176a7a54c106affd75c32a909e">interface_id</a>,
                          buf, sizeof (buf)), <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;    Neighbor Interface ID: %s%s&quot;</span>,
               <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a553afe230d0dcc07920599641645e4d2">neighbor_interface_id</a>,
                          buf, sizeof (buf)), <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;    Neighbor Router ID: %s%s&quot;</span>,
               <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;lsdesc-&gt;<a class="code" href="structospf6__router__lsdesc.html#a4a117b7aeba8ce1958cde2dbec9c8675">neighbor_router_id</a>,
                          buf, sizeof (buf)), <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);
    }
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ab2126ee3a03c2f836488166e640d2a72"></a><!-- doxytag: member="ospf6_intra.c::conf_debug_ospf6_brouter" ref="ab2126ee3a03c2f836488166e640d2a72" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char <a class="el" href="ospf6__intra_8h.html#ab2126ee3a03c2f836488166e640d2a72">conf_debug_ospf6_brouter</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l00051">51</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0e18cc0994381836e2816541cf9b2d18"></a><!-- doxytag: member="ospf6_intra.c::conf_debug_ospf6_brouter_specific_area_id" ref="a0e18cc0994381836e2816541cf9b2d18" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u_int32_t <a class="el" href="ospf6__intra_8h.html#a0e18cc0994381836e2816541cf9b2d18">conf_debug_ospf6_brouter_specific_area_id</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l00053">53</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>

</div>
</div>
<a class="anchor" id="a89f928cc55574e8794acd5feb2995bb2"></a><!-- doxytag: member="ospf6_intra.c::conf_debug_ospf6_brouter_specific_router_id" ref="a89f928cc55574e8794acd5feb2995bb2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u_int32_t <a class="el" href="ospf6__intra_8h.html#a89f928cc55574e8794acd5feb2995bb2">conf_debug_ospf6_brouter_specific_router_id</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l00052">52</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7cbbc0bcfe9e99a141e18aa4f55624e1"></a><!-- doxytag: member="ospf6_intra.c::intra_prefix_handler" ref="a7cbbc0bcfe9e99a141e18aa4f55624e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf6__lsa__handler.html">ospf6_lsa_handler</a> <a class="el" href="ospf6__intra_8c.html#a7cbbc0bcfe9e99a141e18aa4f55624e1">intra_prefix_handler</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
  <a class="code" href="ospf6__lsa_8h.html#a3966973bf5d4ff4ed7478036a608deff">OSPF6_LSTYPE_INTRA_PREFIX</a>,
  <span class="stringliteral">&quot;Intra-Prefix&quot;</span>,
  <a class="code" href="ospf6__intra_8c.html#a24832378793232623a288041fda4e75a">ospf6_intra_prefix_lsa_show</a>
}
</pre></div>
<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01437">1437</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8e394bf3b0f07de77c13a2b0de1aee25"></a><!-- doxytag: member="ospf6_intra.c::link_handler" ref="a8e394bf3b0f07de77c13a2b0de1aee25" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf6__lsa__handler.html">ospf6_lsa_handler</a> <a class="el" href="ospf6__intra_8c.html#a8e394bf3b0f07de77c13a2b0de1aee25">link_handler</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
  <a class="code" href="ospf6__lsa_8h.html#ae9921adf750616ded4d14b6aaa64267d">OSPF6_LSTYPE_LINK</a>,
  <span class="stringliteral">&quot;Link&quot;</span>,
  <a class="code" href="ospf6__intra_8c.html#a54e9876b95f6bfcb7b132a843263bb67">ospf6_link_lsa_show</a>
}
</pre></div>
<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01430">1430</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>

</div>
</div>
<a class="anchor" id="af9acd642554698eb01f79c122d9c4e85"></a><!-- doxytag: member="ospf6_intra.c::network_handler" ref="af9acd642554698eb01f79c122d9c4e85" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf6__lsa__handler.html">ospf6_lsa_handler</a> <a class="el" href="ospf6__intra_8c.html#af9acd642554698eb01f79c122d9c4e85">network_handler</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
  <a class="code" href="ospf6__lsa_8h.html#a812d6d1be4227ced8bb60b401caeecaa">OSPF6_LSTYPE_NETWORK</a>,
  <span class="stringliteral">&quot;Network&quot;</span>,
  <a class="code" href="ospf6__intra_8c.html#aae40057b235626caf9e67debb9df4f93">ospf6_network_lsa_show</a>
}
</pre></div>
<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01423">1423</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>

</div>
</div>
<a class="anchor" id="a29fef2201eec7d2175fd081c5619574e"></a><!-- doxytag: member="ospf6_intra.c::router_handler" ref="a29fef2201eec7d2175fd081c5619574e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf6__lsa__handler.html">ospf6_lsa_handler</a> <a class="el" href="ospf6__intra_8c.html#a29fef2201eec7d2175fd081c5619574e">router_handler</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
  <a class="code" href="ospf6__lsa_8h.html#a5d3fd0013f7454017d88a45393c028a2">OSPF6_LSTYPE_ROUTER</a>,
  <span class="stringliteral">&quot;Router&quot;</span>,
  <a class="code" href="ospf6__intra_8c.html#a97fb04e20252dcc4e6d20c4c21f567c8">ospf6_router_lsa_show</a>
}
</pre></div>
<p>Definition at line <a class="el" href="ospf6__intra_8c_source.html#l01416">1416</a> of file <a class="el" href="ospf6__intra_8c_source.html">ospf6_intra.c</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="ospf6__intra_8c.html">ospf6_intra.c</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:26 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
