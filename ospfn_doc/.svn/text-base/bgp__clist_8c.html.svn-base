<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: bgpd/bgp_clist.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('bgp__clist_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">bgpd/bgp_clist.c File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="zebra_8h_source.html">zebra.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="command_8h_source.html">command.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="prefix_8h_source.html">prefix.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="memory_8h_source.html">memory.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="bgpd_8h_source.html">bgpd/bgpd.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="bgp__community_8h_source.html">bgpd/bgp_community.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="bgp__ecommunity_8h_source.html">bgpd/bgp_ecommunity.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="bgp__aspath_8h_source.html">bgpd/bgp_aspath.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="bgp__regex_8h_source.html">bgpd/bgp_regex.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="bgp__clist_8h_source.html">bgpd/bgp_clist.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for bgp_clist.c:</div>
<div class="dyncontent">
<div class="center"><img src="bgp__clist_8c__incl.png" border="0" usemap="#bgpd_2bgp__clist_8c" alt=""/></div>
<map name="bgpd_2bgp__clist_8c" id="bgpd_2bgp__clist_8c">
<area shape="rect" id="node3" href="zebra_8h.html" title="zebra.h" alt="" coords="1415,155,1481,181"/><area shape="rect" id="node61" href="command_8h.html" title="command.h" alt="" coords="138,80,229,107"/><area shape="rect" id="node74" href="prefix_8h.html" title="prefix.h" alt="" coords="509,80,576,107"/><area shape="rect" id="node78" href="memory_8h.html" title="memory.h" alt="" coords="725,80,808,107"/><area shape="rect" id="node82" href="bgpd_8h.html" title="bgpd/bgpd.h" alt="" coords="601,80,700,107"/><area shape="rect" id="node85" href="bgp__community_8h.html" title="bgpd/bgp_community.h" alt="" coords="883,80,1048,107"/><area shape="rect" id="node87" href="bgp__ecommunity_8h.html" title="bgpd/bgp_ecommunity.h" alt="" coords="1072,80,1245,107"/><area shape="rect" id="node89" href="bgp__aspath_8h.html" title="bgpd/bgp_aspath.h" alt="" coords="1270,80,1409,107"/><area shape="rect" id="node91" href="bgp__regex_8h.html" title="bgpd/bgp_regex.h" alt="" coords="1434,80,1568,107"/><area shape="rect" id="node96" href="bgp__clist_8h.html" title="bgpd/bgp_clist.h" alt="" coords="1593,80,1716,107"/><area shape="rect" id="node57" href="zassert_8h.html" title="zassert.h" alt="" coords="2613,229,2691,256"/><area shape="rect" id="node59" href="str_8h.html" title="str.h" alt="" coords="2715,229,2764,256"/><area shape="rect" id="node63" href="vector_8h.html" title="vector.h" alt="" coords="5,155,77,181"/><area shape="rect" id="node65" href="vty_8h.html" title="vty.h" alt="" coords="102,155,153,181"/><area shape="rect" id="node72" href="route__types_8h.html" title="lib/route_types.h" alt="" coords="178,155,301,181"/><area shape="rect" id="node67" href="thread_8h.html" title="thread.h" alt="" coords="5,229,77,256"/><area shape="rect" id="node69" href="log_8h.html" title="log.h" alt="" coords="102,229,153,256"/><area shape="rect" id="node76" href="sockunion_8h.html" title="sockunion.h" alt="" coords="544,155,637,181"/><area shape="rect" id="node80" href="memtypes_8h.html" title="lib/memtypes.h" alt="" coords="709,155,824,181"/><area shape="rect" id="node94" href="regex-gnu_8h.html" title="regex&#45;gnu.h" alt="" coords="1505,155,1601,181"/></map>
</div>
</div>
<p><a href="bgp__clist_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcommunity__list__master.html">community_list_master</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#ac34a39d4f70160eefe2b8a6d1eafc14b">community_list_master_lookup</a> (struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *ch, int <a class="el" href="test__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structcommunity__entry.html">community_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#ac513f5310a71c1f1f0db3c3f1c66e971">community_entry_new</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#a23e2dd7832bc852822f71b60d13ecd5a">community_entry_free</a> (struct <a class="el" href="structcommunity__entry.html">community_entry</a> *entry)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structcommunity__list.html">community_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#a45379ff1a9832b296dcc5ba6f3b89bc6">community_list_new</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#ac554442b85ad396162540dbafe3d119f">community_list_free</a> (struct <a class="el" href="structcommunity__list.html">community_list</a> *<a class="el" href="structlist.html">list</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structcommunity__list.html">community_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#a2a861b07ef1b751c0a3573152a1b9480">community_list_insert</a> (struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *ch, const char *<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int <a class="el" href="test__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcommunity__list.html">community_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#a2c0159e743b11dc2143b7f74a65ce156">community_list_lookup</a> (struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *ch, const char *<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int <a class="el" href="test__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structcommunity__list.html">community_list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#ae8ef42ae0ddf78bf86a81770db967dd6">community_list_get</a> (struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *ch, const char *<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, int <a class="el" href="test__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#ad36feb2a463e74477a78339f7e2ccbbd">community_list_delete</a> (struct <a class="el" href="structcommunity__list.html">community_list</a> *<a class="el" href="structlist.html">list</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#a2759973601d972b4066dc91885bfa1b3">community_list_empty_p</a> (struct <a class="el" href="structcommunity__list.html">community_list</a> *<a class="el" href="structlist.html">list</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#a5f3ead7af5477c0fa54f9e4c3dc93e0e">community_list_entry_add</a> (struct <a class="el" href="structcommunity__list.html">community_list</a> *<a class="el" href="structlist.html">list</a>, struct <a class="el" href="structcommunity__entry.html">community_entry</a> *entry)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#adca712eca7bfce2a656f806864abf459">community_list_entry_delete</a> (struct <a class="el" href="structcommunity__list.html">community_list</a> *<a class="el" href="structlist.html">list</a>, struct <a class="el" href="structcommunity__entry.html">community_entry</a> *entry, int style)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structcommunity__entry.html">community_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#a98f4cc5fad1b590d42e1218962381245">community_list_entry_lookup</a> (struct <a class="el" href="structcommunity__list.html">community_list</a> *<a class="el" href="structlist.html">list</a>, const void *arg, int direct)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#a9c7340bb7ef1127e6da1313f22b8f6eb">community_regexp_match</a> (struct <a class="el" href="structcommunity.html">community</a> *com, <a class="el" href="regex-gnu_8h.html#a159f97bcead74ee31a0817571f7625a9">regex_t</a> *reg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#a6eead86ba88249766ba266fab353509a">ecommunity_regexp_match</a> (struct <a class="el" href="structecommunity.html">ecommunity</a> *ecom, <a class="el" href="regex-gnu_8h.html#a159f97bcead74ee31a0817571f7625a9">regex_t</a> *reg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structcommunity.html">community</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#af903a31e11b5cc5c2c372e67f41c4897">community_regexp_delete</a> (struct <a class="el" href="structcommunity.html">community</a> *com, <a class="el" href="regex-gnu_8h.html#a159f97bcead74ee31a0817571f7625a9">regex_t</a> *reg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#a12f4fa6dfed00f5e25a73b79368151fd">community_list_match</a> (struct <a class="el" href="structcommunity.html">community</a> *com, struct <a class="el" href="structcommunity__list.html">community_list</a> *<a class="el" href="structlist.html">list</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#a98125eca200d5e9e26b9f87df48e37ed">ecommunity_list_match</a> (struct <a class="el" href="structecommunity.html">ecommunity</a> *ecom, struct <a class="el" href="structcommunity__list.html">community_list</a> *<a class="el" href="structlist.html">list</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#a9c54ba0c7f95697b7a6ce9e0eafa6db3">community_list_exact_match</a> (struct <a class="el" href="structcommunity.html">community</a> *com, struct <a class="el" href="structcommunity__list.html">community_list</a> *<a class="el" href="structlist.html">list</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#aaa3ebe16a5e105a177be4f76d40fcc69">community_list_match_delete</a> (struct <a class="el" href="structcommunity.html">community</a> *com, struct <a class="el" href="structcommunity__list.html">community_list</a> *<a class="el" href="structlist.html">list</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#a67e3a353cea67dd13e2b046bc7c2b5e0">community_list_dup_check</a> (struct <a class="el" href="structcommunity__list.html">community_list</a> *<a class="el" href="structlist.html">list</a>, struct <a class="el" href="structcommunity__entry.html">community_entry</a> *new)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#aa888d54db9ff0fd7dfb0185fa4fb45de">community_list_set</a> (struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *ch, const char *<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, const char *<a class="el" href="ripng__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, int direct, int style)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#aa6dca468a007ec6ee7c24fd359155595">community_list_unset</a> (struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *ch, const char *<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, const char *<a class="el" href="ripng__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, int direct, int style)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#a3e2c46712b2558156c5074b345e3fc06">extcommunity_list_set</a> (struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *ch, const char *<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, const char *<a class="el" href="ripng__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, int direct, int style)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#add548f65d1e8eadceeb2d6d26170a85c">extcommunity_list_unset</a> (struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *ch, const char *<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, const char *<a class="el" href="ripng__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, int direct, int style)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#a3074741d6eaa97bdbc1d29e6ec9d18be">community_list_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__clist_8c.html#ab24390d21ce1474ea0dc89ad36603203">community_list_terminate</a> (struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *ch)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a23e2dd7832bc852822f71b60d13ecd5a"></a><!-- doxytag: member="bgp_clist.c::community_entry_free" ref="a23e2dd7832bc852822f71b60d13ecd5a" args="(struct community_entry *entry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void community_entry_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity__entry.html">community_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00059">59</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">switch</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a>)
    {
    <span class="keywordflow">case</span> <a class="code" href="bgp__clist_8h.html#aac9f88f9f0367759b07f7bf9f5ee1f0e">COMMUNITY_LIST_STANDARD</a>:
      <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a417e7d3e1bb8d3bfb620e3d4d79e1e16">com</a>)
        <a class="code" href="bgp__community_8c.html#a890bdfd2f7517c0fe7f30687d1d4d825">community_free</a> (entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a417e7d3e1bb8d3bfb620e3d4d79e1e16">com</a>);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="bgp__clist_8h.html#a999fc8046f6d46557f06e6dc5eafb3a9">EXTCOMMUNITY_LIST_STANDARD</a>:
      <span class="comment">/* In case of standard extcommunity-list, configuration string</span>
<span class="comment">         is made by ecommunity_ecom2str().  */</span>
      <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#aa623f2755d49e17820332661599c1165">config</a>)
        <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba88ab42bbd8fb0ec06228f8baf67a3bd6">MTYPE_ECOMMUNITY_STR</a>, entry-&gt;<a class="code" href="structcommunity__entry.html#aa623f2755d49e17820332661599c1165">config</a>);
      <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a6738f5df4deb7c87ff42f90596910063">ecom</a>)
        <a class="code" href="bgp__ecommunity_8c.html#a56f7dda58051cbec7fd56238196dcfc2">ecommunity_free</a> (entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a6738f5df4deb7c87ff42f90596910063">ecom</a>);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="bgp__clist_8h.html#ae00204887ca7891261192c1f0c2ef1b2">COMMUNITY_LIST_EXPANDED</a>:
    <span class="keywordflow">case</span> <a class="code" href="bgp__clist_8h.html#a75f83c5ed3ca755db0e6003fb775af13">EXTCOMMUNITY_LIST_EXPANDED</a>:
      <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#aa623f2755d49e17820332661599c1165">config</a>)
        <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba31dfe1598365f32cd2080388b2db7a87">MTYPE_COMMUNITY_LIST_CONFIG</a>, entry-&gt;<a class="code" href="structcommunity__entry.html#aa623f2755d49e17820332661599c1165">config</a>);
      <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#a817ea26d814de0aea503fd6d70857664">reg</a>)
        <a class="code" href="bgp__regex_8c.html#a9a7260053c61ff8c6f58e5822d136b88">bgp_regex_free</a> (entry-&gt;<a class="code" href="structcommunity__entry.html#a817ea26d814de0aea503fd6d70857664">reg</a>);
    <span class="keywordflow">default</span>:
      <span class="keywordflow">break</span>;
    }
  <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba39e09af40ae71fe2d910e8c87c20a310">MTYPE_COMMUNITY_LIST_ENTRY</a>, entry);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac513f5310a71c1f1f0db3c3f1c66e971"></a><!-- doxytag: member="bgp_clist.c::community_entry_new" ref="ac513f5310a71c1f1f0db3c3f1c66e971" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structcommunity__entry.html">community_entry</a>* community_entry_new </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00052">52</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="memory_8h.html#a7826e4ed1d152cad0666dcf43f11f663">XCALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba39e09af40ae71fe2d910e8c87c20a310">MTYPE_COMMUNITY_LIST_ENTRY</a>, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structcommunity__entry.html">community_entry</a>));
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad36feb2a463e74477a78339f7e2ccbbd"></a><!-- doxytag: member="bgp_clist.c::community_list_delete" ref="ad36feb2a463e74477a78339f7e2ccbbd" args="(struct community_list *list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void community_list_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list.html">community_list</a> *&#160;</td>
          <td class="paramname"><em>list</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00234">234</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity__list__list.html">community_list_list</a> *clist;
  <span class="keyword">struct </span><a class="code" href="structcommunity__entry.html">community_entry</a> *entry, *<a class="code" href="structcommunity__entry.html#adf300c2a3193d684911ae005be92218c">next</a>;

  <span class="keywordflow">for</span> (entry = list-&gt;<a class="code" href="structcommunity__list.html#ae100c28bcf1983e18f4a6f1b0a7186aa">head</a>; entry; entry = next)
    {
      next = entry-&gt;<a class="code" href="structcommunity__entry.html#adf300c2a3193d684911ae005be92218c">next</a>;
      <a class="code" href="bgp__clist_8c.html#a23e2dd7832bc852822f71b60d13ecd5a">community_entry_free</a> (entry);
    }

  clist = list-&gt;<a class="code" href="structcommunity__list.html#afb76f93b555f8f24b6fee2b12ae33890">parent</a>;

  <span class="keywordflow">if</span> (list-&gt;<a class="code" href="structcommunity__list.html#a1b96c87153fe22c6cf7feea6da7d88e0">next</a>)
    list-&gt;<a class="code" href="structcommunity__list.html#a1b96c87153fe22c6cf7feea6da7d88e0">next</a>-&gt;<a class="code" href="structcommunity__list.html#aa55578094e20a943ad5000b24730d533">prev</a> = list-&gt;<a class="code" href="structcommunity__list.html#aa55578094e20a943ad5000b24730d533">prev</a>;
  <span class="keywordflow">else</span>
    clist-&gt;<a class="code" href="structcommunity__list__list.html#a98864d7717529e82e316923e3d558b12">tail</a> = list-&gt;<a class="code" href="structcommunity__list.html#aa55578094e20a943ad5000b24730d533">prev</a>;

  <span class="keywordflow">if</span> (list-&gt;<a class="code" href="structcommunity__list.html#aa55578094e20a943ad5000b24730d533">prev</a>)
    list-&gt;<a class="code" href="structcommunity__list.html#aa55578094e20a943ad5000b24730d533">prev</a>-&gt;<a class="code" href="structcommunity__list.html#a1b96c87153fe22c6cf7feea6da7d88e0">next</a> = list-&gt;<a class="code" href="structcommunity__list.html#a1b96c87153fe22c6cf7feea6da7d88e0">next</a>;
  <span class="keywordflow">else</span>
    clist-&gt;<a class="code" href="structcommunity__list__list.html#a0d4c7921addc2ef057d88822410eb649">head</a> = list-&gt;<a class="code" href="structcommunity__list.html#a1b96c87153fe22c6cf7feea6da7d88e0">next</a>;

  <a class="code" href="bgp__clist_8c.html#ac554442b85ad396162540dbafe3d119f">community_list_free</a> (list);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a67e3a353cea67dd13e2b046bc7c2b5e0"></a><!-- doxytag: member="bgp_clist.c::community_list_dup_check" ref="a67e3a353cea67dd13e2b046bc7c2b5e0" args="(struct community_list *list, struct community_entry *new)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int community_list_dup_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list.html">community_list</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcommunity__entry.html">community_entry</a> *&#160;</td>
          <td class="paramname"><em>new</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00553">553</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity__entry.html">community_entry</a> *entry;

  <span class="keywordflow">for</span> (entry = list-&gt;<a class="code" href="structcommunity__list.html#ae100c28bcf1983e18f4a6f1b0a7186aa">head</a>; entry; entry = entry-&gt;<a class="code" href="structcommunity__entry.html#adf300c2a3193d684911ae005be92218c">next</a>)
    {
      <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a> != new-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a>)
        <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a> != new-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a>)
        <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#ad46635f1fd412d4cd77fea982b955081">any</a> != new-&gt;<a class="code" href="structcommunity__entry.html#ad46635f1fd412d4cd77fea982b955081">any</a>)
        <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#ad46635f1fd412d4cd77fea982b955081">any</a>)
        <span class="keywordflow">return</span> 1;

      <span class="keywordflow">switch</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a>)
        {
        <span class="keywordflow">case</span> <a class="code" href="bgp__clist_8h.html#aac9f88f9f0367759b07f7bf9f5ee1f0e">COMMUNITY_LIST_STANDARD</a>:
          <span class="keywordflow">if</span> (<a class="code" href="bgp__community_8c.html#ab78dd69e6f3b202f3ab726654ea54193">community_cmp</a> (entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a417e7d3e1bb8d3bfb620e3d4d79e1e16">com</a>, new-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a417e7d3e1bb8d3bfb620e3d4d79e1e16">com</a>))
            <span class="keywordflow">return</span> 1;
          <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="bgp__clist_8h.html#a999fc8046f6d46557f06e6dc5eafb3a9">EXTCOMMUNITY_LIST_STANDARD</a>:
          <span class="keywordflow">if</span> (<a class="code" href="bgp__ecommunity_8c.html#aedf7f522590389592309042fdbae6fef">ecommunity_cmp</a> (entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a6738f5df4deb7c87ff42f90596910063">ecom</a>, new-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a6738f5df4deb7c87ff42f90596910063">ecom</a>))
            <span class="keywordflow">return</span> 1;
          <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="bgp__clist_8h.html#ae00204887ca7891261192c1f0c2ef1b2">COMMUNITY_LIST_EXPANDED</a>:
        <span class="keywordflow">case</span> <a class="code" href="bgp__clist_8h.html#a75f83c5ed3ca755db0e6003fb775af13">EXTCOMMUNITY_LIST_EXPANDED</a>:
          <span class="keywordflow">if</span> (strcmp (entry-&gt;<a class="code" href="structcommunity__entry.html#aa623f2755d49e17820332661599c1165">config</a>, new-&gt;<a class="code" href="structcommunity__entry.html#aa623f2755d49e17820332661599c1165">config</a>) == 0)
            <span class="keywordflow">return</span> 1;
          <span class="keywordflow">break</span>;
        <span class="keywordflow">default</span>:
          <span class="keywordflow">break</span>;
        }
    }
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2759973601d972b4066dc91885bfa1b3"></a><!-- doxytag: member="bgp_clist.c::community_list_empty_p" ref="a2759973601d972b4066dc91885bfa1b3" args="(struct community_list *list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int community_list_empty_p </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list.html">community_list</a> *&#160;</td>
          <td class="paramname"><em>list</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00261">261</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> (list-&gt;<a class="code" href="structcommunity__list.html#ae100c28bcf1983e18f4a6f1b0a7186aa">head</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; list-&gt;<a class="code" href="structcommunity__list.html#ac478209abefa8c26d6014a7f8b2535a1">tail</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ? 1 : 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5f3ead7af5477c0fa54f9e4c3dc93e0e"></a><!-- doxytag: member="bgp_clist.c::community_list_entry_add" ref="a5f3ead7af5477c0fa54f9e4c3dc93e0e" args="(struct community_list *list, struct community_entry *entry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void community_list_entry_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list.html">community_list</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcommunity__entry.html">community_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00268">268</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  entry-&gt;<a class="code" href="structcommunity__entry.html#adf300c2a3193d684911ae005be92218c">next</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  entry-&gt;<a class="code" href="structcommunity__entry.html#a130945767df08a3f3ae21edb5bc741df">prev</a> = list-&gt;<a class="code" href="structcommunity__list.html#ac478209abefa8c26d6014a7f8b2535a1">tail</a>;

  <span class="keywordflow">if</span> (list-&gt;<a class="code" href="structcommunity__list.html#ac478209abefa8c26d6014a7f8b2535a1">tail</a>)
    list-&gt;<a class="code" href="structcommunity__list.html#ac478209abefa8c26d6014a7f8b2535a1">tail</a>-&gt;<a class="code" href="structcommunity__entry.html#adf300c2a3193d684911ae005be92218c">next</a> = entry;
  <span class="keywordflow">else</span>
    list-&gt;<a class="code" href="structcommunity__list.html#ae100c28bcf1983e18f4a6f1b0a7186aa">head</a> = entry;
  list-&gt;<a class="code" href="structcommunity__list.html#ac478209abefa8c26d6014a7f8b2535a1">tail</a> = entry;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adca712eca7bfce2a656f806864abf459"></a><!-- doxytag: member="bgp_clist.c::community_list_entry_delete" ref="adca712eca7bfce2a656f806864abf459" args="(struct community_list *list, struct community_entry *entry, int style)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void community_list_entry_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list.html">community_list</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcommunity__entry.html">community_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>style</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00283">283</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#adf300c2a3193d684911ae005be92218c">next</a>)
    entry-&gt;<a class="code" href="structcommunity__entry.html#adf300c2a3193d684911ae005be92218c">next</a>-&gt;<a class="code" href="structcommunity__entry.html#a130945767df08a3f3ae21edb5bc741df">prev</a> = entry-&gt;<a class="code" href="structcommunity__entry.html#a130945767df08a3f3ae21edb5bc741df">prev</a>;
  <span class="keywordflow">else</span>
    list-&gt;<a class="code" href="structcommunity__list.html#ac478209abefa8c26d6014a7f8b2535a1">tail</a> = entry-&gt;<a class="code" href="structcommunity__entry.html#a130945767df08a3f3ae21edb5bc741df">prev</a>;

  <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#a130945767df08a3f3ae21edb5bc741df">prev</a>)
    entry-&gt;<a class="code" href="structcommunity__entry.html#a130945767df08a3f3ae21edb5bc741df">prev</a>-&gt;<a class="code" href="structcommunity__entry.html#adf300c2a3193d684911ae005be92218c">next</a> = entry-&gt;<a class="code" href="structcommunity__entry.html#adf300c2a3193d684911ae005be92218c">next</a>;
  <span class="keywordflow">else</span>
    list-&gt;<a class="code" href="structcommunity__list.html#ae100c28bcf1983e18f4a6f1b0a7186aa">head</a> = entry-&gt;<a class="code" href="structcommunity__entry.html#adf300c2a3193d684911ae005be92218c">next</a>;

  <a class="code" href="bgp__clist_8c.html#a23e2dd7832bc852822f71b60d13ecd5a">community_entry_free</a> (entry);

  <span class="keywordflow">if</span> (<a class="code" href="bgp__clist_8c.html#a2759973601d972b4066dc91885bfa1b3">community_list_empty_p</a> (list))
    <a class="code" href="bgp__clist_8c.html#ad36feb2a463e74477a78339f7e2ccbbd">community_list_delete</a> (list);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a98f4cc5fad1b590d42e1218962381245"></a><!-- doxytag: member="bgp_clist.c::community_list_entry_lookup" ref="a98f4cc5fad1b590d42e1218962381245" args="(struct community_list *list, const void *arg, int direct)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structcommunity__entry.html">community_entry</a>* community_list_entry_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list.html">community_list</a> *&#160;</td>
          <td class="paramname"><em>list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direct</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00304">304</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity__entry.html">community_entry</a> *entry;

  <span class="keywordflow">for</span> (entry = list-&gt;<a class="code" href="structcommunity__list.html#ae100c28bcf1983e18f4a6f1b0a7186aa">head</a>; entry; entry = entry-&gt;<a class="code" href="structcommunity__entry.html#adf300c2a3193d684911ae005be92218c">next</a>)
    {
      <span class="keywordflow">switch</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a>)
        {
        <span class="keywordflow">case</span> <a class="code" href="bgp__clist_8h.html#aac9f88f9f0367759b07f7bf9f5ee1f0e">COMMUNITY_LIST_STANDARD</a>:
          <span class="keywordflow">if</span> (<a class="code" href="bgp__community_8c.html#ab78dd69e6f3b202f3ab726654ea54193">community_cmp</a> (entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a417e7d3e1bb8d3bfb620e3d4d79e1e16">com</a>, arg))
            <span class="keywordflow">return</span> entry;
          <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="bgp__clist_8h.html#a999fc8046f6d46557f06e6dc5eafb3a9">EXTCOMMUNITY_LIST_STANDARD</a>:
          <span class="keywordflow">if</span> (<a class="code" href="bgp__ecommunity_8c.html#aedf7f522590389592309042fdbae6fef">ecommunity_cmp</a> (entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a6738f5df4deb7c87ff42f90596910063">ecom</a>, arg))
            <span class="keywordflow">return</span> entry;
          <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="bgp__clist_8h.html#ae00204887ca7891261192c1f0c2ef1b2">COMMUNITY_LIST_EXPANDED</a>:
        <span class="keywordflow">case</span> <a class="code" href="bgp__clist_8h.html#a75f83c5ed3ca755db0e6003fb775af13">EXTCOMMUNITY_LIST_EXPANDED</a>:
          <span class="keywordflow">if</span> (strcmp (entry-&gt;<a class="code" href="structcommunity__entry.html#aa623f2755d49e17820332661599c1165">config</a>, arg) == 0)
            <span class="keywordflow">return</span> entry;
          <span class="keywordflow">break</span>;
        <span class="keywordflow">default</span>:
          <span class="keywordflow">break</span>;
        }
    }
  <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9c54ba0c7f95697b7a6ce9e0eafa6db3"></a><!-- doxytag: member="bgp_clist.c::community_list_exact_match" ref="a9c54ba0c7f95697b7a6ce9e0eafa6db3" args="(struct community *com, struct community_list *list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int community_list_exact_match </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname"><em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list.html">community_list</a> *&#160;</td>
          <td class="paramname"><em>list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00479">479</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity__entry.html">community_entry</a> *entry;

  <span class="keywordflow">for</span> (entry = list-&gt;<a class="code" href="structcommunity__list.html#ae100c28bcf1983e18f4a6f1b0a7186aa">head</a>; entry; entry = entry-&gt;<a class="code" href="structcommunity__entry.html#adf300c2a3193d684911ae005be92218c">next</a>)
    {
      <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#ad46635f1fd412d4cd77fea982b955081">any</a>)
        <span class="keywordflow">return</span> entry-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a> == <a class="code" href="bgp__clist_8h.html#ae6df4a7e348bcadcc65fdc56cbd9f418">COMMUNITY_PERMIT</a> ? 1 : 0;

      <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a> == <a class="code" href="bgp__clist_8h.html#aac9f88f9f0367759b07f7bf9f5ee1f0e">COMMUNITY_LIST_STANDARD</a>)
        {
          <span class="keywordflow">if</span> (<a class="code" href="bgp__community_8c.html#a0191e40f098590ab68b99a24c2a2e931">community_include</a> (entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a417e7d3e1bb8d3bfb620e3d4d79e1e16">com</a>, <a class="code" href="bgp__community_8h.html#a963dbe34b652eddc5e57390c16fe5063">COMMUNITY_INTERNET</a>))
            <span class="keywordflow">return</span> entry-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a> == <a class="code" href="bgp__clist_8h.html#ae6df4a7e348bcadcc65fdc56cbd9f418">COMMUNITY_PERMIT</a> ? 1 : 0;

          <span class="keywordflow">if</span> (<a class="code" href="bgp__community_8c.html#ab78dd69e6f3b202f3ab726654ea54193">community_cmp</a> (com, entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a417e7d3e1bb8d3bfb620e3d4d79e1e16">com</a>))
            <span class="keywordflow">return</span> entry-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a> == <a class="code" href="bgp__clist_8h.html#ae6df4a7e348bcadcc65fdc56cbd9f418">COMMUNITY_PERMIT</a> ? 1 : 0;
        }
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a> == <a class="code" href="bgp__clist_8h.html#ae00204887ca7891261192c1f0c2ef1b2">COMMUNITY_LIST_EXPANDED</a>)
        {
          <span class="keywordflow">if</span> (<a class="code" href="bgp__clist_8c.html#a9c7340bb7ef1127e6da1313f22b8f6eb">community_regexp_match</a> (com, entry-&gt;<a class="code" href="structcommunity__entry.html#a817ea26d814de0aea503fd6d70857664">reg</a>))
            <span class="keywordflow">return</span> entry-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a> == <a class="code" href="bgp__clist_8h.html#ae6df4a7e348bcadcc65fdc56cbd9f418">COMMUNITY_PERMIT</a> ? 1 : 0;
        }
    }
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac554442b85ad396162540dbafe3d119f"></a><!-- doxytag: member="bgp_clist.c::community_list_free" ref="ac554442b85ad396162540dbafe3d119f" args="(struct community_list *list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void community_list_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list.html">community_list</a> *&#160;</td>
          <td class="paramname"><em>list</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00096">96</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (list-&gt;<a class="code" href="structcommunity__list.html#a6a8671f042f9c711fdde92e489a9a777">name</a>)
    <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167bab1c52cd65ec14f9d1298925ebfbaf693">MTYPE_COMMUNITY_LIST_NAME</a>, list-&gt;<a class="code" href="structcommunity__list.html#a6a8671f042f9c711fdde92e489a9a777">name</a>);
  <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba0fe8a34219cc31079e6aa8649477cd80">MTYPE_COMMUNITY_LIST</a>, list);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae8ef42ae0ddf78bf86a81770db967dd6"></a><!-- doxytag: member="bgp_clist.c::community_list_get" ref="ae8ef42ae0ddf78bf86a81770db967dd6" args="(struct community_list_handler *ch, const char *name, int master)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structcommunity__list.html">community_list</a>* community_list_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>master</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00222">222</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity__list.html">community_list</a> *<a class="code" href="structlist.html">list</a>;

  list = <a class="code" href="bgp__clist_8c.html#a2c0159e743b11dc2143b7f74a65ce156">community_list_lookup</a> (ch, <a class="code" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>);
  <span class="keywordflow">if</span> (!list)
    list = <a class="code" href="bgp__clist_8c.html#a2a861b07ef1b751c0a3573152a1b9480">community_list_insert</a> (ch, <a class="code" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>);
  <span class="keywordflow">return</span> list;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3074741d6eaa97bdbc1d29e6ec9d18be"></a><!-- doxytag: member="bgp_clist.c::community_list_init" ref="a3074741d6eaa97bdbc1d29e6ec9d18be" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a>* community_list_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00823">823</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity__list__handler.html">community_list_handler</a> *ch;
  ch = <a class="code" href="memory_8h.html#a7826e4ed1d152cad0666dcf43f11f663">XCALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba1b30487eb5e03faf5008e25084ec7922">MTYPE_COMMUNITY_LIST_HANDLER</a>,
                <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structcommunity__list__handler.html">community_list_handler</a>));
  <span class="keywordflow">return</span> ch;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2a861b07ef1b751c0a3573152a1b9480"></a><!-- doxytag: member="bgp_clist.c::community_list_insert" ref="a2a861b07ef1b751c0a3573152a1b9480" args="(struct community_list_handler *ch, const char *name, int master)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structcommunity__list.html">community_list</a>* community_list_insert </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>master</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00104">104</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">size_t</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>;
  <span class="keywordtype">long</span> number;
  <span class="keyword">struct </span><a class="code" href="structcommunity__list.html">community_list</a> *<span class="keyword">new</span>;
  <span class="keyword">struct </span><a class="code" href="structcommunity__list.html">community_list</a> *point;
  <span class="keyword">struct </span><a class="code" href="structcommunity__list__list.html">community_list_list</a> *<a class="code" href="structlist.html">list</a>;
  <span class="keyword">struct </span><a class="code" href="structcommunity__list__master.html">community_list_master</a> *<a class="code" href="spgrid_8c.html#acdadc8f742bb24d7912782baf64d04c0">cm</a>;

  <span class="comment">/* Lookup community-list master.  */</span>
  cm = <a class="code" href="bgp__clist_8c.html#ac34a39d4f70160eefe2b8a6d1eafc14b">community_list_master_lookup</a> (ch, <a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>);
  <span class="keywordflow">if</span> (!cm)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="comment">/* Allocate new community_list and copy given name. */</span>
  <span class="keyword">new</span> = <a class="code" href="bgp__clist_8c.html#a45379ff1a9832b296dcc5ba6f3b89bc6">community_list_new</a> ();
  <span class="keyword">new</span>-&gt;name = <a class="code" href="memory_8h.html#aa7c561b5824edc16351f22b8df155c0e">XSTRDUP</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167bab1c52cd65ec14f9d1298925ebfbaf693">MTYPE_COMMUNITY_LIST_NAME</a>, <a class="code" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>);

  <span class="comment">/* If name is made by all digit character.  We treat it as</span>
<span class="comment">     number. */</span>
  <span class="keywordflow">for</span> (number = 0, i = 0; i &lt; strlen (<a class="code" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>); i++)
    {
      <span class="keywordflow">if</span> (isdigit ((<span class="keywordtype">int</span>) <a class="code" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>[i]))
        number = (number * 10) + (<a class="code" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>[<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>] - <span class="charliteral">&#39;0&#39;</span>);
      <span class="keywordflow">else</span>
        <span class="keywordflow">break</span>;
    }

  <span class="comment">/* In case of name is all digit character */</span>
  <span class="keywordflow">if</span> (i == strlen (<a class="code" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>))
    {
      <span class="keyword">new</span>-&gt;sort = <a class="code" href="bgp__clist_8h.html#a2ccb0f9674aeb060cd765c8cf3e15432">COMMUNITY_LIST_NUMBER</a>;

      <span class="comment">/* Set access_list to number list. */</span>
      list = &amp;cm-&gt;<a class="code" href="structcommunity__list__master.html#a2c072ba76924db5fcd27bf1d6f9f542c">num</a>;

      <span class="keywordflow">for</span> (point = list-&gt;<a class="code" href="structcommunity__list__list.html#a0d4c7921addc2ef057d88822410eb649">head</a>; point; point = point-&gt;<a class="code" href="structcommunity__list.html#a1b96c87153fe22c6cf7feea6da7d88e0">next</a>)
        <span class="keywordflow">if</span> (atol (point-&gt;<a class="code" href="structcommunity__list.html#a6a8671f042f9c711fdde92e489a9a777">name</a>) &gt;= number)
          <span class="keywordflow">break</span>;
    }
  <span class="keywordflow">else</span>
    {
      <span class="keyword">new</span>-&gt;sort = <a class="code" href="bgp__clist_8h.html#ac934d85070da313c0923ec1d7b45eb49">COMMUNITY_LIST_STRING</a>;

      <span class="comment">/* Set access_list to string list. */</span>
      list = &amp;cm-&gt;<a class="code" href="structcommunity__list__master.html#adc6325fc227842c81faa4572a1783a40">str</a>;

      <span class="comment">/* Set point to insertion point. */</span>
      <span class="keywordflow">for</span> (point = list-&gt;<a class="code" href="structcommunity__list__list.html#a0d4c7921addc2ef057d88822410eb649">head</a>; point; point = point-&gt;<a class="code" href="structcommunity__list.html#a1b96c87153fe22c6cf7feea6da7d88e0">next</a>)
        <span class="keywordflow">if</span> (strcmp (point-&gt;<a class="code" href="structcommunity__list.html#a6a8671f042f9c711fdde92e489a9a777">name</a>, <a class="code" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>) &gt;= 0)
          <span class="keywordflow">break</span>;
    }

  <span class="comment">/* Link to upper list.  */</span>
  <span class="keyword">new</span>-&gt;parent = list;

  <span class="comment">/* In case of this is the first element of master. */</span>
  <span class="keywordflow">if</span> (list-&gt;<a class="code" href="structcommunity__list__list.html#a0d4c7921addc2ef057d88822410eb649">head</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      list-&gt;<a class="code" href="structcommunity__list__list.html#a0d4c7921addc2ef057d88822410eb649">head</a> = list-&gt;<a class="code" href="structcommunity__list__list.html#a98864d7717529e82e316923e3d558b12">tail</a> = <span class="keyword">new</span>;
      <span class="keywordflow">return</span> <span class="keyword">new</span>;
    }

  <span class="comment">/* In case of insertion is made at the tail of access_list. */</span>
  <span class="keywordflow">if</span> (point == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="keyword">new</span>-&gt;<a class="code" href="structcommunity__list.html#aa55578094e20a943ad5000b24730d533">prev</a> = list-&gt;<a class="code" href="structcommunity__list__list.html#a98864d7717529e82e316923e3d558b12">tail</a>;
      list-&gt;<a class="code" href="structcommunity__list__list.html#a98864d7717529e82e316923e3d558b12">tail</a>-&gt;<a class="code" href="structcommunity__list.html#a1b96c87153fe22c6cf7feea6da7d88e0">next</a> = <span class="keyword">new</span>;
      list-&gt;<a class="code" href="structcommunity__list__list.html#a98864d7717529e82e316923e3d558b12">tail</a> = <span class="keyword">new</span>;
      <span class="keywordflow">return</span> <span class="keyword">new</span>;
    }

  <span class="comment">/* In case of insertion is made at the head of access_list. */</span>
  <span class="keywordflow">if</span> (point == list-&gt;<a class="code" href="structcommunity__list__list.html#a0d4c7921addc2ef057d88822410eb649">head</a>)
    {
      <span class="keyword">new</span>-&gt;<a class="code" href="structcommunity__list.html#a1b96c87153fe22c6cf7feea6da7d88e0">next</a> = list-&gt;<a class="code" href="structcommunity__list__list.html#a0d4c7921addc2ef057d88822410eb649">head</a>;
      list-&gt;<a class="code" href="structcommunity__list__list.html#a0d4c7921addc2ef057d88822410eb649">head</a>-&gt;<a class="code" href="structcommunity__list.html#aa55578094e20a943ad5000b24730d533">prev</a> = <span class="keyword">new</span>;
      list-&gt;<a class="code" href="structcommunity__list__list.html#a0d4c7921addc2ef057d88822410eb649">head</a> = <span class="keyword">new</span>;
      <span class="keywordflow">return</span> <span class="keyword">new</span>;
    }

  <span class="comment">/* Insertion is made at middle of the access_list. */</span>
  <span class="keyword">new</span>-&gt;<a class="code" href="structcommunity__list.html#a1b96c87153fe22c6cf7feea6da7d88e0">next</a> = point;
  <span class="keyword">new</span>-&gt;<a class="code" href="structcommunity__list.html#aa55578094e20a943ad5000b24730d533">prev</a> = point-&gt;<a class="code" href="structcommunity__list.html#aa55578094e20a943ad5000b24730d533">prev</a>;

  <span class="keywordflow">if</span> (point-&gt;<a class="code" href="structcommunity__list.html#aa55578094e20a943ad5000b24730d533">prev</a>)
    point-&gt;<a class="code" href="structcommunity__list.html#aa55578094e20a943ad5000b24730d533">prev</a>-&gt;<a class="code" href="structcommunity__list.html#a1b96c87153fe22c6cf7feea6da7d88e0">next</a> = <span class="keyword">new</span>;
  point-&gt;<a class="code" href="structcommunity__list.html#aa55578094e20a943ad5000b24730d533">prev</a> = <span class="keyword">new</span>;

  <span class="keywordflow">return</span> <span class="keyword">new</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2c0159e743b11dc2143b7f74a65ce156"></a><!-- doxytag: member="bgp_clist.c::community_list_lookup" ref="a2c0159e743b11dc2143b7f74a65ce156" args="(struct community_list_handler *ch, const char *name, int master)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcommunity__list.html">community_list</a>* community_list_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>master</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00198">198</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity__list.html">community_list</a> *<a class="code" href="structlist.html">list</a>;
  <span class="keyword">struct </span><a class="code" href="structcommunity__list__master.html">community_list_master</a> *<a class="code" href="spgrid_8c.html#acdadc8f742bb24d7912782baf64d04c0">cm</a>;

  <span class="keywordflow">if</span> (!<a class="code" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  cm = <a class="code" href="bgp__clist_8c.html#ac34a39d4f70160eefe2b8a6d1eafc14b">community_list_master_lookup</a> (ch, <a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>);
  <span class="keywordflow">if</span> (!cm)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">for</span> (list = cm-&gt;<a class="code" href="structcommunity__list__master.html#a2c072ba76924db5fcd27bf1d6f9f542c">num</a>.<a class="code" href="structcommunity__list__list.html#a0d4c7921addc2ef057d88822410eb649">head</a>; list; list = list-&gt;<a class="code" href="structcommunity__list.html#a1b96c87153fe22c6cf7feea6da7d88e0">next</a>)
    <span class="keywordflow">if</span> (strcmp (list-&gt;<a class="code" href="structcommunity__list.html#a6a8671f042f9c711fdde92e489a9a777">name</a>, <a class="code" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>) == 0)
      <span class="keywordflow">return</span> list;
  <span class="keywordflow">for</span> (list = cm-&gt;<a class="code" href="structcommunity__list__master.html#adc6325fc227842c81faa4572a1783a40">str</a>.<a class="code" href="structcommunity__list__list.html#a0d4c7921addc2ef057d88822410eb649">head</a>; list; list = list-&gt;<a class="code" href="structcommunity__list.html#a1b96c87153fe22c6cf7feea6da7d88e0">next</a>)
    <span class="keywordflow">if</span> (strcmp (list-&gt;<a class="code" href="structcommunity__list.html#a6a8671f042f9c711fdde92e489a9a777">name</a>, <a class="code" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>) == 0)
      <span class="keywordflow">return</span> list;

  <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac34a39d4f70160eefe2b8a6d1eafc14b"></a><!-- doxytag: member="bgp_clist.c::community_list_master_lookup" ref="ac34a39d4f70160eefe2b8a6d1eafc14b" args="(struct community_list_handler *ch, int master)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcommunity__list__master.html">community_list_master</a>* community_list_master_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>master</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00037">37</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (ch)
    <span class="keywordflow">switch</span> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>)
      {
      <span class="keywordflow">case</span> <a class="code" href="bgp__clist_8h.html#a71bf5583c66d28746342ec73632efe06">COMMUNITY_LIST_MASTER</a>:
    <span class="keywordflow">return</span> &amp;ch-&gt;<a class="code" href="structcommunity__list__handler.html#a9a091d6f78cb254bf4b700a20d62f930">community_list</a>;
      <span class="keywordflow">case</span> <a class="code" href="bgp__clist_8h.html#a61c5d68dcb2d87b3cf5a0ef283a881fc">EXTCOMMUNITY_LIST_MASTER</a>:
    <span class="keywordflow">return</span> &amp;ch-&gt;<a class="code" href="structcommunity__list__handler.html#a921907c1e9f2cf6fbf8afe20d6625e60">extcommunity_list</a>;
      }
  <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a12f4fa6dfed00f5e25a73b79368151fd"></a><!-- doxytag: member="bgp_clist.c::community_list_match" ref="a12f4fa6dfed00f5e25a73b79368151fd" args="(struct community *com, struct community_list *list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int community_list_match </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname"><em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list.html">community_list</a> *&#160;</td>
          <td class="paramname"><em>list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00426">426</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity__entry.html">community_entry</a> *entry;

  <span class="keywordflow">for</span> (entry = list-&gt;<a class="code" href="structcommunity__list.html#ae100c28bcf1983e18f4a6f1b0a7186aa">head</a>; entry; entry = entry-&gt;<a class="code" href="structcommunity__entry.html#adf300c2a3193d684911ae005be92218c">next</a>)
    {
      <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#ad46635f1fd412d4cd77fea982b955081">any</a>)
        <span class="keywordflow">return</span> entry-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a> == <a class="code" href="bgp__clist_8h.html#ae6df4a7e348bcadcc65fdc56cbd9f418">COMMUNITY_PERMIT</a> ? 1 : 0;

      <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a> == <a class="code" href="bgp__clist_8h.html#aac9f88f9f0367759b07f7bf9f5ee1f0e">COMMUNITY_LIST_STANDARD</a>)
        {
          <span class="keywordflow">if</span> (<a class="code" href="bgp__community_8c.html#a0191e40f098590ab68b99a24c2a2e931">community_include</a> (entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a417e7d3e1bb8d3bfb620e3d4d79e1e16">com</a>, <a class="code" href="bgp__community_8h.html#a963dbe34b652eddc5e57390c16fe5063">COMMUNITY_INTERNET</a>))
            <span class="keywordflow">return</span> entry-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a> == <a class="code" href="bgp__clist_8h.html#ae6df4a7e348bcadcc65fdc56cbd9f418">COMMUNITY_PERMIT</a> ? 1 : 0;

          <span class="keywordflow">if</span> (<a class="code" href="bgp__community_8c.html#a7f39155b89b53a2e34d555ad2912692e">community_match</a> (com, entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a417e7d3e1bb8d3bfb620e3d4d79e1e16">com</a>))
            <span class="keywordflow">return</span> entry-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a> == <a class="code" href="bgp__clist_8h.html#ae6df4a7e348bcadcc65fdc56cbd9f418">COMMUNITY_PERMIT</a> ? 1 : 0;
        }
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a> == <a class="code" href="bgp__clist_8h.html#ae00204887ca7891261192c1f0c2ef1b2">COMMUNITY_LIST_EXPANDED</a>)
        {
          <span class="keywordflow">if</span> (<a class="code" href="bgp__clist_8c.html#a9c7340bb7ef1127e6da1313f22b8f6eb">community_regexp_match</a> (com, entry-&gt;<a class="code" href="structcommunity__entry.html#a817ea26d814de0aea503fd6d70857664">reg</a>))
            <span class="keywordflow">return</span> entry-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a> == <a class="code" href="bgp__clist_8h.html#ae6df4a7e348bcadcc65fdc56cbd9f418">COMMUNITY_PERMIT</a> ? 1 : 0;
        }
    }
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaa3ebe16a5e105a177be4f76d40fcc69"></a><!-- doxytag: member="bgp_clist.c::community_list_match_delete" ref="aaa3ebe16a5e105a177be4f76d40fcc69" args="(struct community *com, struct community_list *list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcommunity.html">community</a>* community_list_match_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname"><em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list.html">community_list</a> *&#160;</td>
          <td class="paramname"><em>list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00508">508</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity__entry.html">community_entry</a> *entry;

  <span class="keywordflow">for</span> (entry = list-&gt;<a class="code" href="structcommunity__list.html#ae100c28bcf1983e18f4a6f1b0a7186aa">head</a>; entry; entry = entry-&gt;<a class="code" href="structcommunity__entry.html#adf300c2a3193d684911ae005be92218c">next</a>)
    {
      <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#ad46635f1fd412d4cd77fea982b955081">any</a>)
        {
          <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a> == <a class="code" href="bgp__clist_8h.html#ae6df4a7e348bcadcc65fdc56cbd9f418">COMMUNITY_PERMIT</a>) 
            {
              <span class="comment">/* This is a tricky part.  Currently only</span>
<span class="comment">               * route_set_community_delete() uses this function.  In the</span>
<span class="comment">               * function com-&gt;size is zero, it free the community</span>
<span class="comment">               * structure.  </span>
<span class="comment">               */</span>
              com-&gt;<a class="code" href="structcommunity.html#ad54bd9c20e0cf4fa4674f5b76703d192">size</a> = 0;
            }
          <span class="keywordflow">return</span> <a class="code" href="structcommunity__entry.html#a417e7d3e1bb8d3bfb620e3d4d79e1e16">com</a>;
        }

      <span class="keywordflow">if</span> ((entry-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a> == <a class="code" href="bgp__clist_8h.html#aac9f88f9f0367759b07f7bf9f5ee1f0e">COMMUNITY_LIST_STANDARD</a>) 
          &amp;&amp; (<a class="code" href="bgp__community_8c.html#a0191e40f098590ab68b99a24c2a2e931">community_include</a> (entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a417e7d3e1bb8d3bfb620e3d4d79e1e16">com</a>, <a class="code" href="bgp__community_8h.html#a963dbe34b652eddc5e57390c16fe5063">COMMUNITY_INTERNET</a>)
              || <a class="code" href="bgp__community_8c.html#a7f39155b89b53a2e34d555ad2912692e">community_match</a> (com, entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a417e7d3e1bb8d3bfb620e3d4d79e1e16">com</a>) ))
        {
              <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a> == <a class="code" href="bgp__clist_8h.html#ae6df4a7e348bcadcc65fdc56cbd9f418">COMMUNITY_PERMIT</a>)
                <a class="code" href="bgp__community_8c.html#a610875add342ca4a766a41301272ca8d">community_delete</a> (com, entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a417e7d3e1bb8d3bfb620e3d4d79e1e16">com</a>);
              <span class="keywordflow">else</span>
                <span class="keywordflow">break</span>;
        }
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((entry-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a> == <a class="code" href="bgp__clist_8h.html#ae00204887ca7891261192c1f0c2ef1b2">COMMUNITY_LIST_EXPANDED</a>)
               &amp;&amp; <a class="code" href="bgp__clist_8c.html#a9c7340bb7ef1127e6da1313f22b8f6eb">community_regexp_match</a> (com, entry-&gt;<a class="code" href="structcommunity__entry.html#a817ea26d814de0aea503fd6d70857664">reg</a>))
        {
          <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a> == <a class="code" href="bgp__clist_8h.html#ae6df4a7e348bcadcc65fdc56cbd9f418">COMMUNITY_PERMIT</a>)
            <a class="code" href="bgp__clist_8c.html#af903a31e11b5cc5c2c372e67f41c4897">community_regexp_delete</a> (com, entry-&gt;<a class="code" href="structcommunity__entry.html#a817ea26d814de0aea503fd6d70857664">reg</a>);
          <span class="keywordflow">else</span>
            <span class="keywordflow">break</span>;
        }
    }
  <span class="keywordflow">return</span> <a class="code" href="structcommunity__entry.html#a417e7d3e1bb8d3bfb620e3d4d79e1e16">com</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a45379ff1a9832b296dcc5ba6f3b89bc6"></a><!-- doxytag: member="bgp_clist.c::community_list_new" ref="a45379ff1a9832b296dcc5ba6f3b89bc6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structcommunity__list.html">community_list</a>* community_list_new </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00089">89</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="memory_8h.html#a7826e4ed1d152cad0666dcf43f11f663">XCALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba0fe8a34219cc31079e6aa8649477cd80">MTYPE_COMMUNITY_LIST</a>, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structcommunity__list.html">community_list</a>));
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa888d54db9ff0fd7dfb0185fa4fb45de"></a><!-- doxytag: member="bgp_clist.c::community_list_set" ref="aa888d54db9ff0fd7dfb0185fa4fb45de" args="(struct community_list_handler *ch, const char *name, const char *str, int direct, int style)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int community_list_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>style</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00596">596</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity__entry.html">community_entry</a> *entry = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keyword">struct </span><a class="code" href="structcommunity__list.html">community_list</a> *<a class="code" href="structlist.html">list</a>;
  <span class="keyword">struct </span><a class="code" href="structcommunity.html">community</a> *com = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <a class="code" href="structre__pattern__buffer.html">regex_t</a> *regex = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="comment">/* Get community list. */</span>
  list = <a class="code" href="bgp__clist_8c.html#ae8ef42ae0ddf78bf86a81770db967dd6">community_list_get</a> (ch, <a class="code" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="bgp__clist_8h.html#a71bf5583c66d28746342ec73632efe06">COMMUNITY_LIST_MASTER</a>);

  <span class="comment">/* When community-list already has entry, new entry should have same</span>
<span class="comment">     style.  If you want to have mixed style community-list, you can</span>
<span class="comment">     comment out this check.  */</span>
  <span class="keywordflow">if</span> (!<a class="code" href="bgp__clist_8c.html#a2759973601d972b4066dc91885bfa1b3">community_list_empty_p</a> (list))
    {
      <span class="keyword">struct </span><a class="code" href="structcommunity__entry.html">community_entry</a> *first;

      first = list-&gt;<a class="code" href="structcommunity__list.html#ae100c28bcf1983e18f4a6f1b0a7186aa">head</a>;

      <span class="keywordflow">if</span> (<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a> != first-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a>)
    {
      <span class="keywordflow">return</span> (first-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a> == <a class="code" href="bgp__clist_8h.html#aac9f88f9f0367759b07f7bf9f5ee1f0e">COMMUNITY_LIST_STANDARD</a>
          ? <a class="code" href="bgp__clist_8h.html#a5c98fd59fb6499ef92c1b3a9e823aaa0">COMMUNITY_LIST_ERR_STANDARD_CONFLICT</a>
          : <a class="code" href="bgp__clist_8h.html#ac73351c24c358ae687234172b02ec348">COMMUNITY_LIST_ERR_EXPANDED_CONFLICT</a>);
    }
    }

  <span class="keywordflow">if</span> (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a> == <a class="code" href="bgp__clist_8h.html#aac9f88f9f0367759b07f7bf9f5ee1f0e">COMMUNITY_LIST_STANDARD</a>)
    com = <a class="code" href="bgp__community_8c.html#ae6b14a28bd7622ffb1b9f5b20897e648">community_str2com</a> (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);
      <span class="keywordflow">else</span>
    regex = <a class="code" href="bgp__regex_8c.html#a316b90543d312729a458a7ae1cec7e42">bgp_regcomp</a> (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);

      <span class="keywordflow">if</span> (! com &amp;&amp; ! regex)
    <span class="keywordflow">return</span> <a class="code" href="bgp__clist_8h.html#af084c958195a1693a55ed60c2fdd63d1">COMMUNITY_LIST_ERR_MALFORMED_VAL</a>;
    }

  entry = <a class="code" href="bgp__clist_8c.html#ac513f5310a71c1f1f0db3c3f1c66e971">community_entry_new</a> ();
  entry-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a> = <a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a>;
  entry-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a> = <a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a>;
  entry-&gt;<a class="code" href="structcommunity__entry.html#ad46635f1fd412d4cd77fea982b955081">any</a> = (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> ? 0 : 1);
  entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a417e7d3e1bb8d3bfb620e3d4d79e1e16">com</a> = <a class="code" href="structcommunity__entry.html#a417e7d3e1bb8d3bfb620e3d4d79e1e16">com</a>;
  entry-&gt;<a class="code" href="structcommunity__entry.html#a817ea26d814de0aea503fd6d70857664">reg</a> = regex;
  entry-&gt;<a class="code" href="structcommunity__entry.html#aa623f2755d49e17820332661599c1165">config</a> = (regex ? <a class="code" href="memory_8h.html#aa7c561b5824edc16351f22b8df155c0e">XSTRDUP</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba31dfe1598365f32cd2080388b2db7a87">MTYPE_COMMUNITY_LIST_CONFIG</a>, <a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>) : <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);

  <span class="comment">/* Do not put duplicated community entry.  */</span>
  <span class="keywordflow">if</span> (<a class="code" href="bgp__clist_8c.html#a67e3a353cea67dd13e2b046bc7c2b5e0">community_list_dup_check</a> (list, entry))
    <a class="code" href="bgp__clist_8c.html#a23e2dd7832bc852822f71b60d13ecd5a">community_entry_free</a> (entry);
  <span class="keywordflow">else</span>
    <a class="code" href="bgp__clist_8c.html#a5f3ead7af5477c0fa54f9e4c3dc93e0e">community_list_entry_add</a> (list, entry);

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab24390d21ce1474ea0dc89ad36603203"></a><!-- doxytag: member="bgp_clist.c::community_list_terminate" ref="ab24390d21ce1474ea0dc89ad36603203" args="(struct community_list_handler *ch)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void community_list_terminate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00833">833</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity__list__master.html">community_list_master</a> *<a class="code" href="spgrid_8c.html#acdadc8f742bb24d7912782baf64d04c0">cm</a>;
  <span class="keyword">struct </span><a class="code" href="structcommunity__list.html">community_list</a> *<a class="code" href="structlist.html">list</a>;

  cm = &amp;ch-&gt;<a class="code" href="structcommunity__list__handler.html#a9a091d6f78cb254bf4b700a20d62f930">community_list</a>;
  <span class="keywordflow">while</span> ((list = cm-&gt;<a class="code" href="structcommunity__list__master.html#a2c072ba76924db5fcd27bf1d6f9f542c">num</a>.<a class="code" href="structcommunity__list__list.html#a0d4c7921addc2ef057d88822410eb649">head</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <a class="code" href="bgp__clist_8c.html#ad36feb2a463e74477a78339f7e2ccbbd">community_list_delete</a> (list);
  <span class="keywordflow">while</span> ((list = cm-&gt;<a class="code" href="structcommunity__list__master.html#adc6325fc227842c81faa4572a1783a40">str</a>.<a class="code" href="structcommunity__list__list.html#a0d4c7921addc2ef057d88822410eb649">head</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <a class="code" href="bgp__clist_8c.html#ad36feb2a463e74477a78339f7e2ccbbd">community_list_delete</a> (list);

  cm = &amp;ch-&gt;<a class="code" href="structcommunity__list__handler.html#a921907c1e9f2cf6fbf8afe20d6625e60">extcommunity_list</a>;
  <span class="keywordflow">while</span> ((list = cm-&gt;<a class="code" href="structcommunity__list__master.html#a2c072ba76924db5fcd27bf1d6f9f542c">num</a>.<a class="code" href="structcommunity__list__list.html#a0d4c7921addc2ef057d88822410eb649">head</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <a class="code" href="bgp__clist_8c.html#ad36feb2a463e74477a78339f7e2ccbbd">community_list_delete</a> (list);
  <span class="keywordflow">while</span> ((list = cm-&gt;<a class="code" href="structcommunity__list__master.html#adc6325fc227842c81faa4572a1783a40">str</a>.<a class="code" href="structcommunity__list__list.html#a0d4c7921addc2ef057d88822410eb649">head</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <a class="code" href="bgp__clist_8c.html#ad36feb2a463e74477a78339f7e2ccbbd">community_list_delete</a> (list);

  <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba1b30487eb5e03faf5008e25084ec7922">MTYPE_COMMUNITY_LIST_HANDLER</a>, ch);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa6dca468a007ec6ee7c24fd359155595"></a><!-- doxytag: member="bgp_clist.c::community_list_unset" ref="aa6dca468a007ec6ee7c24fd359155595" args="(struct community_list_handler *ch, const char *name, const char *str, int direct, int style)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int community_list_unset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>style</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00655">655</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity__entry.html">community_entry</a> *entry = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keyword">struct </span><a class="code" href="structcommunity__list.html">community_list</a> *<a class="code" href="structlist.html">list</a>;
  <span class="keyword">struct </span><a class="code" href="structcommunity.html">community</a> *com = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <a class="code" href="structre__pattern__buffer.html">regex_t</a> *regex = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="comment">/* Lookup community list.  */</span>
  list = <a class="code" href="bgp__clist_8c.html#a2c0159e743b11dc2143b7f74a65ce156">community_list_lookup</a> (ch, <a class="code" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="bgp__clist_8h.html#a71bf5583c66d28746342ec73632efe06">COMMUNITY_LIST_MASTER</a>);
  <span class="keywordflow">if</span> (list == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> <a class="code" href="bgp__clist_8h.html#a7aad04c858f86928ca3a94f861f1597f">COMMUNITY_LIST_ERR_CANT_FIND_LIST</a>;

  <span class="comment">/* Delete all of entry belongs to this community-list.  */</span>
  <span class="keywordflow">if</span> (!<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>)
    {
      <a class="code" href="bgp__clist_8c.html#ad36feb2a463e74477a78339f7e2ccbbd">community_list_delete</a> (list);
      <span class="keywordflow">return</span> 0;
    }

  <span class="keywordflow">if</span> (style == <a class="code" href="bgp__clist_8h.html#aac9f88f9f0367759b07f7bf9f5ee1f0e">COMMUNITY_LIST_STANDARD</a>)
    com = <a class="code" href="bgp__community_8c.html#ae6b14a28bd7622ffb1b9f5b20897e648">community_str2com</a> (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);
  <span class="keywordflow">else</span>
    regex = <a class="code" href="bgp__regex_8c.html#a316b90543d312729a458a7ae1cec7e42">bgp_regcomp</a> (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);

  <span class="keywordflow">if</span> (! com &amp;&amp; ! regex)
    <span class="keywordflow">return</span> <a class="code" href="bgp__clist_8h.html#af084c958195a1693a55ed60c2fdd63d1">COMMUNITY_LIST_ERR_MALFORMED_VAL</a>;

  <span class="keywordflow">if</span> (com)
    entry = <a class="code" href="bgp__clist_8c.html#a98f4cc5fad1b590d42e1218962381245">community_list_entry_lookup</a> (list, com, direct);
  <span class="keywordflow">else</span>
    entry = <a class="code" href="bgp__clist_8c.html#a98f4cc5fad1b590d42e1218962381245">community_list_entry_lookup</a> (list, <a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, direct);

  <span class="keywordflow">if</span> (com)
    <a class="code" href="bgp__community_8c.html#a890bdfd2f7517c0fe7f30687d1d4d825">community_free</a> (com);
  <span class="keywordflow">if</span> (regex)
    <a class="code" href="bgp__regex_8c.html#a9a7260053c61ff8c6f58e5822d136b88">bgp_regex_free</a> (regex);

  <span class="keywordflow">if</span> (!entry)
    <span class="keywordflow">return</span> <a class="code" href="bgp__clist_8h.html#a7aad04c858f86928ca3a94f861f1597f">COMMUNITY_LIST_ERR_CANT_FIND_LIST</a>;

  <a class="code" href="bgp__clist_8c.html#adca712eca7bfce2a656f806864abf459">community_list_entry_delete</a> (list, entry, style);

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af903a31e11b5cc5c2c372e67f41c4897"></a><!-- doxytag: member="bgp_clist.c::community_regexp_delete" ref="af903a31e11b5cc5c2c372e67f41c4897" args="(struct community *com, regex_t *reg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structcommunity.html">community</a>* community_regexp_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname"><em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="regex-gnu_8h.html#a159f97bcead74ee31a0817571f7625a9">regex_t</a> *&#160;</td>
          <td class="paramname"><em>reg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00378">378</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>;
  u_int32_t comval;
  <span class="comment">/* Maximum is &quot;65535:65535&quot; + &#39;\0&#39;. */</span>
  <span class="keywordtype">char</span> c[12];
  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;

  <span class="keywordflow">if</span> (!com)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  i = 0;
  <span class="keywordflow">while</span> (i &lt; com-&gt;<a class="code" href="structcommunity.html#ad54bd9c20e0cf4fa4674f5b76703d192">size</a>)
    {
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (&amp;comval, <a class="code" href="bgp__community_8h.html#af94a7f226b0984e690c90fe23355d71b">com_nthval</a> (com, i), <span class="keyword">sizeof</span> (u_int32_t));
      comval = ntohl (comval);

      <span class="keywordflow">switch</span> (comval)
        {
        <span class="keywordflow">case</span> <a class="code" href="bgp__community_8h.html#a963dbe34b652eddc5e57390c16fe5063">COMMUNITY_INTERNET</a>:
          str = <span class="stringliteral">&quot;internet&quot;</span>;
          <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="bgp__community_8h.html#a219dabc199faf8a9c3d75d8cccd2aa04">COMMUNITY_NO_EXPORT</a>:
          str = <span class="stringliteral">&quot;no-export&quot;</span>;
          <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="bgp__community_8h.html#ad48733d7ee618f0eb7371ca7300af9fc">COMMUNITY_NO_ADVERTISE</a>:
          str = <span class="stringliteral">&quot;no-advertise&quot;</span>;
          <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="bgp__community_8h.html#acacc3f9ae32baf1130b9cd46f1c7bf90">COMMUNITY_LOCAL_AS</a>:
          str = <span class="stringliteral">&quot;local-AS&quot;</span>;
          <span class="keywordflow">break</span>;
        <span class="keywordflow">default</span>:
          sprintf (c, <span class="stringliteral">&quot;%d:%d&quot;</span>, (comval &gt;&gt; 16) &amp; 0xFFFF, comval &amp; 0xFFFF);
          str = c;
          <span class="keywordflow">break</span>;
        }

      <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a0298f60fae70832d70e8ec5d032472a8">regexec</a> (reg, str, 0, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0) == 0)
        <a class="code" href="bgp__community_8c.html#acca441f8b245fa4d9f981db44782e3ee">community_del_val</a> (com, <a class="code" href="bgp__community_8h.html#af94a7f226b0984e690c90fe23355d71b">com_nthval</a> (com, i));
      <span class="keywordflow">else</span>
        i++;
    }
  <span class="keywordflow">return</span> com;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9c7340bb7ef1127e6da1313f22b8f6eb"></a><!-- doxytag: member="bgp_clist.c::community_regexp_match" ref="a9c7340bb7ef1127e6da1313f22b8f6eb" args="(struct community *com, regex_t *reg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int community_regexp_match </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname"><em>com</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="regex-gnu_8h.html#a159f97bcead74ee31a0817571f7625a9">regex_t</a> *&#160;</td>
          <td class="paramname"><em>reg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00336">336</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;

  <span class="comment">/* When there is no communities attribute it is treated as empty</span>
<span class="comment">     string.  */</span>
  <span class="keywordflow">if</span> (com == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || com-&gt;<a class="code" href="structcommunity.html#ad54bd9c20e0cf4fa4674f5b76703d192">size</a> == 0)
    str = <span class="stringliteral">&quot;&quot;</span>;
  <span class="keywordflow">else</span>
    str = <a class="code" href="bgp__community_8c.html#a46ddc4b676977762237ba3c27f9ff98e">community_str</a> (com);

  <span class="comment">/* Regular expression match.  */</span>
  <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a0298f60fae70832d70e8ec5d032472a8">regexec</a> (reg, str, 0, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0) == 0)
    <span class="keywordflow">return</span> 1;

  <span class="comment">/* No match.  */</span>
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a98125eca200d5e9e26b9f87df48e37ed"></a><!-- doxytag: member="bgp_clist.c::ecommunity_list_match" ref="a98125eca200d5e9e26b9f87df48e37ed" args="(struct ecommunity *ecom, struct community_list *list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ecommunity_list_match </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structecommunity.html">ecommunity</a> *&#160;</td>
          <td class="paramname"><em>ecom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list.html">community_list</a> *&#160;</td>
          <td class="paramname"><em>list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00453">453</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity__entry.html">community_entry</a> *entry;

  <span class="keywordflow">for</span> (entry = list-&gt;<a class="code" href="structcommunity__list.html#ae100c28bcf1983e18f4a6f1b0a7186aa">head</a>; entry; entry = entry-&gt;<a class="code" href="structcommunity__entry.html#adf300c2a3193d684911ae005be92218c">next</a>)
    {
      <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#ad46635f1fd412d4cd77fea982b955081">any</a>)
        <span class="keywordflow">return</span> entry-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a> == <a class="code" href="bgp__clist_8h.html#ae6df4a7e348bcadcc65fdc56cbd9f418">COMMUNITY_PERMIT</a> ? 1 : 0;

      <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a> == <a class="code" href="bgp__clist_8h.html#a999fc8046f6d46557f06e6dc5eafb3a9">EXTCOMMUNITY_LIST_STANDARD</a>)
        {
          <span class="keywordflow">if</span> (<a class="code" href="bgp__ecommunity_8c.html#a492220e57649c8ea7c1ef5dc4656b1f7">ecommunity_match</a> (ecom, entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a6738f5df4deb7c87ff42f90596910063">ecom</a>))
            <span class="keywordflow">return</span> entry-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a> == <a class="code" href="bgp__clist_8h.html#ae6df4a7e348bcadcc65fdc56cbd9f418">COMMUNITY_PERMIT</a> ? 1 : 0;
        }
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a> == <a class="code" href="bgp__clist_8h.html#a75f83c5ed3ca755db0e6003fb775af13">EXTCOMMUNITY_LIST_EXPANDED</a>)
        {
          <span class="keywordflow">if</span> (<a class="code" href="bgp__clist_8c.html#a6eead86ba88249766ba266fab353509a">ecommunity_regexp_match</a> (ecom, entry-&gt;<a class="code" href="structcommunity__entry.html#a817ea26d814de0aea503fd6d70857664">reg</a>))
            <span class="keywordflow">return</span> entry-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a> == <a class="code" href="bgp__clist_8h.html#ae6df4a7e348bcadcc65fdc56cbd9f418">COMMUNITY_PERMIT</a> ? 1 : 0;
        }
    }
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6eead86ba88249766ba266fab353509a"></a><!-- doxytag: member="bgp_clist.c::ecommunity_regexp_match" ref="a6eead86ba88249766ba266fab353509a" args="(struct ecommunity *ecom, regex_t *reg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ecommunity_regexp_match </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structecommunity.html">ecommunity</a> *&#160;</td>
          <td class="paramname"><em>ecom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="regex-gnu_8h.html#a159f97bcead74ee31a0817571f7625a9">regex_t</a> *&#160;</td>
          <td class="paramname"><em>reg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00356">356</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;

  <span class="comment">/* When there is no communities attribute it is treated as empty</span>
<span class="comment">     string.  */</span>
  <span class="keywordflow">if</span> (ecom == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || ecom-&gt;<a class="code" href="structecommunity.html#a4477c6c01052cb83ed9b4682302ebf5f">size</a> == 0)
    str = <span class="stringliteral">&quot;&quot;</span>;
  <span class="keywordflow">else</span>
    str = <a class="code" href="bgp__ecommunity_8c.html#acf79813b21f80e7f2966706a4df198e8">ecommunity_str</a> (ecom);

  <span class="comment">/* Regular expression match.  */</span>
  <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a0298f60fae70832d70e8ec5d032472a8">regexec</a> (reg, str, 0, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0) == 0)
    <span class="keywordflow">return</span> 1;

  <span class="comment">/* No match.  */</span>
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3e2c46712b2558156c5074b345e3fc06"></a><!-- doxytag: member="bgp_clist.c::extcommunity_list_set" ref="a3e2c46712b2558156c5074b345e3fc06" args="(struct community_list_handler *ch, const char *name, const char *str, int direct, int style)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int extcommunity_list_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>style</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00704">704</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity__entry.html">community_entry</a> *entry = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keyword">struct </span><a class="code" href="structcommunity__list.html">community_list</a> *<a class="code" href="structlist.html">list</a>;
  <span class="keyword">struct </span><a class="code" href="structecommunity.html">ecommunity</a> *ecom = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <a class="code" href="structre__pattern__buffer.html">regex_t</a> *regex = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  entry = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="comment">/* Get community list. */</span>
  list = <a class="code" href="bgp__clist_8c.html#ae8ef42ae0ddf78bf86a81770db967dd6">community_list_get</a> (ch, <a class="code" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="bgp__clist_8h.html#a61c5d68dcb2d87b3cf5a0ef283a881fc">EXTCOMMUNITY_LIST_MASTER</a>);

  <span class="comment">/* When community-list already has entry, new entry should have same</span>
<span class="comment">     style.  If you want to have mixed style community-list, you can</span>
<span class="comment">     comment out this check.  */</span>
  <span class="keywordflow">if</span> (!<a class="code" href="bgp__clist_8c.html#a2759973601d972b4066dc91885bfa1b3">community_list_empty_p</a> (list))
    {
      <span class="keyword">struct </span><a class="code" href="structcommunity__entry.html">community_entry</a> *first;

      first = list-&gt;<a class="code" href="structcommunity__list.html#ae100c28bcf1983e18f4a6f1b0a7186aa">head</a>;

      <span class="keywordflow">if</span> (<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a> != first-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a>)
    {
      <span class="keywordflow">return</span> (first-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a> == <a class="code" href="bgp__clist_8h.html#a999fc8046f6d46557f06e6dc5eafb3a9">EXTCOMMUNITY_LIST_STANDARD</a>
          ? <a class="code" href="bgp__clist_8h.html#a5c98fd59fb6499ef92c1b3a9e823aaa0">COMMUNITY_LIST_ERR_STANDARD_CONFLICT</a>
          : <a class="code" href="bgp__clist_8h.html#ac73351c24c358ae687234172b02ec348">COMMUNITY_LIST_ERR_EXPANDED_CONFLICT</a>);
    }
    }

  <span class="keywordflow">if</span> (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a> == <a class="code" href="bgp__clist_8h.html#a999fc8046f6d46557f06e6dc5eafb3a9">EXTCOMMUNITY_LIST_STANDARD</a>)
    ecom = <a class="code" href="bgp__ecommunity_8c.html#a6da70afe62091b6c7ead2e602cfc03fd">ecommunity_str2com</a> (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, 0, 1);
      <span class="keywordflow">else</span>
    regex = <a class="code" href="bgp__regex_8c.html#a316b90543d312729a458a7ae1cec7e42">bgp_regcomp</a> (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);

      <span class="keywordflow">if</span> (! ecom &amp;&amp; ! regex)
    <span class="keywordflow">return</span> <a class="code" href="bgp__clist_8h.html#af084c958195a1693a55ed60c2fdd63d1">COMMUNITY_LIST_ERR_MALFORMED_VAL</a>;
    }

  <span class="keywordflow">if</span> (ecom)
    ecom-&gt;<a class="code" href="structecommunity.html#ac84ecde7f5b18c5c070ba22400fb0cb6">str</a> = <a class="code" href="bgp__ecommunity_8c.html#a8ffcee89340db2108bd11edf28852b11">ecommunity_ecom2str</a> (ecom, <a class="code" href="bgp__ecommunity_8h.html#ae776d41484b625ccb00ad109d4965451">ECOMMUNITY_FORMAT_DISPLAY</a>);

  entry = <a class="code" href="bgp__clist_8c.html#ac513f5310a71c1f1f0db3c3f1c66e971">community_entry_new</a> ();
  entry-&gt;<a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a> = <a class="code" href="structcommunity__entry.html#ab1a1c3b9e1621e23ab0f60606cd25cb3">direct</a>;
  entry-&gt;<a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a> = <a class="code" href="structcommunity__entry.html#aae775dad4aa136af465b07fbdebd1ced">style</a>;
  entry-&gt;<a class="code" href="structcommunity__entry.html#ad46635f1fd412d4cd77fea982b955081">any</a> = (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> ? 0 : 1);
  <span class="keywordflow">if</span> (ecom)
    entry-&gt;<a class="code" href="structcommunity__entry.html#aa623f2755d49e17820332661599c1165">config</a> = <a class="code" href="bgp__ecommunity_8c.html#a8ffcee89340db2108bd11edf28852b11">ecommunity_ecom2str</a> (ecom, <a class="code" href="bgp__ecommunity_8h.html#acfff5b888f4007173f66dc1f83ad4e94">ECOMMUNITY_FORMAT_COMMUNITY_LIST</a>);
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (regex)
    entry-&gt;<a class="code" href="structcommunity__entry.html#aa623f2755d49e17820332661599c1165">config</a> = <a class="code" href="memory_8h.html#aa7c561b5824edc16351f22b8df155c0e">XSTRDUP</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba31dfe1598365f32cd2080388b2db7a87">MTYPE_COMMUNITY_LIST_CONFIG</a>, <a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);
  <span class="keywordflow">else</span>
    entry-&gt;<a class="code" href="structcommunity__entry.html#aa623f2755d49e17820332661599c1165">config</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  entry-&gt;<a class="code" href="structcommunity__entry.html#ab3e2023304a10f38c5eb6c9b4aaf7023">u</a>.<a class="code" href="structcommunity__entry.html#a6738f5df4deb7c87ff42f90596910063">ecom</a> = <a class="code" href="structcommunity__entry.html#a6738f5df4deb7c87ff42f90596910063">ecom</a>;
  entry-&gt;<a class="code" href="structcommunity__entry.html#a817ea26d814de0aea503fd6d70857664">reg</a> = regex;

  <span class="comment">/* Do not put duplicated community entry.  */</span>
  <span class="keywordflow">if</span> (<a class="code" href="bgp__clist_8c.html#a67e3a353cea67dd13e2b046bc7c2b5e0">community_list_dup_check</a> (list, entry))
    <a class="code" href="bgp__clist_8c.html#a23e2dd7832bc852822f71b60d13ecd5a">community_entry_free</a> (entry);
  <span class="keywordflow">else</span>
    <a class="code" href="bgp__clist_8c.html#a5f3ead7af5477c0fa54f9e4c3dc93e0e">community_list_entry_add</a> (list, entry);

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="add548f65d1e8eadceeb2d6d26170a85c"></a><!-- doxytag: member="bgp_clist.c::extcommunity_list_unset" ref="add548f65d1e8eadceeb2d6d26170a85c" args="(struct community_list_handler *ch, const char *name, const char *str, int direct, int style)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int extcommunity_list_unset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity__list__handler.html">community_list_handler</a> *&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>style</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__clist_8c_source.html#l00774">774</a> of file <a class="el" href="bgp__clist_8c_source.html">bgp_clist.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity__entry.html">community_entry</a> *entry = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keyword">struct </span><a class="code" href="structcommunity__list.html">community_list</a> *<a class="code" href="structlist.html">list</a>;
  <span class="keyword">struct </span><a class="code" href="structecommunity.html">ecommunity</a> *ecom = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <a class="code" href="structre__pattern__buffer.html">regex_t</a> *regex = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="comment">/* Lookup extcommunity list.  */</span>
  list = <a class="code" href="bgp__clist_8c.html#a2c0159e743b11dc2143b7f74a65ce156">community_list_lookup</a> (ch, <a class="code" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="bgp__clist_8h.html#a61c5d68dcb2d87b3cf5a0ef283a881fc">EXTCOMMUNITY_LIST_MASTER</a>);
  <span class="keywordflow">if</span> (list == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> <a class="code" href="bgp__clist_8h.html#a7aad04c858f86928ca3a94f861f1597f">COMMUNITY_LIST_ERR_CANT_FIND_LIST</a>;

  <span class="comment">/* Delete all of entry belongs to this extcommunity-list.  */</span>
  <span class="keywordflow">if</span> (!<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>)
    {
      <a class="code" href="bgp__clist_8c.html#ad36feb2a463e74477a78339f7e2ccbbd">community_list_delete</a> (list);
      <span class="keywordflow">return</span> 0;
    }

  <span class="keywordflow">if</span> (style == <a class="code" href="bgp__clist_8h.html#a999fc8046f6d46557f06e6dc5eafb3a9">EXTCOMMUNITY_LIST_STANDARD</a>)
    ecom = <a class="code" href="bgp__ecommunity_8c.html#a6da70afe62091b6c7ead2e602cfc03fd">ecommunity_str2com</a> (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, 0, 1);
  <span class="keywordflow">else</span>
    regex = <a class="code" href="bgp__regex_8c.html#a316b90543d312729a458a7ae1cec7e42">bgp_regcomp</a> (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);

  <span class="keywordflow">if</span> (! ecom &amp;&amp; ! regex)
    <span class="keywordflow">return</span> <a class="code" href="bgp__clist_8h.html#af084c958195a1693a55ed60c2fdd63d1">COMMUNITY_LIST_ERR_MALFORMED_VAL</a>;

  <span class="keywordflow">if</span> (ecom)
    entry = <a class="code" href="bgp__clist_8c.html#a98f4cc5fad1b590d42e1218962381245">community_list_entry_lookup</a> (list, ecom, direct);
  <span class="keywordflow">else</span>
    entry = <a class="code" href="bgp__clist_8c.html#a98f4cc5fad1b590d42e1218962381245">community_list_entry_lookup</a> (list, <a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, direct);

  <span class="keywordflow">if</span> (ecom)
    <a class="code" href="bgp__ecommunity_8c.html#a56f7dda58051cbec7fd56238196dcfc2">ecommunity_free</a> (ecom);
  <span class="keywordflow">if</span> (regex)
    <a class="code" href="bgp__regex_8c.html#a9a7260053c61ff8c6f58e5822d136b88">bgp_regex_free</a> (regex);

  <span class="keywordflow">if</span> (!entry)
    <span class="keywordflow">return</span> <a class="code" href="bgp__clist_8h.html#a7aad04c858f86928ca3a94f861f1597f">COMMUNITY_LIST_ERR_CANT_FIND_LIST</a>;

  <a class="code" href="bgp__clist_8c.html#adca712eca7bfce2a656f806864abf459">community_list_entry_delete</a> (list, entry, style);

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="bgp__clist_8c.html">bgp_clist.c</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:10 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
