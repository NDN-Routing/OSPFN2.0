<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: ospf6d/ospf6_message.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('ospf6__message_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ospf6d/ospf6_message.h File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ospf6__message_8h__dep__incl.png" border="0" usemap="#ospf6d_2ospf6__message_8hdep" alt=""/></div>
<map name="ospf6d_2ospf6__message_8hdep" id="ospf6d_2ospf6__message_8hdep">
<area shape="rect" id="node3" href="ospf6__abr_8c.html" title="ospf6d/ospf6_abr.c" alt="" coords="5,80,144,107"/><area shape="rect" id="node5" href="ospf6__asbr_8c.html" title="ospf6d/ospf6_asbr.c" alt="" coords="169,80,313,107"/><area shape="rect" id="node7" href="ospf6__flood_8c.html" title="ospf6d/ospf6_flood.c" alt="" coords="338,80,488,107"/><area shape="rect" id="node9" href="ospf6__interface_8c.html" title="ospf6d/ospf6_interface.c" alt="" coords="513,80,684,107"/><area shape="rect" id="node11" href="ospf6__intra_8c.html" title="ospf6d/ospf6_intra.c" alt="" coords="709,80,853,107"/><area shape="rect" id="node13" href="ospf6__lsa_8c.html" title="ospf6d/ospf6_lsa.c" alt="" coords="879,80,1015,107"/><area shape="rect" id="node15" href="ospf6__message_8c.html" title="ospf6d/ospf6_message.c" alt="" coords="1039,80,1213,107"/><area shape="rect" id="node17" href="ospf6__neighbor_8c.html" title="ospf6d/ospf6_neighbor.c" alt="" coords="1238,80,1409,107"/><area shape="rect" id="node19" href="ospf6__top_8c.html" title="ospf6d/ospf6_top.c" alt="" coords="1434,80,1573,107"/><area shape="rect" id="node21" href="ospf6d_8c.html" title="ospf6d/ospf6d.c" alt="" coords="1599,80,1719,107"/></map>
</div>
</div>
<p><a href="ospf6__message_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structospf6__header.html">ospf6_header</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structospf6__hello.html">ospf6_hello</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structospf6__dbdesc.html">ospf6_dbdesc</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structospf6__lsreq__entry.html">ospf6_lsreq_entry</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structospf6__lsupdate.html">ospf6_lsupdate</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a3717aab1753d9bbecb60dbcf8d39d31d">OSPF6_MESSAGE_BUFSIZ</a>&#160;&#160;&#160;4096</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#aa430a64d5e1493095599749d30cd8cab">OSPF6_DEBUG_MESSAGE_SEND</a>&#160;&#160;&#160;0x01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a17ac12fc4c8b0d3634c0813ab0d80975">OSPF6_DEBUG_MESSAGE_RECV</a>&#160;&#160;&#160;0x02</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a144709f2d4f2c2a9231aef33c08b9f3e">OSPF6_DEBUG_MESSAGE_ON</a>(<a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>, level)&#160;&#160;&#160;(<a class="el" href="ospf6__message_8h.html#a2248d2fb08366bd1206fa320f5de8c68">conf_debug_ospf6_message</a>[<a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>] |= (level))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#af9e808b191d6b73f7b894853053b107d">OSPF6_DEBUG_MESSAGE_OFF</a>(<a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>, level)&#160;&#160;&#160;(<a class="el" href="ospf6__message_8h.html#a2248d2fb08366bd1206fa320f5de8c68">conf_debug_ospf6_message</a>[<a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>] &amp;= ~(level))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#af19e08ee4af94e2f413943d6c5145154">IS_OSPF6_DEBUG_MESSAGE</a>(<a class="el" href="test-sig_8c.html#ab4ed0bba3292270af8ad67b45a21280d">t</a>, e)&#160;&#160;&#160;(<a class="el" href="ospf6__message_8h.html#a2248d2fb08366bd1206fa320f5de8c68">conf_debug_ospf6_message</a>[<a class="el" href="test-sig_8c.html#ab4ed0bba3292270af8ad67b45a21280d">t</a>] &amp; OSPF6_DEBUG_MESSAGE_ ## e)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#aaec3a97f28d8b7cfcb2e0b6cb7ba06e3">OSPF6_MESSAGE_TYPE_UNKNOWN</a>&#160;&#160;&#160;0x0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a2bf7c8dd972224d5a8255986e52ea771">OSPF6_MESSAGE_TYPE_HELLO</a>&#160;&#160;&#160;0x1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a2bd43bbd6161d38b8361ae6d377b736a">OSPF6_MESSAGE_TYPE_DBDESC</a>&#160;&#160;&#160;0x2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a685011318dd28abf2279e718803d4daa">OSPF6_MESSAGE_TYPE_LSREQ</a>&#160;&#160;&#160;0x3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#ac6f61e0ff8bcf71f99c6edc50ab9ca97">OSPF6_MESSAGE_TYPE_LSUPDATE</a>&#160;&#160;&#160;0x4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a19fd0641f70b0878b9ce5e7966c7ae73">OSPF6_MESSAGE_TYPE_LSACK</a>&#160;&#160;&#160;0x5</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#aba04e21c291bce41cba66ddb73661883">OSPF6_MESSAGE_TYPE_ALL</a>&#160;&#160;&#160;0x6</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a634c01ceae5ec0e2116bae9b19ddfed5">OSPF6_MESSAGE_TYPE_CANONICAL</a>(<a class="el" href="md5_8c.html#a7e83ec4daea14d9c3040af4e0ac30792">T</a>)&#160;&#160;&#160;((<a class="el" href="md5_8c.html#a7e83ec4daea14d9c3040af4e0ac30792">T</a>) &gt; OSPF6_MESSAGE_TYPE_LSACK ? OSPF6_MESSAGE_TYPE_UNKNOWN : (<a class="el" href="md5_8c.html#a7e83ec4daea14d9c3040af4e0ac30792">T</a>))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a44665a9343d836ac8be80df1b0bcca14">OSPF6_MESSAGE_TYPE_NAME</a>(<a class="el" href="md5_8c.html#a7e83ec4daea14d9c3040af4e0ac30792">T</a>)&#160;&#160;&#160;(<a class="el" href="ospf6__message_8h.html#a64115ee539859d9f278938a96e2ce9b5">ospf6_message_type_str</a>[ OSPF6_MESSAGE_TYPE_CANONICAL (<a class="el" href="md5_8c.html#a7e83ec4daea14d9c3040af4e0ac30792">T</a>) ])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a9c7f1cee44fb445c00c5549e03b462e4">OSPF6_MESSAGE_END</a>(H)&#160;&#160;&#160;((caddr_t) (H) + ntohs ((H)-&gt;<a class="el" href="isis__pdu_8h.html#a64ed70bbcb4536e2af22a1aaf5209d18">length</a>))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#aca7fe538d9edb962ca47fbeec7e4bf6b">OSPF6_DBDESC_MSBIT</a>&#160;&#160;&#160;(0x01)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a6b4ff9c565893a42ee04d66d477b0802">OSPF6_DBDESC_MBIT</a>&#160;&#160;&#160;(0x02)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a1de1fec9c59c8037fa5f6cb5f8bf35cb">OSPF6_DBDESC_IBIT</a>&#160;&#160;&#160;(0x04)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#ab2ae44ae88443ee610b610c8bda325ef">ospf6_hello_print</a> (struct <a class="el" href="structospf6__header.html">ospf6_header</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a911d48d59a1903ced496a3f4225bbd9b">ospf6_dbdesc_print</a> (struct <a class="el" href="structospf6__header.html">ospf6_header</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#ac482f8e61bcf27540c78817ca51657e4">ospf6_lsreq_print</a> (struct <a class="el" href="structospf6__header.html">ospf6_header</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#ad6cc14a199d748b13d3aceaee598ad04">ospf6_lsupdate_print</a> (struct <a class="el" href="structospf6__header.html">ospf6_header</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#aa9c7522326cefb9b94473e3c435d061c">ospf6_lsack_print</a> (struct <a class="el" href="structospf6__header.html">ospf6_header</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#aaa8179b6bdd70e5cf3addee60df7aa80">ospf6_iobuf_size</a> (unsigned int size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a0e2dffe886aebfa4df64eb5ed857cca2">ospf6_receive</a> (struct <a class="el" href="structthread.html">thread</a> *<a class="el" href="structthread.html">thread</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a2e117804a7699187ffbbb2558cf3106a">ospf6_hello_send</a> (struct <a class="el" href="structthread.html">thread</a> *<a class="el" href="structthread.html">thread</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a42f57245d02e4581ca30fd1e5fc9a533">ospf6_dbdesc_send</a> (struct <a class="el" href="structthread.html">thread</a> *<a class="el" href="structthread.html">thread</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a695acafa16585e5fc57cd8c563b54c5e">ospf6_dbdesc_send_newone</a> (struct <a class="el" href="structthread.html">thread</a> *<a class="el" href="structthread.html">thread</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#af83f5687852b02777d049247cc518e8e">ospf6_lsreq_send</a> (struct <a class="el" href="structthread.html">thread</a> *<a class="el" href="structthread.html">thread</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a06554ad9592dbdbc0986c4de39f0c318">ospf6_lsupdate_send_interface</a> (struct <a class="el" href="structthread.html">thread</a> *<a class="el" href="structthread.html">thread</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a50608f7c51e0c039c4735781d1f66690">ospf6_lsupdate_send_neighbor</a> (struct <a class="el" href="structthread.html">thread</a> *<a class="el" href="structthread.html">thread</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a785542c289b9e000dac0b01b67630f29">ospf6_lsack_send_interface</a> (struct <a class="el" href="structthread.html">thread</a> *<a class="el" href="structthread.html">thread</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#abaeba7b19d1caad52e507bd228656385">ospf6_lsack_send_neighbor</a> (struct <a class="el" href="structthread.html">thread</a> *<a class="el" href="structthread.html">thread</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a4b3244df9af36f51089b6dedb7058354">config_write_ospf6_debug_message</a> (struct <a class="el" href="structvty.html">vty</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a5ca550936dac6d528e96deb2c7ee3037">install_element_ospf6_debug_message</a> (void)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a2248d2fb08366bd1206fa320f5de8c68">conf_debug_ospf6_message</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__message_8h.html#a64115ee539859d9f278938a96e2ce9b5">ospf6_message_type_str</a> []</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="af19e08ee4af94e2f413943d6c5145154"></a><!-- doxytag: member="ospf6_message.h::IS_OSPF6_DEBUG_MESSAGE" ref="af19e08ee4af94e2f413943d6c5145154" args="(t, e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_OSPF6_DEBUG_MESSAGE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="test-sig_8c.html#ab4ed0bba3292270af8ad67b45a21280d">t</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">e&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(<a class="el" href="ospf6__message_8h.html#a2248d2fb08366bd1206fa320f5de8c68">conf_debug_ospf6_message</a>[<a class="el" href="test-sig_8c.html#ab4ed0bba3292270af8ad67b45a21280d">t</a>] &amp; OSPF6_DEBUG_MESSAGE_ ## e)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00035">35</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1de1fec9c59c8037fa5f6cb5f8bf35cb"></a><!-- doxytag: member="ospf6_message.h::OSPF6_DBDESC_IBIT" ref="a1de1fec9c59c8037fa5f6cb5f8bf35cb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_DBDESC_IBIT&#160;&#160;&#160;(0x04)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00096">96</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6b4ff9c565893a42ee04d66d477b0802"></a><!-- doxytag: member="ospf6_message.h::OSPF6_DBDESC_MBIT" ref="a6b4ff9c565893a42ee04d66d477b0802" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_DBDESC_MBIT&#160;&#160;&#160;(0x02)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00095">95</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="aca7fe538d9edb962ca47fbeec7e4bf6b"></a><!-- doxytag: member="ospf6_message.h::OSPF6_DBDESC_MSBIT" ref="aca7fe538d9edb962ca47fbeec7e4bf6b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_DBDESC_MSBIT&#160;&#160;&#160;(0x01)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00094">94</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="af9e808b191d6b73f7b894853053b107d"></a><!-- doxytag: member="ospf6_message.h::OSPF6_DEBUG_MESSAGE_OFF" ref="af9e808b191d6b73f7b894853053b107d" args="(type, level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_DEBUG_MESSAGE_OFF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">level&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(<a class="el" href="ospf6__message_8h.html#a2248d2fb08366bd1206fa320f5de8c68">conf_debug_ospf6_message</a>[<a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>] &amp;= ~(level))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00033">33</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="a144709f2d4f2c2a9231aef33c08b9f3e"></a><!-- doxytag: member="ospf6_message.h::OSPF6_DEBUG_MESSAGE_ON" ref="a144709f2d4f2c2a9231aef33c08b9f3e" args="(type, level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_DEBUG_MESSAGE_ON</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">level&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(<a class="el" href="ospf6__message_8h.html#a2248d2fb08366bd1206fa320f5de8c68">conf_debug_ospf6_message</a>[<a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>] |= (level))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00031">31</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="a17ac12fc4c8b0d3634c0813ab0d80975"></a><!-- doxytag: member="ospf6_message.h::OSPF6_DEBUG_MESSAGE_RECV" ref="a17ac12fc4c8b0d3634c0813ab0d80975" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_DEBUG_MESSAGE_RECV&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00030">30</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa430a64d5e1493095599749d30cd8cab"></a><!-- doxytag: member="ospf6_message.h::OSPF6_DEBUG_MESSAGE_SEND" ref="aa430a64d5e1493095599749d30cd8cab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_DEBUG_MESSAGE_SEND&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00029">29</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3717aab1753d9bbecb60dbcf8d39d31d"></a><!-- doxytag: member="ospf6_message.h::OSPF6_MESSAGE_BUFSIZ" ref="a3717aab1753d9bbecb60dbcf8d39d31d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_MESSAGE_BUFSIZ&#160;&#160;&#160;4096</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00025">25</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9c7f1cee44fb445c00c5549e03b462e4"></a><!-- doxytag: member="ospf6_message.h::OSPF6_MESSAGE_END" ref="a9c7f1cee44fb445c00c5549e03b462e4" args="(H)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_MESSAGE_END</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">H</td><td>)</td>
          <td>&#160;&#160;&#160;((caddr_t) (H) + ntohs ((H)-&gt;<a class="el" href="isis__pdu_8h.html#a64ed70bbcb4536e2af22a1aaf5209d18">length</a>))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00067">67</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="aba04e21c291bce41cba66ddb73661883"></a><!-- doxytag: member="ospf6_message.h::OSPF6_MESSAGE_TYPE_ALL" ref="aba04e21c291bce41cba66ddb73661883" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_MESSAGE_TYPE_ALL&#160;&#160;&#160;0x6</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00045">45</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="a634c01ceae5ec0e2116bae9b19ddfed5"></a><!-- doxytag: member="ospf6_message.h::OSPF6_MESSAGE_TYPE_CANONICAL" ref="a634c01ceae5ec0e2116bae9b19ddfed5" args="(T)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_MESSAGE_TYPE_CANONICAL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="md5_8c.html#a7e83ec4daea14d9c3040af4e0ac30792">T</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="md5_8c.html#a7e83ec4daea14d9c3040af4e0ac30792">T</a>) &gt; OSPF6_MESSAGE_TYPE_LSACK ? OSPF6_MESSAGE_TYPE_UNKNOWN : (<a class="el" href="md5_8c.html#a7e83ec4daea14d9c3040af4e0ac30792">T</a>))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00047">47</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2bd43bbd6161d38b8361ae6d377b736a"></a><!-- doxytag: member="ospf6_message.h::OSPF6_MESSAGE_TYPE_DBDESC" ref="a2bd43bbd6161d38b8361ae6d377b736a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_MESSAGE_TYPE_DBDESC&#160;&#160;&#160;0x2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00041">41</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2bf7c8dd972224d5a8255986e52ea771"></a><!-- doxytag: member="ospf6_message.h::OSPF6_MESSAGE_TYPE_HELLO" ref="a2bf7c8dd972224d5a8255986e52ea771" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_MESSAGE_TYPE_HELLO&#160;&#160;&#160;0x1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00040">40</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="a19fd0641f70b0878b9ce5e7966c7ae73"></a><!-- doxytag: member="ospf6_message.h::OSPF6_MESSAGE_TYPE_LSACK" ref="a19fd0641f70b0878b9ce5e7966c7ae73" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_MESSAGE_TYPE_LSACK&#160;&#160;&#160;0x5</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00044">44</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="a685011318dd28abf2279e718803d4daa"></a><!-- doxytag: member="ospf6_message.h::OSPF6_MESSAGE_TYPE_LSREQ" ref="a685011318dd28abf2279e718803d4daa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_MESSAGE_TYPE_LSREQ&#160;&#160;&#160;0x3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00042">42</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac6f61e0ff8bcf71f99c6edc50ab9ca97"></a><!-- doxytag: member="ospf6_message.h::OSPF6_MESSAGE_TYPE_LSUPDATE" ref="ac6f61e0ff8bcf71f99c6edc50ab9ca97" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_MESSAGE_TYPE_LSUPDATE&#160;&#160;&#160;0x4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00043">43</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="a44665a9343d836ac8be80df1b0bcca14"></a><!-- doxytag: member="ospf6_message.h::OSPF6_MESSAGE_TYPE_NAME" ref="a44665a9343d836ac8be80df1b0bcca14" args="(T)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_MESSAGE_TYPE_NAME</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="md5_8c.html#a7e83ec4daea14d9c3040af4e0ac30792">T</a></td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="ospf6__message_8h.html#a64115ee539859d9f278938a96e2ce9b5">ospf6_message_type_str</a>[ OSPF6_MESSAGE_TYPE_CANONICAL (<a class="el" href="md5_8c.html#a7e83ec4daea14d9c3040af4e0ac30792">T</a>) ])</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00051">51</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<a class="anchor" id="aaec3a97f28d8b7cfcb2e0b6cb7ba06e3"></a><!-- doxytag: member="ospf6_message.h::OSPF6_MESSAGE_TYPE_UNKNOWN" ref="aaec3a97f28d8b7cfcb2e0b6cb7ba06e3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_MESSAGE_TYPE_UNKNOWN&#160;&#160;&#160;0x0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8h_source.html#l00039">39</a> of file <a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a4b3244df9af36f51089b6dedb7058354"></a><!-- doxytag: member="ospf6_message.h::config_write_ospf6_debug_message" ref="a4b3244df9af36f51089b6dedb7058354" args="(struct vty *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int config_write_ospf6_debug_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a5ca550936dac6d528e96deb2c7ee3037"></a><!-- doxytag: member="ospf6_message.h::install_element_ospf6_debug_message" ref="a5ca550936dac6d528e96deb2c7ee3037" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void install_element_ospf6_debug_message </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l02119">2119</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;debug_ospf6_message_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;no_debug_ospf6_message_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;debug_ospf6_message_sendrecv_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;no_debug_ospf6_message_sendrecv_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50754044f565f7421a152eaa411eebcc">CONFIG_NODE</a>, &amp;debug_ospf6_message_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50754044f565f7421a152eaa411eebcc">CONFIG_NODE</a>, &amp;no_debug_ospf6_message_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50754044f565f7421a152eaa411eebcc">CONFIG_NODE</a>, &amp;debug_ospf6_message_sendrecv_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50754044f565f7421a152eaa411eebcc">CONFIG_NODE</a>, &amp;no_debug_ospf6_message_sendrecv_cmd);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a911d48d59a1903ced496a3f4225bbd9b"></a><!-- doxytag: member="ospf6_message.h::ospf6_dbdesc_print" ref="a911d48d59a1903ced496a3f4225bbd9b" args="(struct ospf6_header *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_dbdesc_print </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__header.html">ospf6_header</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l00101">101</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__dbdesc.html">ospf6_dbdesc</a> *dbdesc;
  <span class="keywordtype">char</span> <a class="code" href="structospf6__dbdesc.html#af1290ef8a9bc29c30daa8568df7556e3">options</a>[16];
  <span class="keywordtype">char</span> *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

  <a class="code" href="ospf6__message_8c.html#a5b32ec41cd8e3534ecc2e602fef72589">ospf6_header_print</a> (oh);
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (oh-&gt;type == <a class="code" href="ospf6__message_8h.html#a2bd43bbd6161d38b8361ae6d377b736a">OSPF6_MESSAGE_TYPE_DBDESC</a>);

  dbdesc = (<span class="keyword">struct </span><a class="code" href="structospf6__dbdesc.html">ospf6_dbdesc</a> *)
    ((caddr_t) oh + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a>));

  <a class="code" href="ospf6__proto_8c.html#a70fba8cd2453bf33405c98ff2ff14a38">ospf6_options_printbuf</a> (dbdesc-&gt;<a class="code" href="structospf6__dbdesc.html#af1290ef8a9bc29c30daa8568df7556e3">options</a>, options, sizeof (options));

  <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;    MBZ: %#x Option: %s IfMTU: %hu&quot;</span>,
             dbdesc-&gt;<a class="code" href="structospf6__dbdesc.html#ae44ba120f5bb73e841410bf9c395eb44">reserved1</a>, options, ntohs (dbdesc-&gt;<a class="code" href="structospf6__dbdesc.html#a354af018af795ae987a64381168e6272">ifmtu</a>));
  <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;    MBZ: %#x Bits: %s%s%s SeqNum: %#lx&quot;</span>,
             dbdesc-&gt;<a class="code" href="structospf6__dbdesc.html#a051d6a8be42e57dfbf8119ee7411b27f">reserved2</a>,
             (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (dbdesc-&gt;<a class="code" href="structospf6__dbdesc.html#a873441f016471526c8c3516506de0f60">bits</a>, <a class="code" href="ospf6__message_8h.html#a1de1fec9c59c8037fa5f6cb5f8bf35cb">OSPF6_DBDESC_IBIT</a>) ? <span class="stringliteral">&quot;I&quot;</span> : <span class="stringliteral">&quot;-&quot;</span>),
             (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (dbdesc-&gt;<a class="code" href="structospf6__dbdesc.html#a873441f016471526c8c3516506de0f60">bits</a>, <a class="code" href="ospf6__message_8h.html#a6b4ff9c565893a42ee04d66d477b0802">OSPF6_DBDESC_MBIT</a>) ? <span class="stringliteral">&quot;M&quot;</span> : <span class="stringliteral">&quot;-&quot;</span>),
             (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (dbdesc-&gt;<a class="code" href="structospf6__dbdesc.html#a873441f016471526c8c3516506de0f60">bits</a>, <a class="code" href="ospf6__message_8h.html#aca7fe538d9edb962ca47fbeec7e4bf6b">OSPF6_DBDESC_MSBIT</a>) ? <span class="stringliteral">&quot;m&quot;</span> : <span class="stringliteral">&quot;s&quot;</span>),
             (u_long) ntohl (dbdesc-&gt;<a class="code" href="structospf6__dbdesc.html#ad7bdcd6eb854254824f0932e67834f16">seqnum</a>));

  <span class="keywordflow">for</span> (p = (<span class="keywordtype">char</span> *) ((caddr_t) dbdesc + <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__dbdesc.html">ospf6_dbdesc</a>));
       p + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>) &lt;= <a class="code" href="ospf6__message_8h.html#a9c7f1cee44fb445c00c5549e03b462e4">OSPF6_MESSAGE_END</a> (oh);
       p += <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>))
    <a class="code" href="ospf6__lsa_8c.html#a2b62fc9a6c54cec82d621993b4c83e82">ospf6_lsa_header_print_raw</a> ((struct <a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a> *) p);

  <span class="keywordflow">if</span> (p != <a class="code" href="ospf6__message_8h.html#a9c7f1cee44fb445c00c5549e03b462e4">OSPF6_MESSAGE_END</a> (oh))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Trailing garbage exists&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a42f57245d02e4581ca30fd1e5fc9a533"></a><!-- doxytag: member="ospf6_message.h::ospf6_dbdesc_send" ref="a42f57245d02e4581ca30fd1e5fc9a533" args="(struct thread *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf6_dbdesc_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l01425">1425</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *on;
  <span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a> *oh;
  <span class="keyword">struct </span><a class="code" href="structospf6__dbdesc.html">ospf6_dbdesc</a> *dbdesc;
  u_char *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa;

  on = (<span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *) <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (thread);
  on-&gt;<a class="code" href="structospf6__neighbor.html#a1a4c0c39a774eea8cd35f2f4d96f77b6">thread_send_dbdesc</a> = (<span class="keyword">struct </span>thread *) <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> &lt; <a class="code" href="ospf6__neighbor_8h.html#a127b580f45ab0c59d908b0a07c8b4574">OSPF6_NEIGHBOR_EXSTART</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__message_8h.html#af19e08ee4af94e2f413943d6c5145154">IS_OSPF6_DEBUG_MESSAGE</a> (<a class="code" href="ospf6__message_8h.html#a2bd43bbd6161d38b8361ae6d377b736a">OSPF6_MESSAGE_TYPE_DBDESC</a>, <a class="code" href="bgp__debug_8h.html#abc9603445bf79a3793831ee1d0ea8890">SEND</a>))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Quit to send DbDesc to neighbor %s state %s&quot;</span>,
            on-&gt;<a class="code" href="structospf6__neighbor.html#aa0ccec2f7b9c56628ce2e4a0bc37d463">name</a>, <a class="code" href="ospf6__neighbor_8c.html#aee78e9afc46a9acd2c77382df5760c03">ospf6_neighbor_state_str</a>[on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a>]);
      <span class="keywordflow">return</span> 0;
    }

  <span class="comment">/* set next thread if master */</span>
  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#ac15b90e0b312bdbd6fe1c95b1008b52a">dbdesc_bits</a>, <a class="code" href="ospf6__message_8h.html#aca7fe538d9edb962ca47fbeec7e4bf6b">OSPF6_DBDESC_MSBIT</a>))
    on-&gt;<a class="code" href="structospf6__neighbor.html#a1a4c0c39a774eea8cd35f2f4d96f77b6">thread_send_dbdesc</a> =
      <a class="code" href="thread_8h.html#aca77b3bbd166d3573de5ecd9756a590c">thread_add_timer</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#a42f57245d02e4581ca30fd1e5fc9a533">ospf6_dbdesc_send</a>, on,
                        on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a85d5e73751611ee20f1ad041a181cbde">rxmt_interval</a>);

  memset (<a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>, 0, <a class="code" href="ospf6__message_8c.html#a6380f44cc4b2ccf7824f9b60d42e09db">iobuflen</a>);
  oh = (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a> *) <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>;
  dbdesc = (<span class="keyword">struct </span><a class="code" href="structospf6__dbdesc.html">ospf6_dbdesc</a> *)((caddr_t) oh +
                                   <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a>));

  <span class="comment">/* if this is initial one, initialize sequence number for DbDesc */</span>
  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#ac15b90e0b312bdbd6fe1c95b1008b52a">dbdesc_bits</a>, <a class="code" href="ospf6__message_8h.html#a1de1fec9c59c8037fa5f6cb5f8bf35cb">OSPF6_DBDESC_IBIT</a>))
    {
      <span class="keyword">struct </span>timeval tv;
      <span class="keywordflow">if</span> (<a class="code" href="thread_8c.html#abf5861abe71d6f9a1ddd493be0218de1">quagga_gettime</a> (<a class="code" href="thread_8h.html#a64fff521e88ba8b01645c5bb89085b33a7f92aaa461f13c163b13f96085eb3cd9">QUAGGA_CLK_MONOTONIC</a>, &amp;tv) &lt; 0)
        tv.tv_sec = 1;
      on-&gt;<a class="code" href="structospf6__neighbor.html#ac1d6bfb88eaad876f48cbda9787f617b">dbdesc_seqnum</a> = tv.tv_sec;
    }

  dbdesc-&gt;<a class="code" href="structospf6__dbdesc.html#af1290ef8a9bc29c30daa8568df7556e3">options</a>[0] = on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a4ddb7d4da05f99266462914a8935c976">options</a>[0];
  dbdesc-&gt;<a class="code" href="structospf6__dbdesc.html#af1290ef8a9bc29c30daa8568df7556e3">options</a>[1] = on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a4ddb7d4da05f99266462914a8935c976">options</a>[1];
  dbdesc-&gt;<a class="code" href="structospf6__dbdesc.html#af1290ef8a9bc29c30daa8568df7556e3">options</a>[2] = on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a4ddb7d4da05f99266462914a8935c976">options</a>[2];
  dbdesc-&gt;<a class="code" href="structospf6__dbdesc.html#a354af018af795ae987a64381168e6272">ifmtu</a> = htons (on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a88579a4c38c3458d12425986c1a43893">ifmtu</a>);
  dbdesc-&gt;<a class="code" href="structospf6__dbdesc.html#a873441f016471526c8c3516506de0f60">bits</a> = on-&gt;<a class="code" href="structospf6__neighbor.html#ac15b90e0b312bdbd6fe1c95b1008b52a">dbdesc_bits</a>;
  dbdesc-&gt;<a class="code" href="structospf6__dbdesc.html#ad7bdcd6eb854254824f0932e67834f16">seqnum</a> = htonl (on-&gt;<a class="code" href="structospf6__neighbor.html#ac1d6bfb88eaad876f48cbda9787f617b">dbdesc_seqnum</a>);

  <span class="comment">/* if this is not initial one, set LSA headers in dbdesc */</span>
  p = (u_char *)((caddr_t) dbdesc + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__dbdesc.html">ospf6_dbdesc</a>));
  <span class="keywordflow">if</span> (! <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#ac15b90e0b312bdbd6fe1c95b1008b52a">dbdesc_bits</a>, <a class="code" href="ospf6__message_8h.html#a1de1fec9c59c8037fa5f6cb5f8bf35cb">OSPF6_DBDESC_IBIT</a>))
    {
      <span class="keywordflow">for</span> (lsa = <a class="code" href="ospf6__lsdb_8c.html#ab9d15a52a7be50c379748fe7ba91251f">ospf6_lsdb_head</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#a6f48add846713a088741ffa99ad6b1e6">dbdesc_list</a>); lsa;
           lsa = <a class="code" href="ospf6__lsdb_8c.html#a7fccfd842f6c1849beb8237ccca195d0">ospf6_lsdb_next</a> (lsa))
        {
          <a class="code" href="ospf6__lsa_8c.html#a801d1d70da30cca2f219992a62b0f0bc">ospf6_lsa_age_update_to_send</a> (lsa, on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a8332fa0bef3f650b9ce32c772c028437">transdelay</a>);

          <span class="comment">/* MTU check */</span>
          <span class="keywordflow">if</span> (p - <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a> + <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>) &gt;
              on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a88579a4c38c3458d12425986c1a43893">ifmtu</a>)
            {
              <a class="code" href="ospf6__lsa_8c.html#ae6a337ae60488897392e2ecaa480ea62">ospf6_lsa_unlock</a> (lsa);
              <span class="keywordflow">break</span>;
            }
          <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (p, lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>, sizeof (<span class="keyword">struct</span> <a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>));
          p += <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>);
        }
    }

  oh-&gt;<a class="code" href="structospf6__header.html#a4b423c1b25aafea7dd1e2a5780c57ddb">type</a> = <a class="code" href="ospf6__message_8h.html#a2bd43bbd6161d38b8361ae6d377b736a">OSPF6_MESSAGE_TYPE_DBDESC</a>;
  oh-&gt;<a class="code" href="structospf6__header.html#aef7496dd76d0c2eca889f7a9d01936ff">length</a> = htons (p - <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>);

  <a class="code" href="ospf6__message_8c.html#a872c5c0ebbeea4de643a1dec4b5c7d54">ospf6_send</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a8df3591fcba060b5f64e35dfdb338888">linklocal_addr</a>, &amp;on-&gt;<a class="code" href="structospf6__neighbor.html#a2b28434ae3a26d2a1e10fc30d4384920">linklocal_addr</a>,
              on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>, oh);
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a695acafa16585e5fc57cd8c563b54c5e"></a><!-- doxytag: member="ospf6_message.h::ospf6_dbdesc_send_newone" ref="a695acafa16585e5fc57cd8c563b54c5e" args="(struct thread *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf6_dbdesc_send_newone </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l01501">1501</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *on;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size = 0;

  on = (<span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *) <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (thread);
  <a class="code" href="ospf6__lsdb_8c.html#afe227d03e9560c745dd0ba9a901875b0">ospf6_lsdb_remove_all</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#a6f48add846713a088741ffa99ad6b1e6">dbdesc_list</a>);

  <span class="comment">/* move LSAs from summary_list to dbdesc_list (within neighbor structure)</span>
<span class="comment">     so that ospf6_send_dbdesc () can send those LSAs */</span>
  size = <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>) + sizeof (struct <a class="code" href="structospf6__dbdesc.html">ospf6_dbdesc</a>);
  <span class="keywordflow">for</span> (lsa = <a class="code" href="ospf6__lsdb_8c.html#ab9d15a52a7be50c379748fe7ba91251f">ospf6_lsdb_head</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#a10465c504ad56aefb723065acddc0b34">summary_list</a>); lsa;
       lsa = <a class="code" href="ospf6__lsdb_8c.html#a7fccfd842f6c1849beb8237ccca195d0">ospf6_lsdb_next</a> (lsa))
    {
      <span class="keywordflow">if</span> (size + <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>) &gt; on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a88579a4c38c3458d12425986c1a43893">ifmtu</a>)
        {
          <a class="code" href="ospf6__lsa_8c.html#ae6a337ae60488897392e2ecaa480ea62">ospf6_lsa_unlock</a> (lsa);
          <span class="keywordflow">break</span>;
        }

      <a class="code" href="ospf6__lsdb_8c.html#a0b328a0b2493e0e549d003f50003a199">ospf6_lsdb_add</a> (<a class="code" href="ospf6__lsa_8c.html#a98dc000e578715b010159ca0c5b38a07">ospf6_lsa_copy</a> (lsa), on-&gt;<a class="code" href="structospf6__neighbor.html#a6f48add846713a088741ffa99ad6b1e6">dbdesc_list</a>);
      <a class="code" href="ospf6__lsdb_8c.html#a57848d384aafd619bd84c654fb9ed146">ospf6_lsdb_remove</a> (lsa, on-&gt;<a class="code" href="structospf6__neighbor.html#a10465c504ad56aefb723065acddc0b34">summary_list</a>);
      size += <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>);
    }

  <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#a10465c504ad56aefb723065acddc0b34">summary_list</a>-&gt;<a class="code" href="structospf6__lsdb.html#aa9c852db97e2303379eacb9f82dfe456">count</a> == 0)
    <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#ac15b90e0b312bdbd6fe1c95b1008b52a">dbdesc_bits</a>, <a class="code" href="ospf6__message_8h.html#a6b4ff9c565893a42ee04d66d477b0802">OSPF6_DBDESC_MBIT</a>);

  <span class="comment">/* If slave, More bit check must be done here */</span>
  <span class="keywordflow">if</span> (! <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#ac15b90e0b312bdbd6fe1c95b1008b52a">dbdesc_bits</a>, <a class="code" href="ospf6__message_8h.html#aca7fe538d9edb962ca47fbeec7e4bf6b">OSPF6_DBDESC_MSBIT</a>) &amp;&amp; <span class="comment">/* Slave */</span>
      ! <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#a78fd4919e6c9e3d142210f5732696816">dbdesc_last</a>.<a class="code" href="structospf6__dbdesc.html#a873441f016471526c8c3516506de0f60">bits</a>, <a class="code" href="ospf6__message_8h.html#a6b4ff9c565893a42ee04d66d477b0802">OSPF6_DBDESC_MBIT</a>) &amp;&amp;
      ! <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#ac15b90e0b312bdbd6fe1c95b1008b52a">dbdesc_bits</a>, <a class="code" href="ospf6__message_8h.html#a6b4ff9c565893a42ee04d66d477b0802">OSPF6_DBDESC_MBIT</a>))
    <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__neighbor_8c.html#a74fd583c4b2b26c3ec3c39b30ab2c54d">exchange_done</a>, on, 0);

  <a class="code" href="thread_8h.html#adfc9185c89375a240b90ab50241c497d">thread_execute</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#a42f57245d02e4581ca30fd1e5fc9a533">ospf6_dbdesc_send</a>, on, 0);
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab2ae44ae88443ee610b610c8bda325ef"></a><!-- doxytag: member="ospf6_message.h::ospf6_hello_print" ref="ab2ae44ae88443ee610b610c8bda325ef" args="(struct ospf6_header *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_hello_print </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__header.html">ospf6_header</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l00065">65</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__hello.html">ospf6_hello</a> *hello;
  <span class="keywordtype">char</span> <a class="code" href="structospf6__hello.html#a565763d170eba38a2152a567aadbbf6f">options</a>[16];
  <span class="keywordtype">char</span> <a class="code" href="structospf6__hello.html#afb3b0ce9544783eb334693ff084e3e53">drouter</a>[16], <a class="code" href="structospf6__hello.html#a8f28e7af24bc5ec67f8e93ae10888f4f">bdrouter</a>[16], neighbor[16];
  <span class="keywordtype">char</span> *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

  <a class="code" href="ospf6__message_8c.html#a5b32ec41cd8e3534ecc2e602fef72589">ospf6_header_print</a> (oh);
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (oh-&gt;type == <a class="code" href="ospf6__message_8h.html#a2bf7c8dd972224d5a8255986e52ea771">OSPF6_MESSAGE_TYPE_HELLO</a>);

  hello = (<span class="keyword">struct </span><a class="code" href="structospf6__hello.html">ospf6_hello</a> *)
    ((caddr_t) oh + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a>));

  <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;hello-&gt;<a class="code" href="structospf6__hello.html#afb3b0ce9544783eb334693ff084e3e53">drouter</a>, drouter, sizeof (drouter));
  <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;hello-&gt;<a class="code" href="structospf6__hello.html#a8f28e7af24bc5ec67f8e93ae10888f4f">bdrouter</a>, bdrouter, sizeof (bdrouter));
  <a class="code" href="ospf6__proto_8c.html#a70fba8cd2453bf33405c98ff2ff14a38">ospf6_options_printbuf</a> (hello-&gt;<a class="code" href="structospf6__hello.html#a565763d170eba38a2152a567aadbbf6f">options</a>, options, sizeof (options));

  <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;    I/F-Id:%ld Priority:%d Option:%s&quot;</span>,
             (u_long) ntohl (hello-&gt;<a class="code" href="structospf6__hello.html#a2f7c26913d42af645dc312d90b771430">interface_id</a>), hello-&gt;<a class="code" href="structospf6__hello.html#a27d677bd81ca4bb5e3da0adcdc46616c">priority</a>, options);
  <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;    HelloInterval:%hu DeadInterval:%hu&quot;</span>,
             ntohs (hello-&gt;<a class="code" href="structospf6__hello.html#a061d5f19e3c9307df71c0294807e3ff9">hello_interval</a>), ntohs (hello-&gt;<a class="code" href="structospf6__hello.html#a1429ca752f62050f89d9c61f9052ad6d">dead_interval</a>));
  <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;    DR:%s BDR:%s&quot;</span>, drouter, bdrouter);

  <span class="keywordflow">for</span> (p = (<span class="keywordtype">char</span> *) ((caddr_t) hello + <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__hello.html">ospf6_hello</a>));
       p + <span class="keyword">sizeof</span> (u_int32_t) &lt;= <a class="code" href="ospf6__message_8h.html#a9c7f1cee44fb445c00c5549e03b462e4">OSPF6_MESSAGE_END</a> (oh);
       p += <span class="keyword">sizeof</span> (u_int32_t))
    {
      <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, (<span class="keywordtype">void</span> *) p, neighbor, <span class="keyword">sizeof</span> (neighbor));
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;    Neighbor: %s&quot;</span>, neighbor);
    }

  <span class="keywordflow">if</span> (p != <a class="code" href="ospf6__message_8h.html#a9c7f1cee44fb445c00c5549e03b462e4">OSPF6_MESSAGE_END</a> (oh))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Trailing garbage exists&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2e117804a7699187ffbbb2558cf3106a"></a><!-- doxytag: member="ospf6_message.h::ospf6_hello_send" ref="a2e117804a7699187ffbbb2558cf3106a" args="(struct thread *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf6_hello_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l01361">1361</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *oi;
  <span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a> *oh;
  <span class="keyword">struct </span><a class="code" href="structospf6__hello.html">ospf6_hello</a> *hello;
  u_char *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *on;

  oi = (<span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *) <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (thread);
  oi-&gt;<a class="code" href="structospf6__interface.html#a2166b82112542d46986c60ef49b36ce0">thread_send_hello</a> = (<span class="keyword">struct </span>thread *) <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> &lt;= <a class="code" href="ospf6__interface_8h.html#a49b579760cabb266eb7331686381fc51">OSPF6_INTERFACE_DOWN</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__message_8h.html#af19e08ee4af94e2f413943d6c5145154">IS_OSPF6_DEBUG_MESSAGE</a> (<a class="code" href="ospf6__message_8h.html#a2bf7c8dd972224d5a8255986e52ea771">OSPF6_MESSAGE_TYPE_HELLO</a>, <a class="code" href="bgp__debug_8h.html#abc9603445bf79a3793831ee1d0ea8890">SEND</a>))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Unable to send Hello on down interface %s&quot;</span>,
                   oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#a98cadce768ec5aacb4c5fc4ca2c3eaa8">name</a>);
      <span class="keywordflow">return</span> 0;
    }

  <span class="comment">/* set next thread */</span>
  oi-&gt;<a class="code" href="structospf6__interface.html#a2166b82112542d46986c60ef49b36ce0">thread_send_hello</a> = <a class="code" href="thread_8h.html#aca77b3bbd166d3573de5ecd9756a590c">thread_add_timer</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#a2e117804a7699187ffbbb2558cf3106a">ospf6_hello_send</a>,
                                            oi, oi-&gt;<a class="code" href="structospf6__interface.html#a361e7c155d93d4b4082a22d43f6da499">hello_interval</a>);

  memset (<a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>, 0, <a class="code" href="ospf6__message_8c.html#a6380f44cc4b2ccf7824f9b60d42e09db">iobuflen</a>);
  oh = (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a> *) <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>;
  hello = (<span class="keyword">struct </span><a class="code" href="structospf6__hello.html">ospf6_hello</a> *)((caddr_t) oh + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a>));

  hello-&gt;<a class="code" href="structospf6__hello.html#a2f7c26913d42af645dc312d90b771430">interface_id</a> = htonl (oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a>);
  hello-&gt;<a class="code" href="structospf6__hello.html#a27d677bd81ca4bb5e3da0adcdc46616c">priority</a> = oi-&gt;<a class="code" href="structospf6__interface.html#a91a541af8d7b9a9b224b2dbb768f4822">priority</a>;
  hello-&gt;<a class="code" href="structospf6__hello.html#a565763d170eba38a2152a567aadbbf6f">options</a>[0] = oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a4ddb7d4da05f99266462914a8935c976">options</a>[0];
  hello-&gt;<a class="code" href="structospf6__hello.html#a565763d170eba38a2152a567aadbbf6f">options</a>[1] = oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a4ddb7d4da05f99266462914a8935c976">options</a>[1];
  hello-&gt;<a class="code" href="structospf6__hello.html#a565763d170eba38a2152a567aadbbf6f">options</a>[2] = oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a4ddb7d4da05f99266462914a8935c976">options</a>[2];
  hello-&gt;<a class="code" href="structospf6__hello.html#a061d5f19e3c9307df71c0294807e3ff9">hello_interval</a> = htons (oi-&gt;<a class="code" href="structospf6__interface.html#a361e7c155d93d4b4082a22d43f6da499">hello_interval</a>);
  hello-&gt;<a class="code" href="structospf6__hello.html#a1429ca752f62050f89d9c61f9052ad6d">dead_interval</a> = htons (oi-&gt;<a class="code" href="structospf6__interface.html#abcdd28a392cf138d80f052c651e9236b">dead_interval</a>);
  hello-&gt;<a class="code" href="structospf6__hello.html#afb3b0ce9544783eb334693ff084e3e53">drouter</a> = oi-&gt;<a class="code" href="structospf6__interface.html#a5e0184b714337299cd1fa5ae9cc87eb0">drouter</a>;
  hello-&gt;<a class="code" href="structospf6__hello.html#a8f28e7af24bc5ec67f8e93ae10888f4f">bdrouter</a> = oi-&gt;<a class="code" href="structospf6__interface.html#a7b1736cd4740da2f26d27caf31983964">bdrouter</a>;

  p = (u_char *)((caddr_t) hello + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__hello.html">ospf6_hello</a>));

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (oi-&gt;<a class="code" href="structospf6__interface.html#ada404f0a64a2f3783445fdf2c2dccf6d">neighbor_list</a>, node, nnode, on))
    {
      <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> &lt; <a class="code" href="ospf6__neighbor_8h.html#aafc5ff11ba1a9aafe6a27792d1137a7e">OSPF6_NEIGHBOR_INIT</a>)
        <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (p - <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a> + <span class="keyword">sizeof</span> (u_int32_t) &gt; oi-&gt;<a class="code" href="structospf6__interface.html#a88579a4c38c3458d12425986c1a43893">ifmtu</a>)
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf6__message_8h.html#af19e08ee4af94e2f413943d6c5145154">IS_OSPF6_DEBUG_MESSAGE</a> (<a class="code" href="ospf6__message_8h.html#a2bf7c8dd972224d5a8255986e52ea771">OSPF6_MESSAGE_TYPE_HELLO</a>, <a class="code" href="bgp__debug_8h.html#abc9603445bf79a3793831ee1d0ea8890">SEND</a>))
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;sending Hello message: exceeds I/F MTU&quot;</span>);
          <span class="keywordflow">break</span>;
        }

      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (p, &amp;on-&gt;<a class="code" href="structospf6__neighbor.html#ac7e3045fcc29c1083d1b638fd64e07e0">router_id</a>, sizeof (u_int32_t));
      p += <span class="keyword">sizeof</span> (u_int32_t);
    }

  oh-&gt;<a class="code" href="structospf6__header.html#a4b423c1b25aafea7dd1e2a5780c57ddb">type</a> = <a class="code" href="ospf6__message_8h.html#a2bf7c8dd972224d5a8255986e52ea771">OSPF6_MESSAGE_TYPE_HELLO</a>;
  oh-&gt;<a class="code" href="structospf6__header.html#aef7496dd76d0c2eca889f7a9d01936ff">length</a> = htons (p - <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>);

  <a class="code" href="ospf6__message_8c.html#a872c5c0ebbeea4de643a1dec4b5c7d54">ospf6_send</a> (oi-&gt;<a class="code" href="structospf6__interface.html#a8df3591fcba060b5f64e35dfdb338888">linklocal_addr</a>, &amp;<a class="code" href="ospf6__network_8c.html#a8f18d0317b172f8e2b317e4583a16933">allspfrouters6</a>, oi, oh);
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaa8179b6bdd70e5cf3addee60df7aa80"></a><!-- doxytag: member="ospf6_message.h::ospf6_iobuf_size" ref="aaa8179b6bdd70e5cf3addee60df7aa80" args="(unsigned int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf6_iobuf_size </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l01141">1141</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  u_char *recvnew, *sendnew;

  <span class="keywordflow">if</span> (size &lt;= <a class="code" href="ospf6__message_8c.html#a6380f44cc4b2ccf7824f9b60d42e09db">iobuflen</a>)
    <span class="keywordflow">return</span> <a class="code" href="ospf6__message_8c.html#a6380f44cc4b2ccf7824f9b60d42e09db">iobuflen</a>;

  recvnew = <a class="code" href="memory_8h.html#a6491adf46c1d769b529a8f2f7d75f2fe">XMALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167babff91bcdac097452fdd222cc509ce39c">MTYPE_OSPF6_MESSAGE</a>, size);
  sendnew = <a class="code" href="memory_8h.html#a6491adf46c1d769b529a8f2f7d75f2fe">XMALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167babff91bcdac097452fdd222cc509ce39c">MTYPE_OSPF6_MESSAGE</a>, size);
  <span class="keywordflow">if</span> (recvnew == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || sendnew == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="keywordflow">if</span> (recvnew)
        <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167babff91bcdac097452fdd222cc509ce39c">MTYPE_OSPF6_MESSAGE</a>, recvnew);
      <span class="keywordflow">if</span> (sendnew)
        <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167babff91bcdac097452fdd222cc509ce39c">MTYPE_OSPF6_MESSAGE</a>, sendnew);
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Could not allocate I/O buffer of size %d.&quot;</span>, size);
      <span class="keywordflow">return</span> <a class="code" href="ospf6__message_8c.html#a6380f44cc4b2ccf7824f9b60d42e09db">iobuflen</a>;
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__message_8c.html#ab56560205eb1af494b28ca1bfd6af093">recvbuf</a>)
    <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167babff91bcdac097452fdd222cc509ce39c">MTYPE_OSPF6_MESSAGE</a>, <a class="code" href="ospf6__message_8c.html#ab56560205eb1af494b28ca1bfd6af093">recvbuf</a>);
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>)
    <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167babff91bcdac097452fdd222cc509ce39c">MTYPE_OSPF6_MESSAGE</a>, <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>);
  <a class="code" href="ospf6__message_8c.html#ab56560205eb1af494b28ca1bfd6af093">recvbuf</a> = recvnew;
  <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a> = sendnew;
  <a class="code" href="ospf6__message_8c.html#a6380f44cc4b2ccf7824f9b60d42e09db">iobuflen</a> = size;

  <span class="keywordflow">return</span> <a class="code" href="ospf6__message_8c.html#a6380f44cc4b2ccf7824f9b60d42e09db">iobuflen</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa9c7522326cefb9b94473e3c435d061c"></a><!-- doxytag: member="ospf6_message.h::ospf6_lsack_print" ref="aa9c7522326cefb9b94473e3c435d061c" args="(struct ospf6_header *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsack_print </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__header.html">ospf6_header</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l00211">211</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span> *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

  <a class="code" href="ospf6__message_8c.html#a5b32ec41cd8e3534ecc2e602fef72589">ospf6_header_print</a> (oh);
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (oh-&gt;type == <a class="code" href="ospf6__message_8h.html#a19fd0641f70b0878b9ce5e7966c7ae73">OSPF6_MESSAGE_TYPE_LSACK</a>);

  <span class="keywordflow">for</span> (p = (<span class="keywordtype">char</span> *) ((caddr_t) oh + <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__header.html">ospf6_header</a>));
       p + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>) &lt;= <a class="code" href="ospf6__message_8h.html#a9c7f1cee44fb445c00c5549e03b462e4">OSPF6_MESSAGE_END</a> (oh);
       p += <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>))
    <a class="code" href="ospf6__lsa_8c.html#a2b62fc9a6c54cec82d621993b4c83e82">ospf6_lsa_header_print_raw</a> ((struct <a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a> *) p);

  <span class="keywordflow">if</span> (p != <a class="code" href="ospf6__message_8h.html#a9c7f1cee44fb445c00c5549e03b462e4">OSPF6_MESSAGE_END</a> (oh))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Trailing garbage exists&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a785542c289b9e000dac0b01b67630f29"></a><!-- doxytag: member="ospf6_message.h::ospf6_lsack_send_interface" ref="a785542c289b9e000dac0b01b67630f29" args="(struct thread *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf6_lsack_send_interface </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l01841">1841</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *oi;
  <span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a> *oh;
  u_char *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa;

  oi = (<span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *) <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (thread);
  oi-&gt;<a class="code" href="structospf6__interface.html#ac0eb96a5b6f4d1b1d63aa5c0208a7680">thread_send_lsack</a> = (<span class="keyword">struct </span>thread *) <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> &lt;= <a class="code" href="ospf6__interface_8h.html#a7af1b8c38ed1a44f1b883d25f8c851e2">OSPF6_INTERFACE_WAITING</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__message_8h.html#af19e08ee4af94e2f413943d6c5145154">IS_OSPF6_DEBUG_MESSAGE</a> (<a class="code" href="ospf6__message_8h.html#a19fd0641f70b0878b9ce5e7966c7ae73">OSPF6_MESSAGE_TYPE_LSACK</a>, <a class="code" href="bgp__debug_8h.html#abc9603445bf79a3793831ee1d0ea8890">SEND</a>))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Quit to send LSAck to interface %s state %s&quot;</span>,
            oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#a98cadce768ec5aacb4c5fc4ca2c3eaa8">name</a>, <a class="code" href="ospf6__interface_8c.html#ae87e59ecae5232da2543307cd88795b8">ospf6_interface_state_str</a>[oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a>]);
      <span class="keywordflow">return</span> 0;
    }

  <span class="comment">/* if we have nothing to send, return */</span>
  <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#a3a27876455af04270cf1ff5392f5ced3">lsack_list</a>-&gt;<a class="code" href="structospf6__lsdb.html#aa9c852db97e2303379eacb9f82dfe456">count</a> == 0)
    <span class="keywordflow">return</span> 0;

  memset (<a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>, 0, <a class="code" href="ospf6__message_8c.html#a6380f44cc4b2ccf7824f9b60d42e09db">iobuflen</a>);
  oh = (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a> *) <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>;

  p = (u_char *)((caddr_t) oh + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a>));

  <span class="keywordflow">for</span> (lsa = <a class="code" href="ospf6__lsdb_8c.html#ab9d15a52a7be50c379748fe7ba91251f">ospf6_lsdb_head</a> (oi-&gt;<a class="code" href="structospf6__interface.html#a3a27876455af04270cf1ff5392f5ced3">lsack_list</a>); lsa;
       lsa = <a class="code" href="ospf6__lsdb_8c.html#a7fccfd842f6c1849beb8237ccca195d0">ospf6_lsdb_next</a> (lsa))
    {
      <span class="comment">/* MTU check */</span>
      <span class="keywordflow">if</span> (p - <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a> + <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>) &gt; oi-&gt;<a class="code" href="structospf6__interface.html#a88579a4c38c3458d12425986c1a43893">ifmtu</a>)
        {
          <span class="comment">/* if we run out of packet size/space here,</span>
<span class="comment">             better to try again soon. */</span>
          <a class="code" href="thread_8h.html#a7e1de4fc338e4feae498978461742dbb">THREAD_OFF</a> (oi-&gt;<a class="code" href="structospf6__interface.html#ac0eb96a5b6f4d1b1d63aa5c0208a7680">thread_send_lsack</a>);
          oi-&gt;<a class="code" href="structospf6__interface.html#ac0eb96a5b6f4d1b1d63aa5c0208a7680">thread_send_lsack</a> =
            <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#a785542c289b9e000dac0b01b67630f29">ospf6_lsack_send_interface</a>, oi, 0);

          <a class="code" href="ospf6__lsa_8c.html#ae6a337ae60488897392e2ecaa480ea62">ospf6_lsa_unlock</a> (lsa);
          <span class="keywordflow">break</span>;
        }

      <a class="code" href="ospf6__lsa_8c.html#a801d1d70da30cca2f219992a62b0f0bc">ospf6_lsa_age_update_to_send</a> (lsa, oi-&gt;<a class="code" href="structospf6__interface.html#a8332fa0bef3f650b9ce32c772c028437">transdelay</a>);
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (p, lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>, sizeof (<span class="keyword">struct</span> <a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>));
      p += <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>);

      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad5cc6db207dcf7791b2b17f7e3132dc5">lock</a> == 2);
      <a class="code" href="ospf6__lsdb_8c.html#a57848d384aafd619bd84c654fb9ed146">ospf6_lsdb_remove</a> (lsa, oi-&gt;<a class="code" href="structospf6__interface.html#a3a27876455af04270cf1ff5392f5ced3">lsack_list</a>);
    }

  oh-&gt;<a class="code" href="structospf6__header.html#a4b423c1b25aafea7dd1e2a5780c57ddb">type</a> = <a class="code" href="ospf6__message_8h.html#a19fd0641f70b0878b9ce5e7966c7ae73">OSPF6_MESSAGE_TYPE_LSACK</a>;
  oh-&gt;<a class="code" href="structospf6__header.html#aef7496dd76d0c2eca889f7a9d01936ff">length</a> = htons (p - <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>);

  <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> == <a class="code" href="ospf6__interface_8h.html#ad83f536f4674c165d7f393d28f087843">OSPF6_INTERFACE_DR</a> ||
      oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> == <a class="code" href="ospf6__interface_8h.html#ad0b8da8f1b2db8ec33b43b223b114d51">OSPF6_INTERFACE_BDR</a>)
    <a class="code" href="ospf6__message_8c.html#a872c5c0ebbeea4de643a1dec4b5c7d54">ospf6_send</a> (oi-&gt;<a class="code" href="structospf6__interface.html#a8df3591fcba060b5f64e35dfdb338888">linklocal_addr</a>, &amp;<a class="code" href="ospf6__network_8c.html#a8f18d0317b172f8e2b317e4583a16933">allspfrouters6</a>, oi, oh);
  <span class="keywordflow">else</span>
    <a class="code" href="ospf6__message_8c.html#a872c5c0ebbeea4de643a1dec4b5c7d54">ospf6_send</a> (oi-&gt;<a class="code" href="structospf6__interface.html#a8df3591fcba060b5f64e35dfdb338888">linklocal_addr</a>, &amp;<a class="code" href="ospf6__network_8c.html#a09927a6bc76695ca91bbd7a8e3e1beae">alldrouters6</a>, oi, oh);

  <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#ac0eb96a5b6f4d1b1d63aa5c0208a7680">thread_send_lsack</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; oi-&gt;<a class="code" href="structospf6__interface.html#a3a27876455af04270cf1ff5392f5ced3">lsack_list</a>-&gt;<a class="code" href="structospf6__lsdb.html#aa9c852db97e2303379eacb9f82dfe456">count</a> &gt; 0)
    {
      oi-&gt;<a class="code" href="structospf6__interface.html#ac0eb96a5b6f4d1b1d63aa5c0208a7680">thread_send_lsack</a> =
        <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#a785542c289b9e000dac0b01b67630f29">ospf6_lsack_send_interface</a>, oi, 0);
    }

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abaeba7b19d1caad52e507bd228656385"></a><!-- doxytag: member="ospf6_message.h::ospf6_lsack_send_neighbor" ref="abaeba7b19d1caad52e507bd228656385" args="(struct thread *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf6_lsack_send_neighbor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l01781">1781</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *on;
  <span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a> *oh;
  u_char *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa;

  on = (<span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *) <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (thread);
  on-&gt;<a class="code" href="structospf6__neighbor.html#a3efe4e76725c8138916061f7fbeccd0b">thread_send_lsack</a> = (<span class="keyword">struct </span>thread *) <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> &lt; <a class="code" href="ospf6__neighbor_8h.html#afa0419c15460d1d703d2b3cfa7859984">OSPF6_NEIGHBOR_EXCHANGE</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__message_8h.html#af19e08ee4af94e2f413943d6c5145154">IS_OSPF6_DEBUG_MESSAGE</a> (<a class="code" href="ospf6__message_8h.html#a19fd0641f70b0878b9ce5e7966c7ae73">OSPF6_MESSAGE_TYPE_LSACK</a>, <a class="code" href="bgp__debug_8h.html#abc9603445bf79a3793831ee1d0ea8890">SEND</a>))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Quit to send LSAck to neighbor %s state %s&quot;</span>,
            on-&gt;<a class="code" href="structospf6__neighbor.html#aa0ccec2f7b9c56628ce2e4a0bc37d463">name</a>, <a class="code" href="ospf6__neighbor_8c.html#aee78e9afc46a9acd2c77382df5760c03">ospf6_neighbor_state_str</a>[on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a>]);
      <span class="keywordflow">return</span> 0;
    }

  <span class="comment">/* if we have nothing to send, return */</span>
  <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#ae027726d4952b94fd753b700bd4b7dee">lsack_list</a>-&gt;<a class="code" href="structospf6__lsdb.html#aa9c852db97e2303379eacb9f82dfe456">count</a> == 0)
    <span class="keywordflow">return</span> 0;

  memset (<a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>, 0, <a class="code" href="ospf6__message_8c.html#a6380f44cc4b2ccf7824f9b60d42e09db">iobuflen</a>);
  oh = (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a> *) <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>;

  p = (u_char *)((caddr_t) oh + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a>));

  <span class="keywordflow">for</span> (lsa = <a class="code" href="ospf6__lsdb_8c.html#ab9d15a52a7be50c379748fe7ba91251f">ospf6_lsdb_head</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#ae027726d4952b94fd753b700bd4b7dee">lsack_list</a>); lsa;
       lsa = <a class="code" href="ospf6__lsdb_8c.html#a7fccfd842f6c1849beb8237ccca195d0">ospf6_lsdb_next</a> (lsa))
    {
      <span class="comment">/* MTU check */</span>
      <span class="keywordflow">if</span> (p - <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a> + <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>) &gt; on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a88579a4c38c3458d12425986c1a43893">ifmtu</a>)
        {
          <span class="comment">/* if we run out of packet size/space here,</span>
<span class="comment">             better to try again soon. */</span>
          <a class="code" href="thread_8h.html#a7e1de4fc338e4feae498978461742dbb">THREAD_OFF</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#a3efe4e76725c8138916061f7fbeccd0b">thread_send_lsack</a>);
          on-&gt;<a class="code" href="structospf6__neighbor.html#a3efe4e76725c8138916061f7fbeccd0b">thread_send_lsack</a> =
            <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#abaeba7b19d1caad52e507bd228656385">ospf6_lsack_send_neighbor</a>, on, 0);

          <a class="code" href="ospf6__lsa_8c.html#ae6a337ae60488897392e2ecaa480ea62">ospf6_lsa_unlock</a> (lsa);
          <span class="keywordflow">break</span>;
        }

      <a class="code" href="ospf6__lsa_8c.html#a801d1d70da30cca2f219992a62b0f0bc">ospf6_lsa_age_update_to_send</a> (lsa, on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a8332fa0bef3f650b9ce32c772c028437">transdelay</a>);
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (p, lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>, sizeof (<span class="keyword">struct</span> <a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>));
      p += <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>);

      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad5cc6db207dcf7791b2b17f7e3132dc5">lock</a> == 2);
      <a class="code" href="ospf6__lsdb_8c.html#a57848d384aafd619bd84c654fb9ed146">ospf6_lsdb_remove</a> (lsa, on-&gt;<a class="code" href="structospf6__neighbor.html#ae027726d4952b94fd753b700bd4b7dee">lsack_list</a>);
    }

  oh-&gt;<a class="code" href="structospf6__header.html#a4b423c1b25aafea7dd1e2a5780c57ddb">type</a> = <a class="code" href="ospf6__message_8h.html#a19fd0641f70b0878b9ce5e7966c7ae73">OSPF6_MESSAGE_TYPE_LSACK</a>;
  oh-&gt;<a class="code" href="structospf6__header.html#aef7496dd76d0c2eca889f7a9d01936ff">length</a> = htons (p - <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>);

  <a class="code" href="ospf6__message_8c.html#a872c5c0ebbeea4de643a1dec4b5c7d54">ospf6_send</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a8df3591fcba060b5f64e35dfdb338888">linklocal_addr</a>, &amp;on-&gt;<a class="code" href="structospf6__neighbor.html#a2b28434ae3a26d2a1e10fc30d4384920">linklocal_addr</a>,
              on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>, oh);
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac482f8e61bcf27540c78817ca51657e4"></a><!-- doxytag: member="ospf6_message.h::ospf6_lsreq_print" ref="ac482f8e61bcf27540c78817ca51657e4" args="(struct ospf6_header *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsreq_print </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__header.html">ospf6_header</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l00134">134</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span> <span class="keywordtype">id</span>[16], <a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>[16];
  <span class="keywordtype">char</span> *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

  <a class="code" href="ospf6__message_8c.html#a5b32ec41cd8e3534ecc2e602fef72589">ospf6_header_print</a> (oh);
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (oh-&gt;type == <a class="code" href="ospf6__message_8h.html#a685011318dd28abf2279e718803d4daa">OSPF6_MESSAGE_TYPE_LSREQ</a>);

  <span class="keywordflow">for</span> (p = (<span class="keywordtype">char</span> *) ((caddr_t) oh + <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__header.html">ospf6_header</a>));
       p + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsreq__entry.html">ospf6_lsreq_entry</a>) &lt;= <a class="code" href="ospf6__message_8h.html#a9c7f1cee44fb445c00c5549e03b462e4">OSPF6_MESSAGE_END</a> (oh);
       p += <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsreq__entry.html">ospf6_lsreq_entry</a>))
    {
      <span class="keyword">struct </span><a class="code" href="structospf6__lsreq__entry.html">ospf6_lsreq_entry</a> *e = (<span class="keyword">struct </span><a class="code" href="structospf6__lsreq__entry.html">ospf6_lsreq_entry</a> *) p;
      <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;e-&gt;adv_router, adv_router, sizeof (adv_router));
      <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET, &amp;e-&gt;id, <span class="keywordtype">id</span>, sizeof (<span class="keywordtype">id</span>));
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;    [%s Id:%s Adv:%s]&quot;</span>,
                 <a class="code" href="ospf6__lsa_8c.html#aef56342b1e39d23bf9977353c1c2deb1">ospf6_lstype_name</a> (e-&gt;type), <span class="keywordtype">id</span>, adv_router);
    }

  <span class="keywordflow">if</span> (p != <a class="code" href="ospf6__message_8h.html#a9c7f1cee44fb445c00c5549e03b462e4">OSPF6_MESSAGE_END</a> (oh))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Trailing garbage exists&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af83f5687852b02777d049247cc518e8e"></a><!-- doxytag: member="ospf6_message.h::ospf6_lsreq_send" ref="af83f5687852b02777d049247cc518e8e" args="(struct thread *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf6_lsreq_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l01541">1541</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *on;
  <span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a> *oh;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsreq__entry.html">ospf6_lsreq_entry</a> *e;
  u_char *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa;

  on = (<span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *) <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (thread);
  on-&gt;<a class="code" href="structospf6__neighbor.html#a645f58ca5b6b428ae7ae616bc4781f51">thread_send_lsreq</a> = (<span class="keyword">struct </span>thread *) <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="comment">/* LSReq will be sent only in ExStart or Loading */</span>
  <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> != <a class="code" href="ospf6__neighbor_8h.html#afa0419c15460d1d703d2b3cfa7859984">OSPF6_NEIGHBOR_EXCHANGE</a> &amp;&amp;
      on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> != <a class="code" href="ospf6__neighbor_8h.html#aa50b6edd6d1268220ae4e13b2fef14e8">OSPF6_NEIGHBOR_LOADING</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__message_8h.html#af19e08ee4af94e2f413943d6c5145154">IS_OSPF6_DEBUG_MESSAGE</a> (<a class="code" href="ospf6__message_8h.html#a685011318dd28abf2279e718803d4daa">OSPF6_MESSAGE_TYPE_LSREQ</a>, <a class="code" href="bgp__debug_8h.html#abc9603445bf79a3793831ee1d0ea8890">SEND</a>))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Quit to send LSReq to neighbor %s state %s&quot;</span>,
            on-&gt;<a class="code" href="structospf6__neighbor.html#aa0ccec2f7b9c56628ce2e4a0bc37d463">name</a>, <a class="code" href="ospf6__neighbor_8c.html#aee78e9afc46a9acd2c77382df5760c03">ospf6_neighbor_state_str</a>[on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a>]);
      <span class="keywordflow">return</span> 0;
    }

  <span class="comment">/* schedule loading_done if request list is empty */</span>
  <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#a1e0692790f663381e86374ed0e829f95">request_list</a>-&gt;<a class="code" href="structospf6__lsdb.html#aa9c852db97e2303379eacb9f82dfe456">count</a> == 0)
    {
      <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__neighbor_8c.html#affe0ecf0ece70b2d797c3efc0cfe62d8">loading_done</a>, on, 0);
      <span class="keywordflow">return</span> 0;
    }

  <span class="comment">/* set next thread */</span>
  on-&gt;<a class="code" href="structospf6__neighbor.html#a645f58ca5b6b428ae7ae616bc4781f51">thread_send_lsreq</a> =
    <a class="code" href="thread_8h.html#aca77b3bbd166d3573de5ecd9756a590c">thread_add_timer</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#af83f5687852b02777d049247cc518e8e">ospf6_lsreq_send</a>, on,
                      on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a85d5e73751611ee20f1ad041a181cbde">rxmt_interval</a>);

  memset (<a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>, 0, <a class="code" href="ospf6__message_8c.html#a6380f44cc4b2ccf7824f9b60d42e09db">iobuflen</a>);
  oh = (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a> *) <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>;

  <span class="comment">/* set Request entries in lsreq */</span>
  p = (u_char *)((caddr_t) oh + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a>));
  <span class="keywordflow">for</span> (lsa = <a class="code" href="ospf6__lsdb_8c.html#ab9d15a52a7be50c379748fe7ba91251f">ospf6_lsdb_head</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#a1e0692790f663381e86374ed0e829f95">request_list</a>); lsa;
       lsa = <a class="code" href="ospf6__lsdb_8c.html#a7fccfd842f6c1849beb8237ccca195d0">ospf6_lsdb_next</a> (lsa))
    {
      <span class="comment">/* MTU check */</span>
      <span class="keywordflow">if</span> (p - <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a> + <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__lsreq__entry.html">ospf6_lsreq_entry</a>) &gt; on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a88579a4c38c3458d12425986c1a43893">ifmtu</a>)
        {
          <a class="code" href="ospf6__lsa_8c.html#ae6a337ae60488897392e2ecaa480ea62">ospf6_lsa_unlock</a> (lsa);
          <span class="keywordflow">break</span>;
        }

      e = (<span class="keyword">struct </span><a class="code" href="structospf6__lsreq__entry.html">ospf6_lsreq_entry</a> *) p;
      e-&gt;<a class="code" href="structospf6__lsreq__entry.html#a09dbf8da910d21427e70dc809ecdbdee">type</a> = lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>;
      e-&gt;<a class="code" href="structospf6__lsreq__entry.html#aba0c6eedec677748c8e48ddd6d6e3924">id</a> = lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>;
      e-&gt;<a class="code" href="structospf6__lsreq__entry.html#a61084665841c7716a614d48361de8b4f">adv_router</a> = lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>;
      p += <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsreq__entry.html">ospf6_lsreq_entry</a>);
    }

  oh-&gt;<a class="code" href="structospf6__header.html#a4b423c1b25aafea7dd1e2a5780c57ddb">type</a> = <a class="code" href="ospf6__message_8h.html#a685011318dd28abf2279e718803d4daa">OSPF6_MESSAGE_TYPE_LSREQ</a>;
  oh-&gt;<a class="code" href="structospf6__header.html#aef7496dd76d0c2eca889f7a9d01936ff">length</a> = htons (p - <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>);

  <a class="code" href="ospf6__message_8c.html#a872c5c0ebbeea4de643a1dec4b5c7d54">ospf6_send</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a8df3591fcba060b5f64e35dfdb338888">linklocal_addr</a>, &amp;on-&gt;<a class="code" href="structospf6__neighbor.html#a2b28434ae3a26d2a1e10fc30d4384920">linklocal_addr</a>,
              on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>, oh);
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad6cc14a199d748b13d3aceaee598ad04"></a><!-- doxytag: member="ospf6_message.h::ospf6_lsupdate_print" ref="ad6cc14a199d748b13d3aceaee598ad04" args="(struct ospf6_header *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsupdate_print </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__header.html">ospf6_header</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l00158">158</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsupdate.html">ospf6_lsupdate</a> *lsupdate;
  u_long <a class="code" href="bgp__open_8h.html#ab4570498c4316aa5f7b4852c778b3320">num</a>;
  <span class="keywordtype">char</span> *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

  <a class="code" href="ospf6__message_8c.html#a5b32ec41cd8e3534ecc2e602fef72589">ospf6_header_print</a> (oh);
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (oh-&gt;type == <a class="code" href="ospf6__message_8h.html#ac6f61e0ff8bcf71f99c6edc50ab9ca97">OSPF6_MESSAGE_TYPE_LSUPDATE</a>);

  lsupdate = (<span class="keyword">struct </span><a class="code" href="structospf6__lsupdate.html">ospf6_lsupdate</a> *)
    ((caddr_t) oh + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a>));

  num = ntohl (lsupdate-&gt;<a class="code" href="structospf6__lsupdate.html#ad78c6309d7425390af712e6bba8ce78f">lsa_number</a>);
  <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;    Number of LSA: %ld&quot;</span>, num);

  <span class="keywordflow">for</span> (p = (<span class="keywordtype">char</span> *) ((caddr_t) lsupdate + <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__lsupdate.html">ospf6_lsupdate</a>));
       p &lt; <a class="code" href="ospf6__message_8h.html#a9c7f1cee44fb445c00c5549e03b462e4">OSPF6_MESSAGE_END</a> (oh) &amp;&amp;
       p + <a class="code" href="ospf6__lsa_8h.html#af20378c406bcfdfa9dde9213c2ceb684">OSPF6_LSA_SIZE</a> (p) &lt;= <a class="code" href="ospf6__message_8h.html#a9c7f1cee44fb445c00c5549e03b462e4">OSPF6_MESSAGE_END</a> (oh);
       p += <a class="code" href="ospf6__lsa_8h.html#af20378c406bcfdfa9dde9213c2ceb684">OSPF6_LSA_SIZE</a> (p))
    {
      <a class="code" href="ospf6__lsa_8c.html#a2b62fc9a6c54cec82d621993b4c83e82">ospf6_lsa_header_print_raw</a> ((<span class="keyword">struct</span> <a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a> *) p);
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#af20378c406bcfdfa9dde9213c2ceb684">OSPF6_LSA_SIZE</a> (p) &lt; <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__lsa__header.html">ospf6_lsa_header</a>))
        {
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;    Malformed LSA length, quit printing&quot;</span>);
          <span class="keywordflow">break</span>;
        }
    }

  <span class="keywordflow">if</span> (p != <a class="code" href="ospf6__message_8h.html#a9c7f1cee44fb445c00c5549e03b462e4">OSPF6_MESSAGE_END</a> (oh))
    {
      <span class="keywordtype">char</span> buf[32];

      <span class="keywordtype">int</span> num = 0;
      memset (buf, 0, <span class="keyword">sizeof</span> (buf));

      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;    Trailing garbage exists&quot;</span>);
      <span class="keywordflow">while</span> (p &lt; <a class="code" href="ospf6__message_8h.html#a9c7f1cee44fb445c00c5549e03b462e4">OSPF6_MESSAGE_END</a> (oh))
        {
          <a class="code" href="str_8c.html#ad76145a6edfc98981ded8815a760e0cd">snprintf</a> (buf, <span class="keyword">sizeof</span> (buf), <span class="stringliteral">&quot;%s %2x&quot;</span>, buf, *p++);
          num++;
          <span class="keywordflow">if</span> (num == 8)
            {
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;    %s&quot;</span>, buf);
              memset (buf, 0, <span class="keyword">sizeof</span> (buf));
              num = 0;
            }
        }
      <span class="keywordflow">if</span> (num)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;    %s&quot;</span>, buf);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a06554ad9592dbdbc0986c4de39f0c318"></a><!-- doxytag: member="ospf6_message.h::ospf6_lsupdate_send_interface" ref="a06554ad9592dbdbc0986c4de39f0c318" args="(struct thread *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf6_lsupdate_send_interface </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l01708">1708</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *oi;
  <span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a> *oh;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsupdate.html">ospf6_lsupdate</a> *lsupdate;
  u_char *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keywordtype">int</span> <a class="code" href="bgp__open_8h.html#ab4570498c4316aa5f7b4852c778b3320">num</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa;

  oi = (<span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *) <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (thread);
  oi-&gt;<a class="code" href="structospf6__interface.html#a0f7c7a7f0611d03b12361b0cf0b7cba6">thread_send_lsupdate</a> = (<span class="keyword">struct </span>thread *) <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> &lt;= <a class="code" href="ospf6__interface_8h.html#a7af1b8c38ed1a44f1b883d25f8c851e2">OSPF6_INTERFACE_WAITING</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__message_8h.html#af19e08ee4af94e2f413943d6c5145154">IS_OSPF6_DEBUG_MESSAGE</a> (<a class="code" href="ospf6__message_8h.html#ac6f61e0ff8bcf71f99c6edc50ab9ca97">OSPF6_MESSAGE_TYPE_LSUPDATE</a>, <a class="code" href="bgp__debug_8h.html#abc9603445bf79a3793831ee1d0ea8890">SEND</a>))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Quit to send LSUpdate to interface %s state %s&quot;</span>,
            oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#a98cadce768ec5aacb4c5fc4ca2c3eaa8">name</a>, <a class="code" href="ospf6__interface_8c.html#ae87e59ecae5232da2543307cd88795b8">ospf6_interface_state_str</a>[oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a>]);
      <span class="keywordflow">return</span> 0;
    }

  <span class="comment">/* if we have nothing to send, return */</span>
  <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#a42c393a90f856992c87da5a9d0607f98">lsupdate_list</a>-&gt;<a class="code" href="structospf6__lsdb.html#aa9c852db97e2303379eacb9f82dfe456">count</a> == 0)
    <span class="keywordflow">return</span> 0;

  memset (<a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>, 0, <a class="code" href="ospf6__message_8c.html#a6380f44cc4b2ccf7824f9b60d42e09db">iobuflen</a>);
  oh = (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a> *) <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>;
  lsupdate = (<span class="keyword">struct </span><a class="code" href="structospf6__lsupdate.html">ospf6_lsupdate</a> *)((caddr_t) oh +
                                       <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a>));

  p = (u_char *)((caddr_t) lsupdate + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsupdate.html">ospf6_lsupdate</a>));
  num = 0;

  <span class="keywordflow">for</span> (lsa = <a class="code" href="ospf6__lsdb_8c.html#ab9d15a52a7be50c379748fe7ba91251f">ospf6_lsdb_head</a> (oi-&gt;<a class="code" href="structospf6__interface.html#a42c393a90f856992c87da5a9d0607f98">lsupdate_list</a>); lsa;
       lsa = <a class="code" href="ospf6__lsdb_8c.html#a7fccfd842f6c1849beb8237ccca195d0">ospf6_lsdb_next</a> (lsa))
    {
      <span class="comment">/* MTU check */</span>
      <span class="keywordflow">if</span> ( (p - <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a> + ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="ospf6__lsa_8h.html#af20378c406bcfdfa9dde9213c2ceb684">OSPF6_LSA_SIZE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>)))
          &gt; oi-&gt;<a class="code" href="structospf6__interface.html#a88579a4c38c3458d12425986c1a43893">ifmtu</a>)
        {
          <a class="code" href="ospf6__lsa_8c.html#ae6a337ae60488897392e2ecaa480ea62">ospf6_lsa_unlock</a> (lsa);
          <span class="keywordflow">break</span>;
        }

      <a class="code" href="ospf6__lsa_8c.html#a801d1d70da30cca2f219992a62b0f0bc">ospf6_lsa_age_update_to_send</a> (lsa, oi-&gt;<a class="code" href="structospf6__interface.html#a8332fa0bef3f650b9ce32c772c028437">transdelay</a>);
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (p, lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>, <a class="code" href="ospf6__lsa_8h.html#af20378c406bcfdfa9dde9213c2ceb684">OSPF6_LSA_SIZE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>));
      p += <a class="code" href="ospf6__lsa_8h.html#af20378c406bcfdfa9dde9213c2ceb684">OSPF6_LSA_SIZE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>);
      num++;

      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad5cc6db207dcf7791b2b17f7e3132dc5">lock</a> == 2);
      <a class="code" href="ospf6__lsdb_8c.html#a57848d384aafd619bd84c654fb9ed146">ospf6_lsdb_remove</a> (lsa, oi-&gt;<a class="code" href="structospf6__interface.html#a42c393a90f856992c87da5a9d0607f98">lsupdate_list</a>);
    }

  lsupdate-&gt;<a class="code" href="structospf6__lsupdate.html#ad78c6309d7425390af712e6bba8ce78f">lsa_number</a> = htonl (num);

  oh-&gt;<a class="code" href="structospf6__header.html#a4b423c1b25aafea7dd1e2a5780c57ddb">type</a> = <a class="code" href="ospf6__message_8h.html#ac6f61e0ff8bcf71f99c6edc50ab9ca97">OSPF6_MESSAGE_TYPE_LSUPDATE</a>;
  oh-&gt;<a class="code" href="structospf6__header.html#aef7496dd76d0c2eca889f7a9d01936ff">length</a> = htons (p - <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>);

  <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> == <a class="code" href="ospf6__interface_8h.html#ad83f536f4674c165d7f393d28f087843">OSPF6_INTERFACE_DR</a> ||
      oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> == <a class="code" href="ospf6__interface_8h.html#ad0b8da8f1b2db8ec33b43b223b114d51">OSPF6_INTERFACE_BDR</a>)
    <a class="code" href="ospf6__message_8c.html#a872c5c0ebbeea4de643a1dec4b5c7d54">ospf6_send</a> (oi-&gt;<a class="code" href="structospf6__interface.html#a8df3591fcba060b5f64e35dfdb338888">linklocal_addr</a>, &amp;<a class="code" href="ospf6__network_8c.html#a8f18d0317b172f8e2b317e4583a16933">allspfrouters6</a>, oi, oh);
  <span class="keywordflow">else</span>
    <a class="code" href="ospf6__message_8c.html#a872c5c0ebbeea4de643a1dec4b5c7d54">ospf6_send</a> (oi-&gt;<a class="code" href="structospf6__interface.html#a8df3591fcba060b5f64e35dfdb338888">linklocal_addr</a>, &amp;<a class="code" href="ospf6__network_8c.html#a09927a6bc76695ca91bbd7a8e3e1beae">alldrouters6</a>, oi, oh);

  <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#a42c393a90f856992c87da5a9d0607f98">lsupdate_list</a>-&gt;<a class="code" href="structospf6__lsdb.html#aa9c852db97e2303379eacb9f82dfe456">count</a> &gt; 0)
    {
      oi-&gt;<a class="code" href="structospf6__interface.html#a0f7c7a7f0611d03b12361b0cf0b7cba6">thread_send_lsupdate</a> =
        <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#a06554ad9592dbdbc0986c4de39f0c318">ospf6_lsupdate_send_interface</a>, oi, 0);
    }

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a50608f7c51e0c039c4735781d1f66690"></a><!-- doxytag: member="ospf6_message.h::ospf6_lsupdate_send_neighbor" ref="a50608f7c51e0c039c4735781d1f66690" args="(struct thread *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf6_lsupdate_send_neighbor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l01605">1605</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *on;
  <span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a> *oh;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsupdate.html">ospf6_lsupdate</a> *lsupdate;
  u_char *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keywordtype">int</span> <a class="code" href="bgp__open_8h.html#ab4570498c4316aa5f7b4852c778b3320">num</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa;

  on = (<span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *) <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (thread);
  on-&gt;<a class="code" href="structospf6__neighbor.html#ac7e6540e3ce6bd90bc1603a529648a86">thread_send_lsupdate</a> = (<span class="keyword">struct </span>thread *) <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__message_8h.html#af19e08ee4af94e2f413943d6c5145154">IS_OSPF6_DEBUG_MESSAGE</a> (<a class="code" href="ospf6__message_8h.html#ac6f61e0ff8bcf71f99c6edc50ab9ca97">OSPF6_MESSAGE_TYPE_LSUPDATE</a>, <a class="code" href="bgp__debug_8h.html#abc9603445bf79a3793831ee1d0ea8890">SEND</a>))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSUpdate to neighbor %s&quot;</span>, on-&gt;<a class="code" href="structospf6__neighbor.html#aa0ccec2f7b9c56628ce2e4a0bc37d463">name</a>);

  <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> &lt; <a class="code" href="ospf6__neighbor_8h.html#afa0419c15460d1d703d2b3cfa7859984">OSPF6_NEIGHBOR_EXCHANGE</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__message_8h.html#af19e08ee4af94e2f413943d6c5145154">IS_OSPF6_DEBUG_MESSAGE</a> (<a class="code" href="ospf6__message_8h.html#ac6f61e0ff8bcf71f99c6edc50ab9ca97">OSPF6_MESSAGE_TYPE_LSUPDATE</a>, <a class="code" href="bgp__debug_8h.html#abc9603445bf79a3793831ee1d0ea8890">SEND</a>))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Quit to send (neighbor state %s)&quot;</span>,
            <a class="code" href="ospf6__neighbor_8c.html#aee78e9afc46a9acd2c77382df5760c03">ospf6_neighbor_state_str</a>[on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a>]);
      <span class="keywordflow">return</span> 0;
    }

  <span class="comment">/* if we have nothing to send, return */</span>
  <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#ac3f142375bf4e9e7c8e54daed55b4ca4">lsupdate_list</a>-&gt;<a class="code" href="structospf6__lsdb.html#aa9c852db97e2303379eacb9f82dfe456">count</a> == 0 &amp;&amp;
      on-&gt;<a class="code" href="structospf6__neighbor.html#a6e96ad2f82d2741e769bc179d35e583f">retrans_list</a>-&gt;<a class="code" href="structospf6__lsdb.html#aa9c852db97e2303379eacb9f82dfe456">count</a> == 0)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__message_8h.html#af19e08ee4af94e2f413943d6c5145154">IS_OSPF6_DEBUG_MESSAGE</a> (<a class="code" href="ospf6__message_8h.html#ac6f61e0ff8bcf71f99c6edc50ab9ca97">OSPF6_MESSAGE_TYPE_LSUPDATE</a>, <a class="code" href="bgp__debug_8h.html#abc9603445bf79a3793831ee1d0ea8890">SEND</a>))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Quit to send (nothing to send)&quot;</span>);
      <span class="keywordflow">return</span> 0;
    }

  memset (<a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>, 0, <a class="code" href="ospf6__message_8c.html#a6380f44cc4b2ccf7824f9b60d42e09db">iobuflen</a>);
  oh = (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a> *) <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>;
  lsupdate = (<span class="keyword">struct </span><a class="code" href="structospf6__lsupdate.html">ospf6_lsupdate</a> *)
    ((caddr_t) oh + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a>));

  p = (u_char *)((caddr_t) lsupdate + <span class="keyword">sizeof</span> (<span class="keyword">struct </span><a class="code" href="structospf6__lsupdate.html">ospf6_lsupdate</a>));
  num = 0;

  <span class="comment">/* lsupdate_list lists those LSA which doesn&#39;t need to be</span>
<span class="comment">     retransmitted. remove those from the list */</span>
  <span class="keywordflow">for</span> (lsa = <a class="code" href="ospf6__lsdb_8c.html#ab9d15a52a7be50c379748fe7ba91251f">ospf6_lsdb_head</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#ac3f142375bf4e9e7c8e54daed55b4ca4">lsupdate_list</a>); lsa;
       lsa = <a class="code" href="ospf6__lsdb_8c.html#a7fccfd842f6c1849beb8237ccca195d0">ospf6_lsdb_next</a> (lsa))
    {
      <span class="comment">/* MTU check */</span>
      <span class="keywordflow">if</span> ( (p - <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a> + (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="ospf6__lsa_8h.html#af20378c406bcfdfa9dde9213c2ceb684">OSPF6_LSA_SIZE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>))
          &gt; on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a88579a4c38c3458d12425986c1a43893">ifmtu</a>)
        {
          <a class="code" href="ospf6__lsa_8c.html#ae6a337ae60488897392e2ecaa480ea62">ospf6_lsa_unlock</a> (lsa);
          <span class="keywordflow">break</span>;
        }

      <a class="code" href="ospf6__lsa_8c.html#a801d1d70da30cca2f219992a62b0f0bc">ospf6_lsa_age_update_to_send</a> (lsa, on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a8332fa0bef3f650b9ce32c772c028437">transdelay</a>);
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (p, lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>, <a class="code" href="ospf6__lsa_8h.html#af20378c406bcfdfa9dde9213c2ceb684">OSPF6_LSA_SIZE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>));
      p += <a class="code" href="ospf6__lsa_8h.html#af20378c406bcfdfa9dde9213c2ceb684">OSPF6_LSA_SIZE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>);
      num++;

      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad5cc6db207dcf7791b2b17f7e3132dc5">lock</a> == 2);
      <a class="code" href="ospf6__lsdb_8c.html#a57848d384aafd619bd84c654fb9ed146">ospf6_lsdb_remove</a> (lsa, on-&gt;<a class="code" href="structospf6__neighbor.html#ac3f142375bf4e9e7c8e54daed55b4ca4">lsupdate_list</a>);
    }

  <span class="keywordflow">for</span> (lsa = <a class="code" href="ospf6__lsdb_8c.html#ab9d15a52a7be50c379748fe7ba91251f">ospf6_lsdb_head</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#a6e96ad2f82d2741e769bc179d35e583f">retrans_list</a>); lsa;
       lsa = <a class="code" href="ospf6__lsdb_8c.html#a7fccfd842f6c1849beb8237ccca195d0">ospf6_lsdb_next</a> (lsa))
    {
      <span class="comment">/* MTU check */</span>
      <span class="keywordflow">if</span> ( (p - <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a> + (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="ospf6__lsa_8h.html#af20378c406bcfdfa9dde9213c2ceb684">OSPF6_LSA_SIZE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>))
          &gt; on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a88579a4c38c3458d12425986c1a43893">ifmtu</a>)
        {
          <a class="code" href="ospf6__lsa_8c.html#ae6a337ae60488897392e2ecaa480ea62">ospf6_lsa_unlock</a> (lsa);
          <span class="keywordflow">break</span>;
        }

      <a class="code" href="ospf6__lsa_8c.html#a801d1d70da30cca2f219992a62b0f0bc">ospf6_lsa_age_update_to_send</a> (lsa, on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a8332fa0bef3f650b9ce32c772c028437">transdelay</a>);
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (p, lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>, <a class="code" href="ospf6__lsa_8h.html#af20378c406bcfdfa9dde9213c2ceb684">OSPF6_LSA_SIZE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>));
      p += <a class="code" href="ospf6__lsa_8h.html#af20378c406bcfdfa9dde9213c2ceb684">OSPF6_LSA_SIZE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>);
      num++;
    }

  lsupdate-&gt;<a class="code" href="structospf6__lsupdate.html#ad78c6309d7425390af712e6bba8ce78f">lsa_number</a> = htonl (num);

  oh-&gt;<a class="code" href="structospf6__header.html#a4b423c1b25aafea7dd1e2a5780c57ddb">type</a> = <a class="code" href="ospf6__message_8h.html#ac6f61e0ff8bcf71f99c6edc50ab9ca97">OSPF6_MESSAGE_TYPE_LSUPDATE</a>;
  oh-&gt;<a class="code" href="structospf6__header.html#aef7496dd76d0c2eca889f7a9d01936ff">length</a> = htons (p - <a class="code" href="ospf6__message_8c.html#a2e27ffe2dae02f181d73b709cf8fcf9f">sendbuf</a>);

  <a class="code" href="ospf6__message_8c.html#a872c5c0ebbeea4de643a1dec4b5c7d54">ospf6_send</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a8df3591fcba060b5f64e35dfdb338888">linklocal_addr</a>, &amp;on-&gt;<a class="code" href="structospf6__neighbor.html#a2b28434ae3a26d2a1e10fc30d4384920">linklocal_addr</a>,
              on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>, oh);

  <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#ac3f142375bf4e9e7c8e54daed55b4ca4">lsupdate_list</a>-&gt;<a class="code" href="structospf6__lsdb.html#aa9c852db97e2303379eacb9f82dfe456">count</a> != 0 ||
      on-&gt;<a class="code" href="structospf6__neighbor.html#a6e96ad2f82d2741e769bc179d35e583f">retrans_list</a>-&gt;<a class="code" href="structospf6__lsdb.html#aa9c852db97e2303379eacb9f82dfe456">count</a> != 0)
    {
      <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#ac3f142375bf4e9e7c8e54daed55b4ca4">lsupdate_list</a>-&gt;<a class="code" href="structospf6__lsdb.html#aa9c852db97e2303379eacb9f82dfe456">count</a> != 0)
        on-&gt;<a class="code" href="structospf6__neighbor.html#ac7e6540e3ce6bd90bc1603a529648a86">thread_send_lsupdate</a> =
          <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#a50608f7c51e0c039c4735781d1f66690">ospf6_lsupdate_send_neighbor</a>, on, 0);
      <span class="keywordflow">else</span>
        on-&gt;<a class="code" href="structospf6__neighbor.html#ac7e6540e3ce6bd90bc1603a529648a86">thread_send_lsupdate</a> =
          <a class="code" href="thread_8h.html#aca77b3bbd166d3573de5ecd9756a590c">thread_add_timer</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#a50608f7c51e0c039c4735781d1f66690">ospf6_lsupdate_send_neighbor</a>, on,
                            on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a85d5e73751611ee20f1ad041a181cbde">rxmt_interval</a>);
    }

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0e2dffe886aebfa4df64eb5ed857cca2"></a><!-- doxytag: member="ospf6_message.h::ospf6_receive" ref="a0e2dffe886aebfa4df64eb5ed857cca2" args="(struct thread *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf6_receive </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l01172">1172</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> sockfd;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len;
  <span class="keywordtype">char</span> srcname[64], dstname[64];
  <span class="keyword">struct </span>in6_addr src, dst;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ifindex;
  <span class="keyword">struct </span>iovec iovector[2];
  <span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *oi;
  <span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a> *oh;

  <span class="comment">/* add next read thread */</span>
  sockfd = <a class="code" href="thread_8h.html#a89bd56f991717646441f9dffc010d4f5">THREAD_FD</a> (thread);
  <a class="code" href="thread_8h.html#abd1714f11834a150c84b040c0c69b620">thread_add_read</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#a0e2dffe886aebfa4df64eb5ed857cca2">ospf6_receive</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, sockfd);

  <span class="comment">/* initialize */</span>
  memset (&amp;src, 0, <span class="keyword">sizeof</span> (src));
  memset (&amp;dst, 0, <span class="keyword">sizeof</span> (dst));
  ifindex = 0;
  memset (<a class="code" href="ospf6__message_8c.html#ab56560205eb1af494b28ca1bfd6af093">recvbuf</a>, 0, <a class="code" href="ospf6__message_8c.html#a6380f44cc4b2ccf7824f9b60d42e09db">iobuflen</a>);
  iovector[0].iov_base = <a class="code" href="ospf6__message_8c.html#ab56560205eb1af494b28ca1bfd6af093">recvbuf</a>;
  iovector[0].iov_len = <a class="code" href="ospf6__message_8c.html#a6380f44cc4b2ccf7824f9b60d42e09db">iobuflen</a>;
  iovector[1].iov_base = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  iovector[1].iov_len = 0;

  <span class="comment">/* receive message */</span>
  len = <a class="code" href="ospf6__network_8c.html#a357f81a31d3a457d3b841de3d778d089">ospf6_recvmsg</a> (&amp;src, &amp;dst, &amp;ifindex, iovector);
  <span class="keywordflow">if</span> (len &gt; <a class="code" href="ospf6__message_8c.html#a6380f44cc4b2ccf7824f9b60d42e09db">iobuflen</a>)
    {
      <a class="code" href="log_8h.html#aaf50b52a949696adb9e77153b08545ad">zlog_err</a> (<span class="stringliteral">&quot;Excess message read&quot;</span>);
      <span class="keywordflow">return</span> 0;
    }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (len &lt; <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__header.html">ospf6_header</a>))
    {
      <a class="code" href="log_8h.html#aaf50b52a949696adb9e77153b08545ad">zlog_err</a> (<span class="stringliteral">&quot;Deficient message read&quot;</span>);
      <span class="keywordflow">return</span> 0;
    }

  oi = <a class="code" href="ospf6__interface_8c.html#a10eb67c1323348e19f16ea82827d284f">ospf6_interface_lookup_by_ifindex</a> (ifindex);
  <span class="keywordflow">if</span> (oi == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || oi-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Message received on disabled interface&quot;</span>);
      <span class="keywordflow">return</span> 0;
    }

  oh = (<span class="keyword">struct </span><a class="code" href="structospf6__header.html">ospf6_header</a> *) <a class="code" href="ospf6__message_8c.html#ab56560205eb1af494b28ca1bfd6af093">recvbuf</a>;

  <span class="comment">/* Log */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__message_8h.html#af19e08ee4af94e2f413943d6c5145154">IS_OSPF6_DEBUG_MESSAGE</a> (oh-&gt;<a class="code" href="structospf6__header.html#a4b423c1b25aafea7dd1e2a5780c57ddb">type</a>, <a class="code" href="bgp__debug_8h.html#a5c3976553336476b6fea4108b844ecf2">RECV</a>))
    {
      <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET6, &amp;src, srcname, <span class="keyword">sizeof</span> (srcname));
      <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET6, &amp;dst, dstname, <span class="keyword">sizeof</span> (dstname));
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;%s received on %s&quot;</span>,
                 <a class="code" href="ospf6__message_8h.html#a44665a9343d836ac8be80df1b0bcca14">OSPF6_MESSAGE_TYPE_NAME</a> (oh-&gt;<a class="code" href="structospf6__header.html#a4b423c1b25aafea7dd1e2a5780c57ddb">type</a>), oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#a98cadce768ec5aacb4c5fc4ca2c3eaa8">name</a>);
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;    src: %s&quot;</span>, srcname);
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;    dst: %s&quot;</span>, dstname);
      <span class="keywordflow">if</span> (len != ntohs (oh-&gt;<a class="code" href="structospf6__header.html#aef7496dd76d0c2eca889f7a9d01936ff">length</a>))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Message length does not match actually received: %d&quot;</span>, len);

      <span class="keywordflow">switch</span> (oh-&gt;<a class="code" href="structospf6__header.html#a4b423c1b25aafea7dd1e2a5780c57ddb">type</a>)
        {
          <span class="keywordflow">case</span> <a class="code" href="ospf6__message_8h.html#a2bf7c8dd972224d5a8255986e52ea771">OSPF6_MESSAGE_TYPE_HELLO</a>:
            <a class="code" href="ospf6__message_8c.html#adfbd2808619eaf4b4a9f264083b1ae2e">ospf6_hello_print</a> (oh);
            <span class="keywordflow">break</span>;
          <span class="keywordflow">case</span> <a class="code" href="ospf6__message_8h.html#a2bd43bbd6161d38b8361ae6d377b736a">OSPF6_MESSAGE_TYPE_DBDESC</a>:
            <a class="code" href="ospf6__message_8c.html#a4c3079cef10f2def25c83cc3cdf0c00f">ospf6_dbdesc_print</a> (oh);
            <span class="keywordflow">break</span>;
          <span class="keywordflow">case</span> <a class="code" href="ospf6__message_8h.html#a685011318dd28abf2279e718803d4daa">OSPF6_MESSAGE_TYPE_LSREQ</a>:
            <a class="code" href="ospf6__message_8c.html#ac0a6a0ccb7a4c9ab4e1c5ddef8f64882">ospf6_lsreq_print</a> (oh);
            <span class="keywordflow">break</span>;
          <span class="keywordflow">case</span> <a class="code" href="ospf6__message_8h.html#ac6f61e0ff8bcf71f99c6edc50ab9ca97">OSPF6_MESSAGE_TYPE_LSUPDATE</a>:
            <a class="code" href="ospf6__message_8c.html#a2e75752b675b33464d036ca1c53e598e">ospf6_lsupdate_print</a> (oh);
            <span class="keywordflow">break</span>;
          <span class="keywordflow">case</span> <a class="code" href="ospf6__message_8h.html#a19fd0641f70b0878b9ce5e7966c7ae73">OSPF6_MESSAGE_TYPE_LSACK</a>:
            <a class="code" href="ospf6__message_8c.html#a1868994aede5b9077bf9c7231f4f458d">ospf6_lsack_print</a> (oh);
            <span class="keywordflow">break</span>;
          <span class="keywordflow">default</span>:
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Unknown message&quot;</span>);
            <span class="keywordflow">break</span>;
        }
    }

  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (oi-&gt;<a class="code" href="structospf6__interface.html#aa5dbc797ed38482907f57c66458a3e87">flag</a>, <a class="code" href="ospf6__interface_8h.html#aeb4543177500f2d71c28f91a47154e25">OSPF6_INTERFACE_PASSIVE</a>))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__message_8h.html#af19e08ee4af94e2f413943d6c5145154">IS_OSPF6_DEBUG_MESSAGE</a> (oh-&gt;<a class="code" href="structospf6__header.html#a4b423c1b25aafea7dd1e2a5780c57ddb">type</a>, <a class="code" href="bgp__debug_8h.html#a5c3976553336476b6fea4108b844ecf2">RECV</a>))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Ignore message on passive interface %s&quot;</span>,
                   oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#a98cadce768ec5aacb4c5fc4ca2c3eaa8">name</a>);
      <span class="keywordflow">return</span> 0;
    }

  <span class="keywordflow">switch</span> (oh-&gt;<a class="code" href="structospf6__header.html#a4b423c1b25aafea7dd1e2a5780c57ddb">type</a>)
    {
      <span class="keywordflow">case</span> <a class="code" href="ospf6__message_8h.html#a2bf7c8dd972224d5a8255986e52ea771">OSPF6_MESSAGE_TYPE_HELLO</a>:
        <a class="code" href="ospf6__message_8c.html#a5c0be22f247d1d1d8b030955e4261636">ospf6_hello_recv</a> (&amp;src, &amp;dst, oi, oh);
        <span class="keywordflow">break</span>;

      <span class="keywordflow">case</span> <a class="code" href="ospf6__message_8h.html#a2bd43bbd6161d38b8361ae6d377b736a">OSPF6_MESSAGE_TYPE_DBDESC</a>:
        <a class="code" href="ospf6__message_8c.html#aa40c2de125d4e0b32180d9f9e383f83e">ospf6_dbdesc_recv</a> (&amp;src, &amp;dst, oi, oh);
        <span class="keywordflow">break</span>;

      <span class="keywordflow">case</span> <a class="code" href="ospf6__message_8h.html#a685011318dd28abf2279e718803d4daa">OSPF6_MESSAGE_TYPE_LSREQ</a>:
        <a class="code" href="ospf6__message_8c.html#a1b8b158280907094de85c2192c17f6a3">ospf6_lsreq_recv</a> (&amp;src, &amp;dst, oi, oh);
        <span class="keywordflow">break</span>;

      <span class="keywordflow">case</span> <a class="code" href="ospf6__message_8h.html#ac6f61e0ff8bcf71f99c6edc50ab9ca97">OSPF6_MESSAGE_TYPE_LSUPDATE</a>:
        <a class="code" href="ospf6__message_8c.html#a07373ca9b500e004a857c4d3e20551cd">ospf6_lsupdate_recv</a> (&amp;src, &amp;dst, oi, oh);
        <span class="keywordflow">break</span>;

      <span class="keywordflow">case</span> <a class="code" href="ospf6__message_8h.html#a19fd0641f70b0878b9ce5e7966c7ae73">OSPF6_MESSAGE_TYPE_LSACK</a>:
        <a class="code" href="ospf6__message_8c.html#a02c40333d763f545c0e65f76592b3868">ospf6_lsack_recv</a> (&amp;src, &amp;dst, oi, oh);
        <span class="keywordflow">break</span>;

      <span class="keywordflow">default</span>:
        <span class="keywordflow">if</span> (<a class="code" href="ospf6__message_8h.html#af19e08ee4af94e2f413943d6c5145154">IS_OSPF6_DEBUG_MESSAGE</a> (<a class="code" href="ospf6__message_8h.html#aaec3a97f28d8b7cfcb2e0b6cb7ba06e3">OSPF6_MESSAGE_TYPE_UNKNOWN</a>, <a class="code" href="bgp__debug_8h.html#a5c3976553336476b6fea4108b844ecf2">RECV</a>))
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Unknown message&quot;</span>);
        <span class="keywordflow">break</span>;
    }

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a2248d2fb08366bd1206fa320f5de8c68"></a><!-- doxytag: member="ospf6_message.h::conf_debug_ospf6_message" ref="a2248d2fb08366bd1206fa320f5de8c68" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char <a class="el" href="ospf6__message_8h.html#a2248d2fb08366bd1206fa320f5de8c68">conf_debug_ospf6_message</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l00045">45</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>

</div>
</div>
<a class="anchor" id="a64115ee539859d9f278938a96e2ce9b5"></a><!-- doxytag: member="ospf6_message.h::ospf6_message_type_str" ref="a64115ee539859d9f278938a96e2ce9b5" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="ospf6__message_8h.html#a64115ee539859d9f278938a96e2ce9b5">ospf6_message_type_str</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__message_8c_source.html#l00046">46</a> of file <a class="el" href="ospf6__message_8c_source.html">ospf6_message.c</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="ospf6__message_8h.html">ospf6_message.h</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:27 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
