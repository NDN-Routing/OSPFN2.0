<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: ospf6d/ospf6_lsdb.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('ospf6__lsdb_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ospf6d/ospf6_lsdb.h File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="prefix_8h_source.html">prefix.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="table_8h_source.html">table.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ospf6_lsdb.h:</div>
<div class="dyncontent">
<div class="center"><img src="ospf6__lsdb_8h__incl.png" border="0" usemap="#ospf6d_2ospf6__lsdb_8h" alt=""/></div>
<map name="ospf6d_2ospf6__lsdb_8h" id="ospf6d_2ospf6__lsdb_8h">
<area shape="rect" id="node3" href="prefix_8h.html" title="prefix.h" alt="" coords="18,80,85,107"/><area shape="rect" id="node7" href="table_8h.html" title="table.h" alt="" coords="111,80,175,107"/><area shape="rect" id="node5" href="sockunion_8h.html" title="sockunion.h" alt="" coords="5,155,99,181"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ospf6__lsdb_8h__dep__incl.png" border="0" usemap="#ospf6d_2ospf6__lsdb_8hdep" alt=""/></div>
<map name="ospf6d_2ospf6__lsdb_8hdep" id="ospf6d_2ospf6__lsdb_8hdep">
<area shape="rect" id="node3" href="ospf6__abr_8c.html" title="ospf6d/ospf6_abr.c" alt="" coords="5,80,144,107"/><area shape="rect" id="node5" href="ospf6__area_8c.html" title="ospf6d/ospf6_area.c" alt="" coords="169,80,313,107"/><area shape="rect" id="node7" href="ospf6__asbr_8c.html" title="ospf6d/ospf6_asbr.c" alt="" coords="338,80,483,107"/><area shape="rect" id="node9" href="ospf6__flood_8c.html" title="ospf6d/ospf6_flood.c" alt="" coords="507,80,657,107"/><area shape="rect" id="node11" href="ospf6__interface_8c.html" title="ospf6d/ospf6_interface.c" alt="" coords="682,80,853,107"/><area shape="rect" id="node13" href="ospf6__intra_8c.html" title="ospf6d/ospf6_intra.c" alt="" coords="878,80,1023,107"/><area shape="rect" id="node15" href="ospf6__lsa_8c.html" title="ospf6d/ospf6_lsa.c" alt="" coords="1048,80,1184,107"/><area shape="rect" id="node17" href="ospf6__lsdb_8c.html" title="ospf6d/ospf6_lsdb.c" alt="" coords="1209,80,1353,107"/><area shape="rect" id="node19" href="ospf6__message_8c.html" title="ospf6d/ospf6_message.c" alt="" coords="1378,80,1552,107"/><area shape="rect" id="node21" href="ospf6__neighbor_8c.html" title="ospf6d/ospf6_neighbor.c" alt="" coords="1577,80,1748,107"/><area shape="rect" id="node23" href="ospf6__route_8c.html" title="ospf6d/ospf6_route.c" alt="" coords="1773,80,1923,107"/><area shape="rect" id="node25" href="ospf6__spf_8c.html" title="ospf6d/ospf6_spf.c" alt="" coords="1948,80,2087,107"/><area shape="rect" id="node27" href="ospf6__top_8c.html" title="ospf6d/ospf6_top.c" alt="" coords="2111,80,2251,107"/><area shape="rect" id="node29" href="ospf6__zebra_8c.html" title="ospf6d/ospf6_zebra.c" alt="" coords="2276,80,2428,107"/><area shape="rect" id="node31" href="ospf6d_8c.html" title="ospf6d/ospf6d.c" alt="" coords="2452,80,2572,107"/></map>
</div>
</div>
<p><a href="ospf6__lsdb_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#ab0b004b8ba1ae821c861f3d24db62a52">OSPF6_LSDB_MAXAGE_REMOVER</a>(lsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#abb660d0b5315a6b4d72f4dd0595330a8">OSPF6_LSDB_SHOW_LEVEL_NORMAL</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#ab79a33b495f70f6356bc4845e5da6505">OSPF6_LSDB_SHOW_LEVEL_DETAIL</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#a8796792a503052167d8dcb53f7f2be51">OSPF6_LSDB_SHOW_LEVEL_INTERNAL</a>&#160;&#160;&#160;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#a8a10ce28d0c085989a3ceee9501ffa3d">OSPF6_LSDB_SHOW_LEVEL_DUMP</a>&#160;&#160;&#160;3</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#a0f837765be7e053d492b402a43627c85">ospf6_lsdb_create</a> (void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#a18be7d056756a45c1170d07756a0863e">ospf6_lsdb_delete</a> (struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (u_int16_t <a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>, u_int32_t <a class="el" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>, u_int32_t <a class="el" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>, struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#ab4f540b725aa3d3913c4c8ba397a0a3b">ospf6_lsdb_lookup_next</a> (u_int16_t <a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>, u_int32_t <a class="el" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>, u_int32_t <a class="el" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>, struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#a0b328a0b2493e0e549d003f50003a199">ospf6_lsdb_add</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#a57848d384aafd619bd84c654fb9ed146">ospf6_lsdb_remove</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#ab9d15a52a7be50c379748fe7ba91251f">ospf6_lsdb_head</a> (struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#a7fccfd842f6c1849beb8237ccca195d0">ospf6_lsdb_next</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#a05c536e9366e1e70e302176636494ff2">ospf6_lsdb_type_router_head</a> (u_int16_t <a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>, u_int32_t <a class="el" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>, struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#a5c4427dd8608615a5a34a772e722eca6">ospf6_lsdb_type_router_next</a> (u_int16_t <a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>, u_int32_t <a class="el" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>, struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#a7056073f69eb0339fcbe90fed4ba404d">ospf6_lsdb_type_head</a> (u_int16_t <a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>, struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#af61f7812e7125f7ac5f54f2e23c72292">ospf6_lsdb_type_next</a> (u_int16_t <a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>, struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#afe227d03e9560c745dd0ba9a901875b0">ospf6_lsdb_remove_all</a> (struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#abe018dd0e87401450e3e16084b39f317">ospf6_lsdb_show</a> (struct <a class="el" href="structvty.html">vty</a> *<a class="el" href="structvty.html">vty</a>, int level, u_int16_t *<a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>, u_int32_t *<a class="el" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>, u_int32_t *<a class="el" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>, struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">u_int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#aeb26da76dc8f71fcf4350def5218d212">ospf6_new_ls_id</a> (u_int16_t <a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>, u_int32_t <a class="el" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>, struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">u_int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__lsdb_8h.html#ad286ac62b7fc40113b536203ecd9499d">ospf6_new_ls_seqnum</a> (u_int16_t <a class="el" href="ripng__zebra_8c.html#ac765329451135abec74c45e1897abf26">type</a>, u_int32_t <a class="el" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>, u_int32_t <a class="el" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>, struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ab0b004b8ba1ae821c861f3d24db62a52"></a><!-- doxytag: member="ospf6_lsdb.h::OSPF6_LSDB_MAXAGE_REMOVER" ref="ab0b004b8ba1ae821c861f3d24db62a52" args="(lsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_LSDB_MAXAGE_REMOVER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">lsdb</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                                   \
    struct <a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa;                                               \
    for (lsa = <a class="code" href="ospf6__lsdb_8c.html#ab9d15a52a7be50c379748fe7ba91251f">ospf6_lsdb_head</a> (<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>); lsa; lsa = <a class="code" href="ospf6__lsdb_8c.html#a7fccfd842f6c1849beb8237ccca195d0">ospf6_lsdb_next</a> (lsa)) \
      {                                                                  \
        if (! <a class="code" href="ospf6__lsa_8h.html#acde3ad184b10ca14f3eef7b2ab655ce6">OSPF6_LSA_IS_MAXAGE</a> (lsa))                                 \
          continue;                                                      \
        if (lsa-&gt;retrans_count != 0)                                     \
          continue;                                                      \
        if (<a class="code" href="ospf6__lsa_8h.html#a3bf7d5a2afba1551fff365aae68acaea">IS_OSPF6_DEBUG_LSA_TYPE</a> (lsa-&gt;header-&gt;type))                 \
          zlog_debug (<span class="stringliteral">&quot;Remove MaxAge %s&quot;</span>, lsa-&gt;name);                    \
        ospf6_lsdb_remove (lsa, <a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>);                                   \
      }                                                                  \
  } <span class="keywordflow">while</span> (0)
</pre></div>
<p>Definition at line <a class="el" href="ospf6__lsdb_8h_source.html#l00037">37</a> of file <a class="el" href="ospf6__lsdb_8h_source.html">ospf6_lsdb.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab79a33b495f70f6356bc4845e5da6505"></a><!-- doxytag: member="ospf6_lsdb.h::OSPF6_LSDB_SHOW_LEVEL_DETAIL" ref="ab79a33b495f70f6356bc4845e5da6505" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_LSDB_SHOW_LEVEL_DETAIL&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8h_source.html#l00084">84</a> of file <a class="el" href="ospf6__lsdb_8h_source.html">ospf6_lsdb.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8a10ce28d0c085989a3ceee9501ffa3d"></a><!-- doxytag: member="ospf6_lsdb.h::OSPF6_LSDB_SHOW_LEVEL_DUMP" ref="a8a10ce28d0c085989a3ceee9501ffa3d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_LSDB_SHOW_LEVEL_DUMP&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8h_source.html#l00086">86</a> of file <a class="el" href="ospf6__lsdb_8h_source.html">ospf6_lsdb.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8796792a503052167d8dcb53f7f2be51"></a><!-- doxytag: member="ospf6_lsdb.h::OSPF6_LSDB_SHOW_LEVEL_INTERNAL" ref="a8796792a503052167d8dcb53f7f2be51" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_LSDB_SHOW_LEVEL_INTERNAL&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8h_source.html#l00085">85</a> of file <a class="el" href="ospf6__lsdb_8h_source.html">ospf6_lsdb.h</a>.</p>

</div>
</div>
<a class="anchor" id="abb660d0b5315a6b4d72f4dd0595330a8"></a><!-- doxytag: member="ospf6_lsdb.h::OSPF6_LSDB_SHOW_LEVEL_NORMAL" ref="abb660d0b5315a6b4d72f4dd0595330a8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF6_LSDB_SHOW_LEVEL_NORMAL&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8h_source.html#l00083">83</a> of file <a class="el" href="ospf6__lsdb_8h_source.html">ospf6_lsdb.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a0b328a0b2493e0e549d003f50003a199"></a><!-- doxytag: member="ospf6_lsdb.h::ospf6_lsdb_add" ref="a0b328a0b2493e0e549d003f50003a199" args="(struct ospf6_lsa *lsa, struct ospf6_lsdb *lsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsdb_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *&#160;</td>
          <td class="paramname"><em>lsdb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8c_source.html#l00102">102</a> of file <a class="el" href="ospf6__lsdb_8c_source.html">ospf6_lsdb.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span>prefix_ipv6 <a class="code" href="structkey.html">key</a>;
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *current, *<a class="code" href="linklist_8h.html#a55fb4579b486236096a9ead8ece51bad">nextnode</a>, *prevnode;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a>, *<a class="code" href="structospf6__lsa.html#a0004e0511f7b539ba52f9b059fae6510">prev</a>, *old = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  memset (&amp;<a class="code" href="structkey.html">key</a>, 0, <span class="keyword">sizeof</span> (<a class="code" href="structkey.html">key</a>));
  <a class="code" href="ospf6__lsdb_8c.html#a10674a72de2628491e656829aa31e355">ospf6_lsdb_set_key</a> (&amp;<a class="code" href="structkey.html">key</a>, &amp;lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, sizeof (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>));
  <a class="code" href="ospf6__lsdb_8c.html#a10674a72de2628491e656829aa31e355">ospf6_lsdb_set_key</a> (&amp;<a class="code" href="structkey.html">key</a>, &amp;lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>,
                      sizeof (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>));
  <a class="code" href="ospf6__lsdb_8c.html#a10674a72de2628491e656829aa31e355">ospf6_lsdb_set_key</a> (&amp;<a class="code" href="structkey.html">key</a>, &amp;lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>, sizeof (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>));

  current = <a class="code" href="table_8c.html#ac91fdff1a0b8dc3d60ebaf152caa0f80">route_node_get</a> (lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a0c14eee95781ec31e45bd6bd91c9c31a">table</a>, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) &amp;<a class="code" href="structkey.html">key</a>);
  old = current-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;
  current-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> = lsa;
  <a class="code" href="ospf6__lsa_8c.html#a8ca45d94e6f66ee89c1b7e8f45f3f753">ospf6_lsa_lock</a> (lsa);

  <span class="keywordflow">if</span> (old)
    {
      <span class="keywordflow">if</span> (old-&gt;<a class="code" href="structospf6__lsa.html#a0004e0511f7b539ba52f9b059fae6510">prev</a>)
        old-&gt;<a class="code" href="structospf6__lsa.html#a0004e0511f7b539ba52f9b059fae6510">prev</a>-&gt;<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a> = lsa;
      <span class="keywordflow">if</span> (old-&gt;<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a>)
        old-&gt;<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a>-&gt;<a class="code" href="structospf6__lsa.html#a0004e0511f7b539ba52f9b059fae6510">prev</a> = lsa;
      lsa-&gt;<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a> = old-&gt;<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a>;
      lsa-&gt;<a class="code" href="structospf6__lsa.html#a0004e0511f7b539ba52f9b059fae6510">prev</a> = old-&gt;<a class="code" href="structospf6__lsa.html#a0004e0511f7b539ba52f9b059fae6510">prev</a>;
    }
  <span class="keywordflow">else</span>
    {
      <span class="comment">/* next link */</span>
      nextnode = current;
      <a class="code" href="table_8c.html#a5f018f727fe43d17553baabbf7fa6498">route_lock_node</a> (nextnode);
      <span class="keywordflow">do</span> {
        nextnode = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (nextnode);
      } <span class="keywordflow">while</span> (nextnode &amp;&amp; nextnode-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
      <span class="keywordflow">if</span> (nextnode == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        lsa-&gt;<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
      <span class="keywordflow">else</span>
        {
          next = nextnode-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;
          lsa-&gt;<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a> = <a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a>;
          next-&gt;<a class="code" href="structospf6__lsa.html#a0004e0511f7b539ba52f9b059fae6510">prev</a> = lsa;
          <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (nextnode);
        }

      <span class="comment">/* prev link */</span>
      prevnode = current;
      <a class="code" href="table_8c.html#a5f018f727fe43d17553baabbf7fa6498">route_lock_node</a> (prevnode);
      <span class="keywordflow">do</span> {
        prevnode = <a class="code" href="ospf6d_8c.html#ad926da9353e529391401a826d9254f93">route_prev</a> (prevnode);
      } <span class="keywordflow">while</span> (prevnode &amp;&amp; prevnode-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
      <span class="keywordflow">if</span> (prevnode == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        lsa-&gt;<a class="code" href="structospf6__lsa.html#a0004e0511f7b539ba52f9b059fae6510">prev</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
      <span class="keywordflow">else</span>
        {
          prev = prevnode-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;
          lsa-&gt;<a class="code" href="structospf6__lsa.html#a0004e0511f7b539ba52f9b059fae6510">prev</a> = <a class="code" href="structospf6__lsa.html#a0004e0511f7b539ba52f9b059fae6510">prev</a>;
          prev-&gt;<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a> = lsa;
          <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (prevnode);
        }

      lsdb-&gt;<a class="code" href="structospf6__lsdb.html#aa9c852db97e2303379eacb9f82dfe456">count</a>++;
    }

  <span class="keywordflow">if</span> (old)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a9cfc131168d4fbc6c172861084015f12">OSPF6_LSA_IS_CHANGED</a> (old, lsa))
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#acde3ad184b10ca14f3eef7b2ab655ce6">OSPF6_LSA_IS_MAXAGE</a> (lsa))
            {
              <span class="keywordflow">if</span> (lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a34c939fe22f596ab5980664722860af2">hook_remove</a>)
                {
                  (*lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a34c939fe22f596ab5980664722860af2">hook_remove</a>) (old);
                  (*lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a34c939fe22f596ab5980664722860af2">hook_remove</a>) (lsa);
                }
            }
          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#acde3ad184b10ca14f3eef7b2ab655ce6">OSPF6_LSA_IS_MAXAGE</a> (old))
            {
              <span class="keywordflow">if</span> (lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a7d1144d98631278e7783a8d2af943b37">hook_add</a>)
                (*lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a7d1144d98631278e7783a8d2af943b37">hook_add</a>) (lsa);
            }
          <span class="keywordflow">else</span>
            {
              <span class="keywordflow">if</span> (lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a34c939fe22f596ab5980664722860af2">hook_remove</a>)
                (*lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a34c939fe22f596ab5980664722860af2">hook_remove</a>) (old);
              <span class="keywordflow">if</span> (lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a7d1144d98631278e7783a8d2af943b37">hook_add</a>)
                (*lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a7d1144d98631278e7783a8d2af943b37">hook_add</a>) (lsa);
            }
        }
    }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#acde3ad184b10ca14f3eef7b2ab655ce6">OSPF6_LSA_IS_MAXAGE</a> (lsa))
    {
      <span class="keywordflow">if</span> (lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a34c939fe22f596ab5980664722860af2">hook_remove</a>)
        (*lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a34c939fe22f596ab5980664722860af2">hook_remove</a>) (lsa);
    }
  <span class="keywordflow">else</span>
    {
      <span class="keywordflow">if</span> (lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a7d1144d98631278e7783a8d2af943b37">hook_add</a>)
        (*lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a7d1144d98631278e7783a8d2af943b37">hook_add</a>) (lsa);
    }

  <span class="keywordflow">if</span> (old)
    <a class="code" href="ospf6__lsa_8c.html#ae6a337ae60488897392e2ecaa480ea62">ospf6_lsa_unlock</a> (old);

  <a class="code" href="ospf6__lsdb_8c.html#a1009dfb4d97e76ee4349bdef9266de87">ospf6_lsdb_count_assert</a> (lsdb);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0f837765be7e053d492b402a43627c85"></a><!-- doxytag: member="ospf6_lsdb.h::ospf6_lsdb_create" ref="a0f837765be7e053d492b402a43627c85" args="(void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a>* ospf6_lsdb_create </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8c_source.html#l00037">37</a> of file <a class="el" href="ospf6__lsdb_8c_source.html">ospf6_lsdb.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb;

  lsdb = <a class="code" href="memory_8h.html#a7826e4ed1d152cad0666dcf43f11f663">XCALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167bab39226cf59d7019ae27d3b9f2198af8a">MTYPE_OSPF6_LSDB</a>, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__lsdb.html">ospf6_lsdb</a>));
  <span class="keywordflow">if</span> (lsdb == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;Can&#39;t malloc lsdb&quot;</span>);
      <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }
  memset (lsdb, 0, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__lsdb.html">ospf6_lsdb</a>));

  lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a> = <a class="code" href="dict_8c.html#a43a278d13284fb3412e9eee1db1d967e">data</a>;
  lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a0c14eee95781ec31e45bd6bd91c9c31a">table</a> = <a class="code" href="table_8c.html#a9b1d6d715d752d224b322da32d425046">route_table_init</a> ();
  <span class="keywordflow">return</span> lsdb;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a18be7d056756a45c1170d07756a0863e"></a><!-- doxytag: member="ospf6_lsdb.h::ospf6_lsdb_delete" ref="a18be7d056756a45c1170d07756a0863e" args="(struct ospf6_lsdb *lsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsdb_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *&#160;</td>
          <td class="paramname"><em>lsdb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8c_source.html#l00055">55</a> of file <a class="el" href="ospf6__lsdb_8c_source.html">ospf6_lsdb.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="ospf6__lsdb_8c.html#afe227d03e9560c745dd0ba9a901875b0">ospf6_lsdb_remove_all</a> (lsdb);
  <a class="code" href="table_8c.html#adc5ff276f1698f5bef7bb74289e3b26e">route_table_finish</a> (lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a0c14eee95781ec31e45bd6bd91c9c31a">table</a>);
  <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167bab39226cf59d7019ae27d3b9f2198af8a">MTYPE_OSPF6_LSDB</a>, lsdb);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab9d15a52a7be50c379748fe7ba91251f"></a><!-- doxytag: member="ospf6_lsdb.h::ospf6_lsdb_head" ref="ab9d15a52a7be50c379748fe7ba91251f" args="(struct ospf6_lsdb *lsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a>* ospf6_lsdb_head </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *&#160;</td>
          <td class="paramname"><em>lsdb</em></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8c_source.html#l00335">335</a> of file <a class="el" href="ospf6__lsdb_8c_source.html">ospf6_lsdb.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *node;

  node = <a class="code" href="table_8c.html#aee1d06c531794df326d946bdac647fb2">route_top</a> (lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a0c14eee95781ec31e45bd6bd91c9c31a">table</a>);
  <span class="keywordflow">if</span> (node == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="comment">/* skip to the existing lsdb entry */</span>
  <span class="keywordflow">while</span> (node &amp;&amp; node-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    node = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (node);
  <span class="keywordflow">if</span> (node == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (node);
  <span class="keywordflow">if</span> (node-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>)
    <a class="code" href="ospf6__lsa_8c.html#a8ca45d94e6f66ee89c1b7e8f45f3f753">ospf6_lsa_lock</a> ((<span class="keyword">struct</span> <a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *) node-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>);
  <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *) node-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa49ea0d4a8edbec90f266bf3a541a421"></a><!-- doxytag: member="ospf6_lsdb.h::ospf6_lsdb_lookup" ref="aa49ea0d4a8edbec90f266bf3a541a421" args="(u_int16_t type, u_int32_t id, u_int32_t adv_router, struct ospf6_lsdb *lsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a>* ospf6_lsdb_lookup </td>
          <td>(</td>
          <td class="paramtype">u_int16_t&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>adv_router</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *&#160;</td>
          <td class="paramname"><em>lsdb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8c_source.html#l00241">241</a> of file <a class="el" href="ospf6__lsdb_8c_source.html">ospf6_lsdb.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *node;
  <span class="keyword">struct </span>prefix_ipv6 <a class="code" href="structkey.html">key</a>;

  <span class="keywordflow">if</span> (lsdb == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  memset (&amp;<a class="code" href="structkey.html">key</a>, 0, <span class="keyword">sizeof</span> (<a class="code" href="structkey.html">key</a>));
  <a class="code" href="ospf6__lsdb_8c.html#a10674a72de2628491e656829aa31e355">ospf6_lsdb_set_key</a> (&amp;<a class="code" href="structkey.html">key</a>, &amp;<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, <span class="keyword">sizeof</span> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>));
  <a class="code" href="ospf6__lsdb_8c.html#a10674a72de2628491e656829aa31e355">ospf6_lsdb_set_key</a> (&amp;<a class="code" href="structkey.html">key</a>, &amp;<a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>, <span class="keyword">sizeof</span> (<a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>));
  <a class="code" href="ospf6__lsdb_8c.html#a10674a72de2628491e656829aa31e355">ospf6_lsdb_set_key</a> (&amp;<a class="code" href="structkey.html">key</a>, &amp;<span class="keywordtype">id</span>, <span class="keyword">sizeof</span> (<span class="keywordtype">id</span>));

  node = <a class="code" href="table_8c.html#ab99d86b40440c8f18d4f2b31b5b8f1c7">route_node_lookup</a> (lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a0c14eee95781ec31e45bd6bd91c9c31a">table</a>, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) &amp;<a class="code" href="structkey.html">key</a>);
  <span class="keywordflow">if</span> (node == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || node-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *) node-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab4f540b725aa3d3913c4c8ba397a0a3b"></a><!-- doxytag: member="ospf6_lsdb.h::ospf6_lsdb_lookup_next" ref="ab4f540b725aa3d3913c4c8ba397a0a3b" args="(u_int16_t type, u_int32_t id, u_int32_t adv_router, struct ospf6_lsdb *lsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a>* ospf6_lsdb_lookup_next </td>
          <td>(</td>
          <td class="paramtype">u_int16_t&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>adv_router</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *&#160;</td>
          <td class="paramname"><em>lsdb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8c_source.html#l00262">262</a> of file <a class="el" href="ospf6__lsdb_8c_source.html">ospf6_lsdb.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *node;
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *matched = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keyword">struct </span>prefix_ipv6 <a class="code" href="structkey.html">key</a>;
  <span class="keyword">struct </span><a class="code" href="structprefix.html">prefix</a> *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

  <span class="keywordflow">if</span> (lsdb == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  memset (&amp;<a class="code" href="structkey.html">key</a>, 0, <span class="keyword">sizeof</span> (<a class="code" href="structkey.html">key</a>));
  <a class="code" href="ospf6__lsdb_8c.html#a10674a72de2628491e656829aa31e355">ospf6_lsdb_set_key</a> (&amp;<a class="code" href="structkey.html">key</a>, &amp;<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, <span class="keyword">sizeof</span> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>));
  <a class="code" href="ospf6__lsdb_8c.html#a10674a72de2628491e656829aa31e355">ospf6_lsdb_set_key</a> (&amp;<a class="code" href="structkey.html">key</a>, &amp;<a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>, <span class="keyword">sizeof</span> (<a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>));
  <a class="code" href="ospf6__lsdb_8c.html#a10674a72de2628491e656829aa31e355">ospf6_lsdb_set_key</a> (&amp;<a class="code" href="structkey.html">key</a>, &amp;<span class="keywordtype">id</span>, <span class="keyword">sizeof</span> (<span class="keywordtype">id</span>));
  p = (<span class="keyword">struct </span><a class="code" href="structprefix.html">prefix</a> *) &amp;<a class="code" href="structkey.html">key</a>;

  {
    <span class="keywordtype">char</span> buf[64];
    <a class="code" href="prefix_8c.html#a8b848557695ae5694bd2282eba23e367">prefix2str</a> (p, buf, <span class="keyword">sizeof</span> (buf));
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;lsdb_lookup_next: key: %s&quot;</span>, buf);
  }

  node = lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a0c14eee95781ec31e45bd6bd91c9c31a">table</a>-&gt;<a class="code" href="structroute__table.html#a4d58458d9c18192cecaea1b98775f529">top</a>;
  <span class="comment">/* walk down tree. */</span>
  <span class="keywordflow">while</span> (node &amp;&amp; node-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>.<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a> &lt;= p-&gt;<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a> &amp;&amp;
         <a class="code" href="prefix_8c.html#a8c5d68665a4b036a361330bee254318e">prefix_match</a> (&amp;node-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>, p))
    {
      matched = node;
      node = node-&gt;<a class="code" href="structroute__node.html#a6416caa9a71f122b759c0a8d79dfb72e">link</a>[<a class="code" href="prefix_8h.html#a448f1ebdeae472533f8faafd675e8f0b">prefix_bit</a>(&amp;p-&gt;u.<a class="code" href="structprefix.html#af508982a05429729278c96708bd9e337">prefix</a>, node-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>.<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a>)];
    }

  <span class="keywordflow">if</span> (matched)
    node = matched;
  <span class="keywordflow">else</span>
    node = lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a0c14eee95781ec31e45bd6bd91c9c31a">table</a>-&gt;<a class="code" href="structroute__table.html#a4d58458d9c18192cecaea1b98775f529">top</a>;
  <a class="code" href="table_8c.html#a5f018f727fe43d17553baabbf7fa6498">route_lock_node</a> (node);

  <span class="comment">/* skip to real existing entry */</span>
  <span class="keywordflow">while</span> (node &amp;&amp; node-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    node = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (node);

  <span class="keywordflow">if</span> (! node)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">if</span> (<a class="code" href="prefix_8c.html#ac3645297b5669182b5052aa7689712af">prefix_same</a> (&amp;node-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>, p))
    {
      <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *prev = node;
      <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa_prev;
      <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa_next;

      node = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (node);
      <span class="keywordflow">while</span> (node &amp;&amp; node-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        node = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (node);

      lsa_prev = prev-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;
      lsa_next = (node ? node-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> : <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (lsa_prev);
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (lsa_prev-&gt;<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a> == lsa_next);
      <span class="keywordflow">if</span> (lsa_next)
        <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (lsa_next-&gt;<a class="code" href="structospf6__lsa.html#a0004e0511f7b539ba52f9b059fae6510">prev</a> == lsa_prev);
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;lsdb_lookup_next: assert OK with previous LSA&quot;</span>);
    }

  <span class="keywordflow">if</span> (! node)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (node);
  <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *) node-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7fccfd842f6c1849beb8237ccca195d0"></a><!-- doxytag: member="ospf6_lsdb.h::ospf6_lsdb_next" ref="a7fccfd842f6c1849beb8237ccca195d0" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a>* ospf6_lsdb_next </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8c_source.html#l00356">356</a> of file <a class="el" href="ospf6__lsdb_8c_source.html">ospf6_lsdb.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a> = lsa-&gt;<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a>;

  <a class="code" href="ospf6__lsa_8c.html#ae6a337ae60488897392e2ecaa480ea62">ospf6_lsa_unlock</a> (lsa);
  <span class="keywordflow">if</span> (next)
    <a class="code" href="ospf6__lsa_8c.html#a8ca45d94e6f66ee89c1b7e8f45f3f753">ospf6_lsa_lock</a> (next);

  <span class="keywordflow">return</span> <a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a57848d384aafd619bd84c654fb9ed146"></a><!-- doxytag: member="ospf6_lsdb.h::ospf6_lsdb_remove" ref="a57848d384aafd619bd84c654fb9ed146" args="(struct ospf6_lsa *lsa, struct ospf6_lsdb *lsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsdb_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *&#160;</td>
          <td class="paramname"><em>lsdb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8c_source.html#l00209">209</a> of file <a class="el" href="ospf6__lsdb_8c_source.html">ospf6_lsdb.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *node;
  <span class="keyword">struct </span>prefix_ipv6 <a class="code" href="structkey.html">key</a>;

  memset (&amp;<a class="code" href="structkey.html">key</a>, 0, <span class="keyword">sizeof</span> (<a class="code" href="structkey.html">key</a>));
  <a class="code" href="ospf6__lsdb_8c.html#a10674a72de2628491e656829aa31e355">ospf6_lsdb_set_key</a> (&amp;<a class="code" href="structkey.html">key</a>, &amp;lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, sizeof (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>));
  <a class="code" href="ospf6__lsdb_8c.html#a10674a72de2628491e656829aa31e355">ospf6_lsdb_set_key</a> (&amp;<a class="code" href="structkey.html">key</a>, &amp;lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>,
                      sizeof (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>));
  <a class="code" href="ospf6__lsdb_8c.html#a10674a72de2628491e656829aa31e355">ospf6_lsdb_set_key</a> (&amp;<a class="code" href="structkey.html">key</a>, &amp;lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>, sizeof (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>));

  node = <a class="code" href="table_8c.html#ab99d86b40440c8f18d4f2b31b5b8f1c7">route_node_lookup</a> (lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a0c14eee95781ec31e45bd6bd91c9c31a">table</a>, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) &amp;<a class="code" href="structkey.html">key</a>);
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (node &amp;&amp; node-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> == lsa);

  <span class="keywordflow">if</span> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a0004e0511f7b539ba52f9b059fae6510">prev</a>)
    lsa-&gt;<a class="code" href="structospf6__lsa.html#a0004e0511f7b539ba52f9b059fae6510">prev</a>-&gt;<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a> = lsa-&gt;<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a>;
  <span class="keywordflow">if</span> (lsa-&gt;<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a>)
    lsa-&gt;<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a>-&gt;<a class="code" href="structospf6__lsa.html#a0004e0511f7b539ba52f9b059fae6510">prev</a> = lsa-&gt;<a class="code" href="structospf6__lsa.html#a0004e0511f7b539ba52f9b059fae6510">prev</a>;

  node-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  lsdb-&gt;<a class="code" href="structospf6__lsdb.html#aa9c852db97e2303379eacb9f82dfe456">count</a>--;

  <span class="keywordflow">if</span> (lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a34c939fe22f596ab5980664722860af2">hook_remove</a>)
    (*lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a34c939fe22f596ab5980664722860af2">hook_remove</a>) (lsa);

  <a class="code" href="ospf6__lsa_8c.html#ae6a337ae60488897392e2ecaa480ea62">ospf6_lsa_unlock</a> (lsa);
  <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (node);

  <a class="code" href="ospf6__lsdb_8c.html#a1009dfb4d97e76ee4349bdef9266de87">ospf6_lsdb_count_assert</a> (lsdb);
}
</pre></div>
</div>
</div>
<a class="anchor" id="afe227d03e9560c745dd0ba9a901875b0"></a><!-- doxytag: member="ospf6_lsdb.h::ospf6_lsdb_remove_all" ref="afe227d03e9560c745dd0ba9a901875b0" args="(struct ospf6_lsdb *lsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsdb_remove_all </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *&#160;</td>
          <td class="paramname"><em>lsdb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8c_source.html#l00477">477</a> of file <a class="el" href="ospf6__lsdb_8c_source.html">ospf6_lsdb.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa;
  <span class="keywordflow">for</span> (lsa = <a class="code" href="ospf6__lsdb_8c.html#ab9d15a52a7be50c379748fe7ba91251f">ospf6_lsdb_head</a> (lsdb); lsa; lsa = <a class="code" href="ospf6__lsdb_8c.html#a7fccfd842f6c1849beb8237ccca195d0">ospf6_lsdb_next</a> (lsa))
    <a class="code" href="ospf6__lsdb_8c.html#a57848d384aafd619bd84c654fb9ed146">ospf6_lsdb_remove</a> (lsa, lsdb);
}
</pre></div>
</div>
</div>
<a class="anchor" id="abe018dd0e87401450e3e16084b39f317"></a><!-- doxytag: member="ospf6_lsdb.h::ospf6_lsdb_show" ref="abe018dd0e87401450e3e16084b39f317" args="(struct vty *vty, int level, u_int16_t *type, u_int32_t *id, u_int32_t *adv_router, struct ospf6_lsdb *lsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsdb_show </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname"><em>vty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int16_t *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t *&#160;</td>
          <td class="paramname"><em>adv_router</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *&#160;</td>
          <td class="paramname"><em>lsdb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8c_source.html#l00485">485</a> of file <a class="el" href="ospf6__lsdb_8c_source.html">ospf6_lsdb.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa;
  void (*showfunc) (<span class="keyword">struct </span>vty *, <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *) = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">if</span> (level == <a class="code" href="ospf6__lsdb_8h.html#abb660d0b5315a6b4d72f4dd0595330a8">OSPF6_LSDB_SHOW_LEVEL_NORMAL</a>)
    showfunc = <a class="code" href="ospf6__lsa_8c.html#a5670a31f9f83712652e5a97b88c338d2">ospf6_lsa_show_summary</a>;
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (level == <a class="code" href="ospf6__lsdb_8h.html#ab79a33b495f70f6356bc4845e5da6505">OSPF6_LSDB_SHOW_LEVEL_DETAIL</a>)
    showfunc = <a class="code" href="ospf6__lsa_8c.html#a93c51ce5620dbf2b4d5b7568e74d1f52">ospf6_lsa_show</a>;
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (level == <a class="code" href="ospf6__lsdb_8h.html#a8796792a503052167d8dcb53f7f2be51">OSPF6_LSDB_SHOW_LEVEL_INTERNAL</a>)
    showfunc = <a class="code" href="ospf6__lsa_8c.html#a1aa59cacfea65952fb2bffa23abb6ee3">ospf6_lsa_show_internal</a>;
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (level == <a class="code" href="ospf6__lsdb_8h.html#a8a10ce28d0c085989a3ceee9501ffa3d">OSPF6_LSDB_SHOW_LEVEL_DUMP</a>)
    showfunc = <a class="code" href="ospf6__lsa_8c.html#a16d934de0b5261fadc2866b4a94266a5">ospf6_lsa_show_dump</a>;

  <span class="keywordflow">if</span> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a> &amp;&amp; <span class="keywordtype">id</span> &amp;&amp; <a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>)
    {
      lsa = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (*<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, *<span class="keywordtype">id</span>, *<a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>, lsdb);
      <span class="keywordflow">if</span> (lsa)
        {
          <span class="keywordflow">if</span> (level == <a class="code" href="ospf6__lsdb_8h.html#abb660d0b5315a6b4d72f4dd0595330a8">OSPF6_LSDB_SHOW_LEVEL_NORMAL</a>)
            <a class="code" href="ospf6__lsa_8c.html#a93c51ce5620dbf2b4d5b7568e74d1f52">ospf6_lsa_show</a> (vty, lsa);
          <span class="keywordflow">else</span>
            (*showfunc) (<a class="code" href="vtysh_8c.html#a15b2c4e868040617c54eaaba3663b337">vty</a>, lsa);
        }
      <span class="keywordflow">return</span>;
    }

  <span class="keywordflow">if</span> (level == <a class="code" href="ospf6__lsdb_8h.html#abb660d0b5315a6b4d72f4dd0595330a8">OSPF6_LSDB_SHOW_LEVEL_NORMAL</a>)
    <a class="code" href="ospf6__lsa_8c.html#aeb6d48db7670307d45fd68a1ce987641">ospf6_lsa_show_summary_header</a> (vty);

  <span class="keywordflow">if</span> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a> &amp;&amp; <a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>)
    lsa = <a class="code" href="ospf6__lsdb_8c.html#a05c536e9366e1e70e302176636494ff2">ospf6_lsdb_type_router_head</a> (*<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, *<a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>, lsdb);
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>)
    lsa = <a class="code" href="ospf6__lsdb_8c.html#a7056073f69eb0339fcbe90fed4ba404d">ospf6_lsdb_type_head</a> (*<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, lsdb);
  <span class="keywordflow">else</span>
    lsa = <a class="code" href="ospf6__lsdb_8c.html#ab9d15a52a7be50c379748fe7ba91251f">ospf6_lsdb_head</a> (lsdb);
  <span class="keywordflow">while</span> (lsa)
    {
      <span class="keywordflow">if</span> ((! <a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a> || lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a> == *<a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>) &amp;&amp;
          (! <span class="keywordtype">id</span> || lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a> == *<span class="keywordtype">id</span>))
        (*showfunc) (<a class="code" href="vtysh_8c.html#a15b2c4e868040617c54eaaba3663b337">vty</a>, lsa);

      <span class="keywordflow">if</span> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a> &amp;&amp; <a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>)
        lsa = <a class="code" href="ospf6__lsdb_8c.html#a5c4427dd8608615a5a34a772e722eca6">ospf6_lsdb_type_router_next</a> (*<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, *<a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>, lsa);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>)
        lsa = <a class="code" href="ospf6__lsdb_8c.html#af61f7812e7125f7ac5f54f2e23c72292">ospf6_lsdb_type_next</a> (*<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, lsa);
      <span class="keywordflow">else</span>
        lsa = <a class="code" href="ospf6__lsdb_8c.html#a7fccfd842f6c1849beb8237ccca195d0">ospf6_lsdb_next</a> (lsa);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7056073f69eb0339fcbe90fed4ba404d"></a><!-- doxytag: member="ospf6_lsdb.h::ospf6_lsdb_type_head" ref="a7056073f69eb0339fcbe90fed4ba404d" args="(u_int16_t type, struct ospf6_lsdb *lsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a>* ospf6_lsdb_type_head </td>
          <td>(</td>
          <td class="paramtype">u_int16_t&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *&#160;</td>
          <td class="paramname"><em>lsdb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8c_source.html#l00425">425</a> of file <a class="el" href="ospf6__lsdb_8c_source.html">ospf6_lsdb.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *node;
  <span class="keyword">struct </span>prefix_ipv6 <a class="code" href="structkey.html">key</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa;

  memset (&amp;<a class="code" href="structkey.html">key</a>, 0, <span class="keyword">sizeof</span> (<a class="code" href="structkey.html">key</a>));
  <a class="code" href="ospf6__lsdb_8c.html#a10674a72de2628491e656829aa31e355">ospf6_lsdb_set_key</a> (&amp;<a class="code" href="structkey.html">key</a>, &amp;<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, <span class="keyword">sizeof</span> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>));

  <span class="comment">/* Walk down tree. */</span>
  node = lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a0c14eee95781ec31e45bd6bd91c9c31a">table</a>-&gt;<a class="code" href="structroute__table.html#a4d58458d9c18192cecaea1b98775f529">top</a>;
  <span class="keywordflow">while</span> (node &amp;&amp; node-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>.<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a> &lt;= <a class="code" href="structkey.html">key</a>.prefixlen &amp;&amp;
     <a class="code" href="prefix_8c.html#a8c5d68665a4b036a361330bee254318e">prefix_match</a> (&amp;node-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) &amp;<a class="code" href="structkey.html">key</a>))
    node = node-&gt;<a class="code" href="structroute__node.html#a6416caa9a71f122b759c0a8d79dfb72e">link</a>[<a class="code" href="prefix_8h.html#a977f32ed59782cfac9322d423455c189">prefix6_bit</a>(&amp;key.<a class="code" href="structprefix.html#af508982a05429729278c96708bd9e337">prefix</a>, node-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>.<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a>)];

  <span class="keywordflow">if</span> (node)
    <a class="code" href="table_8c.html#a5f018f727fe43d17553baabbf7fa6498">route_lock_node</a> (node);
  <span class="keywordflow">while</span> (node &amp;&amp; node-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    node = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (node);

  <span class="keywordflow">if</span> (node == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">else</span>
    <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (node);

  <span class="keywordflow">if</span> (! <a class="code" href="prefix_8c.html#a8c5d68665a4b036a361330bee254318e">prefix_match</a> ((<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) &amp;key, &amp;node-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>))
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  lsa = node-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;
  <a class="code" href="ospf6__lsa_8c.html#a8ca45d94e6f66ee89c1b7e8f45f3f753">ospf6_lsa_lock</a> (lsa);

  <span class="keywordflow">return</span> lsa;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af61f7812e7125f7ac5f54f2e23c72292"></a><!-- doxytag: member="ospf6_lsdb.h::ospf6_lsdb_type_next" ref="af61f7812e7125f7ac5f54f2e23c72292" args="(u_int16_t type, struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a>* ospf6_lsdb_type_next </td>
          <td>(</td>
          <td class="paramtype">u_int16_t&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8c_source.html#l00460">460</a> of file <a class="el" href="ospf6__lsdb_8c_source.html">ospf6_lsdb.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a> = lsa-&gt;<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a>;

  <span class="keywordflow">if</span> (next)
    {
      <span class="keywordflow">if</span> (next-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a> != <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>)
        next = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }

  <span class="keywordflow">if</span> (next)
    <a class="code" href="ospf6__lsa_8c.html#a8ca45d94e6f66ee89c1b7e8f45f3f753">ospf6_lsa_lock</a> (next);
  <a class="code" href="ospf6__lsa_8c.html#ae6a337ae60488897392e2ecaa480ea62">ospf6_lsa_unlock</a> (lsa);
  <span class="keywordflow">return</span> <a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a05c536e9366e1e70e302176636494ff2"></a><!-- doxytag: member="ospf6_lsdb.h::ospf6_lsdb_type_router_head" ref="a05c536e9366e1e70e302176636494ff2" args="(u_int16_t type, u_int32_t adv_router, struct ospf6_lsdb *lsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a>* ospf6_lsdb_type_router_head </td>
          <td>(</td>
          <td class="paramtype">u_int16_t&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>adv_router</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *&#160;</td>
          <td class="paramname"><em>lsdb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8c_source.html#l00368">368</a> of file <a class="el" href="ospf6__lsdb_8c_source.html">ospf6_lsdb.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *node;
  <span class="keyword">struct </span>prefix_ipv6 <a class="code" href="structkey.html">key</a>;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa;

  memset (&amp;<a class="code" href="structkey.html">key</a>, 0, <span class="keyword">sizeof</span> (<a class="code" href="structkey.html">key</a>));
  <a class="code" href="ospf6__lsdb_8c.html#a10674a72de2628491e656829aa31e355">ospf6_lsdb_set_key</a> (&amp;<a class="code" href="structkey.html">key</a>, &amp;<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, <span class="keyword">sizeof</span> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>));
  <a class="code" href="ospf6__lsdb_8c.html#a10674a72de2628491e656829aa31e355">ospf6_lsdb_set_key</a> (&amp;<a class="code" href="structkey.html">key</a>, &amp;<a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>, <span class="keyword">sizeof</span> (<a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>));

  node = lsdb-&gt;<a class="code" href="structospf6__lsdb.html#a0c14eee95781ec31e45bd6bd91c9c31a">table</a>-&gt;<a class="code" href="structroute__table.html#a4d58458d9c18192cecaea1b98775f529">top</a>;

  <span class="comment">/* Walk down tree. */</span>
  <span class="keywordflow">while</span> (node &amp;&amp; node-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>.<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a> &lt;= <a class="code" href="structkey.html">key</a>.prefixlen &amp;&amp;
     <a class="code" href="prefix_8c.html#a8c5d68665a4b036a361330bee254318e">prefix_match</a> (&amp;node-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) &amp;<a class="code" href="structkey.html">key</a>))
    node = node-&gt;<a class="code" href="structroute__node.html#a6416caa9a71f122b759c0a8d79dfb72e">link</a>[<a class="code" href="prefix_8h.html#a977f32ed59782cfac9322d423455c189">prefix6_bit</a>(&amp;key.<a class="code" href="structprefix.html#af508982a05429729278c96708bd9e337">prefix</a>, node-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>.<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a>)];

  <span class="keywordflow">if</span> (node)
    <a class="code" href="table_8c.html#a5f018f727fe43d17553baabbf7fa6498">route_lock_node</a> (node);
  <span class="keywordflow">while</span> (node &amp;&amp; node-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    node = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (node);

  <span class="keywordflow">if</span> (node == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">else</span>
    <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (node);

  <span class="keywordflow">if</span> (! <a class="code" href="prefix_8c.html#a8c5d68665a4b036a361330bee254318e">prefix_match</a> ((<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) &amp;key, &amp;node-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>))
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  lsa = node-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;
  <a class="code" href="ospf6__lsa_8c.html#a8ca45d94e6f66ee89c1b7e8f45f3f753">ospf6_lsa_lock</a> (lsa);

  <span class="keywordflow">return</span> lsa;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5c4427dd8608615a5a34a772e722eca6"></a><!-- doxytag: member="ospf6_lsdb.h::ospf6_lsdb_type_router_next" ref="a5c4427dd8608615a5a34a772e722eca6" args="(u_int16_t type, u_int32_t adv_router, struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a>* ospf6_lsdb_type_router_next </td>
          <td>(</td>
          <td class="paramtype">u_int16_t&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>adv_router</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8c_source.html#l00406">406</a> of file <a class="el" href="ospf6__lsdb_8c_source.html">ospf6_lsdb.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a> = lsa-&gt;<a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a>;

  <span class="keywordflow">if</span> (next)
    {
      <span class="keywordflow">if</span> (next-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a> != <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a> ||
          next-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a> != <a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>)
        next = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }

  <span class="keywordflow">if</span> (next)
    <a class="code" href="ospf6__lsa_8c.html#a8ca45d94e6f66ee89c1b7e8f45f3f753">ospf6_lsa_lock</a> (next);
  <a class="code" href="ospf6__lsa_8c.html#ae6a337ae60488897392e2ecaa480ea62">ospf6_lsa_unlock</a> (lsa);
  <span class="keywordflow">return</span> <a class="code" href="structospf6__lsa.html#aede2585aa30fdb62855c10829fba600b">next</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aeb26da76dc8f71fcf4350def5218d212"></a><!-- doxytag: member="ospf6_lsdb.h::ospf6_new_ls_id" ref="aeb26da76dc8f71fcf4350def5218d212" args="(u_int16_t type, u_int32_t adv_router, struct ospf6_lsdb *lsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u_int32_t ospf6_new_ls_id </td>
          <td>(</td>
          <td class="paramtype">u_int16_t&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>adv_router</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *&#160;</td>
          <td class="paramname"><em>lsdb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8c_source.html#l00541">541</a> of file <a class="el" href="ospf6__lsdb_8c_source.html">ospf6_lsdb.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa;
  u_int32_t <span class="keywordtype">id</span> = 1;

  <span class="keywordflow">for</span> (lsa = <a class="code" href="ospf6__lsdb_8c.html#a05c536e9366e1e70e302176636494ff2">ospf6_lsdb_type_router_head</a> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, <a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>, lsdb); lsa;
       lsa = <a class="code" href="ospf6__lsdb_8c.html#a5c4427dd8608615a5a34a772e722eca6">ospf6_lsdb_type_router_next</a> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, <a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>, lsa))
    {
      <span class="keywordflow">if</span> (ntohl (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>) &lt; <a class="code" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>)
        <span class="keywordflow">continue</span>;
      <span class="keywordflow">if</span> (ntohl (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>) &gt; <a class="code" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>)
      {
        <a class="code" href="ospf6__lsa_8c.html#ae6a337ae60488897392e2ecaa480ea62">ospf6_lsa_unlock</a> (lsa);
        <span class="keywordflow">break</span>;
      }
      <span class="keywordtype">id</span>++;
    }

  <span class="keywordflow">return</span> ((u_int32_t) htonl (<span class="keywordtype">id</span>));
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad286ac62b7fc40113b536203ecd9499d"></a><!-- doxytag: member="ospf6_lsdb.h::ospf6_new_ls_seqnum" ref="ad286ac62b7fc40113b536203ecd9499d" args="(u_int16_t type, u_int32_t id, u_int32_t adv_router, struct ospf6_lsdb *lsdb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u_int32_t ospf6_new_ls_seqnum </td>
          <td>(</td>
          <td class="paramtype">u_int16_t&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>adv_router</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *&#160;</td>
          <td class="paramname"><em>lsdb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__lsdb_8c_source.html#l00566">566</a> of file <a class="el" href="ospf6__lsdb_8c_source.html">ospf6_lsdb.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *lsa;
  <span class="keywordtype">signed</span> <span class="keywordtype">long</span> seqnum = 0;

  <span class="comment">/* if current database copy not found, return InitialSequenceNumber */</span>
  lsa = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, <span class="keywordtype">id</span>, <a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>, lsdb);
  <span class="keywordflow">if</span> (lsa == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    seqnum = <a class="code" href="ospf6__proto_8h.html#ad441394da087bc61e24a5b99455c5589">INITIAL_SEQUENCE_NUMBER</a>;
  <span class="keywordflow">else</span>
    seqnum = (<span class="keywordtype">signed</span> long) ntohl (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a438027b9b7303569a6bb41b2ee97d734">seqnum</a>) + 1;

  <span class="keywordflow">return</span> ((u_int32_t) htonl (seqnum));
}
</pre></div>
</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="ospf6__lsdb_8h.html">ospf6_lsdb.h</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:26 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
