<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: ospf6d/ospf6_flood.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('ospf6__flood_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ospf6d/ospf6_flood.c File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="zebra_8h_source.html">zebra.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="log_8h_source.html">log.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="thread_8h_source.html">thread.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="linklist_8h_source.html">linklist.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="vty_8h_source.html">vty.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="command_8h_source.html">command.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6d_8h_source.html">ospf6d.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__proto_8h_source.html">ospf6_proto.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__lsa_8h_source.html">ospf6_lsa.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__lsdb_8h_source.html">ospf6_lsdb.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__message_8h_source.html">ospf6_message.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__route_8h_source.html">ospf6_route.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__spf_8h_source.html">ospf6_spf.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__top_8h_source.html">ospf6_top.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__area_8h_source.html">ospf6_area.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__interface_8h_source.html">ospf6_interface.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__neighbor_8h_source.html">ospf6_neighbor.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf6__flood_8h_source.html">ospf6_flood.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ospf6_flood.c:</div>
<div class="dyncontent">
<div class="center"><img src="ospf6__flood_8c__incl.png" border="0" usemap="#ospf6d_2ospf6__flood_8c" alt=""/></div>
<map name="ospf6d_2ospf6__flood_8c" id="ospf6d_2ospf6__flood_8c">
<area shape="rect" id="node3" href="zebra_8h.html" title="zebra.h" alt="" coords="1404,80,1471,107"/><area shape="rect" id="node61" href="log_8h.html" title="log.h" alt="" coords="2799,229,2851,256"/><area shape="rect" id="node64" href="thread_8h.html" title="thread.h" alt="" coords="2889,229,2961,256"/><area shape="rect" id="node66" href="linklist_8h.html" title="linklist.h" alt="" coords="3094,80,3164,107"/><area shape="rect" id="node68" href="vty_8h.html" title="vty.h" alt="" coords="2850,155,2901,181"/><area shape="rect" id="node72" href="command_8h.html" title="command.h" alt="" coords="2978,80,3069,107"/><area shape="rect" id="node79" href="ospf6d_8h.html" title="ospf6d.h" alt="" coords="3189,80,3264,107"/><area shape="rect" id="node81" href="ospf6__proto_8h.html" title="ospf6_proto.h" alt="" coords="3288,80,3395,107"/><area shape="rect" id="node83" href="ospf6__lsa_8h.html" title="ospf6_lsa.h" alt="" coords="3419,80,3509,107"/><area shape="rect" id="node85" href="ospf6__lsdb_8h.html" title="ospf6_lsdb.h" alt="" coords="3534,80,3633,107"/><area shape="rect" id="node89" href="ospf6__message_8h.html" title="ospf6_message.h" alt="" coords="3789,80,3920,107"/><area shape="rect" id="node91" href="ospf6__route_8h.html" title="ospf6_route.h" alt="" coords="3659,80,3765,107"/><area shape="rect" id="node94" href="ospf6__spf_8h.html" title="ospf6_spf.h" alt="" coords="3944,80,4037,107"/><area shape="rect" id="node96" href="ospf6__top_8h.html" title="ospf6_top.h" alt="" coords="4071,155,4165,181"/><area shape="rect" id="node98" href="ospf6__area_8h.html" title="ospf6_area.h" alt="" coords="4113,80,4212,107"/><area shape="rect" id="node101" href="ospf6__interface_8h.html" title="ospf6_interface.h" alt="" coords="4237,80,4363,107"/><area shape="rect" id="node103" href="ospf6__neighbor_8h.html" title="ospf6_neighbor.h" alt="" coords="4387,80,4513,107"/><area shape="rect" id="node105" href="ospf6__flood_8h.html" title="ospf6_flood.h" alt="" coords="4538,80,4643,107"/><area shape="rect" id="node57" href="zassert_8h.html" title="zassert.h" alt="" coords="597,155,675,181"/><area shape="rect" id="node59" href="str_8h.html" title="str.h" alt="" coords="699,155,748,181"/><area shape="rect" id="node74" href="vector_8h.html" title="vector.h" alt="" coords="3127,155,3199,181"/><area shape="rect" id="node77" href="route__types_8h.html" title="lib/route_types.h" alt="" coords="2978,155,3101,181"/><area shape="rect" id="node87" href="prefix_8h.html" title="prefix.h" alt="" coords="3614,155,3681,181"/></map>
</div>
</div>
<p><a href="ospf6__flood_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#a9c0285ffbb2ec03d9e8951bbffb05eb6">ospf6_get_scoped_lsdb</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#a622d03fd6aa40466ef3d3551b118843e">ospf6_get_scoped_lsdb_self</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#ae9152cb7cf4c07550397913c02d06e5e">ospf6_lsa_originate</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#ae5276f4d60743b472adbbcd7ba08ada1">ospf6_lsa_originate_process</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, struct <a class="el" href="structospf6.html">ospf6</a> *process)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#a3d16e7d20ecaf3dad0a2459d16133cf0">ospf6_lsa_originate_area</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, struct <a class="el" href="structospf6__area.html">ospf6_area</a> *oa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#affcf3da8e7d395a0199d1eb07cd23431">ospf6_lsa_originate_interface</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, struct <a class="el" href="structospf6__interface.html">ospf6_interface</a> *oi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#a249f2b2808a03c8e9998d6bdf209a962">ospf6_lsa_purge</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#a5e4e2b43f317fbb038100a62d6aa089a">ospf6_increment_retrans_count</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#a6bee3a2ba460b276a55915e4f96dae62">ospf6_decrement_retrans_count</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#abb7a5d2b0b4d7595d4fadbf9725ac45f">ospf6_install_lsa</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#a326303137932895a70863563312c9522">ospf6_flood_interface</a> (struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *from, struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, struct <a class="el" href="structospf6__interface.html">ospf6_interface</a> *oi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#a02f529cff1fcc91b198203c58db1ed84">ospf6_flood_area</a> (struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *from, struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, struct <a class="el" href="structospf6__area.html">ospf6_area</a> *oa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#aa7b0cba1dacd974db9e8264e0311502c">ospf6_flood_process</a> (struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *from, struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, struct <a class="el" href="structospf6.html">ospf6</a> *process)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#a075f0016b6d4205102b23b32b79b7da3">ospf6_flood</a> (struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *from, struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#a32de774c0aa56f6d40d696d5d9804a40">ospf6_flood_clear_interface</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, struct <a class="el" href="structospf6__interface.html">ospf6_interface</a> *oi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#a2b00000c3295dd98f3e402421025534b">ospf6_flood_clear_area</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, struct <a class="el" href="structospf6__area.html">ospf6_area</a> *oa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#ad9a260dae55c84b5fa43af6d5f49e1f5">ospf6_flood_clear_process</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, struct <a class="el" href="structospf6.html">ospf6</a> *process)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#adbe9dd92c0ae6afb40021b33ce7d7894">ospf6_flood_clear</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#ac3c08bc483cd2a62d10f9e5263152cbe">ospf6_acknowledge_lsa_bdrouter</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, int ismore_recent, struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *from)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#aa671c81431043d4c6e09cd604be1a80c">ospf6_acknowledge_lsa_allother</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, int ismore_recent, struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *from)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#a98033432ac67097bcf4c1701a5ed2515">ospf6_acknowledge_lsa</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, int ismore_recent, struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *from)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#a477c17a44d4648a12e3b0c6331c6f289">ospf6_is_maxage_lsa_drop</a> (struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *lsa, struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *from)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#a79be22d7f281fba1e60f53c49752bcb9">ospf6_receive_lsa</a> (struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *from, struct <a class="el" href="structospf6__lsa__header.html">ospf6_lsa_header</a> *<a class="el" href="structlsa__header.html">lsa_header</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#a82a2cff8798faa58bbdeb56439dd6b1f">DEFUN</a> (debug_ospf6_flooding, debug_ospf6_flooding_cmd,&quot;debug <a class="el" href="structospf6.html">ospf6</a> flooding&quot;, DEBUG_STR OSPF6_STR&quot;Debug OSPFv3 flooding function\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#a3e3a922415f35a162ee9d0a145682f0a">DEFUN</a> (no_debug_ospf6_flooding, no_debug_ospf6_flooding_cmd,&quot;no debug <a class="el" href="structospf6.html">ospf6</a> flooding&quot;, NO_STR DEBUG_STR OSPF6_STR&quot;Debug OSPFv3 flooding function\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#a623f7487e66cb1cc908126694d63e7d4">config_write_ospf6_debug_flood</a> (struct <a class="el" href="structvty.html">vty</a> *<a class="el" href="structvty.html">vty</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#ab7dc3fe2a560e2b23ccda7f7387a99d0">install_element_ospf6_debug_flood</a> (void)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf6__flood_8c.html#ab5ea0cbe048efb63f24cf10f018e8afa">conf_debug_ospf6_flooding</a></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a623f7487e66cb1cc908126694d63e7d4"></a><!-- doxytag: member="ospf6_flood.c::config_write_ospf6_debug_flood" ref="a623f7487e66cb1cc908126694d63e7d4" args="(struct vty *vty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int config_write_ospf6_debug_flood </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname"><em>vty</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l01008">1008</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__flood_8h.html#ad2c9fd06c28b16f3250f2bf760cb4030">IS_OSPF6_DEBUG_FLOODING</a>)
    <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;debug ospf6 flooding%s&quot;</span>, <a class="code" href="ospf6d_8h.html#a356c06c82b90b274c7f519f9a405142c">VNL</a>);
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a82a2cff8798faa58bbdeb56439dd6b1f"></a><!-- doxytag: member="ospf6_flood.c::DEFUN" ref="a82a2cff8798faa58bbdeb56439dd6b1f" args="(debug_ospf6_flooding, debug_ospf6_flooding_cmd,&quot;debug ospf6 flooding&quot;, DEBUG_STR OSPF6_STR&quot;Debug OSPFv3 flooding function\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">debug_ospf6_flooding&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">debug_ospf6_flooding_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;debug <a class="el" href="structospf6.html">ospf6</a> flooding&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DEBUG_STR OSPF6_STR&quot;Debug OSPFv3 flooding function\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00982">982</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="ospf6__flood_8h.html#aeb1a812d68734ace211eefbd27b79b51">OSPF6_DEBUG_FLOODING_ON</a> ();
  <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3e3a922415f35a162ee9d0a145682f0a"></a><!-- doxytag: member="ospf6_flood.c::DEFUN" ref="a3e3a922415f35a162ee9d0a145682f0a" args="(no_debug_ospf6_flooding, no_debug_ospf6_flooding_cmd,&quot;no debug ospf6 flooding&quot;, NO_STR DEBUG_STR OSPF6_STR&quot;Debug OSPFv3 flooding function\n&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DEFUN </td>
          <td>(</td>
          <td class="paramtype">no_debug_ospf6_flooding&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">no_debug_ospf6_flooding_cmd&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;no debug <a class="el" href="structospf6.html">ospf6</a> flooding&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NO_STR DEBUG_STR OSPF6_STR&quot;Debug OSPFv3 flooding function\<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00994">994</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="ospf6__flood_8h.html#a6dad1c03a135b6e1dc16366fb09d8211">OSPF6_DEBUG_FLOODING_OFF</a> ();
  <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab7dc3fe2a560e2b23ccda7f7387a99d0"></a><!-- doxytag: member="ospf6_flood.c::install_element_ospf6_debug_flood" ref="ab7dc3fe2a560e2b23ccda7f7387a99d0" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void install_element_ospf6_debug_flood </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l01016">1016</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;debug_ospf6_flooding_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a8eeaebd59fec75e66abd261377c21a2d">ENABLE_NODE</a>, &amp;no_debug_ospf6_flooding_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50754044f565f7421a152eaa411eebcc">CONFIG_NODE</a>, &amp;debug_ospf6_flooding_cmd);
  <a class="code" href="command_8c.html#af8546e314a1538d53ef78e4b02804f40">install_element</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50754044f565f7421a152eaa411eebcc">CONFIG_NODE</a>, &amp;no_debug_ospf6_flooding_cmd);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a98033432ac67097bcf4c1701a5ed2515"></a><!-- doxytag: member="ospf6_flood.c::ospf6_acknowledge_lsa" ref="a98033432ac67097bcf4c1701a5ed2515" args="(struct ospf6_lsa *lsa, int ismore_recent, struct ospf6_neighbor *from)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf6_acknowledge_lsa </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ismore_recent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *&#160;</td>
          <td class="paramname"><em>from</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00680">680</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *oi;

  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (from &amp;&amp; from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>);
  oi = from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>;

  <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> == <a class="code" href="ospf6__interface_8h.html#ad0b8da8f1b2db8ec33b43b223b114d51">OSPF6_INTERFACE_BDR</a>)
    <a class="code" href="ospf6__flood_8c.html#ac3c08bc483cd2a62d10f9e5263152cbe">ospf6_acknowledge_lsa_bdrouter</a> (lsa, ismore_recent, from);
  <span class="keywordflow">else</span>
    <a class="code" href="ospf6__flood_8c.html#aa671c81431043d4c6e09cd604be1a80c">ospf6_acknowledge_lsa_allother</a> (lsa, ismore_recent, from);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa671c81431043d4c6e09cd604be1a80c"></a><!-- doxytag: member="ospf6_flood.c::ospf6_acknowledge_lsa_allother" ref="aa671c81431043d4c6e09cd604be1a80c" args="(struct ospf6_lsa *lsa, int ismore_recent, struct ospf6_neighbor *from)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf6_acknowledge_lsa_allother </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ismore_recent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *&#160;</td>
          <td class="paramname"><em>from</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00612">612</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *oi;
  <span class="keywordtype">int</span> is_debug = 0;

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__flood_8h.html#ad2c9fd06c28b16f3250f2bf760cb4030">IS_OSPF6_DEBUG_FLOODING</a> ||
      <a class="code" href="ospf6__lsa_8h.html#a1f3d4f8aab1a6419a23af4d5c72e5e9d">IS_OSPF6_DEBUG_FLOOD_TYPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>))
    is_debug++;

  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (from &amp;&amp; from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>);
  oi = from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>;

  <span class="comment">/* LSA has been flood back out receiving interface.</span>
<span class="comment">     No acknowledgement sent. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a8132d817aaf58410ccfdc18a20020ce1">flag</a>, <a class="code" href="ospf6__lsa_8h.html#a6bb5201a45192e2df9a70c3424ee8b24">OSPF6_LSA_FLOODBACK</a>))
    {
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;No acknowledgement (AllOther &amp; FloodBack)&quot;</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* LSA is more recent than database copy, but was not flooded</span>
<span class="comment">     back out receiving interface. Delayed acknowledgement sent. */</span>
  <span class="keywordflow">if</span> (ismore_recent &lt; 0)
    {
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Delayed acknowledgement (AllOther &amp; MoreRecent)&quot;</span>);
      <span class="comment">/* Delayed acknowledgement */</span>
      <a class="code" href="ospf6__lsdb_8c.html#a0b328a0b2493e0e549d003f50003a199">ospf6_lsdb_add</a> (<a class="code" href="ospf6__lsa_8c.html#a98dc000e578715b010159ca0c5b38a07">ospf6_lsa_copy</a> (lsa), oi-&gt;<a class="code" href="structospf6__interface.html#a3a27876455af04270cf1ff5392f5ced3">lsack_list</a>);
      <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#ac0eb96a5b6f4d1b1d63aa5c0208a7680">thread_send_lsack</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        oi-&gt;<a class="code" href="structospf6__interface.html#ac0eb96a5b6f4d1b1d63aa5c0208a7680">thread_send_lsack</a> =
          <a class="code" href="thread_8h.html#aca77b3bbd166d3573de5ecd9756a590c">thread_add_timer</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#a785542c289b9e000dac0b01b67630f29">ospf6_lsack_send_interface</a>, oi, 3);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* LSA is a duplicate, and was treated as an implied acknowledgement.</span>
<span class="comment">     No acknowledgement sent. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a8132d817aaf58410ccfdc18a20020ce1">flag</a>, <a class="code" href="ospf6__lsa_8h.html#a7296323566ea7398a6c31babdaa6f45c">OSPF6_LSA_DUPLICATE</a>) &amp;&amp;
      <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a8132d817aaf58410ccfdc18a20020ce1">flag</a>, <a class="code" href="ospf6__lsa_8h.html#a842647baa54335f1a394d031f824becc">OSPF6_LSA_IMPLIEDACK</a>))
    {
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;No acknowledgement (AllOther &amp; Duplicate &amp; ImpliedAck)&quot;</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* LSA is a duplicate, and was not treated as an implied acknowledgement.</span>
<span class="comment">     Direct acknowledgement sent */</span>
  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a8132d817aaf58410ccfdc18a20020ce1">flag</a>, <a class="code" href="ospf6__lsa_8h.html#a7296323566ea7398a6c31babdaa6f45c">OSPF6_LSA_DUPLICATE</a>) &amp;&amp;
      ! <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a8132d817aaf58410ccfdc18a20020ce1">flag</a>, <a class="code" href="ospf6__lsa_8h.html#a842647baa54335f1a394d031f824becc">OSPF6_LSA_IMPLIEDACK</a>))
    {
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Direct acknowledgement (AllOther &amp; Duplicate)&quot;</span>);
      <a class="code" href="ospf6__lsdb_8c.html#a0b328a0b2493e0e549d003f50003a199">ospf6_lsdb_add</a> (<a class="code" href="ospf6__lsa_8c.html#a98dc000e578715b010159ca0c5b38a07">ospf6_lsa_copy</a> (lsa), from-&gt;<a class="code" href="structospf6__neighbor.html#ae027726d4952b94fd753b700bd4b7dee">lsack_list</a>);
      <span class="keywordflow">if</span> (from-&gt;<a class="code" href="structospf6__neighbor.html#a3efe4e76725c8138916061f7fbeccd0b">thread_send_lsack</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        from-&gt;<a class="code" href="structospf6__neighbor.html#a3efe4e76725c8138916061f7fbeccd0b">thread_send_lsack</a> =
          <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#abaeba7b19d1caad52e507bd228656385">ospf6_lsack_send_neighbor</a>, from, 0);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* LSA&#39;s LS age is equal to Maxage, and there is no current instance</span>
<span class="comment">     of the LSA in the link state database, and none of router&#39;s</span>
<span class="comment">     neighbors are in states Exchange or Loading */</span>
  <span class="comment">/* Direct acknowledgement sent, but this case is handled in</span>
<span class="comment">     early of ospf6_receive_lsa () */</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac3c08bc483cd2a62d10f9e5263152cbe"></a><!-- doxytag: member="ospf6_flood.c::ospf6_acknowledge_lsa_bdrouter" ref="ac3c08bc483cd2a62d10f9e5263152cbe" args="(struct ospf6_lsa *lsa, int ismore_recent, struct ospf6_neighbor *from)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf6_acknowledge_lsa_bdrouter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ismore_recent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *&#160;</td>
          <td class="paramname"><em>from</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00520">520</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *oi;
  <span class="keywordtype">int</span> is_debug = 0;

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__flood_8h.html#ad2c9fd06c28b16f3250f2bf760cb4030">IS_OSPF6_DEBUG_FLOODING</a> ||
      <a class="code" href="ospf6__lsa_8h.html#a1f3d4f8aab1a6419a23af4d5c72e5e9d">IS_OSPF6_DEBUG_FLOOD_TYPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>))
    is_debug++;

  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (from &amp;&amp; from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>);
  oi = from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>;

  <span class="comment">/* LSA has been flood back out receiving interface.</span>
<span class="comment">     No acknowledgement sent. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a8132d817aaf58410ccfdc18a20020ce1">flag</a>, <a class="code" href="ospf6__lsa_8h.html#a6bb5201a45192e2df9a70c3424ee8b24">OSPF6_LSA_FLOODBACK</a>))
    {
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;No acknowledgement (BDR &amp; FloodBack)&quot;</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* LSA is more recent than database copy, but was not flooded</span>
<span class="comment">     back out receiving interface. Delayed acknowledgement sent</span>
<span class="comment">     if advertisement received from Designated Router,</span>
<span class="comment">     otherwide do nothing. */</span>
  <span class="keywordflow">if</span> (ismore_recent &lt; 0)
    {
      <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#a5e0184b714337299cd1fa5ae9cc87eb0">drouter</a> == from-&gt;<a class="code" href="structospf6__neighbor.html#ac7e3045fcc29c1083d1b638fd64e07e0">router_id</a>)
        {
          <span class="keywordflow">if</span> (is_debug)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Delayed acknowledgement (BDR &amp; MoreRecent &amp; from DR)&quot;</span>);
          <span class="comment">/* Delayed acknowledgement */</span>
          <a class="code" href="ospf6__lsdb_8c.html#a0b328a0b2493e0e549d003f50003a199">ospf6_lsdb_add</a> (<a class="code" href="ospf6__lsa_8c.html#a98dc000e578715b010159ca0c5b38a07">ospf6_lsa_copy</a> (lsa), oi-&gt;<a class="code" href="structospf6__interface.html#a3a27876455af04270cf1ff5392f5ced3">lsack_list</a>);
          <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#ac0eb96a5b6f4d1b1d63aa5c0208a7680">thread_send_lsack</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
            oi-&gt;<a class="code" href="structospf6__interface.html#ac0eb96a5b6f4d1b1d63aa5c0208a7680">thread_send_lsack</a> =
              <a class="code" href="thread_8h.html#aca77b3bbd166d3573de5ecd9756a590c">thread_add_timer</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#a785542c289b9e000dac0b01b67630f29">ospf6_lsack_send_interface</a>, oi, 3);
        }
      <span class="keywordflow">else</span>
        {
          <span class="keywordflow">if</span> (is_debug)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;No acknowledgement (BDR &amp; MoreRecent &amp; ! from DR)&quot;</span>);
        }
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* LSA is a duplicate, and was treated as an implied acknowledgement.</span>
<span class="comment">     Delayed acknowledgement sent if advertisement received from</span>
<span class="comment">     Designated Router, otherwise do nothing */</span>
  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a8132d817aaf58410ccfdc18a20020ce1">flag</a>, <a class="code" href="ospf6__lsa_8h.html#a7296323566ea7398a6c31babdaa6f45c">OSPF6_LSA_DUPLICATE</a>) &amp;&amp;
      <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a8132d817aaf58410ccfdc18a20020ce1">flag</a>, <a class="code" href="ospf6__lsa_8h.html#a842647baa54335f1a394d031f824becc">OSPF6_LSA_IMPLIEDACK</a>))
    {
      <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#a5e0184b714337299cd1fa5ae9cc87eb0">drouter</a> == from-&gt;<a class="code" href="structospf6__neighbor.html#ac7e3045fcc29c1083d1b638fd64e07e0">router_id</a>)
        {
          <span class="keywordflow">if</span> (is_debug)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Delayed acknowledgement (BDR &amp; Duplicate &amp; ImpliedAck &amp; from DR)&quot;</span>);
          <span class="comment">/* Delayed acknowledgement */</span>
          <a class="code" href="ospf6__lsdb_8c.html#a0b328a0b2493e0e549d003f50003a199">ospf6_lsdb_add</a> (<a class="code" href="ospf6__lsa_8c.html#a98dc000e578715b010159ca0c5b38a07">ospf6_lsa_copy</a> (lsa), oi-&gt;<a class="code" href="structospf6__interface.html#a3a27876455af04270cf1ff5392f5ced3">lsack_list</a>);
          <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#ac0eb96a5b6f4d1b1d63aa5c0208a7680">thread_send_lsack</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
            oi-&gt;<a class="code" href="structospf6__interface.html#ac0eb96a5b6f4d1b1d63aa5c0208a7680">thread_send_lsack</a> =
              <a class="code" href="thread_8h.html#aca77b3bbd166d3573de5ecd9756a590c">thread_add_timer</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#a785542c289b9e000dac0b01b67630f29">ospf6_lsack_send_interface</a>, oi, 3);
        }
      <span class="keywordflow">else</span>
        {
          <span class="keywordflow">if</span> (is_debug)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;No acknowledgement (BDR &amp; Duplicate &amp; ImpliedAck &amp; ! from DR)&quot;</span>);
        }
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* LSA is a duplicate, and was not treated as an implied acknowledgement.</span>
<span class="comment">     Direct acknowledgement sent */</span>
  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a8132d817aaf58410ccfdc18a20020ce1">flag</a>, <a class="code" href="ospf6__lsa_8h.html#a7296323566ea7398a6c31babdaa6f45c">OSPF6_LSA_DUPLICATE</a>) &amp;&amp;
      ! <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a8132d817aaf58410ccfdc18a20020ce1">flag</a>, <a class="code" href="ospf6__lsa_8h.html#a842647baa54335f1a394d031f824becc">OSPF6_LSA_IMPLIEDACK</a>))
    {
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Direct acknowledgement (BDR &amp; Duplicate)&quot;</span>);
      <a class="code" href="ospf6__lsdb_8c.html#a0b328a0b2493e0e549d003f50003a199">ospf6_lsdb_add</a> (<a class="code" href="ospf6__lsa_8c.html#a98dc000e578715b010159ca0c5b38a07">ospf6_lsa_copy</a> (lsa), from-&gt;<a class="code" href="structospf6__neighbor.html#ae027726d4952b94fd753b700bd4b7dee">lsack_list</a>);
      <span class="keywordflow">if</span> (from-&gt;<a class="code" href="structospf6__neighbor.html#a3efe4e76725c8138916061f7fbeccd0b">thread_send_lsack</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        from-&gt;<a class="code" href="structospf6__neighbor.html#a3efe4e76725c8138916061f7fbeccd0b">thread_send_lsack</a> =
          <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#abaeba7b19d1caad52e507bd228656385">ospf6_lsack_send_neighbor</a>, from, 0);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* LSA&#39;s LS age is equal to Maxage, and there is no current instance</span>
<span class="comment">     of the LSA in the link state database, and none of router&#39;s</span>
<span class="comment">     neighbors are in states Exchange or Loading */</span>
  <span class="comment">/* Direct acknowledgement sent, but this case is handled in</span>
<span class="comment">     early of ospf6_receive_lsa () */</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6bee3a2ba460b276a55915e4f96dae62"></a><!-- doxytag: member="ospf6_flood.c::ospf6_decrement_retrans_count" ref="a6bee3a2ba460b276a55915e4f96dae62" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_decrement_retrans_count </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00185">185</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *orig;

  <span class="comment">/* The LSA must be on the retrans-list of a neighbor. It means</span>
<span class="comment">     the &quot;lsa&quot; is a copied one, and we have to decrement the</span>
<span class="comment">     retransmission count of the original one (instead of this &quot;lsa&quot;&#39;s).</span>
<span class="comment">     In order to find the original LSA, first we have to find</span>
<span class="comment">     appropriate LSDB that have the original LSA. */</span>
  lsdb = <a class="code" href="ospf6__flood_8c.html#a9c0285ffbb2ec03d9e8951bbffb05eb6">ospf6_get_scoped_lsdb</a> (lsa);

  <span class="comment">/* Find the original LSA of which the retrans_count should be decremented */</span>
  orig = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>,
                            lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, lsdb);
  <span class="keywordflow">if</span> (orig)
    {
      orig-&gt;<a class="code" href="structospf6__lsa.html#af45db024602c72e968f5aee86157612d">retrans_count</a>--;
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (orig-&gt;<a class="code" href="structospf6__lsa.html#af45db024602c72e968f5aee86157612d">retrans_count</a> &gt;= 0);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a075f0016b6d4205102b23b32b79b7da3"></a><!-- doxytag: member="ospf6_flood.c::ospf6_flood" ref="a075f0016b6d4205102b23b32b79b7da3" args="(struct ospf6_neighbor *from, struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_flood </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00438">438</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="ospf6__flood_8c.html#aa7b0cba1dacd974db9e8264e0311502c">ospf6_flood_process</a> (from, lsa, <a class="code" href="structospf6.html">ospf6</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a02f529cff1fcc91b198203c58db1ed84"></a><!-- doxytag: member="ospf6_flood.c::ospf6_flood_area" ref="a02f529cff1fcc91b198203c58db1ed84" args="(struct ospf6_neighbor *from, struct ospf6_lsa *lsa, struct ospf6_area *oa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf6_flood_area </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__area.html">ospf6_area</a> *&#160;</td>
          <td class="paramname"><em>oa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00391">391</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *oi;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (oa-&gt;<a class="code" href="structospf6__area.html#ab06f65e38225287ac3fb4c67cf9dfdcd">if_list</a>, node, nnode, oi))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a2d9f0d76bb67a578675e6b78bf69604d">OSPF6_LSA_SCOPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>) == <a class="code" href="ospf6__lsa_8h.html#ab41aaca88cc27f951f7dbf46b5a6fb5c">OSPF6_SCOPE_LINKLOCAL</a> &amp;&amp;
          oi != <a class="code" href="ospf6d_8h.html#a2dad4cbf7a1897cb8729c3ac2419703d">OSPF6_INTERFACE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>))
        <span class="keywordflow">continue</span>;

<span class="preprocessor">#if 0</span>
<span class="preprocessor"></span>      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a2d9f0d76bb67a578675e6b78bf69604d">OSPF6_LSA_SCOPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>) == <a class="code" href="ospf6__lsa_8h.html#a0701d1d9c961cfb8d6da273382ea508a">OSPF6_SCOPE_AS</a> &amp;&amp;
          ospf6_is_interface_virtual_link (oi))
        <span class="keywordflow">continue</span>;
<span class="preprocessor">#endif</span><span class="comment">/*0*/</span>

      <a class="code" href="ospf6__flood_8c.html#a326303137932895a70863563312c9522">ospf6_flood_interface</a> (from, lsa, oi);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="adbe9dd92c0ae6afb40021b33ce7d7894"></a><!-- doxytag: member="ospf6_flood.c::ospf6_flood_clear" ref="adbe9dd92c0ae6afb40021b33ce7d7894" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_flood_clear </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00512">512</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="ospf6__flood_8c.html#ad9a260dae55c84b5fa43af6d5f49e1f5">ospf6_flood_clear_process</a> (lsa, <a class="code" href="structospf6.html">ospf6</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2b00000c3295dd98f3e402421025534b"></a><!-- doxytag: member="ospf6_flood.c::ospf6_flood_clear_area" ref="a2b00000c3295dd98f3e402421025534b" args="(struct ospf6_lsa *lsa, struct ospf6_area *oa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf6_flood_clear_area </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__area.html">ospf6_area</a> *&#160;</td>
          <td class="paramname"><em>oa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00467">467</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *oi;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (oa-&gt;<a class="code" href="structospf6__area.html#ab06f65e38225287ac3fb4c67cf9dfdcd">if_list</a>, node, nnode, oi))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a2d9f0d76bb67a578675e6b78bf69604d">OSPF6_LSA_SCOPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>) == <a class="code" href="ospf6__lsa_8h.html#ab41aaca88cc27f951f7dbf46b5a6fb5c">OSPF6_SCOPE_LINKLOCAL</a> &amp;&amp;
          oi != <a class="code" href="ospf6d_8h.html#a2dad4cbf7a1897cb8729c3ac2419703d">OSPF6_INTERFACE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>))
        <span class="keywordflow">continue</span>;

<span class="preprocessor">#if 0</span>
<span class="preprocessor"></span>      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a2d9f0d76bb67a578675e6b78bf69604d">OSPF6_LSA_SCOPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>) == <a class="code" href="ospf6__lsa_8h.html#a0701d1d9c961cfb8d6da273382ea508a">OSPF6_SCOPE_AS</a> &amp;&amp;
          ospf6_is_interface_virtual_link (oi))
        <span class="keywordflow">continue</span>;
<span class="preprocessor">#endif</span><span class="comment">/*0*/</span>

      <a class="code" href="ospf6__flood_8c.html#a32de774c0aa56f6d40d696d5d9804a40">ospf6_flood_clear_interface</a> (lsa, oi);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a32de774c0aa56f6d40d696d5d9804a40"></a><!-- doxytag: member="ospf6_flood.c::ospf6_flood_clear_interface" ref="a32de774c0aa56f6d40d696d5d9804a40" args="(struct ospf6_lsa *lsa, struct ospf6_interface *oi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf6_flood_clear_interface </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__interface.html">ospf6_interface</a> *&#160;</td>
          <td class="paramname"><em>oi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00444">444</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *on;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *rem;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (oi-&gt;<a class="code" href="structospf6__interface.html#ada404f0a64a2f3783445fdf2c2dccf6d">neighbor_list</a>, node, nnode, on))
    {
      rem = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>,
                               lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, on-&gt;<a class="code" href="structospf6__neighbor.html#a6e96ad2f82d2741e769bc179d35e583f">retrans_list</a>);
      <span class="keywordflow">if</span> (rem &amp;&amp; ! <a class="code" href="ospf6__lsa_8c.html#af1665de6eac6dab108363c1bf6320c69">ospf6_lsa_compare</a> (rem, lsa))
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf6__flood_8h.html#ad2c9fd06c28b16f3250f2bf760cb4030">IS_OSPF6_DEBUG_FLOODING</a> ||
              <a class="code" href="ospf6__lsa_8h.html#a1f3d4f8aab1a6419a23af4d5c72e5e9d">IS_OSPF6_DEBUG_FLOOD_TYPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>))
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Remove %s from retrans_list of %s&quot;</span>,
                       rem-&gt;<a class="code" href="structospf6__lsa.html#a979d21e1c4d2e1753e7d45641b0819ce">name</a>, on-&gt;<a class="code" href="structospf6__neighbor.html#aa0ccec2f7b9c56628ce2e4a0bc37d463">name</a>);
          <a class="code" href="ospf6__flood_8c.html#a6bee3a2ba460b276a55915e4f96dae62">ospf6_decrement_retrans_count</a> (rem);
          <a class="code" href="ospf6__lsdb_8c.html#a57848d384aafd619bd84c654fb9ed146">ospf6_lsdb_remove</a> (rem, on-&gt;<a class="code" href="structospf6__neighbor.html#a6e96ad2f82d2741e769bc179d35e583f">retrans_list</a>);
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad9a260dae55c84b5fa43af6d5f49e1f5"></a><!-- doxytag: member="ospf6_flood.c::ospf6_flood_clear_process" ref="ad9a260dae55c84b5fa43af6d5f49e1f5" args="(struct ospf6_lsa *lsa, struct ospf6 *process)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf6_flood_clear_process </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6.html">ospf6</a> *&#160;</td>
          <td class="paramname"><em>process</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00489">489</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structospf6__area.html">ospf6_area</a> *oa;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (process-&gt;<a class="code" href="structospf6.html#a6a8e756959f407c36b123ffc040fbe96">area_list</a>, node, nnode, oa))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a2d9f0d76bb67a578675e6b78bf69604d">OSPF6_LSA_SCOPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>) == <a class="code" href="ospf6__lsa_8h.html#a0634f2bb73a043f5782d28e4e3a1ad95">OSPF6_SCOPE_AREA</a> &amp;&amp;
          oa != <a class="code" href="ospf6d_8h.html#a57a3d73f87bce959acf483eb7514a29d">OSPF6_AREA</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>))
        <span class="keywordflow">continue</span>;
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a2d9f0d76bb67a578675e6b78bf69604d">OSPF6_LSA_SCOPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>) == <a class="code" href="ospf6__lsa_8h.html#ab41aaca88cc27f951f7dbf46b5a6fb5c">OSPF6_SCOPE_LINKLOCAL</a> &amp;&amp;
          oa != <a class="code" href="ospf6d_8h.html#a2dad4cbf7a1897cb8729c3ac2419703d">OSPF6_INTERFACE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>)-&gt;area)
        <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (ntohs (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>) == <a class="code" href="ospf6__lsa_8h.html#a4cba002872c9f1e86a8d3fcede9fe4dc">OSPF6_LSTYPE_AS_EXTERNAL</a> &amp;&amp;
          <a class="code" href="ospf6__area_8h.html#af08848f9c3f603caf4af634755a5f3c4">IS_AREA_STUB</a> (oa))
        <span class="keywordflow">continue</span>;

      <a class="code" href="ospf6__flood_8c.html#a2b00000c3295dd98f3e402421025534b">ospf6_flood_clear_area</a> (lsa, oa);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a326303137932895a70863563312c9522"></a><!-- doxytag: member="ospf6_flood.c::ospf6_flood_interface" ref="a326303137932895a70863563312c9522" args="(struct ospf6_neighbor *from, struct ospf6_lsa *lsa, struct ospf6_interface *oi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf6_flood_interface </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__interface.html">ospf6_interface</a> *&#160;</td>
          <td class="paramname"><em>oi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00245">245</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *on;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *req;
  <span class="keywordtype">int</span> retrans_added = 0;
  <span class="keywordtype">int</span> is_debug = 0;

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__flood_8h.html#ad2c9fd06c28b16f3250f2bf760cb4030">IS_OSPF6_DEBUG_FLOODING</a> ||
      <a class="code" href="ospf6__lsa_8h.html#a1f3d4f8aab1a6419a23af4d5c72e5e9d">IS_OSPF6_DEBUG_FLOOD_TYPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>))
    {
      is_debug++;
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Flooding on %s: %s&quot;</span>, oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>-&gt;<a class="code" href="structinterface.html#a98cadce768ec5aacb4c5fc4ca2c3eaa8">name</a>, lsa-&gt;<a class="code" href="structospf6__lsa.html#a979d21e1c4d2e1753e7d45641b0819ce">name</a>);
    }

  <span class="comment">/* (1) For each neighbor */</span>
  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (oi-&gt;<a class="code" href="structospf6__interface.html#ada404f0a64a2f3783445fdf2c2dccf6d">neighbor_list</a>, node, nnode, on))
    {
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;To neighbor %s&quot;</span>, on-&gt;<a class="code" href="structospf6__neighbor.html#aa0ccec2f7b9c56628ce2e4a0bc37d463">name</a>);

      <span class="comment">/* (a) if neighbor state &lt; Exchange, examin next */</span>
      <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> &lt; <a class="code" href="ospf6__neighbor_8h.html#afa0419c15460d1d703d2b3cfa7859984">OSPF6_NEIGHBOR_EXCHANGE</a>)
        {
          <span class="keywordflow">if</span> (is_debug)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Neighbor state less than ExChange, next neighbor&quot;</span>);
          <span class="keywordflow">continue</span>;
        }

      <span class="comment">/* (b) if neighbor not yet Full, check request-list */</span>
      <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> != <a class="code" href="ospf6__neighbor_8h.html#aae1490b2e9d8ca36df8b2127dcc289c1">OSPF6_NEIGHBOR_FULL</a>)
        {
          <span class="keywordflow">if</span> (is_debug)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Neighbor not yet Full&quot;</span>);

          req = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>,
                                   lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, on-&gt;<a class="code" href="structospf6__neighbor.html#a1e0692790f663381e86374ed0e829f95">request_list</a>);
          <span class="keywordflow">if</span> (req == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
            {
              <span class="keywordflow">if</span> (is_debug)
                <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Not on request-list for this neighbor&quot;</span>);
              <span class="comment">/* fall through */</span>
            }
          <span class="keywordflow">else</span>
            {
              <span class="comment">/* If new LSA less recent, examin next neighbor */</span>
              <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8c.html#af1665de6eac6dab108363c1bf6320c69">ospf6_lsa_compare</a> (lsa, req) &gt; 0)
                {
                  <span class="keywordflow">if</span> (is_debug)
                    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Requesting is newer, next neighbor&quot;</span>);
                  <span class="keywordflow">continue</span>;
                }

              <span class="comment">/* If the same instance, delete from request-list and</span>
<span class="comment">                 examin next neighbor */</span>
              <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8c.html#af1665de6eac6dab108363c1bf6320c69">ospf6_lsa_compare</a> (lsa, req) == 0)
                {
                  <span class="keywordflow">if</span> (is_debug)
                    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Requesting the same, remove it, next neighbor&quot;</span>);
                  <a class="code" href="ospf6__lsdb_8c.html#a57848d384aafd619bd84c654fb9ed146">ospf6_lsdb_remove</a> (req, on-&gt;<a class="code" href="structospf6__neighbor.html#a1e0692790f663381e86374ed0e829f95">request_list</a>);
                  <span class="keywordflow">continue</span>;
                }

              <span class="comment">/* If the new LSA is more recent, delete from request-list */</span>
              <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8c.html#af1665de6eac6dab108363c1bf6320c69">ospf6_lsa_compare</a> (lsa, req) &lt; 0)
                {
                  <span class="keywordflow">if</span> (is_debug)
                    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Received is newer, remove requesting&quot;</span>);
                  <a class="code" href="ospf6__lsdb_8c.html#a57848d384aafd619bd84c654fb9ed146">ospf6_lsdb_remove</a> (req, on-&gt;<a class="code" href="structospf6__neighbor.html#a1e0692790f663381e86374ed0e829f95">request_list</a>);
                  <span class="comment">/* fall through */</span>
                }
            }
        }

      <span class="comment">/* (c) If the new LSA was received from this neighbor,</span>
<span class="comment">         examin next neighbor */</span>
      <span class="keywordflow">if</span> (from == on)
        {
          <span class="keywordflow">if</span> (is_debug)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Received is from the neighbor, next neighbor&quot;</span>);
          <span class="keywordflow">continue</span>;
        }

      <span class="comment">/* (d) add retrans-list, schedule retransmission */</span>
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Add retrans-list of this neighbor&quot;</span>);
      <a class="code" href="ospf6__flood_8c.html#a5e4e2b43f317fbb038100a62d6aa089a">ospf6_increment_retrans_count</a> (lsa);
      <a class="code" href="ospf6__lsdb_8c.html#a0b328a0b2493e0e549d003f50003a199">ospf6_lsdb_add</a> (<a class="code" href="ospf6__lsa_8c.html#a98dc000e578715b010159ca0c5b38a07">ospf6_lsa_copy</a> (lsa), on-&gt;<a class="code" href="structospf6__neighbor.html#a6e96ad2f82d2741e769bc179d35e583f">retrans_list</a>);
      <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#ac7e6540e3ce6bd90bc1603a529648a86">thread_send_lsupdate</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        on-&gt;<a class="code" href="structospf6__neighbor.html#ac7e6540e3ce6bd90bc1603a529648a86">thread_send_lsupdate</a> =
          <a class="code" href="thread_8h.html#aca77b3bbd166d3573de5ecd9756a590c">thread_add_timer</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#a50608f7c51e0c039c4735781d1f66690">ospf6_lsupdate_send_neighbor</a>,
                            on, on-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a85d5e73751611ee20f1ad041a181cbde">rxmt_interval</a>);
      retrans_added++;
    }

  <span class="comment">/* (2) examin next interface if not added to retrans-list */</span>
  <span class="keywordflow">if</span> (retrans_added == 0)
    {
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;No retransmission scheduled, next interface&quot;</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* (3) If the new LSA was received on this interface,</span>
<span class="comment">     and it was from DR or BDR, examin next interface */</span>
  <span class="keywordflow">if</span> (from &amp;&amp; from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a> == oi &amp;&amp;
      (from-&gt;<a class="code" href="structospf6__neighbor.html#ac7e3045fcc29c1083d1b638fd64e07e0">router_id</a> == oi-&gt;<a class="code" href="structospf6__interface.html#a5e0184b714337299cd1fa5ae9cc87eb0">drouter</a> || from-&gt;<a class="code" href="structospf6__neighbor.html#ac7e3045fcc29c1083d1b638fd64e07e0">router_id</a> == oi-&gt;<a class="code" href="structospf6__interface.html#a7b1736cd4740da2f26d27caf31983964">bdrouter</a>))
    {
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Received is from the I/F&#39;s DR or BDR, next interface&quot;</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* (4) If the new LSA was received on this interface,</span>
<span class="comment">     and the interface state is BDR, examin next interface */</span>
  <span class="keywordflow">if</span> (from &amp;&amp; from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a> == oi &amp;&amp; oi-&gt;<a class="code" href="structospf6__interface.html#aafdfe7c67c1ff540201718b688e0a15b">state</a> == <a class="code" href="ospf6__interface_8h.html#ad0b8da8f1b2db8ec33b43b223b114d51">OSPF6_INTERFACE_BDR</a>)
    {
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Received is from the I/F, itself BDR, next interface&quot;</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* (5) flood the LSA out the interface. */</span>
  <span class="keywordflow">if</span> (is_debug)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Schedule flooding for the interface&quot;</span>);
  <span class="keywordflow">if</span> (<a class="code" href="if_8c.html#a88f3bd141d217db7e4118a78b1db1b60">if_is_broadcast</a> (oi-&gt;<a class="code" href="structospf6__interface.html#ab77617d3c7c82e25b6c035d9e1856c22">interface</a>))
    {
      <a class="code" href="ospf6__lsdb_8c.html#a0b328a0b2493e0e549d003f50003a199">ospf6_lsdb_add</a> (<a class="code" href="ospf6__lsa_8c.html#a98dc000e578715b010159ca0c5b38a07">ospf6_lsa_copy</a> (lsa), oi-&gt;<a class="code" href="structospf6__interface.html#a42c393a90f856992c87da5a9d0607f98">lsupdate_list</a>);
      <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf6__interface.html#a0f7c7a7f0611d03b12361b0cf0b7cba6">thread_send_lsupdate</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        oi-&gt;<a class="code" href="structospf6__interface.html#a0f7c7a7f0611d03b12361b0cf0b7cba6">thread_send_lsupdate</a> =
          <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#a06554ad9592dbdbc0986c4de39f0c318">ospf6_lsupdate_send_interface</a>, oi, 0);
    }
  <span class="keywordflow">else</span>
    {
      <span class="comment">/* reschedule retransmissions to all neighbors */</span>
      <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (oi-&gt;<a class="code" href="structospf6__interface.html#ada404f0a64a2f3783445fdf2c2dccf6d">neighbor_list</a>, node, nnode, on))
        {
          <a class="code" href="thread_8h.html#a7e1de4fc338e4feae498978461742dbb">THREAD_OFF</a> (on-&gt;<a class="code" href="structospf6__neighbor.html#ac7e6540e3ce6bd90bc1603a529648a86">thread_send_lsupdate</a>);
          on-&gt;<a class="code" href="structospf6__neighbor.html#ac7e6540e3ce6bd90bc1603a529648a86">thread_send_lsupdate</a> =
            <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#a50608f7c51e0c039c4735781d1f66690">ospf6_lsupdate_send_neighbor</a>, on, 0);
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa7b0cba1dacd974db9e8264e0311502c"></a><!-- doxytag: member="ospf6_flood.c::ospf6_flood_process" ref="aa7b0cba1dacd974db9e8264e0311502c" args="(struct ospf6_neighbor *from, struct ospf6_lsa *lsa, struct ospf6 *process)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf6_flood_process </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6.html">ospf6</a> *&#160;</td>
          <td class="paramname"><em>process</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00414">414</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structospf6__area.html">ospf6_area</a> *oa;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (process-&gt;<a class="code" href="structospf6.html#a6a8e756959f407c36b123ffc040fbe96">area_list</a>, node, nnode, oa))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a2d9f0d76bb67a578675e6b78bf69604d">OSPF6_LSA_SCOPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>) == <a class="code" href="ospf6__lsa_8h.html#a0634f2bb73a043f5782d28e4e3a1ad95">OSPF6_SCOPE_AREA</a> &amp;&amp;
          oa != <a class="code" href="ospf6d_8h.html#a57a3d73f87bce959acf483eb7514a29d">OSPF6_AREA</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>))
        <span class="keywordflow">continue</span>;
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a2d9f0d76bb67a578675e6b78bf69604d">OSPF6_LSA_SCOPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>) == <a class="code" href="ospf6__lsa_8h.html#ab41aaca88cc27f951f7dbf46b5a6fb5c">OSPF6_SCOPE_LINKLOCAL</a> &amp;&amp;
          oa != <a class="code" href="ospf6d_8h.html#a2dad4cbf7a1897cb8729c3ac2419703d">OSPF6_INTERFACE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>)-&gt;area)
        <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (ntohs (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>) == <a class="code" href="ospf6__lsa_8h.html#a4cba002872c9f1e86a8d3fcede9fe4dc">OSPF6_LSTYPE_AS_EXTERNAL</a> &amp;&amp;
          <a class="code" href="ospf6__area_8h.html#af08848f9c3f603caf4af634755a5f3c4">IS_AREA_STUB</a> (oa))
        <span class="keywordflow">continue</span>;

      <a class="code" href="ospf6__flood_8c.html#a02f529cff1fcc91b198203c58db1ed84">ospf6_flood_area</a> (from, lsa, oa);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9c0285ffbb2ec03d9e8951bbffb05eb6"></a><!-- doxytag: member="ospf6_flood.c::ospf6_get_scoped_lsdb" ref="a9c0285ffbb2ec03d9e8951bbffb05eb6" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a>* ospf6_get_scoped_lsdb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00048">48</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">switch</span> (<a class="code" href="ospf6__lsa_8h.html#a2d9f0d76bb67a578675e6b78bf69604d">OSPF6_LSA_SCOPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>))
    {
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#ab41aaca88cc27f951f7dbf46b5a6fb5c">OSPF6_SCOPE_LINKLOCAL</a>:
      lsdb = <a class="code" href="ospf6d_8h.html#a2dad4cbf7a1897cb8729c3ac2419703d">OSPF6_INTERFACE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>)-&gt;lsdb;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#a0634f2bb73a043f5782d28e4e3a1ad95">OSPF6_SCOPE_AREA</a>:
      lsdb = <a class="code" href="ospf6d_8h.html#a57a3d73f87bce959acf483eb7514a29d">OSPF6_AREA</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>)-&gt;lsdb;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#a0701d1d9c961cfb8d6da273382ea508a">OSPF6_SCOPE_AS</a>:
      lsdb = <a class="code" href="ospf6d_8h.html#a9d917e6159d9c3125a4784bf0d8e18fd">OSPF6_PROCESS</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>)-&gt;lsdb;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (0);
      <span class="keywordflow">break</span>;
    }
  <span class="keywordflow">return</span> lsdb;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a622d03fd6aa40466ef3d3551b118843e"></a><!-- doxytag: member="ospf6_flood.c::ospf6_get_scoped_lsdb_self" ref="a622d03fd6aa40466ef3d3551b118843e" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf6__lsdb.html">ospf6_lsdb</a>* ospf6_get_scoped_lsdb_self </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00070">70</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb_self = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">switch</span> (<a class="code" href="ospf6__lsa_8h.html#a2d9f0d76bb67a578675e6b78bf69604d">OSPF6_LSA_SCOPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>))
    {
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#ab41aaca88cc27f951f7dbf46b5a6fb5c">OSPF6_SCOPE_LINKLOCAL</a>:
      lsdb_self = <a class="code" href="ospf6d_8h.html#a2dad4cbf7a1897cb8729c3ac2419703d">OSPF6_INTERFACE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>)-&gt;lsdb_self;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#a0634f2bb73a043f5782d28e4e3a1ad95">OSPF6_SCOPE_AREA</a>:
      lsdb_self = <a class="code" href="ospf6d_8h.html#a57a3d73f87bce959acf483eb7514a29d">OSPF6_AREA</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>)-&gt;lsdb_self;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#a0701d1d9c961cfb8d6da273382ea508a">OSPF6_SCOPE_AS</a>:
      lsdb_self = <a class="code" href="ospf6d_8h.html#a9d917e6159d9c3125a4784bf0d8e18fd">OSPF6_PROCESS</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>-&gt;<a class="code" href="structospf6__lsdb.html#a0585a6851b53aafbe83fbaab828f2e21">data</a>)-&gt;lsdb_self;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (0);
      <span class="keywordflow">break</span>;
    }
  <span class="keywordflow">return</span> lsdb_self;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5e4e2b43f317fbb038100a62d6aa089a"></a><!-- doxytag: member="ospf6_flood.c::ospf6_increment_retrans_count" ref="a5e4e2b43f317fbb038100a62d6aa089a" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_increment_retrans_count </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00177">177</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">/* The LSA must be the original one (see the description</span>
<span class="comment">     in ospf6_decrement_retrans_count () below) */</span>
  lsa-&gt;<a class="code" href="structospf6__lsa.html#af45db024602c72e968f5aee86157612d">retrans_count</a>++;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abb7a5d2b0b4d7595d4fadbf9725ac45f"></a><!-- doxytag: member="ospf6_flood.c::ospf6_install_lsa" ref="abb7a5d2b0b4d7595d4fadbf9725ac45f" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_install_lsa </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00209">209</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *old;
  <span class="keyword">struct </span>timeval now;

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a3bf7d5a2afba1551fff365aae68acaea">IS_OSPF6_DEBUG_LSA_TYPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>) ||
      <a class="code" href="ospf6__lsa_8h.html#aaa2084839044bf56e4a49b3c1a8c72cd">IS_OSPF6_DEBUG_EXAMIN_TYPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Install LSA: %s&quot;</span>, lsa-&gt;<a class="code" href="structospf6__lsa.html#a979d21e1c4d2e1753e7d45641b0819ce">name</a>);

  <span class="comment">/* Remove the old instance from all neighbors&#39; Link state</span>
<span class="comment">     retransmission list (RFC2328 13.2 last paragraph) */</span>
  old = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>,
                           lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>);
  <span class="keywordflow">if</span> (old)
    {
      <a class="code" href="thread_8h.html#a7e1de4fc338e4feae498978461742dbb">THREAD_OFF</a> (old-&gt;<a class="code" href="structospf6__lsa.html#a6f546aa95ed513d684623f1b65869f85">expire</a>);
      <a class="code" href="ospf6__flood_8c.html#adbe9dd92c0ae6afb40021b33ce7d7894">ospf6_flood_clear</a> (old);
    }

  <a class="code" href="thread_8c.html#abf5861abe71d6f9a1ddd493be0218de1">quagga_gettime</a> (<a class="code" href="thread_8h.html#a64fff521e88ba8b01645c5bb89085b33a7f92aaa461f13c163b13f96085eb3cd9">QUAGGA_CLK_MONOTONIC</a>, &amp;now);
  <span class="keywordflow">if</span> (! <a class="code" href="ospf6__lsa_8h.html#acde3ad184b10ca14f3eef7b2ab655ce6">OSPF6_LSA_IS_MAXAGE</a> (lsa))
    lsa-&gt;<a class="code" href="structospf6__lsa.html#a6f546aa95ed513d684623f1b65869f85">expire</a> = <a class="code" href="thread_8h.html#aca77b3bbd166d3573de5ecd9756a590c">thread_add_timer</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__lsa_8c.html#aec0a8277db29406323e2f7508b60eebe">ospf6_lsa_expire</a>, lsa,
                                    <a class="code" href="ospf6__proto_8h.html#a7d8ba9ac46dd686ffb8bd269f903b589">MAXAGE</a> + lsa-&gt;<a class="code" href="structospf6__lsa.html#ac5e609908130620c41247b9dbff58b1a">birth</a>.tv_sec - now.tv_sec);
  <span class="keywordflow">else</span>
    lsa-&gt;<a class="code" href="structospf6__lsa.html#a6f546aa95ed513d684623f1b65869f85">expire</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="comment">/* actually install */</span>
  lsa-&gt;<a class="code" href="structospf6__lsa.html#a367291986f9ddaa8157505eca1a31423">installed</a> = now;
  <a class="code" href="ospf6__lsdb_8c.html#a0b328a0b2493e0e549d003f50003a199">ospf6_lsdb_add</a> (lsa, lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>);

  <span class="keywordflow">return</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a477c17a44d4648a12e3b0c6331c6f289"></a><!-- doxytag: member="ospf6_flood.c::ospf6_is_maxage_lsa_drop" ref="a477c17a44d4648a12e3b0c6331c6f289" args="(struct ospf6_lsa *lsa, struct ospf6_neighbor *from)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ospf6_is_maxage_lsa_drop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *&#160;</td>
          <td class="paramname"><em>from</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00699">699</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__neighbor.html">ospf6_neighbor</a> *on;
  <span class="keyword">struct </span><a class="code" href="structospf6__interface.html">ospf6_interface</a> *oi;
  <span class="keyword">struct </span><a class="code" href="structospf6__area.html">ospf6_area</a> *oa;
  <span class="keyword">struct </span><a class="code" href="structospf6.html">ospf6</a> *process = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>, *<a class="code" href="spgrid_8c.html#a7113d77fc628f14d4e7d1262969c613e">j</a>, *<a class="code" href="spgrid_8c.html#a166d56cfd4c4c4d27db0bd3cd0fe81d9">k</a>;
  <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a66e3fedede6aa372e5196e55e5e8d5c1">count</a> = 0;

  <span class="keywordflow">if</span> (! <a class="code" href="ospf6__lsa_8h.html#acde3ad184b10ca14f3eef7b2ab655ce6">OSPF6_LSA_IS_MAXAGE</a> (lsa))
    <span class="keywordflow">return</span> 0;

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>,
                         lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>))
    <span class="keywordflow">return</span> 0;

  process = from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (process-&gt;<a class="code" href="structospf6.html#a6a8e756959f407c36b123ffc040fbe96">area_list</a>, i, oa))
    <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (oa-&gt;<a class="code" href="structospf6__area.html#ab06f65e38225287ac3fb4c67cf9dfdcd">if_list</a>, j, oi))
      <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (oi-&gt;<a class="code" href="structospf6__interface.html#ada404f0a64a2f3783445fdf2c2dccf6d">neighbor_list</a>, k, on))
        <span class="keywordflow">if</span> (on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> == <a class="code" href="ospf6__neighbor_8h.html#afa0419c15460d1d703d2b3cfa7859984">OSPF6_NEIGHBOR_EXCHANGE</a> ||
            on-&gt;<a class="code" href="structospf6__neighbor.html#a4c749b4db801c300f6b11b0340a37600">state</a> == <a class="code" href="ospf6__neighbor_8h.html#aa50b6edd6d1268220ae4e13b2fef14e8">OSPF6_NEIGHBOR_LOADING</a>)
          count++;

  <span class="keywordflow">if</span> (count == 0)
    <span class="keywordflow">return</span> 1;
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae9152cb7cf4c07550397913c02d06e5e"></a><!-- doxytag: member="ospf6_flood.c::ospf6_lsa_originate" ref="ae9152cb7cf4c07550397913c02d06e5e" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsa_originate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00092">92</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *old;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb_self;

  <span class="comment">/* find previous LSA */</span>
  old = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>,
                           lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a>);

  <span class="comment">/* if the new LSA does not differ from previous,</span>
<span class="comment">     suppress this update of the LSA */</span>
  <span class="keywordflow">if</span> (old &amp;&amp; ! <a class="code" href="ospf6__lsa_8h.html#a4c2aac9a75143fc1972f76e677c24c33">OSPF6_LSA_IS_DIFFER</a> (lsa, old))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a3190b5307da7d9277da288d9fd282b96">IS_OSPF6_DEBUG_ORIGINATE_TYPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Suppress updating LSA: %s&quot;</span>, lsa-&gt;<a class="code" href="structospf6__lsa.html#a979d21e1c4d2e1753e7d45641b0819ce">name</a>);
      <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (lsa);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* store it in the LSDB for self-originated LSAs */</span>
  lsdb_self = <a class="code" href="ospf6__flood_8c.html#a622d03fd6aa40466ef3d3551b118843e">ospf6_get_scoped_lsdb_self</a> (lsa);
  <a class="code" href="ospf6__lsdb_8c.html#a0b328a0b2493e0e549d003f50003a199">ospf6_lsdb_add</a> (<a class="code" href="ospf6__lsa_8c.html#a98dc000e578715b010159ca0c5b38a07">ospf6_lsa_copy</a> (lsa), lsdb_self);

  lsa-&gt;<a class="code" href="structospf6__lsa.html#a8ea4daae222c63b142c5072764b7233f">refresh</a> = <a class="code" href="thread_8h.html#aca77b3bbd166d3573de5ecd9756a590c">thread_add_timer</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__lsa_8c.html#a370c05db1f992a6e7f8657ad937f3a5f">ospf6_lsa_refresh</a>, lsa,
                                   <a class="code" href="ospf6__proto_8h.html#ab08ddbd72ec04be1ff6959a492fc3795">LS_REFRESH_TIME</a>);

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#a3bf7d5a2afba1551fff365aae68acaea">IS_OSPF6_DEBUG_LSA_TYPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>) ||
      <a class="code" href="ospf6__lsa_8h.html#a3190b5307da7d9277da288d9fd282b96">IS_OSPF6_DEBUG_ORIGINATE_TYPE</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>))
    {
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA Originate:&quot;</span>);
      <a class="code" href="ospf6__lsa_8c.html#a6f102ec07a6a8c18ae5567b1fab4e845">ospf6_lsa_header_print</a> (lsa);
    }

  <span class="keywordflow">if</span> (old)
    <a class="code" href="ospf6__flood_8c.html#adbe9dd92c0ae6afb40021b33ce7d7894">ospf6_flood_clear</a> (old);
  <a class="code" href="ospf6__flood_8c.html#a075f0016b6d4205102b23b32b79b7da3">ospf6_flood</a> (<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, lsa);
  <a class="code" href="ospf6__flood_8c.html#abb7a5d2b0b4d7595d4fadbf9725ac45f">ospf6_install_lsa</a> (lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3d16e7d20ecaf3dad0a2459d16133cf0"></a><!-- doxytag: member="ospf6_flood.c::ospf6_lsa_originate_area" ref="a3d16e7d20ecaf3dad0a2459d16133cf0" args="(struct ospf6_lsa *lsa, struct ospf6_area *oa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsa_originate_area </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__area.html">ospf6_area</a> *&#160;</td>
          <td class="paramname"><em>oa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00140">140</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a> = oa-&gt;<a class="code" href="structospf6__area.html#a9e658e62c2d59151531bc03b95b600bb">lsdb</a>;
  <a class="code" href="ospf6__flood_8c.html#ae9152cb7cf4c07550397913c02d06e5e">ospf6_lsa_originate</a> (lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="affcf3da8e7d395a0199d1eb07cd23431"></a><!-- doxytag: member="ospf6_flood.c::ospf6_lsa_originate_interface" ref="affcf3da8e7d395a0199d1eb07cd23431" args="(struct ospf6_lsa *lsa, struct ospf6_interface *oi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsa_originate_interface </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__interface.html">ospf6_interface</a> *&#160;</td>
          <td class="paramname"><em>oi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00148">148</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a> = oi-&gt;<a class="code" href="structospf6__interface.html#ab033cb877fe417705f424d1bd2f411de">lsdb</a>;
  <a class="code" href="ospf6__flood_8c.html#ae9152cb7cf4c07550397913c02d06e5e">ospf6_lsa_originate</a> (lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae5276f4d60743b472adbbcd7ba08ada1"></a><!-- doxytag: member="ospf6_flood.c::ospf6_lsa_originate_process" ref="ae5276f4d60743b472adbbcd7ba08ada1" args="(struct ospf6_lsa *lsa, struct ospf6 *process)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsa_originate_process </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6.html">ospf6</a> *&#160;</td>
          <td class="paramname"><em>process</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00132">132</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  lsa-&gt;<a class="code" href="structospf6__lsa.html#a95ec15977abee01addcefa9b91748bf3">lsdb</a> = process-&gt;<a class="code" href="structospf6.html#ac8cf84e34e8461f5aea2737fc2bf8fcb">lsdb</a>;
  <a class="code" href="ospf6__flood_8c.html#ae9152cb7cf4c07550397913c02d06e5e">ospf6_lsa_originate</a> (lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a249f2b2808a03c8e9998d6bdf209a962"></a><!-- doxytag: member="ospf6_flood.c::ospf6_lsa_purge" ref="a249f2b2808a03c8e9998d6bdf209a962" args="(struct ospf6_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_lsa_purge </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa.html">ospf6_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00156">156</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *<span class="keyword">self</span>;
  <span class="keyword">struct </span><a class="code" href="structospf6__lsdb.html">ospf6_lsdb</a> *lsdb_self;

  <span class="comment">/* remove it from the LSDB for self-originated LSAs */</span>
  lsdb_self = <a class="code" href="ospf6__flood_8c.html#a622d03fd6aa40466ef3d3551b118843e">ospf6_get_scoped_lsdb_self</a> (lsa);
  <span class="keyword">self</span> = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#adadc5d3ed71f1b07f56b7692454d2e08">type</a>, lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a663d9c2afc1cdc7a124a2c9d1199e394">id</a>,
                            lsa-&gt;<a class="code" href="structospf6__lsa.html#ad53bee4fa68445da0f4c82b4b0b81f1c">header</a>-&gt;<a class="code" href="structospf6__lsa__header.html#a756706ceafd6ffab88f8ee481fcc3619">adv_router</a>, lsdb_self);
  <span class="keywordflow">if</span> (<span class="keyword">self</span>)
    {
      <a class="code" href="thread_8h.html#a7e1de4fc338e4feae498978461742dbb">THREAD_OFF</a> (self-&gt;expire);
      <a class="code" href="thread_8h.html#a7e1de4fc338e4feae498978461742dbb">THREAD_OFF</a> (self-&gt;refresh);
      <a class="code" href="ospf6__lsdb_8c.html#a57848d384aafd619bd84c654fb9ed146">ospf6_lsdb_remove</a> (<span class="keyword">self</span>, lsdb_self);
    }

  <a class="code" href="ospf6__lsa_8c.html#aee63bc21d208725601a588e998ad54a7">ospf6_lsa_premature_aging</a> (lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a79be22d7f281fba1e60f53c49752bcb9"></a><!-- doxytag: member="ospf6_flood.c::ospf6_receive_lsa" ref="a79be22d7f281fba1e60f53c49752bcb9" args="(struct ospf6_neighbor *from, struct ospf6_lsa_header *lsa_header)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf6_receive_lsa </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf6__neighbor.html">ospf6_neighbor</a> *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf6__lsa__header.html">ospf6_lsa_header</a> *&#160;</td>
          <td class="paramname"><em>lsa_header</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00731">731</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf6__lsa.html">ospf6_lsa</a> *<span class="keyword">new</span> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *old = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *rem = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordtype">int</span> ismore_recent;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> cksum;
  <span class="keywordtype">int</span> is_debug = 0;

  ismore_recent = 1;
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (from);

  <span class="comment">/* make lsa structure for received lsa */</span>
  <span class="keyword">new</span> = <a class="code" href="ospf6__lsa_8c.html#ab8a6a2c7b84b7e0c48eb7be6a3a0cf9c">ospf6_lsa_create</a> (lsa_header);

  <span class="keywordflow">if</span> (<a class="code" href="ospf6__flood_8h.html#ad2c9fd06c28b16f3250f2bf760cb4030">IS_OSPF6_DEBUG_FLOODING</a> ||
      <a class="code" href="ospf6__lsa_8h.html#a1f3d4f8aab1a6419a23af4d5c72e5e9d">IS_OSPF6_DEBUG_FLOOD_TYPE</a> (new-&gt;header-&gt;type))
    {
      is_debug++;
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA Receive from %s&quot;</span>, from-&gt;<a class="code" href="structospf6__neighbor.html#aa0ccec2f7b9c56628ce2e4a0bc37d463">name</a>);
      <a class="code" href="ospf6__lsa_8c.html#a6f102ec07a6a8c18ae5567b1fab4e845">ospf6_lsa_header_print</a> (<span class="keyword">new</span>);
    }

  <span class="comment">/* (1) LSA Checksum */</span>
  cksum = ntohs (new-&gt;header-&gt;checksum);
  <span class="keywordflow">if</span> (ntohs (<a class="code" href="ospf6__lsa_8c.html#a033e364d9b61664964b29893c5070c0d">ospf6_lsa_checksum</a> (new-&gt;header)) != cksum)
    {
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Wrong LSA Checksum, discard&quot;</span>);
      <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* (2) Examine the LSA&#39;s LS type. </span>
<span class="comment">     RFC2470 3.5.1. Receiving Link State Update packets  */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__area_8h.html#af08848f9c3f603caf4af634755a5f3c4">IS_AREA_STUB</a> (from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>) &amp;&amp;
      <a class="code" href="ospf6__lsa_8h.html#a2d9f0d76bb67a578675e6b78bf69604d">OSPF6_LSA_SCOPE</a> (new-&gt;header-&gt;type) == <a class="code" href="ospf6__lsa_8h.html#a0701d1d9c961cfb8d6da273382ea508a">OSPF6_SCOPE_AS</a>)
    {
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;AS-External-LSA (or AS-scope LSA) in stub area, discard&quot;</span>);
      <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* (3) LSA which have reserved scope is discarded</span>
<span class="comment">     RFC2470 3.5.1. Receiving Link State Update packets  */</span>
  <span class="comment">/* Flooding scope check. LSAs with unknown scope are discarded here.</span>
<span class="comment">     Set appropriate LSDB for the LSA */</span>
  <span class="keywordflow">switch</span> (<a class="code" href="ospf6__lsa_8h.html#a2d9f0d76bb67a578675e6b78bf69604d">OSPF6_LSA_SCOPE</a> (new-&gt;header-&gt;type))
    {
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#ab41aaca88cc27f951f7dbf46b5a6fb5c">OSPF6_SCOPE_LINKLOCAL</a>:
      <span class="keyword">new</span>-&gt;lsdb = from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#ab033cb877fe417705f424d1bd2f411de">lsdb</a>;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#a0634f2bb73a043f5782d28e4e3a1ad95">OSPF6_SCOPE_AREA</a>:
      <span class="keyword">new</span>-&gt;lsdb = from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a9e658e62c2d59151531bc03b95b600bb">lsdb</a>;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf6__lsa_8h.html#a0701d1d9c961cfb8d6da273382ea508a">OSPF6_SCOPE_AS</a>:
      <span class="keyword">new</span>-&gt;lsdb = from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#ac8cf84e34e8461f5aea2737fc2bf8fcb">lsdb</a>;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA has reserved scope, discard&quot;</span>);
      <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* (4) if MaxAge LSA and if we have no instance, and no neighbor</span>
<span class="comment">         is in states Exchange or Loading */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__flood_8c.html#a477c17a44d4648a12e3b0c6331c6f289">ospf6_is_maxage_lsa_drop</a> (<span class="keyword">new</span>, from))
    {
      <span class="comment">/* log */</span>
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Drop MaxAge LSA with direct acknowledgement.&quot;</span>);

      <span class="comment">/* a) Acknowledge back to neighbor (Direct acknowledgement, 13.5) */</span>
      <a class="code" href="ospf6__lsdb_8c.html#a0b328a0b2493e0e549d003f50003a199">ospf6_lsdb_add</a> (<a class="code" href="ospf6__lsa_8c.html#a98dc000e578715b010159ca0c5b38a07">ospf6_lsa_copy</a> (<span class="keyword">new</span>), from-&gt;<a class="code" href="structospf6__neighbor.html#ae027726d4952b94fd753b700bd4b7dee">lsack_list</a>);
      <span class="keywordflow">if</span> (from-&gt;<a class="code" href="structospf6__neighbor.html#a3efe4e76725c8138916061f7fbeccd0b">thread_send_lsack</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        from-&gt;<a class="code" href="structospf6__neighbor.html#a3efe4e76725c8138916061f7fbeccd0b">thread_send_lsack</a> =
          <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#abaeba7b19d1caad52e507bd228656385">ospf6_lsack_send_neighbor</a>, from, 0);

      <span class="comment">/* b) Discard */</span>
      <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* (5) */</span>
  <span class="comment">/* lookup the same database copy in lsdb */</span>
  old = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (new-&gt;header-&gt;type, new-&gt;header-&gt;id,
                           new-&gt;header-&gt;adv_router, new-&gt;lsdb);
  <span class="keywordflow">if</span> (old)
    {
      ismore_recent = <a class="code" href="ospf6__lsa_8c.html#af1665de6eac6dab108363c1bf6320c69">ospf6_lsa_compare</a> (<span class="keyword">new</span>, old);
      <span class="keywordflow">if</span> (ntohl (new-&gt;header-&gt;seqnum) == ntohl (old-&gt;header-&gt;seqnum))
        {
          <span class="keywordflow">if</span> (is_debug)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Received is duplicated LSA&quot;</span>);
          <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (new-&gt;flag, <a class="code" href="ospf6__lsa_8h.html#a7296323566ea7398a6c31babdaa6f45c">OSPF6_LSA_DUPLICATE</a>);
        }
    }

  <span class="comment">/* if no database copy or received is more recent */</span>
  <span class="keywordflow">if</span> (old == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || ismore_recent &lt; 0)
    {
      <span class="comment">/* in case we have no database copy */</span>
      ismore_recent = -1;

      <span class="comment">/* (a) MinLSArrival check */</span>
      <span class="keywordflow">if</span> (old)
        {
          <span class="keyword">struct </span>timeval now, res;
          <a class="code" href="thread_8c.html#abf5861abe71d6f9a1ddd493be0218de1">quagga_gettime</a> (<a class="code" href="thread_8h.html#a64fff521e88ba8b01645c5bb89085b33a7f92aaa461f13c163b13f96085eb3cd9">QUAGGA_CLK_MONOTONIC</a>, &amp;now);
          <a class="code" href="ospf6d_8h.html#ad8549d8029286e53812f5d1aab4439e5">timersub</a> (&amp;now, &amp;old-&gt;installed, &amp;res);
          <span class="keywordflow">if</span> (res.tv_sec &lt; <a class="code" href="ospf6__proto_8h.html#abb6f097624398b6ea06b773ef7808e04">MIN_LS_ARRIVAL</a>)
            {
              <span class="keywordflow">if</span> (is_debug)
                <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA can&#39;t be updated within MinLSArrival, discard&quot;</span>);
              <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
              <span class="keywordflow">return</span>;   <span class="comment">/* examin next lsa */</span>
            }
        }

      <a class="code" href="thread_8c.html#abf5861abe71d6f9a1ddd493be0218de1">quagga_gettime</a> (<a class="code" href="thread_8h.html#a64fff521e88ba8b01645c5bb89085b33a7f92aaa461f13c163b13f96085eb3cd9">QUAGGA_CLK_MONOTONIC</a>, &amp;new-&gt;received);

      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Flood, Install, Possibly acknowledge the received LSA&quot;</span>);

      <span class="comment">/* (b) immediately flood and (c) remove from all retrans-list */</span>
      <span class="comment">/* Prevent self-originated LSA to be flooded. this is to make</span>
<span class="comment">      reoriginated instance of the LSA not to be rejected by other routers</span>
<span class="comment">      due to MinLSArrival. */</span>
      <span class="keywordflow">if</span> (new-&gt;header-&gt;adv_router != from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>)
        <a class="code" href="ospf6__flood_8c.html#a075f0016b6d4205102b23b32b79b7da3">ospf6_flood</a> (from, <span class="keyword">new</span>);

      <span class="comment">/* (c) Remove the current database copy from all neighbors&#39; Link</span>
<span class="comment">             state retransmission lists. */</span>
      <span class="comment">/* XXX, flood_clear ? */</span>

      <span class="comment">/* (d), installing lsdb, which may cause routing</span>
<span class="comment">              table calculation (replacing database copy) */</span>
      <a class="code" href="ospf6__flood_8c.html#abb7a5d2b0b4d7595d4fadbf9725ac45f">ospf6_install_lsa</a> (<span class="keyword">new</span>);

      <span class="comment">/* (e) possibly acknowledge */</span>
      <a class="code" href="ospf6__flood_8c.html#a98033432ac67097bcf4c1701a5ed2515">ospf6_acknowledge_lsa</a> (<span class="keyword">new</span>, ismore_recent, from);

      <span class="comment">/* (f) Self Originated LSA, section 13.4 */</span>
      <span class="keywordflow">if</span> (new-&gt;header-&gt;adv_router == from-&gt;<a class="code" href="structospf6__neighbor.html#af9f1a59e8aba26ea269d4423980af20b">ospf6_if</a>-&gt;<a class="code" href="structospf6__interface.html#a4f6cfeea2ecb9f163edd02b78f79294d">area</a>-&gt;<a class="code" href="structospf6__area.html#a86562db489ba46500cda50f4fa646c69">ospf6</a>-&gt;<a class="code" href="structospf6.html#a4dc92a648ae2190f7cf5b383c475d2aa">router_id</a>)
        {
          <span class="comment">/* Self-originated LSA (newer than ours) is received from</span>
<span class="comment">             another router. We have to make a new instance of the LSA</span>
<span class="comment">             or have to flush this LSA. */</span>
          <span class="keywordflow">if</span> (is_debug)
            {
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Newer instance of the self-originated LSA&quot;</span>);
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Schedule reorigination&quot;</span>);
            }
          <span class="keyword">new</span>-&gt;refresh = <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__lsa_8c.html#a370c05db1f992a6e7f8657ad937f3a5f">ospf6_lsa_refresh</a>, <span class="keyword">new</span>, 0);
        }

      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* (6) if there is instance on sending neighbor&#39;s request list */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (new-&gt;header-&gt;type, new-&gt;header-&gt;id,
                         new-&gt;header-&gt;adv_router, from-&gt;<a class="code" href="structospf6__neighbor.html#a1e0692790f663381e86374ed0e829f95">request_list</a>))
    {
      <span class="comment">/* if no database copy, should go above state (5) */</span>
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (old);

      <span class="keywordflow">if</span> (is_debug)
        {
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Received is not newer, on the neighbor&#39;s request-list&quot;</span>);
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;BadLSReq, discard the received LSA&quot;</span>);
        }

      <span class="comment">/* BadLSReq */</span>
      <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__neighbor_8c.html#ab25760cef92f7e894cdcf23ecad3833f">bad_lsreq</a>, from, 0);

      <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* (7) if neither one is more recent */</span>
  <span class="keywordflow">if</span> (ismore_recent == 0)
    {
      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;The same instance as database copy (neither recent)&quot;</span>);

      <span class="comment">/* (a) if on retrans-list, Treat this LSA as an Ack: Implied Ack */</span>
      rem = <a class="code" href="ospf6__lsdb_8c.html#aa49ea0d4a8edbec90f266bf3a541a421">ospf6_lsdb_lookup</a> (new-&gt;header-&gt;type, new-&gt;header-&gt;id,
                               new-&gt;header-&gt;adv_router, from-&gt;<a class="code" href="structospf6__neighbor.html#a6e96ad2f82d2741e769bc179d35e583f">retrans_list</a>);
      <span class="keywordflow">if</span> (rem)
        {
          <span class="keywordflow">if</span> (is_debug)
            {
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;It is on the neighbor&#39;s retrans-list.&quot;</span>);
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Treat as an Implied acknowledgement&quot;</span>);
            }
          <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (new-&gt;flag, <a class="code" href="ospf6__lsa_8h.html#a842647baa54335f1a394d031f824becc">OSPF6_LSA_IMPLIEDACK</a>);
          <a class="code" href="ospf6__flood_8c.html#a6bee3a2ba460b276a55915e4f96dae62">ospf6_decrement_retrans_count</a> (rem);
          <a class="code" href="ospf6__lsdb_8c.html#a57848d384aafd619bd84c654fb9ed146">ospf6_lsdb_remove</a> (rem, from-&gt;<a class="code" href="structospf6__neighbor.html#a6e96ad2f82d2741e769bc179d35e583f">retrans_list</a>);
        }

      <span class="keywordflow">if</span> (is_debug)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Possibly acknowledge and then discard&quot;</span>);

      <span class="comment">/* (b) possibly acknowledge */</span>
      <a class="code" href="ospf6__flood_8c.html#a98033432ac67097bcf4c1701a5ed2515">ospf6_acknowledge_lsa</a> (<span class="keyword">new</span>, ismore_recent, from);

      <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* (8) previous database copy is more recent */</span>
    {
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (old);

      <span class="comment">/* If database copy is in &#39;Seqnumber Wrapping&#39;,</span>
<span class="comment">         simply discard the received LSA */</span>
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__lsa_8h.html#acde3ad184b10ca14f3eef7b2ab655ce6">OSPF6_LSA_IS_MAXAGE</a> (old) &amp;&amp;
          old-&gt;header-&gt;seqnum == htonl (<a class="code" href="ospf6__proto_8h.html#a35f49b34e56993fe20d3a21d144c16d3">MAX_SEQUENCE_NUMBER</a>))
        {
          <span class="keywordflow">if</span> (is_debug)
            {
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;The LSA is in Seqnumber Wrapping&quot;</span>);
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;MaxAge &amp; MaxSeqNum, discard&quot;</span>);
            }
          <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
          <span class="keywordflow">return</span>;
        }

      <span class="comment">/* Otherwise, Send database copy of this LSA to this neighbor */</span>
        {
          <span class="keywordflow">if</span> (is_debug)
            {
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Database copy is more recent.&quot;</span>);
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Send back directly and then discard&quot;</span>);
            }

          <span class="comment">/* XXX, MinLSArrival check !? RFC 2328 13 (8) */</span>

          <a class="code" href="ospf6__lsdb_8c.html#a0b328a0b2493e0e549d003f50003a199">ospf6_lsdb_add</a> (<a class="code" href="ospf6__lsa_8c.html#a98dc000e578715b010159ca0c5b38a07">ospf6_lsa_copy</a> (old), from-&gt;<a class="code" href="structospf6__neighbor.html#ac3f142375bf4e9e7c8e54daed55b4ca4">lsupdate_list</a>);
          <span class="keywordflow">if</span> (from-&gt;<a class="code" href="structospf6__neighbor.html#ac7e6540e3ce6bd90bc1603a529648a86">thread_send_lsupdate</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
            from-&gt;<a class="code" href="structospf6__neighbor.html#ac7e6540e3ce6bd90bc1603a529648a86">thread_send_lsupdate</a> =
              <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf6__message_8c.html#a50608f7c51e0c039c4735781d1f66690">ospf6_lsupdate_send_neighbor</a>, from, 0);
          <a class="code" href="ospf6__lsa_8c.html#ab0741562e3873b904b0a77c2071a690f">ospf6_lsa_delete</a> (<span class="keyword">new</span>);
          <span class="keywordflow">return</span>;
        }
      <span class="keywordflow">return</span>;
    }
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ab5ea0cbe048efb63f24cf10f018e8afa"></a><!-- doxytag: member="ospf6_flood.c::conf_debug_ospf6_flooding" ref="ab5ea0cbe048efb63f24cf10f018e8afa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char <a class="el" href="ospf6__flood_8h.html#ab5ea0cbe048efb63f24cf10f018e8afa">conf_debug_ospf6_flooding</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf6__flood_8c_source.html#l00045">45</a> of file <a class="el" href="ospf6__flood_8c_source.html">ospf6_flood.c</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="ospf6__flood_8c.html">ospf6_flood.c</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:26 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
