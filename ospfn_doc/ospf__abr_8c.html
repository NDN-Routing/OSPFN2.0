<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: ospfd/ospf_abr.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('ospf__abr_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ospfd/ospf_abr.c File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="zebra_8h_source.html">zebra.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="thread_8h_source.html">thread.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="memory_8h_source.html">memory.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="linklist_8h_source.html">linklist.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="prefix_8h_source.html">prefix.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="if_8h_source.html">if.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="table_8h_source.html">table.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="vty_8h_source.html">vty.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="filter_8h_source.html">filter.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="plist_8h_source.html">plist.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="log_8h_source.html">log.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospfd_8h_source.html">ospfd/ospfd.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__interface_8h_source.html">ospfd/ospf_interface.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__ism_8h_source.html">ospfd/ospf_ism.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__asbr_8h_source.html">ospfd/ospf_asbr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__lsa_8h_source.html">ospfd/ospf_lsa.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__lsdb_8h_source.html">ospfd/ospf_lsdb.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__neighbor_8h_source.html">ospfd/ospf_neighbor.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__nsm_8h_source.html">ospfd/ospf_nsm.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__spf_8h_source.html">ospfd/ospf_spf.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__route_8h_source.html">ospfd/ospf_route.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__ia_8h_source.html">ospfd/ospf_ia.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__flood_8h_source.html">ospfd/ospf_flood.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__abr_8h_source.html">ospfd/ospf_abr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__ase_8h_source.html">ospfd/ospf_ase.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__zebra_8h_source.html">ospfd/ospf_zebra.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ospf__dump_8h_source.html">ospfd/ospf_dump.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ospf_abr.c:</div>
<div class="dyncontent">
<div class="center"><img src="ospf__abr_8c__incl.png" border="0" usemap="#ospfd_2ospf__abr_8c" alt=""/></div>
<map name="ospfd_2ospf__abr_8c" id="ospfd_2ospf__abr_8c">
<area shape="rect" id="node3" href="zebra_8h.html" title="zebra.h" alt="" coords="1295,155,1361,181"/><area shape="rect" id="node49" href="thread_8h.html" title="thread.h" alt="" coords="2305,229,2377,256"/><area shape="rect" id="node51" href="memory_8h.html" title="memory.h" alt="" coords="123,80,205,107"/><area shape="rect" id="node53" href="linklist_8h.html" title="linklist.h" alt="" coords="19,304,89,331"/><area shape="rect" id="node55" href="prefix_8h.html" title="prefix.h" alt="" coords="1158,80,1225,107"/><area shape="rect" id="node57" href="if_8h.html" title="if.h" alt="" coords="5,229,45,256"/><area shape="rect" id="node60" href="table_8h.html" title="table.h" alt="" coords="1301,80,1365,107"/><area shape="rect" id="node62" href="vty_8h.html" title="vty.h" alt="" coords="1769,155,1820,181"/><area shape="rect" id="node65" href="log_8h.html" title="log.h" alt="" coords="2402,229,2453,256"/><area shape="rect" id="node68" href="filter_8h.html" title="filter.h" alt="" coords="63,155,123,181"/><area shape="rect" id="node71" href="plist_8h.html" title="plist.h" alt="" coords="1621,80,1680,107"/><area shape="rect" id="node74" href="ospfd_8h.html" title="ospfd/ospfd.h" alt="" coords="1389,80,1496,107"/><area shape="rect" id="node79" href="ospf__interface_8h.html" title="ospfd/ospf_interface.h" alt="" coords="1918,80,2076,107"/><area shape="rect" id="node81" href="ospf__spf_8h.html" title="ospfd/ospf_spf.h" alt="" coords="2847,155,2971,181"/><area shape="rect" id="node83" href="ospf__ism_8h.html" title="ospfd/ospf_ism.h" alt="" coords="2101,80,2227,107"/><area shape="rect" id="node85" href="ospf__asbr_8h.html" title="ospfd/ospf_asbr.h" alt="" coords="2252,80,2383,107"/><area shape="rect" id="node87" href="ospf__lsa_8h.html" title="ospfd/ospf_lsa.h" alt="" coords="2407,80,2529,107"/><area shape="rect" id="node89" href="ospf__lsdb_8h.html" title="ospfd/ospf_lsdb.h" alt="" coords="2553,80,2684,107"/><area shape="rect" id="node91" href="ospf__neighbor_8h.html" title="ospfd/ospf_neighbor.h" alt="" coords="2709,80,2867,107"/><area shape="rect" id="node93" href="ospf__nsm_8h.html" title="ospfd/ospf_nsm.h" alt="" coords="2892,80,3023,107"/><area shape="rect" id="node96" href="ospf__route_8h.html" title="ospfd/ospf_route.h" alt="" coords="3047,80,3184,107"/><area shape="rect" id="node98" href="ospf__ia_8h.html" title="ospfd/ospf_ia.h" alt="" coords="3209,80,3324,107"/><area shape="rect" id="node100" href="ospf__flood_8h.html" title="ospfd/ospf_flood.h" alt="" coords="3348,80,3484,107"/><area shape="rect" id="node102" href="ospf__abr_8h.html" title="ospfd/ospf_abr.h" alt="" coords="3509,80,3632,107"/><area shape="rect" id="node104" href="ospf__ase_8h.html" title="ospfd/ospf_ase.h" alt="" coords="3657,80,3783,107"/><area shape="rect" id="node106" href="ospf__zebra_8h.html" title="ospfd/ospf_zebra.h" alt="" coords="1704,80,1843,107"/><area shape="rect" id="node109" href="ospf__dump_8h.html" title="ospfd/ospf_dump.h" alt="" coords="3859,80,3997,107"/></map>
</div>
</div>
<p><a href="ospf__abr_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#ac6351b1459379c07cb2fd7b880d36c4d">ospf_area_range_new</a> (struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a094fd37167ed8981974a1f8c97f8d574">ospf_area_range_free</a> (struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *range)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#ac775d8b4ed2ded945b71370d17a00472">ospf_area_range_add</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *area, struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *range)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a3ffccf20cd7e255cbf64819a1090b843">ospf_area_range_delete</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *area, struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *range)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a774663b20cea32fea41dc0ade8ead064">ospf_area_range_lookup</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *area, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a093b2aa64d23ea0f5b21591238fef4c5">ospf_area_range_lookup_next</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *area, struct in_addr *range_net, int first)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a7c346a6d5cb1ed72bfcb661f5ac9c962">ospf_area_range_match</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *area, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#ad84a4da09c4f95971fc5f7272c554cf9">ospf_area_range_match_any</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a982c5ad2411024cad7b3979eb1c4d7ab">ospf_area_range_active</a> (struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *range)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#af229422187da31bbb735cc83e2ac2d1b">ospf_area_actively_attached</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *area)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a6ca33081ed6119428dcdf37f52eecb1b">ospf_area_range_set</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct in_addr area_id, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, int advertise)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a281d9b867e259576cde292e81cfc7eb7">ospf_area_range_cost_set</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct in_addr area_id, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, u_int32_t cost)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#aefd9193626cef849c52ce73a0aaf5c5e">ospf_area_range_unset</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct in_addr area_id, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#afb2a1db4485a34464e3aeb49b6148e81">ospf_area_range_substitute_set</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct in_addr area_id, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a2c0eb46084679567c93851b66d78ab35">ospf_area_range_substitute_unset</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct in_addr area_id, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#ad5e6a3408de1c3abbe942d885245c26c">ospf_act_bb_connection</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a16826a88ec9b6e09c0c978397f6af9a2">ospf_abr_nssa_am_elected</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *area)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#ae5cbeb1b329ace7f6ae14b4c02ffb9a5">ospf_abr_nssa_check_status</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#aae7756099eb070db13009f36bfd7736f">ospf_check_abr_status</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a2b01f8c811d0abb75a42adedab0b4af1">ospf_abr_update_aggregate</a> (struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *range, struct <a class="el" href="structospf__route.html">ospf_route</a> *or)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a57499501cfdfc7c1a078bb1c74f54ca5">set_metric</a> (struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa, u_int32_t <a class="el" href="structmetric.html">metric</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#ab86d705427b5af2376bdd46667efb514">ospf_abr_check_nssa_range</a> (struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, u_int32_t cost, struct <a class="el" href="structospf__area.html">ospf_area</a> *area)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a218c36503435eb4ddb454ac0f5f21605">ospf_abr_translate_nssa</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *area, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a1be9148114aa9952994a93198d36f665">ospf_abr_translate_nssa_range</a> (struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, u_int32_t cost)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#ac9d059be83ed701a4f4f549984eb8614">ospf_abr_announce_network_to_area</a> (struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, u_int32_t cost, struct <a class="el" href="structospf__area.html">ospf_area</a> *area)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a2143e9e52ad0093ad4053e1608dce994">ospf_abr_nexthops_belong_to_area</a> (struct <a class="el" href="structospf__route.html">ospf_route</a> *or, struct <a class="el" href="structospf__area.html">ospf_area</a> *area)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a6044eb89ea87b2d4541e47bcde24f81a">ospf_abr_should_accept</a> (struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, struct <a class="el" href="structospf__area.html">ospf_area</a> *area)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a08382be377b3a5bbc3df97fdb6337cde">ospf_abr_plist_in_check</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *area, struct <a class="el" href="structospf__route.html">ospf_route</a> *or, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#af8ec78f63e5fa9a6eccfcfb3f1d23396">ospf_abr_plist_out_check</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *area, struct <a class="el" href="structospf__route.html">ospf_route</a> *or, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#aa90e8b7f78f41e44bb6513c94d45ac91">ospf_abr_announce_network</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, struct <a class="el" href="structospf__route.html">ospf_route</a> *or)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a70f5037c52c64005baae85b170a8ecc9">ospf_abr_should_announce</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, struct <a class="el" href="structospf__route.html">ospf_route</a> *or)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a1fee64e6344a4e913c2b0b3a55915c18">ospf_abr_process_nssa_translates</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a08eac1d777543e2a5ceba05f86718365">ospf_abr_process_network_rt</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct <a class="el" href="structroute__table.html">route_table</a> *rt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#ad1ebac922aae6cb4edbde60b2d054bd8">ospf_abr_announce_rtr_to_area</a> (struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, u_int32_t cost, struct <a class="el" href="structospf__area.html">ospf_area</a> *area)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a53309f31f2e53a478aa2fcabbe0128a7">ospf_abr_announce_rtr</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, struct <a class="el" href="structospf__route.html">ospf_route</a> *or)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a6e95d221f7ea73125b05c9d5a40f8de4">ospf_abr_process_router_rt</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct <a class="el" href="structroute__table.html">route_table</a> *rt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a1030d4abaf7392a251388eb4deec5a40">ospf_abr_unapprove_translates</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#aa382b917196a24d77aea90e4db33d2f0">ospf_abr_unapprove_summaries</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#afca847ae061d1a858adb2d8482890747">ospf_abr_prepare_aggregates</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a953934abb38ade526e393b844f7f02e7">ospf_abr_announce_aggregates</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#abf8866750398700f04b54367eb25eb6e">ospf_abr_send_nssa_aggregates</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a39b97b6c432d39e16b591da26af7c8a0">ospf_abr_announce_nssa_defaults</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a69c79123dfe301c5ab7762850598a199">ospf_abr_announce_stub_defaults</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a980e974d0f9c7e0ab27a041594bed0ec">ospf_abr_remove_unapproved_translates_apply</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *lsa)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a463b9e6cc146ca75d3a256d5672693d2">ospf_abr_remove_unapproved_translates</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a9f4b9ea2aea8eb7fc76a9386fabdc8ae">ospf_abr_remove_unapproved_summaries</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a22e8f135a7aec6a8656007a9f9dabe77">ospf_abr_manage_discard_routes</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#ae6c71422ba55c79a2932bf595a97c0cf">ospf_abr_nssa_task</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a6542439707b08efb93c2cc58103b92cc">ospf_abr_task</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a9b175266d10ffc6d268d313caa0b71fc">ospf_abr_task_timer</a> (struct <a class="el" href="structthread.html">thread</a> *<a class="el" href="structthread.html">thread</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8c.html#a1ff6c727604d00c49b9c4a26131e5462">ospf_schedule_abr_task</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a953934abb38ade526e393b844f7f02e7"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_announce_aggregates" ref="a953934abb38ade526e393b844f7f02e7" args="(struct ospf *ospf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_announce_aggregates </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01431">1431</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>, *ar;
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structprefix.html">prefix</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_aggregates(): Start&quot;</span>);

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, area))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_aggregates(): looking at area %s&quot;</span>,
           inet_ntoa (area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>));

      <span class="keywordflow">for</span> (rn = <a class="code" href="table_8c.html#aee1d06c531794df326d946bdac647fb2">route_top</a> (area-&gt;<a class="code" href="structospf__area.html#ae4d5f7877962eb3e477299a8f93dbfff">ranges</a>); rn; rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn))
    <span class="keywordflow">if</span> ((range =  rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>))
      {
        <span class="keywordflow">if</span> (!<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>))
          {
        <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_aggregates():&quot;</span>
                 <span class="stringliteral">&quot; discarding suppress-ranges&quot;</span>);
        <span class="keywordflow">continue</span>;
          }

        <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.family = AF_INET;
        <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.u.prefix4 = range-&gt;<a class="code" href="structospf__area__range.html#a724f20a6824a90fe2b2c5c5b78e34dc2">addr</a>;
        <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen = range-&gt;<a class="code" href="structospf__area__range.html#ad74a36f5e9873c250a48fd717f206223">masklen</a>;

        <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_aggregates():&quot;</span>
             <span class="stringliteral">&quot; this is range: %s/%d&quot;</span>,
             inet_ntoa (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.u.prefix4), <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen);

        <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#a05a85c40463339240f87aa8200447eb8">OSPF_AREA_RANGE_SUBSTITUTE</a>))
          {
        <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.family = AF_INET;
        <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.u.prefix4 = range-&gt;<a class="code" href="structospf__area__range.html#aae8a961c337b41f842906f32be2e169e">subst_addr</a>;
        <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen = range-&gt;<a class="code" href="structospf__area__range.html#afc6ca0cc37924c70d8d70aa2d426f313">subst_masklen</a>;
          }

        <span class="keywordflow">if</span> (range-&gt;<a class="code" href="structospf__area__range.html#a3d1cb2519f52918c6ebfbcc60dbbbd6d">specifics</a>)
          {
        <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_aggregates(): active range&quot;</span>);

        <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, n, ar))
          {
            <span class="keywordflow">if</span> (ar == area)
              <span class="keywordflow">continue</span>;

            <span class="comment">/* We do not check nexthops here, because</span>
<span class="comment">               intra-area routes can be associated with</span>
<span class="comment">               one area only */</span>

            <span class="comment">/* backbone routes are not summarized</span>
<span class="comment">               when announced into transit areas */</span>

            <span class="keywordflow">if</span> (<a class="code" href="ospf__ia_8c.html#ab842a86f531740d282d27cbaf960cf28">ospf_area_is_transit</a> (ar) &amp;&amp;
            <a class="code" href="ospfd_8h.html#a62518cec4ea9ee2a4db410d3c42b23f7">OSPF_IS_AREA_BACKBONE</a> (area))
              {
            <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_aggregates(): Skipping &quot;</span>
                     <span class="stringliteral">&quot;announcement of BB aggregate into&quot;</span>
                     <span class="stringliteral">&quot; a transit area&quot;</span>);
            <span class="keywordflow">continue</span>; 
              }
            <a class="code" href="ospf__abr_8c.html#ac9d059be83ed701a4f4f549984eb8614">ospf_abr_announce_network_to_area</a> ((<span class="keyword">struct</span> <a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *)&amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, range-&gt;<a class="code" href="structospf__area__range.html#a48ee60db14ab78e1f0435d56fd42d2d0">cost</a>, ar);
          }
          }
      }
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_aggregates(): Stop&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa90e8b7f78f41e44bb6513c94d45ac91"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_announce_network" ref="aa90e8b7f78f41e44bb6513c94d45ac91" args="(struct ospf *ospf, struct prefix_ipv4 *p, struct ospf_route *or)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_announce_network </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__route.html">ospf_route</a> *&#160;</td>
          <td class="paramname"><em>or</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00876">876</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>, *or_area;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network(): Start&quot;</span>);

  or_area = <a class="code" href="ospfd_8c.html#a24d6ed2a6a05e4856e6dbf5eea74f6ef">ospf_area_lookup_by_area_id</a> (ospf, or-&gt;<a class="code" href="structospf__route.html#ab37ba617082e6dec95c8f67eb9b66d7a">u</a>.<a class="code" href="structospf__route.html#a8b1951ef3f626e1c61e30309c36084a3">std</a>.<a class="code" href="structroute__standard.html#adb68650a53fa9189d6af5d484c01f690">area_id</a>); 
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (or_area);

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, area))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network(): looking at area %s&quot;</span>,
           inet_ntoa (area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>));

      <span class="keywordflow">if</span> (<a class="code" href="prefix_8h.html#a52a7c965d0b22ca60fe38fa6c404dbcc">IPV4_ADDR_SAME</a> (&amp;or-&gt;<a class="code" href="structospf__route.html#ab37ba617082e6dec95c8f67eb9b66d7a">u</a>.<a class="code" href="structospf__route.html#a8b1951ef3f626e1c61e30309c36084a3">std</a>.<a class="code" href="structroute__standard.html#adb68650a53fa9189d6af5d484c01f690">area_id</a>, &amp;area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>))
    <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (<a class="code" href="ospf__abr_8c.html#a2143e9e52ad0093ad4053e1608dce994">ospf_abr_nexthops_belong_to_area</a> (or, area))
    <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (!<a class="code" href="ospf__abr_8c.html#a6044eb89ea87b2d4541e47bcde24f81a">ospf_abr_should_accept</a> (p, area))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network(): &quot;</span>
               <span class="stringliteral">&quot;prefix %s/%d was denied by import-list&quot;</span>,
               inet_ntoa (p-&gt;prefix), p-&gt;<a class="code" href="structprefix__ipv4.html#ab96da4bf1eb37195bd564bcf1126a16a">prefixlen</a>);
      <span class="keywordflow">continue</span>; 
    }

      <span class="keywordflow">if</span> (!<a class="code" href="ospf__abr_8c.html#a08382be377b3a5bbc3df97fdb6337cde">ospf_abr_plist_in_check</a> (area, or, p))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network(): &quot;</span>
               <span class="stringliteral">&quot;prefix %s/%d was denied by prefix-list&quot;</span>,
               inet_ntoa (p-&gt;prefix), p-&gt;<a class="code" href="structprefix__ipv4.html#ab96da4bf1eb37195bd564bcf1126a16a">prefixlen</a>);
      <span class="keywordflow">continue</span>; 
    }

      <span class="keywordflow">if</span> (area-&gt;<a class="code" href="structospf__area.html#ac7c3a32e77b40506f5bc26209f41ab89">external_routing</a> != <a class="code" href="ospfd_8h.html#a43f84c8e8584ccc8b82990d251abec4d">OSPF_AREA_DEFAULT</a> &amp;&amp; area-&gt;<a class="code" href="structospf__area.html#a2a2b5634d8424e1a939836254700a8d0">no_summary</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network(): &quot;</span>
               <span class="stringliteral">&quot;area %s is stub and no_summary&quot;</span>,
               inet_ntoa (area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>));
          <span class="keywordflow">continue</span>;
    }

      <span class="keywordflow">if</span> (or-&gt;<a class="code" href="structospf__route.html#a599273b0e8bc1a908cbedd22dcd78bbd">path_type</a> == <a class="code" href="ospf__route_8h.html#a1db558d26de4f9320c77c0d783d7b2b3">OSPF_PATH_INTER_AREA</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network(): this is &quot;</span>
               <span class="stringliteral">&quot;inter-area route to %s/%d&quot;</span>,
               inet_ntoa (p-&gt;prefix), p-&gt;<a class="code" href="structprefix__ipv4.html#ab96da4bf1eb37195bd564bcf1126a16a">prefixlen</a>);

          <span class="keywordflow">if</span> (!<a class="code" href="ospfd_8h.html#a62518cec4ea9ee2a4db410d3c42b23f7">OSPF_IS_AREA_BACKBONE</a> (area))
        <a class="code" href="ospf__abr_8c.html#ac9d059be83ed701a4f4f549984eb8614">ospf_abr_announce_network_to_area</a> (p, or-&gt;<a class="code" href="structospf__route.html#a78ed87939e621a405c66aeb71fa1944d">cost</a>, area);
    }

      <span class="keywordflow">if</span> (or-&gt;<a class="code" href="structospf__route.html#a599273b0e8bc1a908cbedd22dcd78bbd">path_type</a> == <a class="code" href="ospf__route_8h.html#abc7a6177d1cdfac4e8a93ddd4235b08c">OSPF_PATH_INTRA_AREA</a>)
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network(): &quot;</span>
                       <span class="stringliteral">&quot;this is intra-area route to %s/%d&quot;</span>,
                       inet_ntoa (p-&gt;prefix), p-&gt;<a class="code" href="structprefix__ipv4.html#ab96da4bf1eb37195bd564bcf1126a16a">prefixlen</a>);
            <span class="keywordflow">if</span> ((range = <a class="code" href="ospf__abr_8c.html#a7c346a6d5cb1ed72bfcb661f5ac9c962">ospf_area_range_match</a> (or_area, p)) 
                 &amp;&amp; !<a class="code" href="ospf__ia_8c.html#ab842a86f531740d282d27cbaf960cf28">ospf_area_is_transit</a> (area))
              <a class="code" href="ospf__abr_8c.html#a2b01f8c811d0abb75a42adedab0b4af1">ospf_abr_update_aggregate</a> (range, or);
            <span class="keywordflow">else</span>
              <a class="code" href="ospf__abr_8c.html#ac9d059be83ed701a4f4f549984eb8614">ospf_abr_announce_network_to_area</a> (p, or-&gt;<a class="code" href="structospf__route.html#a78ed87939e621a405c66aeb71fa1944d">cost</a>, area);
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac9d059be83ed701a4f4f549984eb8614"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_announce_network_to_area" ref="ac9d059be83ed701a4f4f549984eb8614" args="(struct prefix_ipv4 *p, u_int32_t cost, struct ospf_area *area)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_abr_announce_network_to_area </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>cost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00724">724</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa, *old = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keyword">struct </span><a class="code" href="structsummary__lsa.html">summary_lsa</a> *<a class="code" href="spgrid_8c.html#a1c244c66d157ebaf785a7d1368bf4a28">sl</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network_to_area(): Start&quot;</span>);

  old = <a class="code" href="ospf__lsa_8c.html#ab2e4bd0fdc42ab447eea95c79f21a7e2">ospf_lsa_lookup_by_prefix</a> (area-&gt;<a class="code" href="structospf__area.html#a234992a360998d34aba7b183cf2019c9">lsdb</a>, <a class="code" href="ospf__lsa_8h.html#a3a501e86708401620a7a61e9920cd9bd">OSPF_SUMMARY_LSA</a>, 
                                   (<span class="keyword">struct</span> <a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *) p,
                                   area-&gt;<a class="code" href="structospf__area.html#a0858934cbc3476d83ba7604309c813ad">ospf</a>-&gt;<a class="code" href="structospf.html#acda9328f4f8627516f5c4942a45b4c25">router_id</a>);
  <span class="keywordflow">if</span> (old)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network_to_area(): old summary found&quot;</span>);

      sl = (<span class="keyword">struct </span><a class="code" href="structsummary__lsa.html">summary_lsa</a> *) old-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>;

      if (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network_to_area(): &quot;</span>
               <span class="stringliteral">&quot;old metric: %d, new metric: %d&quot;</span>,
               <a class="code" href="ospf__lsa_8h.html#af484b7995c962cc7558d5fc385b835fc">GET_METRIC</a> (sl-&gt;<a class="code" href="structsummary__lsa.html#a0353f250382513bdfb5962e9c23f822a">metric</a>), cost);
               
      <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8h.html#af484b7995c962cc7558d5fc385b835fc">GET_METRIC</a> (sl-&gt;<a class="code" href="structsummary__lsa.html#a0353f250382513bdfb5962e9c23f822a">metric</a>) == cost)
        {
          <span class="comment">/* unchanged. simply reapprove it */</span>
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network_to_area(): &quot;</span>
                       <span class="stringliteral">&quot;old summary approved&quot;</span>); 
          <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (old-&gt;<a class="code" href="structospf__lsa.html#aa8c833176affd799afeb8db16cdb2602">flags</a>, <a class="code" href="ospf__lsa_8h.html#a7d310b6c5bc390fbe0a0da8a73c43d82">OSPF_LSA_APPROVED</a>);
        }
      <span class="keywordflow">else</span>
        {
          <span class="comment">/* LSA is changed, refresh it */</span>
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network_to_area(): &quot;</span>
                       <span class="stringliteral">&quot;refreshing summary&quot;</span>);
          <a class="code" href="ospf__abr_8c.html#a57499501cfdfc7c1a078bb1c74f54ca5">set_metric</a> (old, cost);
          lsa = <a class="code" href="ospf__lsa_8c.html#ad1ec944b0c3d672071952a4ec0112254">ospf_summary_lsa_refresh</a> (area-&gt;<a class="code" href="structospf__area.html#a0858934cbc3476d83ba7604309c813ad">ospf</a>, old);
          
          <span class="keywordflow">if</span> (!lsa)
            {
          <span class="keywordtype">char</span> buf[<a class="code" href="prefix_8h.html#a93b37007689284fd9c4bde1a8f4b9199">INET_ADDRSTRLEN</a> + 3]; <span class="comment">/* ipv4 and /XX */</span>
          
          <a class="code" href="prefix_8c.html#a8b848557695ae5694bd2282eba23e367">prefix2str</a> ((<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) p, buf, <span class="keyword">sizeof</span>(buf));
          <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;%s: Could not refresh %s to %s&quot;</span>,
                     __func__,
                     buf,
                     inet_ntoa (area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>));
          <span class="keywordflow">return</span>;
        }
      
          <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (lsa-&gt;<a class="code" href="structospf__lsa.html#aa8c833176affd799afeb8db16cdb2602">flags</a>, <a class="code" href="ospf__lsa_8h.html#a7d310b6c5bc390fbe0a0da8a73c43d82">OSPF_LSA_APPROVED</a>);
          <span class="comment">/* This will flood through area. */</span>
        }
    }
  <span class="keywordflow">else</span>
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network_to_area(): &quot;</span>
               <span class="stringliteral">&quot;creating new summary&quot;</span>);
      lsa = <a class="code" href="ospf__lsa_8c.html#a93fd95cdd56566f3929ae642fe197276">ospf_summary_lsa_originate</a> ( (<span class="keyword">struct</span> <a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *)p, cost, area);
          <span class="comment">/* This will flood through area. */</span>
      
      <span class="keywordflow">if</span> (!lsa)
        {
          <span class="keywordtype">char</span> buf[<a class="code" href="prefix_8h.html#a93b37007689284fd9c4bde1a8f4b9199">INET_ADDRSTRLEN</a> + 3]; <span class="comment">/* ipv4 and /XX */</span>
          
          <a class="code" href="prefix_8c.html#a8b848557695ae5694bd2282eba23e367">prefix2str</a> ((<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *)p, buf, <span class="keyword">sizeof</span>(buf));
      <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;%s: Could not originate %s to %s&quot;</span>,
                 __func__,
                 buf,
             inet_ntoa (area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>));
      <span class="keywordflow">return</span>;
    }
      
      <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (lsa-&gt;<a class="code" href="structospf__lsa.html#aa8c833176affd799afeb8db16cdb2602">flags</a>, <a class="code" href="ospf__lsa_8h.html#a7d310b6c5bc390fbe0a0da8a73c43d82">OSPF_LSA_APPROVED</a>);
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network_to_area(): &quot;</span>
               <span class="stringliteral">&quot;flooding new version of summary&quot;</span>);
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network_to_area(): Stop&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a39b97b6c432d39e16b591da26af7c8a0"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_announce_nssa_defaults" ref="a39b97b6c432d39e16b591da26af7c8a0" args="(struct ospf *ospf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_announce_nssa_defaults </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01581">1581</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;

  <span class="keywordflow">if</span> (! <a class="code" href="ospfd_8h.html#a66c6ce8df7e5b79426d9eca9f8ef6d27">IS_OSPF_ABR</a> (ospf))
    <span class="keywordflow">return</span>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_stub_defaults(): Start&quot;</span>);

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, area))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_nssa_defaults(): looking at area %s&quot;</span>,
                   inet_ntoa (area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>));

      <span class="keywordflow">if</span> (area-&gt;<a class="code" href="structospf__area.html#ac7c3a32e77b40506f5bc26209f41ab89">external_routing</a> != <a class="code" href="ospfd_8h.html#a871478d6ecced0907ee1f67c5dbacf99">OSPF_AREA_NSSA</a>)
        <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (<a class="code" href="ospfd_8h.html#a62518cec4ea9ee2a4db410d3c42b23f7">OSPF_IS_AREA_BACKBONE</a> (area))
        <span class="keywordflow">continue</span>; <span class="comment">/* Sanity Check */</span>

      <span class="comment">/* if (!TranslatorRole continue V 1.0 look for &quot;always&quot; conf */</span>
      <span class="keywordflow">if</span> (area-&gt;<a class="code" href="structospf__area.html#a3956cb7dd73ce5563ae652947e12d08e">NSSATranslatorState</a>)
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_nssa_defaults(): &quot;</span>
                       <span class="stringliteral">&quot;announcing 0.0.0.0/0 to this nssa&quot;</span>);
          <span class="comment">/* ospf_abr_announce_nssa_asbr_to_as (&amp;p, area-&gt;default_cost, area); */</span>
          <span class="comment">/*ospf_abr_announce_network_to_area (&amp;p, area-&gt;default_cost, area);*/</span>
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a53309f31f2e53a478aa2fcabbe0128a7"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_announce_rtr" ref="a53309f31f2e53a478aa2fcabbe0128a7" args="(struct ospf *ospf, struct prefix_ipv4 *p, struct ospf_route *or)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_announce_rtr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__route.html">ospf_route</a> *&#160;</td>
          <td class="paramname"><em>or</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01185">1185</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_rtr(): Start&quot;</span>);

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, area))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_rtr(): looking at area %s&quot;</span>,
           inet_ntoa (area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>));

      <span class="keywordflow">if</span> (<a class="code" href="prefix_8h.html#a52a7c965d0b22ca60fe38fa6c404dbcc">IPV4_ADDR_SAME</a> (&amp;or-&gt;<a class="code" href="structospf__route.html#ab37ba617082e6dec95c8f67eb9b66d7a">u</a>.<a class="code" href="structospf__route.html#a8b1951ef3f626e1c61e30309c36084a3">std</a>.<a class="code" href="structroute__standard.html#adb68650a53fa9189d6af5d484c01f690">area_id</a>, &amp;area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>))
    <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (<a class="code" href="ospf__abr_8c.html#a2143e9e52ad0093ad4053e1608dce994">ospf_abr_nexthops_belong_to_area</a> (or, area))
    <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (area-&gt;<a class="code" href="structospf__area.html#ac7c3a32e77b40506f5bc26209f41ab89">external_routing</a> != <a class="code" href="ospfd_8h.html#a43f84c8e8584ccc8b82990d251abec4d">OSPF_AREA_DEFAULT</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_rtr(): &quot;</span>
               <span class="stringliteral">&quot;area %s doesn&#39;t support external routing&quot;</span>,
               inet_ntoa(area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>));
          <span class="keywordflow">continue</span>;
    }

      <span class="keywordflow">if</span> (or-&gt;<a class="code" href="structospf__route.html#a599273b0e8bc1a908cbedd22dcd78bbd">path_type</a> == <a class="code" href="ospf__route_8h.html#a1db558d26de4f9320c77c0d783d7b2b3">OSPF_PATH_INTER_AREA</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_rtr(): &quot;</span>
               <span class="stringliteral">&quot;this is inter-area route to %s&quot;</span>, inet_ntoa (p-&gt;prefix));
          <span class="keywordflow">if</span> (!<a class="code" href="ospfd_8h.html#a62518cec4ea9ee2a4db410d3c42b23f7">OSPF_IS_AREA_BACKBONE</a> (area))
        <a class="code" href="ospf__abr_8c.html#ad1ebac922aae6cb4edbde60b2d054bd8">ospf_abr_announce_rtr_to_area</a> (p, or-&gt;<a class="code" href="structospf__route.html#a78ed87939e621a405c66aeb71fa1944d">cost</a>, area);
    }

      <span class="keywordflow">if</span> (or-&gt;<a class="code" href="structospf__route.html#a599273b0e8bc1a908cbedd22dcd78bbd">path_type</a> == <a class="code" href="ospf__route_8h.html#abc7a6177d1cdfac4e8a93ddd4235b08c">OSPF_PATH_INTRA_AREA</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_rtr(): &quot;</span>
               <span class="stringliteral">&quot;this is intra-area route to %s&quot;</span>, inet_ntoa (p-&gt;prefix));
          <a class="code" href="ospf__abr_8c.html#ad1ebac922aae6cb4edbde60b2d054bd8">ospf_abr_announce_rtr_to_area</a> (p, or-&gt;<a class="code" href="structospf__route.html#a78ed87939e621a405c66aeb71fa1944d">cost</a>, area);
    }
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_rtr(): Stop&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad1ebac922aae6cb4edbde60b2d054bd8"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_announce_rtr_to_area" ref="ad1ebac922aae6cb4edbde60b2d054bd8" args="(struct prefix_ipv4 *p, u_int32_t cost, struct ospf_area *area)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_announce_rtr_to_area </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>cost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01114">1114</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa, *old = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keyword">struct </span><a class="code" href="structsummary__lsa.html">summary_lsa</a> *slsa = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_rtr_to_area(): Start&quot;</span>);

  old = <a class="code" href="ospf__lsa_8c.html#ab2e4bd0fdc42ab447eea95c79f21a7e2">ospf_lsa_lookup_by_prefix</a> (area-&gt;<a class="code" href="structospf__area.html#a234992a360998d34aba7b183cf2019c9">lsdb</a>, <a class="code" href="ospf__lsa_8h.html#a09d9e4a35705f96a15952c63088c0ccc">OSPF_ASBR_SUMMARY_LSA</a>,
                   p, area-&gt;<a class="code" href="structospf__area.html#a0858934cbc3476d83ba7604309c813ad">ospf</a>-&gt;<a class="code" href="structospf.html#acda9328f4f8627516f5c4942a45b4c25">router_id</a>);
  <span class="keywordflow">if</span> (old)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_rtr_to_area(): old summary found&quot;</span>);
      slsa = (<span class="keyword">struct </span><a class="code" href="structsummary__lsa.html">summary_lsa</a> *) old-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>;

      if (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network_to_area(): &quot;</span>
           <span class="stringliteral">&quot;old metric: %d, new metric: %d&quot;</span>,
           <a class="code" href="ospf__lsa_8h.html#af484b7995c962cc7558d5fc385b835fc">GET_METRIC</a> (slsa-&gt;<a class="code" href="structsummary__lsa.html#a0353f250382513bdfb5962e9c23f822a">metric</a>), cost);
    }

  <span class="keywordflow">if</span> (old &amp;&amp; (<a class="code" href="ospf__lsa_8h.html#af484b7995c962cc7558d5fc385b835fc">GET_METRIC</a> (slsa-&gt;<a class="code" href="structsummary__lsa.html#a0353f250382513bdfb5962e9c23f822a">metric</a>) == cost))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_rtr_to_area(): old summary approved&quot;</span>);
      <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (old-&gt;<a class="code" href="structospf__lsa.html#aa8c833176affd799afeb8db16cdb2602">flags</a>, <a class="code" href="ospf__lsa_8h.html#a7d310b6c5bc390fbe0a0da8a73c43d82">OSPF_LSA_APPROVED</a>);
    }
  <span class="keywordflow">else</span>
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_rtr_to_area(): 2.2&quot;</span>);
       
      <span class="keywordflow">if</span> (old) 
    { 
      <a class="code" href="ospf__abr_8c.html#a57499501cfdfc7c1a078bb1c74f54ca5">set_metric</a> (old, cost);
      lsa = <a class="code" href="ospf__lsa_8c.html#a3d394fbfdef8b8da9ead7c5a38bc5204">ospf_summary_asbr_lsa_refresh</a> (area-&gt;<a class="code" href="structospf__area.html#a0858934cbc3476d83ba7604309c813ad">ospf</a>, old);
    }
      <span class="keywordflow">else</span>
    lsa = <a class="code" href="ospf__lsa_8c.html#a876eea14a76fdba052af58a1a69c2bfc">ospf_summary_asbr_lsa_originate</a> (p, cost, area);
      <span class="keywordflow">if</span> (!lsa)
        {
          <span class="keywordtype">char</span> buf[<a class="code" href="prefix_8h.html#a93b37007689284fd9c4bde1a8f4b9199">INET_ADDRSTRLEN</a> + 3]; <span class="comment">/* ipv4 and /XX */</span>
          
          <a class="code" href="prefix_8c.html#a8b848557695ae5694bd2282eba23e367">prefix2str</a> ((<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *)p, buf, <span class="keyword">sizeof</span>(buf));
          <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;%s: Could not refresh/originate %s to %s&quot;</span>,
                     __func__,
                     buf,
                     inet_ntoa (area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>));
          <span class="keywordflow">return</span>;
        }
      
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_rtr_to_area(): &quot;</span>
           <span class="stringliteral">&quot;flooding new version of summary&quot;</span>);

      <span class="comment">/*</span>
<span class="comment">      zlog_info (&quot;ospf_abr_announce_rtr_to_area(): creating new summary&quot;);</span>
<span class="comment">      lsa = ospf_summary_asbr_lsa (p, cost, area, old); */</span>

      <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (lsa-&gt;<a class="code" href="structospf__lsa.html#aa8c833176affd799afeb8db16cdb2602">flags</a>, <a class="code" href="ospf__lsa_8h.html#a7d310b6c5bc390fbe0a0da8a73c43d82">OSPF_LSA_APPROVED</a>);
      <span class="comment">/* ospf_flood_through_area (area, NULL, lsa);*/</span>
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_rtr_to_area(): Stop&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a69c79123dfe301c5ab7762850598a199"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_announce_stub_defaults" ref="a69c79123dfe301c5ab7762850598a199" args="(struct ospf *ospf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_announce_stub_defaults </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01617">1617</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

  <span class="keywordflow">if</span> (! <a class="code" href="ospfd_8h.html#a66c6ce8df7e5b79426d9eca9f8ef6d27">IS_OSPF_ABR</a> (ospf))
    <span class="keywordflow">return</span>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_stub_defaults(): Start&quot;</span>);

  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.family = AF_INET;
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefix.s_addr = <a class="code" href="ospfd_8h.html#aa27acfec5e87443929f2f3cce54116d4">OSPF_DEFAULT_DESTINATION</a>;
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen = 0;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, area))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_stub_defaults(): looking at area %s&quot;</span>,
            inet_ntoa (area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>));

     <span class="keywordflow">if</span> ( (area-&gt;<a class="code" href="structospf__area.html#ac7c3a32e77b40506f5bc26209f41ab89">external_routing</a> != <a class="code" href="ospfd_8h.html#a34e738eee2ef9dfcea3d7f31d36de08c">OSPF_AREA_STUB</a>)
          &amp;&amp; (area-&gt;<a class="code" href="structospf__area.html#ac7c3a32e77b40506f5bc26209f41ab89">external_routing</a> != <a class="code" href="ospfd_8h.html#a871478d6ecced0907ee1f67c5dbacf99">OSPF_AREA_NSSA</a>)
        )
       <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (<a class="code" href="ospfd_8h.html#a62518cec4ea9ee2a4db410d3c42b23f7">OSPF_IS_AREA_BACKBONE</a> (area))
        <span class="keywordflow">continue</span>; <span class="comment">/* Sanity Check */</span>

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_stub_defaults(): &quot;</span>
            <span class="stringliteral">&quot;announcing 0.0.0.0/0 to area %s&quot;</span>,
                 inet_ntoa (area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>));
      <a class="code" href="ospf__abr_8c.html#ac9d059be83ed701a4f4f549984eb8614">ospf_abr_announce_network_to_area</a> (&amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, area-&gt;<a class="code" href="structospf__area.html#a8276632b8bab54988029593bb3ebc502">default_cost</a>, area);
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_stub_defaults(): Stop&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab86d705427b5af2376bdd46667efb514"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_check_nssa_range" ref="ab86d705427b5af2376bdd46667efb514" args="(struct prefix_ipv4 *p, u_int32_t cost, struct ospf_area *area)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ospf_abr_check_nssa_range </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>cost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00618">618</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">/* The Type-7 is tested against the aggregated prefix and forwarded</span>
<span class="comment">       for lsa installation and flooding */</span>
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a22e8f135a7aec6a8656007a9f9dabe77"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_manage_discard_routes" ref="a22e8f135a7aec6a8656007a9f9dabe77" args="(struct ospf *ospf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_manage_discard_routes </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01728">1728</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, nnode, area))
    <span class="keywordflow">for</span> (rn = <a class="code" href="table_8c.html#aee1d06c531794df326d946bdac647fb2">route_top</a> (area-&gt;<a class="code" href="structospf__area.html#ae4d5f7877962eb3e477299a8f93dbfff">ranges</a>); rn; rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn))
      <span class="keywordflow">if</span> ((range = rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>))
      {
        <span class="keywordflow">if</span> (range-&gt;<a class="code" href="structospf__area__range.html#a3d1cb2519f52918c6ebfbcc60dbbbd6d">specifics</a>)
          <a class="code" href="ospf__route_8c.html#a6ba37b7d4dd2c286ad0f70471c048c44">ospf_add_discard_route</a> (ospf-&gt;<a class="code" href="structospf.html#a1fd3dcac2e3c565e23fce6884ffb097f">new_table</a>, area,
                      (<span class="keyword">struct</span> <a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *) &amp;rn-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>);
        <span class="keywordflow">else</span>
          <a class="code" href="ospf__route_8c.html#ad70227bcce895a92b74cc1ed6d30f7b5">ospf_delete_discard_route</a> ((<span class="keyword">struct</span> <a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *) &amp;rn-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>);
      }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2143e9e52ad0093ad4053e1608dce994"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_nexthops_belong_to_area" ref="a2143e9e52ad0093ad4053e1608dce994" args="(struct ospf_route *or, struct ospf_area *area)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ospf_abr_nexthops_belong_to_area </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__route.html">ospf_route</a> *&#160;</td>
          <td class="paramname"><em>or</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00812">812</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structospf__path.html">ospf_path</a> *path;
  <span class="keyword">struct </span><a class="code" href="structospf__interface.html">ospf_interface</a> *oi;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (or-&gt;<a class="code" href="structospf__route.html#af687c07f0e39d7c3a29813777032b075">paths</a>, node, path))
    <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (area-&gt;<a class="code" href="structospf__area.html#aec49fceeb655dde5648208d29dfc66a4">oiflist</a>, nnode, oi))
      <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf__interface.html#a42f951186ccd68e63207f943cb894228">ifp</a> &amp;&amp; oi-&gt;<a class="code" href="structospf__interface.html#a42f951186ccd68e63207f943cb894228">ifp</a>-&gt;<a class="code" href="structinterface.html#ae4c4a0eca6642e37e29e1177a39872ea">ifindex</a> == path-&gt;<a class="code" href="structospf__path.html#a7275881f3f46eace28604c8ebc0ed654">ifindex</a>)
    <span class="keywordflow">return</span> 1;

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a16826a88ec9b6e09c0c978397f6af9a2"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_nssa_am_elected" ref="a16826a88ec9b6e09c0c978397f6af9a2" args="(struct ospf_area *area)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ospf_abr_nssa_am_elected </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00353">353</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;
  <span class="keyword">struct </span><a class="code" href="structrouter__lsa.html">router_lsa</a> *rlsa;
  <span class="keyword">struct </span>in_addr *best = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  
  <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> ( <a class="code" href="ospf__lsdb_8h.html#a9b953d2ac1c54862e897adada93cb8a4">ROUTER_LSDB</a> (area), rn, lsa)
    {
      <span class="comment">/* sanity checks */</span>
      <span class="keywordflow">if</span> (!lsa 
          || (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a> != <a class="code" href="ospf__lsa_8h.html#a35879db42bef5fa9b3c1540b7db95b6f">OSPF_ROUTER_LSA</a>) 
          || <a class="code" href="ospf__lsa_8h.html#aba06df657f75f729003128da649322f8">IS_LSA_SELF</a> (lsa))
        <span class="keywordflow">continue</span>;
      
      rlsa = (<span class="keyword">struct </span><a class="code" href="structrouter__lsa.html">router_lsa</a> *) lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>;
      
      <span class="comment">/* ignore non-ABR routers */</span>
      if (!<a class="code" href="ospf__lsa_8h.html#a6741309c91ce8ca9fc9c07e1ac286c1c">IS_ROUTER_LSA_BORDER</a> (rlsa))
        <span class="keywordflow">continue</span>;
      
      <span class="comment">/* Router has Nt flag - always translate */</span>
      <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8h.html#af2ae932f9055d5b3c649e6c474e91380">IS_ROUTER_LSA_NT</a> (rlsa))
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_nssa_am_elected: &quot;</span>
                       <span class="stringliteral">&quot;router %s asserts Nt&quot;</span>,
                       inet_ntoa (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>) );
          <span class="keywordflow">return</span> 0;
        }
      
      <span class="keywordflow">if</span> (best == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        best = &amp;lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>;
      <span class="keywordflow">else</span>
        <span class="keywordflow">if</span> ( <a class="code" href="prefix_8h.html#aed79e5e7f07f40fd10b39c04fbb24fc8">IPV4_ADDR_CMP</a> (&amp;best, &amp;lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>) &lt; 0)
          best = &amp;lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>;
    }
    
    <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_nssa_am_elected: best electable ABR is: %s&quot;</span>,
                  (best) ? inet_ntoa (*best) : <span class="stringliteral">&quot;&lt;none&gt;&quot;</span> );
                  
    <span class="keywordflow">if</span> (best == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
      <span class="keywordflow">return</span> 1;
    
    <span class="keywordflow">if</span> ( <a class="code" href="prefix_8h.html#aed79e5e7f07f40fd10b39c04fbb24fc8">IPV4_ADDR_CMP</a> (&amp;best, &amp;area-&gt;<a class="code" href="structospf__area.html#a0858934cbc3476d83ba7604309c813ad">ospf</a>-&gt;<a class="code" href="structospf.html#acda9328f4f8627516f5c4942a45b4c25">router_id</a>) &lt; 0)
      <span class="keywordflow">return</span> 1;
    <span class="keywordflow">else</span>
      <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae5cbeb1b329ace7f6ae14b4c02ffb9a5"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_nssa_check_status" ref="ae5cbeb1b329ace7f6ae14b4c02ffb9a5" args="(struct ospf *ospf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_nssa_check_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00408">408</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *lnode, *nnode;
  
  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, lnode, nnode, area))
    {
      u_char old_state = area-&gt;<a class="code" href="structospf__area.html#a3956cb7dd73ce5563ae652947e12d08e">NSSATranslatorState</a>;

      <span class="keywordflow">if</span> (area-&gt;<a class="code" href="structospf__area.html#ac7c3a32e77b40506f5bc26209f41ab89">external_routing</a> != <a class="code" href="ospfd_8h.html#a871478d6ecced0907ee1f67c5dbacf99">OSPF_AREA_NSSA</a>)
        <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (nssa, NSSA))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_nssa_check_status: &quot;</span>
                    <span class="stringliteral">&quot;checking area %s&quot;</span>,
                    inet_ntoa (area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>));

      <span class="keywordflow">if</span> (!<a class="code" href="ospfd_8h.html#a66c6ce8df7e5b79426d9eca9f8ef6d27">IS_OSPF_ABR</a> (area-&gt;<a class="code" href="structospf__area.html#a0858934cbc3476d83ba7604309c813ad">ospf</a>))
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (nssa, NSSA))
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_nssa_check_status: &quot;</span> 
                        <span class="stringliteral">&quot;not ABR&quot;</span>);
          area-&gt;<a class="code" href="structospf__area.html#a3956cb7dd73ce5563ae652947e12d08e">NSSATranslatorState</a> = <a class="code" href="ospfd_8h.html#a35683a93ec45417ffe36e59f8af39d4d">OSPF_NSSA_TRANSLATE_DISABLED</a>;
        }
      <span class="keywordflow">else</span>
        {
          <span class="keywordflow">switch</span> (area-&gt;<a class="code" href="structospf__area.html#a42f4ce1b9291935fc71a30d93049d588">NSSATranslatorRole</a>)
            {
            <span class="keywordflow">case</span> <a class="code" href="ospfd_8h.html#aa1c86b38557eb3a83bc4e254c0b56850">OSPF_NSSA_ROLE_NEVER</a>:
              <span class="comment">/* We never Translate Type-7 LSA. */</span>
              <span class="comment">/* TODO: check previous state and flush? */</span>
              <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (nssa, NSSA))
                <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_nssa_check_status: &quot;</span>
                <span class="stringliteral">&quot;never translate&quot;</span>);
              area-&gt;<a class="code" href="structospf__area.html#a3956cb7dd73ce5563ae652947e12d08e">NSSATranslatorState</a> = <a class="code" href="ospfd_8h.html#a35683a93ec45417ffe36e59f8af39d4d">OSPF_NSSA_TRANSLATE_DISABLED</a>;
              <span class="keywordflow">break</span>;

            <span class="keywordflow">case</span> <a class="code" href="ospfd_8h.html#a961ac1771b39d1a78dcfa6a0ac084d79">OSPF_NSSA_ROLE_ALWAYS</a>:
              <span class="comment">/* We always translate if we are an ABR</span>
<span class="comment">               * TODO: originate new LSAs if state change?</span>
<span class="comment">               * or let the nssa abr task take care of it?</span>
<span class="comment">               */</span>
              <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (nssa, NSSA))
                <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_nssa_check_status: &quot;</span>
                            <span class="stringliteral">&quot;translate always&quot;</span>);
              area-&gt;<a class="code" href="structospf__area.html#a3956cb7dd73ce5563ae652947e12d08e">NSSATranslatorState</a> = <a class="code" href="ospfd_8h.html#aa1c8868146a0ce1d8d3c85229f5df640">OSPF_NSSA_TRANSLATE_ENABLED</a>;
              <span class="keywordflow">break</span>;

            <span class="keywordflow">case</span> <a class="code" href="ospfd_8h.html#a6421313c3b9108552cecefe06304ae1e">OSPF_NSSA_ROLE_CANDIDATE</a>:
              <span class="comment">/* We are a candidate for Translation */</span>
              <span class="keywordflow">if</span> (<a class="code" href="ospf__abr_8c.html#a16826a88ec9b6e09c0c978397f6af9a2">ospf_abr_nssa_am_elected</a> (area) &gt; 0)
                {
                  area-&gt;<a class="code" href="structospf__area.html#a3956cb7dd73ce5563ae652947e12d08e">NSSATranslatorState</a> = <a class="code" href="ospfd_8h.html#aa1c8868146a0ce1d8d3c85229f5df640">OSPF_NSSA_TRANSLATE_ENABLED</a>;
                  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (nssa, NSSA))
                    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_nssa_check_status: &quot;</span>
                                <span class="stringliteral">&quot;elected translator&quot;</span>);
                }
              <span class="keywordflow">else</span>
                {
                  area-&gt;<a class="code" href="structospf__area.html#a3956cb7dd73ce5563ae652947e12d08e">NSSATranslatorState</a> = <a class="code" href="ospfd_8h.html#a35683a93ec45417ffe36e59f8af39d4d">OSPF_NSSA_TRANSLATE_DISABLED</a>;
                  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (nssa, NSSA))
                    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_nssa_check_status: &quot;</span> <span class="stringliteral">&quot;not elected&quot;</span>);
                }
              <span class="keywordflow">break</span>;
            }
        }
      <span class="comment">/* RFC3101, 3.1:</span>
<span class="comment">       * All NSSA border routers must set the E-bit in the Type-1 router-LSAs</span>
<span class="comment">       * of their directly attached non-stub areas, even when they are not</span>
<span class="comment">       * translating.</span>
<span class="comment">       */</span>
      <span class="keywordflow">if</span> (old_state != area-&gt;<a class="code" href="structospf__area.html#a3956cb7dd73ce5563ae652947e12d08e">NSSATranslatorState</a>)
        {
          <span class="keywordflow">if</span> (old_state == <a class="code" href="ospfd_8h.html#a35683a93ec45417ffe36e59f8af39d4d">OSPF_NSSA_TRANSLATE_DISABLED</a>)
        <a class="code" href="ospf__asbr_8c.html#a15ef7b9d7fd4f1120453e770c076160a">ospf_asbr_status_update</a> (ospf, ++ospf-&gt;<a class="code" href="structospf.html#a298631df5a443358670e6415175f2251">redistribute</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (area-&gt;<a class="code" href="structospf__area.html#a3956cb7dd73ce5563ae652947e12d08e">NSSATranslatorState</a> == <a class="code" href="ospfd_8h.html#a35683a93ec45417ffe36e59f8af39d4d">OSPF_NSSA_TRANSLATE_DISABLED</a>)
        <a class="code" href="ospf__asbr_8c.html#a15ef7b9d7fd4f1120453e770c076160a">ospf_asbr_status_update</a> (ospf, --ospf-&gt;<a class="code" href="structospf.html#a298631df5a443358670e6415175f2251">redistribute</a>);
    }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae6c71422ba55c79a2932bf595a97c0cf"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_nssa_task" ref="ae6c71422ba55c79a2932bf595a97c0cf" args="(struct ospf *ospf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_nssa_task </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01774">1774</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Check for NSSA-ABR Tasks():&quot;</span>);

  <span class="keywordflow">if</span> (! <a class="code" href="ospfd_8h.html#a66c6ce8df7e5b79426d9eca9f8ef6d27">IS_OSPF_ABR</a> (ospf))
    <span class="keywordflow">return</span>;

  <span class="keywordflow">if</span> (! ospf-&gt;<a class="code" href="structospf.html#ad20715ef15a9c610284474aa9f1df3bc">anyNSSA</a>)
    <span class="keywordflow">return</span>;

  <span class="comment">/* Each area must confirm TranslatorRole */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_nssa_task(): Start&quot;</span>);

  <span class="comment">/* For all Global Entries flagged &quot;local-translate&quot;, unset APPROVED */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_nssa_task(): unapprove translates&quot;</span>);

  <a class="code" href="ospf__abr_8c.html#a1030d4abaf7392a251388eb4deec5a40">ospf_abr_unapprove_translates</a> (ospf);

  <span class="comment">/* RESET all Ranges in every Area, same as summaries */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_nssa_task(): NSSA initialize aggregates&quot;</span>);
  <a class="code" href="ospf__abr_8c.html#afca847ae061d1a858adb2d8482890747">ospf_abr_prepare_aggregates</a> (ospf);  <span class="comment">/*TURNED OFF just for now */</span>

  <span class="comment">/* For all NSSAs, Type-7s, translate to 5&#39;s, INSTALL/FLOOD, or</span>
<span class="comment">   *  Aggregate as Type-7</span>
<span class="comment">   * Install or Approve in Type-5 Global LSDB </span>
<span class="comment">   */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_nssa_task(): process translates&quot;</span>);
  <a class="code" href="ospf__abr_8c.html#a1fee64e6344a4e913c2b0b3a55915c18">ospf_abr_process_nssa_translates</a> (ospf);

  <span class="comment">/* Translate/Send any &quot;ranged&quot; aggregates, and also 5-Install and</span>
<span class="comment">   *  Approve</span>
<span class="comment">   * Scan Type-7&#39;s for aggregates, translate to Type-5&#39;s,</span>
<span class="comment">   *  Install/Flood/Approve </span>
<span class="comment">   */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a>(<span class="stringliteral">&quot;ospf_abr_nssa_task(): send NSSA aggregates&quot;</span>);
  <a class="code" href="ospf__abr_8c.html#abf8866750398700f04b54367eb25eb6e">ospf_abr_send_nssa_aggregates</a> (ospf);  <span class="comment">/*TURNED OFF FOR NOW */</span>

  <span class="comment">/* Send any NSSA defaults as Type-5 </span>
<span class="comment">   *if (IS_DEBUG_OSPF_NSSA)</span>
<span class="comment">   * zlog_debug (&quot;ospf_abr_nssa_task(): announce nssa defaults&quot;);</span>
<span class="comment">   *ospf_abr_announce_nssa_defaults (ospf);</span>
<span class="comment">   * havnt a clue what above is supposed to do.</span>
<span class="comment">   */</span>
   
  <span class="comment">/* Flush any unapproved previous translates from Global Data Base */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_nssa_task(): remove unapproved translates&quot;</span>);
  <a class="code" href="ospf__abr_8c.html#a463b9e6cc146ca75d3a256d5672693d2">ospf_abr_remove_unapproved_translates</a> (ospf);

  <a class="code" href="ospf__abr_8c.html#a22e8f135a7aec6a8656007a9f9dabe77">ospf_abr_manage_discard_routes</a> (ospf); <span class="comment">/* same as normal...discard */</span>

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_nssa_task(): Stop&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a08382be377b3a5bbc3df97fdb6337cde"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_plist_in_check" ref="a08382be377b3a5bbc3df97fdb6337cde" args="(struct ospf_area *area, struct ospf_route *or, struct prefix_ipv4 *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ospf_abr_plist_in_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__route.html">ospf_route</a> *&#160;</td>
          <td class="paramname"><em>or</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00844">844</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__area_8h.html#abe51249890d05db475de4eed718656ea">PREFIX_NAME_IN</a> (area))
    {
      <span class="keywordflow">if</span> (<a class="code" href="bgp__route_8h.html#ad143503066e23e446015fc61ba2e72ed">PREFIX_LIST_IN</a> (area) == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <a class="code" href="bgp__route_8h.html#ad143503066e23e446015fc61ba2e72ed">PREFIX_LIST_IN</a> (area) = <a class="code" href="plist_8c.html#adfce5b38dccccdc141ffd3571b73a656">prefix_list_lookup</a> (<a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>,
                            <a class="code" href="ospf6__area_8h.html#abe51249890d05db475de4eed718656ea">PREFIX_NAME_IN</a> (area));
      <span class="keywordflow">if</span> (<a class="code" href="bgp__route_8h.html#ad143503066e23e446015fc61ba2e72ed">PREFIX_LIST_IN</a> (area))
    <span class="keywordflow">if</span> (<a class="code" href="plist_8c.html#a6fd9bac08d2cb3d2e315d88af146a7f0">prefix_list_apply</a> (<a class="code" href="bgp__route_8h.html#ad143503066e23e446015fc61ba2e72ed">PREFIX_LIST_IN</a> (area), p) != <a class="code" href="plist_8h.html#a3bda5ec3d1202bc8eb472b4d97633cf9a6dd95e4ac6d2a01c478cd44b9bc2427a">PREFIX_PERMIT</a>)
      <span class="keywordflow">return</span> 0;
    }
  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af8ec78f63e5fa9a6eccfcfb3f1d23396"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_plist_out_check" ref="af8ec78f63e5fa9a6eccfcfb3f1d23396" args="(struct ospf_area *area, struct ospf_route *or, struct prefix_ipv4 *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ospf_abr_plist_out_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__route.html">ospf_route</a> *&#160;</td>
          <td class="paramname"><em>or</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00860">860</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__area_8h.html#a4ec3abaef7e217292ab5589e1b207957">PREFIX_NAME_OUT</a> (area))
    {
      <span class="keywordflow">if</span> (<a class="code" href="bgp__route_8h.html#ab694ea0ccae4db3b7e858c2517e41480">PREFIX_LIST_OUT</a> (area) == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <a class="code" href="bgp__route_8h.html#ab694ea0ccae4db3b7e858c2517e41480">PREFIX_LIST_OUT</a> (area) = <a class="code" href="plist_8c.html#adfce5b38dccccdc141ffd3571b73a656">prefix_list_lookup</a> (<a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>,
                             <a class="code" href="ospf6__area_8h.html#a4ec3abaef7e217292ab5589e1b207957">PREFIX_NAME_OUT</a> (area));
      <span class="keywordflow">if</span> (<a class="code" href="bgp__route_8h.html#ab694ea0ccae4db3b7e858c2517e41480">PREFIX_LIST_OUT</a> (area))
    <span class="keywordflow">if</span> (<a class="code" href="plist_8c.html#a6fd9bac08d2cb3d2e315d88af146a7f0">prefix_list_apply</a> (<a class="code" href="bgp__route_8h.html#ab694ea0ccae4db3b7e858c2517e41480">PREFIX_LIST_OUT</a> (area), p) != <a class="code" href="plist_8h.html#a3bda5ec3d1202bc8eb472b4d97633cf9a6dd95e4ac6d2a01c478cd44b9bc2427a">PREFIX_PERMIT</a>)
      <span class="keywordflow">return</span> 0;
    }
  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afca847ae061d1a858adb2d8482890747"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_prepare_aggregates" ref="afca847ae061d1a858adb2d8482890747" args="(struct ospf *ospf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_prepare_aggregates </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01406">1406</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_prepare_aggregates(): Start&quot;</span>);

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, area))
    {
      <span class="keywordflow">for</span> (rn = <a class="code" href="table_8c.html#aee1d06c531794df326d946bdac647fb2">route_top</a> (area-&gt;<a class="code" href="structospf__area.html#ae4d5f7877962eb3e477299a8f93dbfff">ranges</a>); rn; rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn))
    <span class="keywordflow">if</span> ((range = rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
      {
        range-&gt;<a class="code" href="structospf__area__range.html#a48ee60db14ab78e1f0435d56fd42d2d0">cost</a> = 0;
        range-&gt;<a class="code" href="structospf__area__range.html#a3d1cb2519f52918c6ebfbcc60dbbbd6d">specifics</a> = 0;
      }
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_prepare_aggregates(): Stop&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a08eac1d777543e2a5ceba05f86718365"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_process_network_rt" ref="a08eac1d777543e2a5ceba05f86718365" args="(struct ospf *ospf, struct route_table *rt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_process_network_rt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structroute__table.html">route_table</a> *&#160;</td>
          <td class="paramname"><em>rt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01016">1016</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structospf__route.html">ospf_route</a> *or;
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_network_rt(): Start&quot;</span>);

  <span class="keywordflow">for</span> (rn = <a class="code" href="table_8c.html#aee1d06c531794df326d946bdac647fb2">route_top</a> (rt); rn; rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn))
    {
      <span class="keywordflow">if</span> ((or = rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>) == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (!(area = <a class="code" href="ospfd_8c.html#a24d6ed2a6a05e4856e6dbf5eea74f6ef">ospf_area_lookup_by_area_id</a> (ospf, or-&gt;<a class="code" href="structospf__route.html#ab37ba617082e6dec95c8f67eb9b66d7a">u</a>.<a class="code" href="structospf__route.html#a8b1951ef3f626e1c61e30309c36084a3">std</a>.<a class="code" href="structroute__standard.html#adb68650a53fa9189d6af5d484c01f690">area_id</a>)))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_network_rt(): area %s no longer exists&quot;</span>,
               inet_ntoa (or-&gt;<a class="code" href="structospf__route.html#ab37ba617082e6dec95c8f67eb9b66d7a">u</a>.<a class="code" href="structospf__route.html#a8b1951ef3f626e1c61e30309c36084a3">std</a>.<a class="code" href="structroute__standard.html#adb68650a53fa9189d6af5d484c01f690">area_id</a>));
      <span class="keywordflow">continue</span>;
    }

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_network_rt(): this is a route to %s/%d&quot;</span>,
           inet_ntoa (rn-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>.u.<a class="code" href="structprefix.html#ab37b8922554b41b7dc2417d8f37e7829">prefix4</a>), rn-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>.<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a>);
      <span class="keywordflow">if</span> (or-&gt;<a class="code" href="structospf__route.html#a599273b0e8bc1a908cbedd22dcd78bbd">path_type</a> &gt;= <a class="code" href="ospf__route_8h.html#a15dab014460164847059902ea4535834">OSPF_PATH_TYPE1_EXTERNAL</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_network_rt(): &quot;</span>
               <span class="stringliteral">&quot;this is an External router, skipping&quot;</span>);
      <span class="keywordflow">continue</span>;
    }

      <span class="keywordflow">if</span> (or-&gt;<a class="code" href="structospf__route.html#a78ed87939e621a405c66aeb71fa1944d">cost</a> &gt;= <a class="code" href="ospfd_8h.html#ac490c9aeaac791b5e779097813b5298e">OSPF_LS_INFINITY</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_network_rt():&quot;</span>
               <span class="stringliteral">&quot; this route&#39;s cost is infinity, skipping&quot;</span>);
      <span class="keywordflow">continue</span>;
    }

      <span class="keywordflow">if</span> (or-&gt;<a class="code" href="structospf__route.html#a68c9cb8cb5a39fb9d8d2b0817731c75b">type</a> == <a class="code" href="ospf__route_8h.html#a09ebe549088ee60073be68140c0f07a9">OSPF_DESTINATION_DISCARD</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_network_rt():&quot;</span>
               <span class="stringliteral">&quot; this is a discard entry, skipping&quot;</span>);
      <span class="keywordflow">continue</span>;
    }

      <span class="keywordflow">if</span> (or-&gt;<a class="code" href="structospf__route.html#a599273b0e8bc1a908cbedd22dcd78bbd">path_type</a> == <a class="code" href="ospf__route_8h.html#abc7a6177d1cdfac4e8a93ddd4235b08c">OSPF_PATH_INTRA_AREA</a> &amp;&amp;
      !<a class="code" href="ospf__abr_8c.html#a70f5037c52c64005baae85b170a8ecc9">ospf_abr_should_announce</a> (ospf, (<span class="keyword">struct</span> <a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *) &amp;rn-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>, or))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a>(<span class="stringliteral">&quot;ospf_abr_process_network_rt(): denied by export-list&quot;</span>);
      <span class="keywordflow">continue</span>;
    }

      <span class="keywordflow">if</span> (or-&gt;<a class="code" href="structospf__route.html#a599273b0e8bc1a908cbedd22dcd78bbd">path_type</a> == <a class="code" href="ospf__route_8h.html#abc7a6177d1cdfac4e8a93ddd4235b08c">OSPF_PATH_INTRA_AREA</a> &amp;&amp;
      !<a class="code" href="ospf__abr_8c.html#af8ec78f63e5fa9a6eccfcfb3f1d23396">ospf_abr_plist_out_check</a> (area, or, (<span class="keyword">struct</span> <a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *) &amp;rn-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a>(<span class="stringliteral">&quot;ospf_abr_process_network_rt(): denied by prefix-list&quot;</span>);
      <span class="keywordflow">continue</span>;
    }

      <span class="keywordflow">if</span> ((or-&gt;<a class="code" href="structospf__route.html#a599273b0e8bc1a908cbedd22dcd78bbd">path_type</a> == <a class="code" href="ospf__route_8h.html#a1db558d26de4f9320c77c0d783d7b2b3">OSPF_PATH_INTER_AREA</a>) &amp;&amp;
          !<a class="code" href="ospfd_8h.html#a3c9df8914219b5ad5aa165ecc3428ae0">OSPF_IS_AREA_ID_BACKBONE</a> (or-&gt;<a class="code" href="structospf__route.html#ab37ba617082e6dec95c8f67eb9b66d7a">u</a>.<a class="code" href="structospf__route.html#a8b1951ef3f626e1c61e30309c36084a3">std</a>.<a class="code" href="structroute__standard.html#adb68650a53fa9189d6af5d484c01f690">area_id</a>))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_network_rt():&quot;</span>
               <span class="stringliteral">&quot; this is route is not backbone one, skipping&quot;</span>);
      <span class="keywordflow">continue</span>;
    }


      <span class="keywordflow">if</span> ((ospf-&gt;<a class="code" href="structospf.html#ad1c5b3263ee1326f5720d0d09bfce53c">abr_type</a> == <a class="code" href="ospfd_8h.html#aac0be2e336b1b7bcb296c6e9ba32b6ae">OSPF_ABR_CISCO</a>) ||
          (ospf-&gt;<a class="code" href="structospf.html#ad1c5b3263ee1326f5720d0d09bfce53c">abr_type</a> == <a class="code" href="ospfd_8h.html#a22c05e10f58a965d1023edc4d8a23313">OSPF_ABR_IBM</a>))

          <span class="keywordflow">if</span> (!<a class="code" href="ospf__abr_8c.html#ad5e6a3408de1c3abbe942d885245c26c">ospf_act_bb_connection</a> (ospf) &amp;&amp;
              or-&gt;<a class="code" href="structospf__route.html#a599273b0e8bc1a908cbedd22dcd78bbd">path_type</a> != <a class="code" href="ospf__route_8h.html#abc7a6177d1cdfac4e8a93ddd4235b08c">OSPF_PATH_INTRA_AREA</a>)
         {
           <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
         <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_network_rt(): ALT ABR: &quot;</span>
                <span class="stringliteral">&quot;No BB connection, skip not intra-area routes&quot;</span>);
           <span class="keywordflow">continue</span>;
         }

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_network_rt(): announcing&quot;</span>);
      <a class="code" href="ospf__abr_8c.html#aa90e8b7f78f41e44bb6513c94d45ac91">ospf_abr_announce_network</a> (ospf, (<span class="keyword">struct</span> <a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *)&amp;rn-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>, or);
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_network_rt(): Stop&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1fee64e6344a4e913c2b0b3a55915c18"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_process_nssa_translates" ref="a1fee64e6344a4e913c2b0b3a55915c18" args="(struct ospf *ospf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_process_nssa_translates </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00978">978</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">/* Scan through all NSSA_LSDB records for all areas;</span>
<span class="comment"></span>
<span class="comment">     If P-bit is on, translate all Type-7&#39;s to 5&#39;s and aggregate or</span>
<span class="comment">     flood install as approved in Type-5 LSDB with XLATE Flag on</span>
<span class="comment">     later, do same for all aggregates...  At end, DISCARD all</span>
<span class="comment">     remaining UNAPPROVED Type-5&#39;s (Aggregate is for future ) */</span>
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_nssa_translates(): Start&quot;</span>);

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, area))
    {
      <span class="keywordflow">if</span> (! area-&gt;<a class="code" href="structospf__area.html#a3956cb7dd73ce5563ae652947e12d08e">NSSATranslatorState</a>)
        <span class="keywordflow">continue</span>; <span class="comment">/* skip if not translator */</span>
      
      <span class="keywordflow">if</span> (area-&gt;<a class="code" href="structospf__area.html#ac7c3a32e77b40506f5bc26209f41ab89">external_routing</a> != <a class="code" href="ospfd_8h.html#a871478d6ecced0907ee1f67c5dbacf99">OSPF_AREA_NSSA</a>)
        <span class="keywordflow">continue</span>;  <span class="comment">/* skip if not Nssa Area */</span>

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_nssa_translates(): &quot;</span>
                   <span class="stringliteral">&quot;looking at area %s&quot;</span>, inet_ntoa (area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>));
      
      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#aa704d331d2ac4e4034faca5c0f177364">NSSA_LSDB</a> (area), rn, lsa)
        <a class="code" href="ospf__abr_8c.html#a218c36503435eb4ddb454ac0f5f21605">ospf_abr_translate_nssa</a> (area, lsa);
    }
 
  if (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (&quot;<a class="code" href="ospf__abr_8c.html#a1fee64e6344a4e913c2b0b3a55915c18">ospf_abr_process_nssa_translates</a>(): Stop&quot;);

}
</pre></div>
</div>
</div>
<a class="anchor" id="a6e95d221f7ea73125b05c9d5a40f8de4"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_process_router_rt" ref="a6e95d221f7ea73125b05c9d5a40f8de4" args="(struct ospf *ospf, struct route_table *rt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_process_router_rt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structroute__table.html">route_table</a> *&#160;</td>
          <td class="paramname"><em>rt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01238">1238</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__route.html">ospf_route</a> *or;
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structlist.html">list</a> *<a class="code" href="spgrid_8c.html#a92119ef27b84f1e2e15792d7ea360ba4">l</a>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_router_rt(): Start&quot;</span>);

  <span class="keywordflow">for</span> (rn = <a class="code" href="table_8c.html#aee1d06c531794df326d946bdac647fb2">route_top</a> (rt); rn; rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn))
    {
      <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
      <span class="keywordtype">char</span> flag = 0;
      <span class="keyword">struct </span><a class="code" href="structospf__route.html">ospf_route</a> *best = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

      <span class="keywordflow">if</span> (rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">continue</span>;

      l = rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_router_rt(): this is a route to %s&quot;</span>,
           inet_ntoa (rn-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>.u.<a class="code" href="structprefix.html#ab37b8922554b41b7dc2417d8f37e7829">prefix4</a>));

      <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (l, node, nnode, or))
    {
      <span class="keywordflow">if</span> (!<a class="code" href="ospfd_8c.html#a24d6ed2a6a05e4856e6dbf5eea74f6ef">ospf_area_lookup_by_area_id</a> (ospf, or-&gt;<a class="code" href="structospf__route.html#ab37ba617082e6dec95c8f67eb9b66d7a">u</a>.<a class="code" href="structospf__route.html#a8b1951ef3f626e1c61e30309c36084a3">std</a>.<a class="code" href="structroute__standard.html#adb68650a53fa9189d6af5d484c01f690">area_id</a>))
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_router_rt(): area %s no longer exists&quot;</span>,
             inet_ntoa (or-&gt;<a class="code" href="structospf__route.html#ab37ba617082e6dec95c8f67eb9b66d7a">u</a>.<a class="code" href="structospf__route.html#a8b1951ef3f626e1c61e30309c36084a3">std</a>.<a class="code" href="structroute__standard.html#adb68650a53fa9189d6af5d484c01f690">area_id</a>));
          <span class="keywordflow">continue</span>;
        }


      <span class="keywordflow">if</span> (!<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (or-&gt;<a class="code" href="structospf__route.html#ab37ba617082e6dec95c8f67eb9b66d7a">u</a>.<a class="code" href="structospf__route.html#a8b1951ef3f626e1c61e30309c36084a3">std</a>.<a class="code" href="structroute__standard.html#abd1fb7a470e51e2dc894282f5c1a637b">flags</a>, <a class="code" href="ospf__lsa_8h.html#a050470d5439fd96299124e0debe3444f">ROUTER_LSA_EXTERNAL</a>))
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_router_rt(): &quot;</span>
               <span class="stringliteral">&quot;This is not an ASBR, skipping&quot;</span>);
          <span class="keywordflow">continue</span>;
        }

      <span class="keywordflow">if</span> (!flag)
        {
          best = <a class="code" href="ospf__ase_8c.html#a5e8bc396fd6aac3eba792e511f2ae56b">ospf_find_asbr_route</a> (ospf, rt,
                       (<span class="keyword">struct</span> <a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *) &amp;rn-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>);
          flag = 1;
        }
      
        <span class="keywordflow">if</span> (best == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
      <span class="keywordflow">continue</span>;
    
        <span class="keywordflow">if</span> (or != best)
      {
        <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_router_rt(): &quot;</span>
             <span class="stringliteral">&quot;This route is not the best among possible, skipping&quot;</span>);
        <span class="keywordflow">continue</span>;
      }
    
        <span class="keywordflow">if</span> (or-&gt;<a class="code" href="structospf__route.html#a599273b0e8bc1a908cbedd22dcd78bbd">path_type</a> == <a class="code" href="ospf__route_8h.html#a1db558d26de4f9320c77c0d783d7b2b3">OSPF_PATH_INTER_AREA</a> &amp;&amp;
            !<a class="code" href="ospfd_8h.html#a3c9df8914219b5ad5aa165ecc3428ae0">OSPF_IS_AREA_ID_BACKBONE</a> (or-&gt;<a class="code" href="structospf__route.html#ab37ba617082e6dec95c8f67eb9b66d7a">u</a>.<a class="code" href="structospf__route.html#a8b1951ef3f626e1c61e30309c36084a3">std</a>.<a class="code" href="structroute__standard.html#adb68650a53fa9189d6af5d484c01f690">area_id</a>))
      {
        <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_router_rt(): &quot;</span>
             <span class="stringliteral">&quot;This route is not a backbone one, skipping&quot;</span>);
        <span class="keywordflow">continue</span>;
      }

        <span class="keywordflow">if</span> (or-&gt;<a class="code" href="structospf__route.html#a78ed87939e621a405c66aeb71fa1944d">cost</a> &gt;= <a class="code" href="ospfd_8h.html#ac490c9aeaac791b5e779097813b5298e">OSPF_LS_INFINITY</a>)
      {
        <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_router_rt(): &quot;</span>
             <span class="stringliteral">&quot;This route has LS_INFINITY metric, skipping&quot;</span>);
        <span class="keywordflow">continue</span>;
      }

        <span class="keywordflow">if</span> (ospf-&gt;<a class="code" href="structospf.html#ad1c5b3263ee1326f5720d0d09bfce53c">abr_type</a> == <a class="code" href="ospfd_8h.html#aac0be2e336b1b7bcb296c6e9ba32b6ae">OSPF_ABR_CISCO</a>
        || ospf-&gt;<a class="code" href="structospf.html#ad1c5b3263ee1326f5720d0d09bfce53c">abr_type</a> == <a class="code" href="ospfd_8h.html#a22c05e10f58a965d1023edc4d8a23313">OSPF_ABR_IBM</a>)
      <span class="keywordflow">if</span> (!<a class="code" href="ospf__abr_8c.html#ad5e6a3408de1c3abbe942d885245c26c">ospf_act_bb_connection</a> (ospf)
          &amp;&amp; or-&gt;<a class="code" href="structospf__route.html#a599273b0e8bc1a908cbedd22dcd78bbd">path_type</a> != <a class="code" href="ospf__route_8h.html#abc7a6177d1cdfac4e8a93ddd4235b08c">OSPF_PATH_INTRA_AREA</a>)
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a>(<span class="stringliteral">&quot;ospf_abr_process_network_rt(): ALT ABR: &quot;</span>
              <span class="stringliteral">&quot;No BB connection, skip not intra-area routes&quot;</span>);
          <span class="keywordflow">continue</span>;
        }

        <a class="code" href="ospf__abr_8c.html#a53309f31f2e53a478aa2fcabbe0128a7">ospf_abr_announce_rtr</a> (ospf, (<span class="keyword">struct</span> <a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *) &amp;rn-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>, or);

    }

    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_process_router_rt(): Stop&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9f4b9ea2aea8eb7fc76a9386fabdc8ae"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_remove_unapproved_summaries" ref="a9f4b9ea2aea8eb7fc76a9386fabdc8ae" args="(struct ospf *ospf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_remove_unapproved_summaries </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01696">1696</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_remove_unapproved_summaries(): Start&quot;</span>);

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, area))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_remove_unapproved_summaries(): &quot;</span>
           <span class="stringliteral">&quot;looking at area %s&quot;</span>, inet_ntoa (area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>));

      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#a58ae6df59f7476d7784e19f7ca19db1f">SUMMARY_LSDB</a> (area), rn, lsa)
    if (<a class="code" href="ospf__lsa_8c.html#ad430a0bdeae46dc78ef311cf2c511bad">ospf_lsa_is_self_originated</a> (ospf, lsa))
      if (!<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;<a class="code" href="structflags.html">flags</a>, <a class="code" href="ospf__lsa_8h.html#a7d310b6c5bc390fbe0a0da8a73c43d82">OSPF_LSA_APPROVED</a>))
        <a class="code" href="ospf__flood_8c.html#ad3049ba87364a6fbed7d352023e33a4a">ospf_lsa_flush_area</a> (lsa, area);

      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#a145a10afd0c8a801d2e84b26c0becbfd">ASBR_SUMMARY_LSDB</a> (area), rn, lsa)
    if (<a class="code" href="ospf__lsa_8c.html#ad430a0bdeae46dc78ef311cf2c511bad">ospf_lsa_is_self_originated</a> (ospf, lsa))
      if (!<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a7d310b6c5bc390fbe0a0da8a73c43d82">OSPF_LSA_APPROVED</a>))
        <a class="code" href="ospf__flood_8c.html#ad3049ba87364a6fbed7d352023e33a4a">ospf_lsa_flush_area</a> (lsa, area);
    }
 
  if (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (&quot;<a class="code" href="ospf__abr_8c.html#a9f4b9ea2aea8eb7fc76a9386fabdc8ae">ospf_abr_remove_unapproved_summaries</a>(): Stop&quot;);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a463b9e6cc146ca75d3a256d5672693d2"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_remove_unapproved_translates" ref="a463b9e6cc146ca75d3a256d5672693d2" args="(struct ospf *ospf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_remove_unapproved_translates </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01678">1678</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;

  <span class="comment">/* All AREA PROCESS should have APPROVED necessary LSAs */</span>
  <span class="comment">/* Remove any left over and not APPROVED */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_remove_unapproved_translates(): Start&quot;</span>);

  <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#ae56a8a7b638bd22caf86ea3d810fdbd9">EXTERNAL_LSDB</a> (ospf), rn, lsa)
    <a class="code" href="ospf__abr_8c.html#a980e974d0f9c7e0ab27a041594bed0ec">ospf_abr_remove_unapproved_translates_apply</a> (ospf, lsa);
 
  if (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (&quot;<a class="code" href="ospf__abr_8c.html#a463b9e6cc146ca75d3a256d5672693d2">ospf_abr_remove_unapproved_translates</a>(): Stop&quot;);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a980e974d0f9c7e0ab27a041594bed0ec"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_remove_unapproved_translates_apply" ref="a980e974d0f9c7e0ab27a041594bed0ec" args="(struct ospf *ospf, struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ospf_abr_remove_unapproved_translates_apply </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01659">1659</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;<a class="code" href="structospf__lsa.html#aa8c833176affd799afeb8db16cdb2602">flags</a>, <a class="code" href="ospf__lsa_8h.html#a20f98f1fb4931335ddf4dd15d8fe9040">OSPF_LSA_LOCAL_XLT</a>)
      &amp;&amp; ! <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;<a class="code" href="structospf__lsa.html#aa8c833176affd799afeb8db16cdb2602">flags</a>, <a class="code" href="ospf__lsa_8h.html#a7d310b6c5bc390fbe0a0da8a73c43d82">OSPF_LSA_APPROVED</a>))
    {
      <a class="code" href="log_8h.html#a383184727341e7ad985deb9e4f2156c7">zlog_info</a> (<span class="stringliteral">&quot;ospf_abr_remove_unapproved_translates(): &quot;</span>
         <span class="stringliteral">&quot;removing unapproved translates, ID: %s&quot;</span>,
         inet_ntoa (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>));

      <span class="comment">/* FLUSH THROUGHOUT AS */</span>
      <a class="code" href="ospf__flood_8c.html#a68d550b90a6cd775d965f6e8f9309863">ospf_lsa_flush_as</a> (ospf, lsa);

      <span class="comment">/* DISCARD from LSDB  */</span>
    }
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abf8866750398700f04b54367eb25eb6e"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_send_nssa_aggregates" ref="abf8866750398700f04b54367eb25eb6e" args="(struct ospf *ospf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_send_nssa_aggregates </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01512">1512</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node; <span class="comment">/*, n; */</span>
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>; <span class="comment">/*, *ar; */</span>
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;
  <span class="keyword">struct </span><a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_send_nssa_aggregates(): Start&quot;</span>);

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, area))
    {
      <span class="keywordflow">if</span> (! area-&gt;<a class="code" href="structospf__area.html#a3956cb7dd73ce5563ae652947e12d08e">NSSATranslatorState</a>)
    <span class="keywordflow">continue</span>;

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_send_nssa_aggregates(): looking at area %s&quot;</span>,
           inet_ntoa (area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>));

      <span class="keywordflow">for</span> (rn = <a class="code" href="table_8c.html#aee1d06c531794df326d946bdac647fb2">route_top</a> (area-&gt;<a class="code" href="structospf__area.html#ae4d5f7877962eb3e477299a8f93dbfff">ranges</a>); rn; rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn))
    {
          <span class="keywordflow">if</span> (rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        <span class="keywordflow">continue</span>;

      range = rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;

          <span class="keywordflow">if</span> (!<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>))
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_send_nssa_aggregates():&quot;</span>
               <span class="stringliteral">&quot; discarding suppress-ranges&quot;</span>);
          <span class="keywordflow">continue</span>;
        }

          <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.family = AF_INET;
          <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefix = range-&gt;<a class="code" href="structospf__area__range.html#a724f20a6824a90fe2b2c5c5b78e34dc2">addr</a>;
          <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen = range-&gt;<a class="code" href="structospf__area__range.html#ad74a36f5e9873c250a48fd717f206223">masklen</a>;

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_send_nssa_aggregates():&quot;</span>
               <span class="stringliteral">&quot; this is range: %s/%d&quot;</span>,
               inet_ntoa (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefix), <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen);

          <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#a05a85c40463339240f87aa8200447eb8">OSPF_AREA_RANGE_SUBSTITUTE</a>))
        {
          <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.family = AF_INET;
          <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefix = range-&gt;<a class="code" href="structospf__area__range.html#aae8a961c337b41f842906f32be2e169e">subst_addr</a>;
          <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen = range-&gt;<a class="code" href="structospf__area__range.html#afc6ca0cc37924c70d8d70aa2d426f313">subst_masklen</a>;
        }

          <span class="keywordflow">if</span> (range-&gt;<a class="code" href="structospf__area__range.html#a3d1cb2519f52918c6ebfbcc60dbbbd6d">specifics</a>)
            {
              <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
                <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_send_nssa_aggregates(): active range&quot;</span>);

              <span class="comment">/* Fetch LSA-Type-7 from aggregate prefix, and then</span>
<span class="comment">               *  translate, Install (as Type-5), Approve, and Flood</span>
<span class="comment">               */</span>
              <a class="code" href="ospf__abr_8c.html#a1be9148114aa9952994a93198d36f665">ospf_abr_translate_nssa_range</a> (&amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, range-&gt;<a class="code" href="structospf__area__range.html#a48ee60db14ab78e1f0435d56fd42d2d0">cost</a>);
            }
        } <span class="comment">/* all area ranges*/</span>
    } <span class="comment">/* all areas */</span>

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_send_nssa_aggregates(): Stop&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6044eb89ea87b2d4541e47bcde24f81a"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_should_accept" ref="a6044eb89ea87b2d4541e47bcde24f81a" args="(struct prefix_ipv4 *p, struct ospf_area *area)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ospf_abr_should_accept </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00828">828</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__area_8h.html#a8f03536971036c0537f7bda3fb525b14">IMPORT_NAME</a> (area))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__area_8h.html#a8bb9cd837b1e23c12864c27e469c9575">IMPORT_LIST</a> (area) == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <a class="code" href="ospf6__area_8h.html#a8bb9cd837b1e23c12864c27e469c9575">IMPORT_LIST</a> (area) = <a class="code" href="filter_8c.html#a8cb65cd01015f6673c632cb5b8714b3e">access_list_lookup</a> (<a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>, <a class="code" href="ospf6__area_8h.html#a8f03536971036c0537f7bda3fb525b14">IMPORT_NAME</a> (area));

      <span class="keywordflow">if</span> (<a class="code" href="ospf6__area_8h.html#a8bb9cd837b1e23c12864c27e469c9575">IMPORT_LIST</a> (area))
        <span class="keywordflow">if</span> (<a class="code" href="filter_8c.html#a5565f487c65e2bf0308c7fd529f121a0">access_list_apply</a> (<a class="code" href="ospf6__area_8h.html#a8bb9cd837b1e23c12864c27e469c9575">IMPORT_LIST</a> (area), p) == <a class="code" href="filter_8h.html#ab3b7281956317556f846daaebf75de72a898abadf6cc2f9d27780782f09d3a3e3">FILTER_DENY</a>)
           <span class="keywordflow">return</span> 0;
    }

 <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a70f5037c52c64005baae85b170a8ecc9"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_should_announce" ref="a70f5037c52c64005baae85b170a8ecc9" args="(struct ospf *ospf, struct prefix_ipv4 *p, struct ospf_route *or)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ospf_abr_should_announce </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__route.html">ospf_route</a> *&#160;</td>
          <td class="paramname"><em>or</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00955">955</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;

  area = <a class="code" href="ospfd_8c.html#a24d6ed2a6a05e4856e6dbf5eea74f6ef">ospf_area_lookup_by_area_id</a> (ospf, or-&gt;<a class="code" href="structospf__route.html#ab37ba617082e6dec95c8f67eb9b66d7a">u</a>.<a class="code" href="structospf__route.html#a8b1951ef3f626e1c61e30309c36084a3">std</a>.<a class="code" href="structroute__standard.html#adb68650a53fa9189d6af5d484c01f690">area_id</a>);

  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (area);
  
  <span class="keywordflow">if</span> (<a class="code" href="ospf6__area_8h.html#a4b149526dcc0d9c5de7086d581336dcb">EXPORT_NAME</a> (area))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf6__area_8h.html#a3b1e86d59d3641da3b6b9281a97c7927">EXPORT_LIST</a> (area) == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <a class="code" href="ospf6__area_8h.html#a3b1e86d59d3641da3b6b9281a97c7927">EXPORT_LIST</a> (area) = <a class="code" href="filter_8c.html#a8cb65cd01015f6673c632cb5b8714b3e">access_list_lookup</a> (<a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>, <a class="code" href="ospf6__area_8h.html#a4b149526dcc0d9c5de7086d581336dcb">EXPORT_NAME</a> (area));

      <span class="keywordflow">if</span> (<a class="code" href="ospf6__area_8h.html#a3b1e86d59d3641da3b6b9281a97c7927">EXPORT_LIST</a> (area))
        <span class="keywordflow">if</span> (<a class="code" href="filter_8c.html#a5565f487c65e2bf0308c7fd529f121a0">access_list_apply</a> (<a class="code" href="ospf6__area_8h.html#a3b1e86d59d3641da3b6b9281a97c7927">EXPORT_LIST</a> (area), p) == <a class="code" href="filter_8h.html#ab3b7281956317556f846daaebf75de72a898abadf6cc2f9d27780782f09d3a3e3">FILTER_DENY</a>)
           <span class="keywordflow">return</span> 0;
    }

  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6542439707b08efb93c2cc58103b92cc"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_task" ref="a6542439707b08efb93c2cc58103b92cc" args="(struct ospf *ospf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_abr_task </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01838">1838</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): Start&quot;</span>);

  <span class="keywordflow">if</span> (ospf-&gt;<a class="code" href="structospf.html#a1fd3dcac2e3c565e23fce6884ffb097f">new_table</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || ospf-&gt;<a class="code" href="structospf.html#a0c2e7f55defc0862ed00e1230cd53bd4">new_rtrs</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): Routing tables are not yet ready&quot;</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): unapprove summaries&quot;</span>);
  <a class="code" href="ospf__abr_8c.html#aa382b917196a24d77aea90e4db33d2f0">ospf_abr_unapprove_summaries</a> (ospf);

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): prepare aggregates&quot;</span>);
  <a class="code" href="ospf__abr_8c.html#afca847ae061d1a858adb2d8482890747">ospf_abr_prepare_aggregates</a> (ospf);

  <span class="keywordflow">if</span> (<a class="code" href="ospfd_8h.html#a66c6ce8df7e5b79426d9eca9f8ef6d27">IS_OSPF_ABR</a> (ospf))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): process network RT&quot;</span>);
      <a class="code" href="ospf__abr_8c.html#a08eac1d777543e2a5ceba05f86718365">ospf_abr_process_network_rt</a> (ospf, ospf-&gt;<a class="code" href="structospf.html#a1fd3dcac2e3c565e23fce6884ffb097f">new_table</a>);

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): process router RT&quot;</span>);
      <a class="code" href="ospf__abr_8c.html#a6e95d221f7ea73125b05c9d5a40f8de4">ospf_abr_process_router_rt</a> (ospf, ospf-&gt;<a class="code" href="structospf.html#a0c2e7f55defc0862ed00e1230cd53bd4">new_rtrs</a>);

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): announce aggregates&quot;</span>);
      <a class="code" href="ospf__abr_8c.html#a953934abb38ade526e393b844f7f02e7">ospf_abr_announce_aggregates</a> (ospf);

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): announce stub defaults&quot;</span>);
      <a class="code" href="ospf__abr_8c.html#a69c79123dfe301c5ab7762850598a199">ospf_abr_announce_stub_defaults</a> (ospf);
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): remove unapproved summaries&quot;</span>);
  <a class="code" href="ospf__abr_8c.html#a9f4b9ea2aea8eb7fc76a9386fabdc8ae">ospf_abr_remove_unapproved_summaries</a> (ospf);

  <a class="code" href="ospf__abr_8c.html#a22e8f135a7aec6a8656007a9f9dabe77">ospf_abr_manage_discard_routes</a> (ospf);

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): Stop&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9b175266d10ffc6d268d313caa0b71fc"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_task_timer" ref="a9b175266d10ffc6d268d313caa0b71fc" args="(struct thread *thread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ospf_abr_task_timer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01888">1888</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf.html">ospf</a> *<a class="code" href="structospf.html">ospf</a> = <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (thread);

  ospf-&gt;<a class="code" href="structospf.html#adcdb64a50cde7f209f8c55df581d8bae">t_abr_task</a> = 0;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Running ABR task on timer&quot;</span>);

  <a class="code" href="ospf__abr_8c.html#aae7756099eb070db13009f36bfd7736f">ospf_check_abr_status</a> (ospf);
  <a class="code" href="ospf__abr_8c.html#ae5cbeb1b329ace7f6ae14b4c02ffb9a5">ospf_abr_nssa_check_status</a> (ospf);

  <a class="code" href="ospf__abr_8c.html#a6542439707b08efb93c2cc58103b92cc">ospf_abr_task</a> (ospf);
  <a class="code" href="ospf__abr_8c.html#ae6c71422ba55c79a2932bf595a97c0cf">ospf_abr_nssa_task</a> (ospf); <span class="comment">/* if nssa-abr, then scan Type-7 LSDB */</span>

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a218c36503435eb4ddb454ac0f5f21605"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_translate_nssa" ref="a218c36503435eb4ddb454ac0f5f21605" args="(struct ospf_area *area, struct ospf_lsa *lsa)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ospf_abr_translate_nssa </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00628">628</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">/* Incoming Type-7 or later aggregated Type-7 </span>
<span class="comment">   *</span>
<span class="comment">   * LSA is skipped if P-bit is off.</span>
<span class="comment">   * LSA is aggregated if within range.</span>
<span class="comment">   *</span>
<span class="comment">   * The Type-7 is translated, Installed/Approved as a Type-5 into</span>
<span class="comment">   * global LSDB, then Flooded through AS</span>
<span class="comment">   *</span>
<span class="comment">   *  Later, any Unapproved Translated Type-5&#39;s are flushed/discarded </span>
<span class="comment">   */</span>

  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *old = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
                  *<span class="keyword">new</span> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keyword">struct </span><a class="code" href="structas__external__lsa.html">as_external_lsa</a> *ext7;
  <span class="keyword">struct </span><a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

  <span class="keywordflow">if</span> (! <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#ab09eba50538b8481e12d4825dc803716">options</a>, <a class="code" href="ospfd_8h.html#af9739335948debe99dd1e5e62d87c00c">OSPF_OPTION_NP</a>))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_translate_nssa(): LSA Id %s, P-bit off, NO Translation&quot;</span>,
                   inet_ntoa (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>));
      <span class="keywordflow">return</span> 1; 
    }
  
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_translate_nssa(): LSA Id %s, TRANSLATING 7 to 5&quot;</span>,
               inet_ntoa (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>));

  ext7 = (<span class="keyword">struct </span><a class="code" href="structas__external__lsa.html">as_external_lsa</a> *)(lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>);
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefix = lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>;
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen = <a class="code" href="prefix_8c.html#ab83ffad6b766ddd0ef87e4da228c322d">ip_masklen</a> (ext7-&gt;<a class="code" href="structas__external__lsa.html#aa860fac77968c497496d16df6d325651">mask</a>);
  
  <span class="keywordflow">if</span> (ext7-&gt;<a class="code" href="structas__external__lsa.html#a51c29f7223123224ae18468efee20ee0">e</a>[0].<a class="code" href="structas__external__lsa.html#a5817fa032c9f6c8f23d975ec1c5dfa20">fwd_addr</a>.s_addr == <a class="code" href="ospfd_8h.html#aa27acfec5e87443929f2f3cce54116d4">OSPF_DEFAULT_DESTINATION</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_translate_nssa(): LSA Id %s, &quot;</span>
                   <span class="stringliteral">&quot;Forward address is 0, NO Translation&quot;</span>,
                   inet_ntoa (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>));
      <span class="keywordflow">return</span> 1;
    }
  
  <span class="comment">/* try find existing AS-External LSA for this prefix */</span>

  old = <a class="code" href="ospf__asbr_8c.html#ad45c036a67747a7f65338b7ec6ff748d">ospf_external_info_find_lsa</a> (area-&gt;<a class="code" href="structospf__area.html#a0858934cbc3476d83ba7604309c813ad">ospf</a>, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);

  <span class="keywordflow">if</span> (old)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_translate_nssa(): &quot;</span> 
                   <span class="stringliteral">&quot;found old translated LSA Id %s, refreshing&quot;</span>,
                   inet_ntoa (old-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>));
            
      <span class="comment">/* refresh */</span>
      <span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#aa870c13f8cc5f9f7243bf1d73278d1d5">ospf_translated_nssa_refresh</a> (area-&gt;<a class="code" href="structospf__area.html#a0858934cbc3476d83ba7604309c813ad">ospf</a>, lsa, old);
      <span class="keywordflow">if</span> (!<span class="keyword">new</span>)
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_translate_nssa(): &quot;</span>
              <span class="stringliteral">&quot;could not refresh translated LSA Id %s&quot;</span>,
              inet_ntoa (old-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>));
        }
    }
  <span class="keywordflow">else</span>
    {
      <span class="comment">/* no existing external route for this LSA Id</span>
<span class="comment">       * originate translated LSA </span>
<span class="comment">       */</span>
      
      <span class="keywordflow">if</span> ((<span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#ae0beb4bdc20ad5fe3224c7ab980312ab">ospf_translated_nssa_originate</a> (area-&gt;<a class="code" href="structospf__area.html#a0858934cbc3476d83ba7604309c813ad">ospf</a>, lsa)) 
           == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_translate_nssa(): Could not translate &quot;</span>
                       <span class="stringliteral">&quot;Type-7 for %s to Type-5&quot;</span>, 
                       inet_ntoa (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>));
            <span class="keywordflow">return</span> 1;
        }
    }

  <span class="comment">/* Area where Aggregate testing will be inserted, just like summary</span>
<span class="comment">     advertisements */</span>
  <span class="comment">/* ospf_abr_check_nssa_range (p_arg, lsa-&gt; cost, lsa -&gt; area); */</span>

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1be9148114aa9952994a93198d36f665"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_translate_nssa_range" ref="a1be9148114aa9952994a93198d36f665" args="(struct prefix_ipv4 *p, u_int32_t cost)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_translate_nssa_range </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>cost</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00717">717</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">/* The Type-7 is created from the aggregated prefix and forwarded</span>
<span class="comment">     for lsa installation and flooding... to be added... */</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa382b917196a24d77aea90e4db33d2f0"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_unapprove_summaries" ref="aa382b917196a24d77aea90e4db33d2f0" args="(struct ospf *ospf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_unapprove_summaries </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01364">1364</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_unapprove_summaries(): Start&quot;</span>);

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, area))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_unapprove_summaries(): &quot;</span>
                   <span class="stringliteral">&quot;considering area %s&quot;</span>,
                   inet_ntoa (area-&gt;<a class="code" href="structospf__area.html#af08c06866d1beb6168de552bb9855c6b">area_id</a>)); 
      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#a58ae6df59f7476d7784e19f7ca19db1f">SUMMARY_LSDB</a> (area), rn, lsa)
      if (<a class="code" href="ospf__lsa_8c.html#ad430a0bdeae46dc78ef311cf2c511bad">ospf_lsa_is_self_originated</a> (ospf, lsa))
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_unapprove_summaries(): &quot;</span>
                       <span class="stringliteral">&quot;approved unset on summary link id %s&quot;</span>,
                       inet_ntoa (lsa-&gt;data-&gt;id)); 
          <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a7d310b6c5bc390fbe0a0da8a73c43d82">OSPF_LSA_APPROVED</a>);
        }

      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#a145a10afd0c8a801d2e84b26c0becbfd">ASBR_SUMMARY_LSDB</a> (area), rn, lsa)
      if (<a class="code" href="ospf__lsa_8c.html#ad430a0bdeae46dc78ef311cf2c511bad">ospf_lsa_is_self_originated</a> (ospf, lsa))
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_unapprove_summaries(): &quot;</span>
                       <span class="stringliteral">&quot;approved unset on asbr-summary link id %s&quot;</span>,
                       inet_ntoa (lsa-&gt;data-&gt;id));
          <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a7d310b6c5bc390fbe0a0da8a73c43d82">OSPF_LSA_APPROVED</a>);
        }
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_unapprove_summaries(): Stop&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1030d4abaf7392a251388eb4deec5a40"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_unapprove_translates" ref="a1030d4abaf7392a251388eb4deec5a40" args="(struct ospf *ospf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_unapprove_translates </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01338">1338</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_unapprove_translates(): Start&quot;</span>);

  <span class="comment">/* NSSA Translator is not checked, because it may have gone away,</span>
<span class="comment">    and we would want to flush any residuals anyway */</span>

  <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#ae56a8a7b638bd22caf86ea3d810fdbd9">EXTERNAL_LSDB</a> (ospf), rn, lsa)
    if (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;<a class="code" href="structflags.html">flags</a>, <a class="code" href="ospf__lsa_8h.html#a20f98f1fb4931335ddf4dd15d8fe9040">OSPF_LSA_LOCAL_XLT</a>))
      {
        <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (lsa-&gt;<a class="code" href="structospf__lsa.html#aa8c833176affd799afeb8db16cdb2602">flags</a>, <a class="code" href="ospf__lsa_8h.html#a7d310b6c5bc390fbe0a0da8a73c43d82">OSPF_LSA_APPROVED</a>);
        <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_unapprove_translates(): &quot;</span>
                     <span class="stringliteral">&quot;approved unset on link id %s&quot;</span>,
                     inet_ntoa (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>));
      }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_unapprove_translates(): Stop&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2b01f8c811d0abb75a42adedab0b4af1"></a><!-- doxytag: member="ospf_abr.c::ospf_abr_update_aggregate" ref="a2b01f8c811d0abb75a42adedab0b4af1" args="(struct ospf_area_range *range, struct ospf_route *or)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_abr_update_aggregate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *&#160;</td>
          <td class="paramname"><em>range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__route.html">ospf_route</a> *&#160;</td>
          <td class="paramname"><em>or</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00574">574</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_update_aggregate(): Start&quot;</span>);

  <span class="keywordflow">if</span> (range-&gt;<a class="code" href="structospf__area__range.html#a869c843ab497ff8be702a02cd7b3eddf">cost_config</a> != <a class="code" href="ospf__abr_8h.html#a9e21588e2ea1550756920731bbc4c80c">OSPF_AREA_RANGE_COST_UNSPEC</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_update_aggregate(): use configured cost %d&quot;</span>,
                   range-&gt;<a class="code" href="structospf__area__range.html#a869c843ab497ff8be702a02cd7b3eddf">cost_config</a>);

      range-&gt;<a class="code" href="structospf__area__range.html#a48ee60db14ab78e1f0435d56fd42d2d0">cost</a> = range-&gt;<a class="code" href="structospf__area__range.html#a869c843ab497ff8be702a02cd7b3eddf">cost_config</a>;
    }
  <span class="keywordflow">else</span>
    {
      <span class="keywordflow">if</span> (range-&gt;<a class="code" href="structospf__area__range.html#a3d1cb2519f52918c6ebfbcc60dbbbd6d">specifics</a> == 0)
        range-&gt;<a class="code" href="structospf__area__range.html#a48ee60db14ab78e1f0435d56fd42d2d0">cost</a> = or-&gt;<a class="code" href="structospf__route.html#a78ed87939e621a405c66aeb71fa1944d">cost</a>; <span class="comment">/* 1st time get 1st cost */</span>

      <span class="keywordflow">if</span> (or-&gt;<a class="code" href="structospf__route.html#a78ed87939e621a405c66aeb71fa1944d">cost</a> &gt; range-&gt;<a class="code" href="structospf__area__range.html#a48ee60db14ab78e1f0435d56fd42d2d0">cost</a>)
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_update_aggregate(): largest cost, update&quot;</span>);

          range-&gt;<a class="code" href="structospf__area__range.html#a48ee60db14ab78e1f0435d56fd42d2d0">cost</a> = or-&gt;<a class="code" href="structospf__route.html#a78ed87939e621a405c66aeb71fa1944d">cost</a>;
        }
    }

  range-&gt;<a class="code" href="structospf__area__range.html#a3d1cb2519f52918c6ebfbcc60dbbbd6d">specifics</a>++;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad5e6a3408de1c3abbe942d885245c26c"></a><!-- doxytag: member="ospf_abr.c::ospf_act_bb_connection" ref="ad5e6a3408de1c3abbe942d885245c26c" args="(struct ospf *ospf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_act_bb_connection </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00343">343</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (ospf-&gt;<a class="code" href="structospf.html#af16c64964298aad9859d5b04503228bd">backbone</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  <span class="keywordflow">return</span> ospf-&gt;<a class="code" href="structospf.html#af16c64964298aad9859d5b04503228bd">backbone</a>-&gt;<a class="code" href="structospf__area.html#a44f3838cd2e8fb5bd14a8c5cd1c2a0cd">full_nbrs</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af229422187da31bbb735cc83e2ac2d1b"></a><!-- doxytag: member="ospf_abr.c::ospf_area_actively_attached" ref="af229422187da31bbb735cc83e2ac2d1b" args="(struct ospf_area *area)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ospf_area_actively_attached </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00194">194</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> area-&gt;<a class="code" href="structospf__area.html#ade0d91a8747b46926ed25794d2c25b84">act_ints</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a982c5ad2411024cad7b3979eb1c4d7ab"></a><!-- doxytag: member="ospf_abr.c::ospf_area_range_active" ref="a982c5ad2411024cad7b3979eb1c4d7ab" args="(struct ospf_area_range *range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_area_range_active </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *&#160;</td>
          <td class="paramname"><em>range</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00188">188</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> range-&gt;<a class="code" href="structospf__area__range.html#a3d1cb2519f52918c6ebfbcc60dbbbd6d">specifics</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac775d8b4ed2ded945b71370d17a00472"></a><!-- doxytag: member="ospf_abr.c::ospf_area_range_add" ref="ac775d8b4ed2ded945b71370d17a00472" args="(struct ospf_area *area, struct ospf_area_range *range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_area_range_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *&#160;</td>
          <td class="paramname"><em>range</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00074">74</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.family = AF_INET;
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen = range-&gt;<a class="code" href="structospf__area__range.html#ad74a36f5e9873c250a48fd717f206223">masklen</a>;
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefix = range-&gt;<a class="code" href="structospf__area__range.html#a724f20a6824a90fe2b2c5c5b78e34dc2">addr</a>;

  rn = <a class="code" href="table_8c.html#ac91fdff1a0b8dc3d60ebaf152caa0f80">route_node_get</a> (area-&gt;<a class="code" href="structospf__area.html#ae4d5f7877962eb3e477299a8f93dbfff">ranges</a>, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *)&amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
  <span class="keywordflow">if</span> (rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>)
    <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (rn);
  <span class="keywordflow">else</span>
    rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> = range;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a281d9b867e259576cde292e81cfc7eb7"></a><!-- doxytag: member="ospf_abr.c::ospf_area_range_cost_set" ref="a281d9b867e259576cde292e81cfc7eb7" args="(struct ospf *ospf, struct in_addr area_id, struct prefix_ipv4 *p, u_int32_t cost)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_area_range_cost_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname"><em>area_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>cost</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00236">236</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;
  <span class="keywordtype">int</span> ret = <a class="code" href="ospfd_8h.html#a4693ac54d402184ececda946d167d1ef">OSPF_AREA_ID_FORMAT_ADDRESS</a>;

  area = <a class="code" href="ospfd_8c.html#aa215da7694f647944fed0fad86df18c8">ospf_area_get</a> (ospf, area_id, ret);
  <span class="keywordflow">if</span> (area == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  range = <a class="code" href="ospf__abr_8c.html#a774663b20cea32fea41dc0ade8ead064">ospf_area_range_lookup</a> (area, p);
  <span class="keywordflow">if</span> (range == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  <span class="keywordflow">if</span> (range-&gt;<a class="code" href="structospf__area__range.html#a869c843ab497ff8be702a02cd7b3eddf">cost_config</a> != <a class="code" href="structospf__area__range.html#a48ee60db14ab78e1f0435d56fd42d2d0">cost</a>)
    {
      range-&gt;<a class="code" href="structospf__area__range.html#a869c843ab497ff8be702a02cd7b3eddf">cost_config</a> = <a class="code" href="structospf__area__range.html#a48ee60db14ab78e1f0435d56fd42d2d0">cost</a>;
      <span class="keywordflow">if</span> (<a class="code" href="ospf__abr_8c.html#a982c5ad2411024cad7b3979eb1c4d7ab">ospf_area_range_active</a> (range))
    <a class="code" href="ospf__abr_8c.html#a1ff6c727604d00c49b9c4a26131e5462">ospf_schedule_abr_task</a> (ospf);
    }

  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3ffccf20cd7e255cbf64819a1090b843"></a><!-- doxytag: member="ospf_abr.c::ospf_area_range_delete" ref="a3ffccf20cd7e255cbf64819a1090b843" args="(struct ospf_area *area, struct ospf_area_range *range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_area_range_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *&#160;</td>
          <td class="paramname"><em>range</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00091">91</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.family = AF_INET;
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen = range-&gt;<a class="code" href="structospf__area__range.html#ad74a36f5e9873c250a48fd717f206223">masklen</a>;
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefix = range-&gt;<a class="code" href="structospf__area__range.html#a724f20a6824a90fe2b2c5c5b78e34dc2">addr</a>;

  rn = <a class="code" href="table_8c.html#ab99d86b40440c8f18d4f2b31b5b8f1c7">route_node_lookup</a> (area-&gt;<a class="code" href="structospf__area.html#ae4d5f7877962eb3e477299a8f93dbfff">ranges</a>, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *)&amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
  <span class="keywordflow">if</span> (rn)
    {
      <a class="code" href="ospf__abr_8c.html#a094fd37167ed8981974a1f8c97f8d574">ospf_area_range_free</a> (rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>);
      rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
      <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (rn);
      <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (rn);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a094fd37167ed8981974a1f8c97f8d574"></a><!-- doxytag: member="ospf_abr.c::ospf_area_range_free" ref="a094fd37167ed8981974a1f8c97f8d574" args="(struct ospf_area_range *range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void ospf_area_range_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *&#160;</td>
          <td class="paramname"><em>range</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00068">68</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba49f173e96c4aed653c814c1eff096dcc">MTYPE_OSPF_AREA_RANGE</a>, range);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a774663b20cea32fea41dc0ade8ead064"></a><!-- doxytag: member="ospf_abr.c::ospf_area_range_lookup" ref="a774663b20cea32fea41dc0ade8ead064" args="(struct ospf_area *area, struct prefix_ipv4 *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a>* ospf_area_range_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00111">111</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;

  rn = <a class="code" href="table_8c.html#ab99d86b40440c8f18d4f2b31b5b8f1c7">route_node_lookup</a> (area-&gt;<a class="code" href="structospf__area.html#ae4d5f7877962eb3e477299a8f93dbfff">ranges</a>, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *)p);
  <span class="keywordflow">if</span> (rn)
    {
      <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (rn);
      <span class="keywordflow">return</span> rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;
    }
  <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a093b2aa64d23ea0f5b21591238fef4c5"></a><!-- doxytag: member="ospf_abr.c::ospf_area_range_lookup_next" ref="a093b2aa64d23ea0f5b21591238fef4c5" args="(struct ospf_area *area, struct in_addr *range_net, int first)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a>* ospf_area_range_lookup_next </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr *&#160;</td>
          <td class="paramname"><em>range_net</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>first</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00125">125</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *find;

  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.family = AF_INET;
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen = <a class="code" href="prefix_8h.html#a9bd48f210d9f91d189e70196918f82c6">IPV4_MAX_BITLEN</a>;
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefix = *range_net;

  <span class="keywordflow">if</span> (first)
    rn = <a class="code" href="table_8c.html#aee1d06c531794df326d946bdac647fb2">route_top</a> (area-&gt;<a class="code" href="structospf__area.html#ae4d5f7877962eb3e477299a8f93dbfff">ranges</a>);
  <span class="keywordflow">else</span>
    {
      rn = <a class="code" href="table_8c.html#ac91fdff1a0b8dc3d60ebaf152caa0f80">route_node_get</a> (area-&gt;<a class="code" href="structospf__area.html#ae4d5f7877962eb3e477299a8f93dbfff">ranges</a>, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
      rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn);
    }

  <span class="keywordflow">for</span> (; rn; rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn))
    <span class="keywordflow">if</span> (rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>)
      <span class="keywordflow">break</span>;

  <span class="keywordflow">if</span> (rn &amp;&amp; rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>)
    {
      find = rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;
      *range_net = rn-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>.u.<a class="code" href="structprefix.html#ab37b8922554b41b7dc2417d8f37e7829">prefix4</a>;
      <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (rn);
      <span class="keywordflow">return</span> find;
    }
  <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7c346a6d5cb1ed72bfcb661f5ac9c962"></a><!-- doxytag: member="ospf_abr.c::ospf_area_range_match" ref="a7c346a6d5cb1ed72bfcb661f5ac9c962" args="(struct ospf_area *area, struct prefix_ipv4 *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structospf__area__range.html">ospf_area_range</a>* ospf_area_range_match </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"><em>area</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00160">160</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *node;

  node = <a class="code" href="table_8c.html#a948f4335026cd8417c7424e85156ae55">route_node_match</a> (area-&gt;<a class="code" href="structospf__area.html#ae4d5f7877962eb3e477299a8f93dbfff">ranges</a>, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) p);
  <span class="keywordflow">if</span> (node)
    {
      <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (node);
      <span class="keywordflow">return</span> node-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;
    }
  <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad84a4da09c4f95971fc5f7272c554cf9"></a><!-- doxytag: member="ospf_abr.c::ospf_area_range_match_any" ref="ad84a4da09c4f95971fc5f7272c554cf9" args="(struct ospf *ospf, struct prefix_ipv4 *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a>* ospf_area_range_match_any </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00174">174</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, area))
    <span class="keywordflow">if</span> ((range = <a class="code" href="ospf__abr_8c.html#a7c346a6d5cb1ed72bfcb661f5ac9c962">ospf_area_range_match</a> (area, p)))
      <span class="keywordflow">return</span> range;

  <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac6351b1459379c07cb2fd7b880d36c4d"></a><!-- doxytag: member="ospf_abr.c::ospf_area_range_new" ref="ac6351b1459379c07cb2fd7b880d36c4d" args="(struct prefix_ipv4 *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structospf__area__range.html">ospf_area_range</a>* ospf_area_range_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00055">55</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;

  range = <a class="code" href="memory_8h.html#a7826e4ed1d152cad0666dcf43f11f663">XCALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba49f173e96c4aed653c814c1eff096dcc">MTYPE_OSPF_AREA_RANGE</a>, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf__area__range.html">ospf_area_range</a>));
  range-&gt;<a class="code" href="structospf__area__range.html#a724f20a6824a90fe2b2c5c5b78e34dc2">addr</a> = p-&gt;prefix;
  range-&gt;<a class="code" href="structospf__area__range.html#ad74a36f5e9873c250a48fd717f206223">masklen</a> = p-&gt;<a class="code" href="structprefix__ipv4.html#ab96da4bf1eb37195bd564bcf1126a16a">prefixlen</a>;
  range-&gt;<a class="code" href="structospf__area__range.html#a869c843ab497ff8be702a02cd7b3eddf">cost_config</a> = <a class="code" href="ospf__abr_8h.html#a9e21588e2ea1550756920731bbc4c80c">OSPF_AREA_RANGE_COST_UNSPEC</a>;

  <span class="keywordflow">return</span> range;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6ca33081ed6119428dcdf37f52eecb1b"></a><!-- doxytag: member="ospf_abr.c::ospf_area_range_set" ref="a6ca33081ed6119428dcdf37f52eecb1b" args="(struct ospf *ospf, struct in_addr area_id, struct prefix_ipv4 *p, int advertise)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_area_range_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname"><em>area_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>advertise</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00200">200</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;
  <span class="keywordtype">int</span> ret = <a class="code" href="ospfd_8h.html#a4693ac54d402184ececda946d167d1ef">OSPF_AREA_ID_FORMAT_ADDRESS</a>;

  area = <a class="code" href="ospfd_8c.html#aa215da7694f647944fed0fad86df18c8">ospf_area_get</a> (ospf, area_id, ret);
  <span class="keywordflow">if</span> (area == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  range = <a class="code" href="ospf__abr_8c.html#a774663b20cea32fea41dc0ade8ead064">ospf_area_range_lookup</a> (area, p);
  <span class="keywordflow">if</span> (range != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="keywordflow">if</span> ((<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>)
       &amp;&amp; !<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (advertise, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>))
      || (!<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>)
          &amp;&amp; <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (advertise, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>)))
    <a class="code" href="ospf__abr_8c.html#a1ff6c727604d00c49b9c4a26131e5462">ospf_schedule_abr_task</a> (ospf);
    }
  <span class="keywordflow">else</span>
    {
      range = <a class="code" href="ospf__abr_8c.html#ac6351b1459379c07cb2fd7b880d36c4d">ospf_area_range_new</a> (p);
      <a class="code" href="ospf__abr_8c.html#ac775d8b4ed2ded945b71370d17a00472">ospf_area_range_add</a> (area, range);
      <a class="code" href="ospf__abr_8c.html#a1ff6c727604d00c49b9c4a26131e5462">ospf_schedule_abr_task</a> (ospf);
    }

  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (advertise, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>))
    <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>);
  <span class="keywordflow">else</span>
    <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>);

  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afb2a1db4485a34464e3aeb49b6148e81"></a><!-- doxytag: member="ospf_abr.c::ospf_area_range_substitute_set" ref="afb2a1db4485a34464e3aeb49b6148e81" args="(struct ospf *ospf, struct in_addr area_id, struct prefix_ipv4 *p, struct prefix_ipv4 *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_area_range_substitute_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname"><em>area_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00285">285</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;
  <span class="keywordtype">int</span> ret = <a class="code" href="ospfd_8h.html#a4693ac54d402184ececda946d167d1ef">OSPF_AREA_ID_FORMAT_ADDRESS</a>;

  area = <a class="code" href="ospfd_8c.html#aa215da7694f647944fed0fad86df18c8">ospf_area_get</a> (ospf, area_id, ret);
  range = <a class="code" href="ospf__abr_8c.html#a774663b20cea32fea41dc0ade8ead064">ospf_area_range_lookup</a> (area, p);

  <span class="keywordflow">if</span> (range != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="keywordflow">if</span> (!<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>) ||
      !<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#a05a85c40463339240f87aa8200447eb8">OSPF_AREA_RANGE_SUBSTITUTE</a>))
    <a class="code" href="ospf__abr_8c.html#a1ff6c727604d00c49b9c4a26131e5462">ospf_schedule_abr_task</a> (ospf);
    }
  <span class="keywordflow">else</span>
    {
      range = <a class="code" href="ospf__abr_8c.html#ac6351b1459379c07cb2fd7b880d36c4d">ospf_area_range_new</a> (p);
      <a class="code" href="ospf__abr_8c.html#ac775d8b4ed2ded945b71370d17a00472">ospf_area_range_add</a> (area, range);
      <a class="code" href="ospf__abr_8c.html#a1ff6c727604d00c49b9c4a26131e5462">ospf_schedule_abr_task</a> (ospf);
    }

  <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>);
  <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#a05a85c40463339240f87aa8200447eb8">OSPF_AREA_RANGE_SUBSTITUTE</a>);
  range-&gt;<a class="code" href="structospf__area__range.html#aae8a961c337b41f842906f32be2e169e">subst_addr</a> = s-&gt;prefix;
  range-&gt;<a class="code" href="structospf__area__range.html#afc6ca0cc37924c70d8d70aa2d426f313">subst_masklen</a> = s-&gt;<a class="code" href="structprefix__ipv4.html#ab96da4bf1eb37195bd564bcf1126a16a">prefixlen</a>;

  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2c0eb46084679567c93851b66d78ab35"></a><!-- doxytag: member="ospf_abr.c::ospf_area_range_substitute_unset" ref="a2c0eb46084679567c93851b66d78ab35" args="(struct ospf *ospf, struct in_addr area_id, struct prefix_ipv4 *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_area_range_substitute_unset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname"><em>area_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00317">317</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;

  area = <a class="code" href="ospfd_8c.html#a24d6ed2a6a05e4856e6dbf5eea74f6ef">ospf_area_lookup_by_area_id</a> (ospf, area_id);
  <span class="keywordflow">if</span> (area == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  range = <a class="code" href="ospf__abr_8c.html#a774663b20cea32fea41dc0ade8ead064">ospf_area_range_lookup</a> (area, p);
  <span class="keywordflow">if</span> (range == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#a05a85c40463339240f87aa8200447eb8">OSPF_AREA_RANGE_SUBSTITUTE</a>))
    <span class="keywordflow">if</span> (<a class="code" href="ospf__abr_8c.html#a982c5ad2411024cad7b3979eb1c4d7ab">ospf_area_range_active</a> (range))
      <a class="code" href="ospf__abr_8c.html#a1ff6c727604d00c49b9c4a26131e5462">ospf_schedule_abr_task</a> (ospf);

  <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#a05a85c40463339240f87aa8200447eb8">OSPF_AREA_RANGE_SUBSTITUTE</a>);
  range-&gt;<a class="code" href="structospf__area__range.html#aae8a961c337b41f842906f32be2e169e">subst_addr</a>.s_addr = 0;
  range-&gt;<a class="code" href="structospf__area__range.html#afc6ca0cc37924c70d8d70aa2d426f313">subst_masklen</a> = 0;

  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aefd9193626cef849c52ce73a0aaf5c5e"></a><!-- doxytag: member="ospf_abr.c::ospf_area_range_unset" ref="aefd9193626cef849c52ce73a0aaf5c5e" args="(struct ospf *ospf, struct in_addr area_id, struct prefix_ipv4 *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_area_range_unset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname"><em>area_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00262">262</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;

  area = <a class="code" href="ospfd_8c.html#a24d6ed2a6a05e4856e6dbf5eea74f6ef">ospf_area_lookup_by_area_id</a> (ospf, area_id);
  <span class="keywordflow">if</span> (area == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  range = <a class="code" href="ospf__abr_8c.html#a774663b20cea32fea41dc0ade8ead064">ospf_area_range_lookup</a> (area, p);
  <span class="keywordflow">if</span> (range == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__abr_8c.html#a982c5ad2411024cad7b3979eb1c4d7ab">ospf_area_range_active</a> (range))
    <a class="code" href="ospf__abr_8c.html#a1ff6c727604d00c49b9c4a26131e5462">ospf_schedule_abr_task</a> (ospf);

  <a class="code" href="ospf__abr_8c.html#a3ffccf20cd7e255cbf64819a1090b843">ospf_area_range_delete</a> (area, range);

  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aae7756099eb070db13009f36bfd7736f"></a><!-- doxytag: member="ospf_abr.c::ospf_check_abr_status" ref="aae7756099eb070db13009f36bfd7736f" args="(struct ospf *ospf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_check_abr_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00491">491</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keywordtype">int</span> bb_configured = 0;
  <span class="keywordtype">int</span> bb_act_attached = 0;
  <span class="keywordtype">int</span> areas_configured = 0;
  <span class="keywordtype">int</span> areas_act_attached = 0;
  u_char <a class="code" href="isis__flags_8h.html#ad1994fd54b269190ebb32103b868b735">new_flags</a> = ospf-&gt;<a class="code" href="structospf.html#a435f2a4e7119f86c682366f6319ce64f">flags</a>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_check_abr_status(): Start&quot;</span>);

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, nnode, area))
    {
      <span class="keywordflow">if</span> (<a class="code" href="linklist_8h.html#a0429e6385b31a314cc64432a906201e5">listcount</a> (area-&gt;<a class="code" href="structospf__area.html#aec49fceeb655dde5648208d29dfc66a4">oiflist</a>)) 
    {
      areas_configured++;
      
      <span class="keywordflow">if</span> (<a class="code" href="ospfd_8h.html#a62518cec4ea9ee2a4db410d3c42b23f7">OSPF_IS_AREA_BACKBONE</a> (area))
        bb_configured = 1;
    }

      <span class="keywordflow">if</span> (<a class="code" href="ospf__abr_8c.html#af229422187da31bbb735cc83e2ac2d1b">ospf_area_actively_attached</a> (area))
    {
      areas_act_attached++;
      
      <span class="keywordflow">if</span> (<a class="code" href="ospfd_8h.html#a62518cec4ea9ee2a4db410d3c42b23f7">OSPF_IS_AREA_BACKBONE</a> (area))
            bb_act_attached = 1;
    }
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    {
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_check_abr_status(): looked through areas&quot;</span>);
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_check_abr_status(): bb_configured: %d&quot;</span>, bb_configured);
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_check_abr_status(): bb_act_attached: %d&quot;</span>,
         bb_act_attached);
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_check_abr_status(): areas_configured: %d&quot;</span>,
         areas_configured);
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_check_abr_status(): areas_act_attached: %d&quot;</span>,
         areas_act_attached);
    }

  <span class="keywordflow">switch</span> (ospf-&gt;<a class="code" href="structospf.html#ad1c5b3263ee1326f5720d0d09bfce53c">abr_type</a>)
    {
    <span class="keywordflow">case</span> <a class="code" href="ospfd_8h.html#a9dae55988b0aa4f2ec2a954209ec0630">OSPF_ABR_SHORTCUT</a>:
    <span class="keywordflow">case</span> <a class="code" href="ospfd_8h.html#a4ff7faa4a8d19436deb0db86d4bd82df">OSPF_ABR_STAND</a>:
      <span class="keywordflow">if</span> (areas_act_attached &gt; 1)
    <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (new_flags, <a class="code" href="ospfd_8h.html#a0e909e5caea8eee9944b02632cecce52">OSPF_FLAG_ABR</a>);
      <span class="keywordflow">else</span>
    <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (new_flags, <a class="code" href="ospfd_8h.html#a0e909e5caea8eee9944b02632cecce52">OSPF_FLAG_ABR</a>);
      <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="ospfd_8h.html#a22c05e10f58a965d1023edc4d8a23313">OSPF_ABR_IBM</a>:
      <span class="keywordflow">if</span> ((areas_act_attached &gt; 1) &amp;&amp; bb_configured)
    <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (new_flags, <a class="code" href="ospfd_8h.html#a0e909e5caea8eee9944b02632cecce52">OSPF_FLAG_ABR</a>);
      <span class="keywordflow">else</span>
    <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (new_flags, <a class="code" href="ospfd_8h.html#a0e909e5caea8eee9944b02632cecce52">OSPF_FLAG_ABR</a>);
      <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="ospfd_8h.html#aac0be2e336b1b7bcb296c6e9ba32b6ae">OSPF_ABR_CISCO</a>:
      <span class="keywordflow">if</span> ((areas_configured &gt; 1) &amp;&amp; bb_act_attached)
    <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (new_flags, <a class="code" href="ospfd_8h.html#a0e909e5caea8eee9944b02632cecce52">OSPF_FLAG_ABR</a>);
      <span class="keywordflow">else</span>
    <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (new_flags, <a class="code" href="ospfd_8h.html#a0e909e5caea8eee9944b02632cecce52">OSPF_FLAG_ABR</a>);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
      <span class="keywordflow">break</span>;
    }

  <span class="keywordflow">if</span> (new_flags != ospf-&gt;<a class="code" href="structospf.html#a435f2a4e7119f86c682366f6319ce64f">flags</a>)
    {
      <a class="code" href="ospf__spf_8c.html#a3422ebf3062fac786ecdb7b419c22cf1">ospf_spf_calculate_schedule</a> (ospf);
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_check_abr_status(): new router flags: %x&quot;</span>,new_flags);
      ospf-&gt;<a class="code" href="structospf.html#a435f2a4e7119f86c682366f6319ce64f">flags</a> = <a class="code" href="isis__flags_8h.html#ad1994fd54b269190ebb32103b868b735">new_flags</a>;
      <a class="code" href="ospfd_8h.html#af55bc6c498265fffa9294d0f1b952267">OSPF_TIMER_ON</a> (ospf-&gt;<a class="code" href="structospf.html#a94a369b811b335e1d05e1dab77096606">t_router_lsa_update</a>,
             <a class="code" href="ospf__lsa_8c.html#a4db40452defbd5304d698f8d0cc855d1">ospf_router_lsa_update_timer</a>, <a class="code" href="ospf__lsa_8h.html#a40abe6153ff06321e030f48daccf4966">OSPF_LSA_UPDATE_DELAY</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1ff6c727604d00c49b9c4a26131e5462"></a><!-- doxytag: member="ospf_abr.c::ospf_schedule_abr_task" ref="a1ff6c727604d00c49b9c4a26131e5462" args="(struct ospf *ospf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_schedule_abr_task </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01907">1907</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Scheduling ABR task&quot;</span>);

  <span class="keywordflow">if</span> (ospf-&gt;<a class="code" href="structospf.html#adcdb64a50cde7f209f8c55df581d8bae">t_abr_task</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    ospf-&gt;<a class="code" href="structospf.html#adcdb64a50cde7f209f8c55df581d8bae">t_abr_task</a> = <a class="code" href="thread_8h.html#aca77b3bbd166d3573de5ecd9756a590c">thread_add_timer</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf__abr_8c.html#a9b175266d10ffc6d268d313caa0b71fc">ospf_abr_task_timer</a>,
                     ospf, <a class="code" href="ospf__abr_8h.html#a571148084025182afb7a06ab669a5d74">OSPF_ABR_TASK_DELAY</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a57499501cfdfc7c1a078bb1c74f54ca5"></a><!-- doxytag: member="ospf_abr.c::set_metric" ref="a57499501cfdfc7c1a078bb1c74f54ca5" args="(struct ospf_lsa *lsa, u_int32_t metric)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void set_metric </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"><em>lsa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>metric</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00606">606</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structsummary__lsa.html">summary_lsa</a> *<a class="code" href="structsummary__lsa.html#a78511b56eed6986c0288fa7da9c4b7a1">header</a>;
  u_char *mp;
  <a class="code" href="structmetric.html">metric</a> = htonl (<a class="code" href="structmetric.html">metric</a>);
  mp = (u_char *) &amp;<a class="code" href="structmetric.html">metric</a>;
  mp++;
  header = (<span class="keyword">struct </span><a class="code" href="structsummary__lsa.html">summary_lsa</a> *) lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>;
  <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a>(header-&gt;<a class="code" href="structsummary__lsa.html#a0353f250382513bdfb5962e9c23f822a">metric</a>, mp, 3);
}
</pre></div>
</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="ospf__abr_8c.html">ospf_abr.c</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:28 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
