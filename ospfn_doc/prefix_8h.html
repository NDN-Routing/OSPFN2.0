<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: lib/prefix.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('prefix_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">lib/prefix.h File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="sockunion_8h_source.html">sockunion.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for prefix.h:</div>
<div class="dyncontent">
<div class="center"><img src="prefix_8h__incl.png" border="0" usemap="#lib_2prefix_8h" alt=""/></div>
<map name="lib_2prefix_8h" id="lib_2prefix_8h">
<area shape="rect" id="node3" href="sockunion_8h.html" title="sockunion.h" alt="" coords="5,80,99,107"/></map>
</div>
</div>
<p><a href="prefix_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structprefix.html">prefix</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structprefix__ipv4.html">prefix_ipv4</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structprefix__ls.html">prefix_ls</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structprefix__rd.html">prefix_rd</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a93b37007689284fd9c4bde1a8f4b9199">INET_ADDRSTRLEN</a>&#160;&#160;&#160;16</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#af776b22a727aae7c9f4d869d50df47e8">INET6_ADDRSTRLEN</a>&#160;&#160;&#160;46</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#aa154275bc7ebcfcb3a335788ad4dfe09">INET6_BUFSIZ</a>&#160;&#160;&#160;51</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a013983d7a5267a63023c50ab32a85c24">IPV4_MAX_BYTELEN</a>&#160;&#160;&#160;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a9bd48f210d9f91d189e70196918f82c6">IPV4_MAX_BITLEN</a>&#160;&#160;&#160;32</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#ab98d836bf20a06de7a7358ab17832002">IPV4_MAX_PREFIXLEN</a>&#160;&#160;&#160;32</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#aed79e5e7f07f40fd10b39c04fbb24fc8">IPV4_ADDR_CMP</a>(D, S)&#160;&#160;&#160;memcmp ((D), (S), IPV4_MAX_BYTELEN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a52a7c965d0b22ca60fe38fa6c404dbcc">IPV4_ADDR_SAME</a>(D, S)&#160;&#160;&#160;(memcmp ((D), (S), IPV4_MAX_BYTELEN) == 0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a039bf23d5fa90bc3a9f97173253e14bc">IPV4_ADDR_COPY</a>(D, S)&#160;&#160;&#160;memcpy ((D), (S), IPV4_MAX_BYTELEN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a3864bb8a4b7cb6bff9e5c1d9ace8c215">IPV4_NET0</a>(a)&#160;&#160;&#160;((((u_int32_t) (a)) &amp; 0xff000000) == 0x00000000)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a255d6e4fa5cfaf4cd252266a0bd4dfda">IPV4_NET127</a>(a)&#160;&#160;&#160;((((u_int32_t) (a)) &amp; 0xff000000) == 0x7f000000)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a456b834f6c0154cb01cadca0aec37f6a">IPV4_LINKLOCAL</a>(a)&#160;&#160;&#160;((((u_int32_t) (a)) &amp; 0xffff0000) == 0xa9fe0000)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#ac2642af4f4d7a4209ad6261e72c658f9">IPV6_MAX_BYTELEN</a>&#160;&#160;&#160;16</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a05e4b561a81bb5a6f28ac69717d25dbb">IPV6_MAX_BITLEN</a>&#160;&#160;&#160;128</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#af240d7cd80eb12fc2e7e73a36e506131">IPV6_MAX_PREFIXLEN</a>&#160;&#160;&#160;128</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a480ef8d442476500bb29a6e43ac62a5f">IPV6_ADDR_CMP</a>(D, S)&#160;&#160;&#160;memcmp ((D), (S), IPV6_MAX_BYTELEN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a5f1eaa85b153050a498dacc958ab8283">IPV6_ADDR_SAME</a>(D, S)&#160;&#160;&#160;(memcmp ((D), (S), IPV6_MAX_BYTELEN) == 0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#aea44c9c04fa7bd58457b572592d391a7">IPV6_ADDR_COPY</a>(D, S)&#160;&#160;&#160;memcpy ((D), (S), IPV6_MAX_BYTELEN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a472145011d944606a257487e80cc3ace">PSIZE</a>(a)&#160;&#160;&#160;(((a) + 7) / (8))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a936de9ce96dcf8ebdfd5942c08425663">PREFIX_FAMILY</a>(<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>)&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>)-&gt;family)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#acd8595e70861e22a9f8277bca3535aed">PREFIX_COPY_IPV4</a>(DST, SRC)&#160;&#160;&#160;*((struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *)(DST)) = *((const struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *)(SRC));</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a448f1ebdeae472533f8faafd675e8f0b">prefix_bit</a> (const u_char *<a class="el" href="structprefix.html">prefix</a>, const u_char prefixlen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a977f32ed59782cfac9322d423455c189">prefix6_bit</a> (const struct in6_addr *<a class="el" href="structprefix.html">prefix</a>, const u_char prefixlen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#ac65f6c2eb3775d9da42ed6fc38c54458">afi2family</a> (int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#ac4de39a0f9819069a2348657629ff821">family2afi</a> (int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#aa7b687cc910573f9048db1419c65cf71">prefix_new</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a848b0f4b9eeeef6205405bc7b52f4cd8">prefix_free</a> (struct <a class="el" href="structprefix.html">prefix</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#ae710c06755a2945ac62a08f32bb63731">prefix_family_str</a> (const struct <a class="el" href="structprefix.html">prefix</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a26faede4fa0254eb3ae3f4ecda227b11">prefix_blen</a> (const struct <a class="el" href="structprefix.html">prefix</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#afb255a2fd6bd0123b3c28d84edc06b65">str2prefix</a> (const char *, struct <a class="el" href="structprefix.html">prefix</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#ad3a0083f4d69cb282c34cfe391ab64de">prefix2str</a> (const struct <a class="el" href="structprefix.html">prefix</a> *, char *, int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a951ca22d390167cd3894a4af9f1e9844">prefix_match</a> (const struct <a class="el" href="structprefix.html">prefix</a> *, const struct <a class="el" href="structprefix.html">prefix</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#ac99ede75a1bff9198a4daebeb332d7b7">prefix_same</a> (const struct <a class="el" href="structprefix.html">prefix</a> *, const struct <a class="el" href="structprefix.html">prefix</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#acd6fef1cce47c4acf254917901894e96">prefix_cmp</a> (const struct <a class="el" href="structprefix.html">prefix</a> *, const struct <a class="el" href="structprefix.html">prefix</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#abaad44d47b408d45484fdd729ab501b2">prefix_copy</a> (struct <a class="el" href="structprefix.html">prefix</a> *dest, const struct <a class="el" href="structprefix.html">prefix</a> *src)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#af532305eb46d25c6e903f8ba0c70a974">apply_mask</a> (struct <a class="el" href="structprefix.html">prefix</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#aec236431a98092b2c21d0ff8501e29ff">sockunion2prefix</a> (const union <a class="el" href="unionsockunion.html">sockunion</a> *dest, const union <a class="el" href="unionsockunion.html">sockunion</a> *mask)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a773aca373c0f6aaa9668402ec2fd899c">sockunion2hostprefix</a> (const union <a class="el" href="unionsockunion.html">sockunion</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a5e3deaec6e89929a639d0ef2662626d4">prefix_ipv4_new</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a41d10c09454545b63c7d05fb86bc7f30">prefix_ipv4_free</a> (struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a5e0caf58f29c658e0716aae727128eba">str2prefix_ipv4</a> (const char *, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#aa7a3fcb833e93602c456c013374f9057">apply_mask_ipv4</a> (struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#adcdb9f71008bd3fce97b4a5d5422c513">prefix_ipv4_any</a> (const struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#af122f6e798624c0069f2ac2f4777bfde">apply_classful_mask_ipv4</a> (struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">u_char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a5a02555d617a8c65acee96aec0de709a">ip_masklen</a> (struct in_addr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a363c1588cd88f6320097cb766b0251dd">masklen2ip</a> (int, struct in_addr *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">in_addr_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#ab4067c206567a0757076aa3fb9f285ce">ipv4_network_addr</a> (in_addr_t hostaddr, int masklen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">in_addr_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a0416c71ab42c828a9ee8ee82ddda6a77">ipv4_broadcast_addr</a> (in_addr_t hostaddr, int masklen)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#abca4a6936d31222cbb1fa9ea70f792d4">netmask_str2prefix_str</a> (const char *, const char *, char *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#ad058c280dde1aa1b8e756472d8f07193">all_digit</a> (const char *)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">u_char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a6b458105367a186babd858fd008a66be">prefix</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct in_addr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a08e40e2dbc7ccdbf7fb88358aead274e">prefix4</a></td></tr>
<tr><td class="memItemLeft" >struct {</td></tr>
<tr><td class="memItemLeft" >&#160;&#160;&#160;struct in_addr&#160;&#160;&#160;<a class="el" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a></td></tr>
<tr><td class="memItemLeft" >&#160;&#160;&#160;struct in_addr&#160;&#160;&#160;<a class="el" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a></td></tr>
<tr><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a0ddcde6df622c79e6fb1279ca2b72da6">lp</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">u_char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prefix_8h.html#a43e03366be2dd9176e91229d76541ce9">val</a> [8]</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="af776b22a727aae7c9f4d869d50df47e8"></a><!-- doxytag: member="prefix.h::INET6_ADDRSTRLEN" ref="af776b22a727aae7c9f4d869d50df47e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INET6_ADDRSTRLEN&#160;&#160;&#160;46</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00097">97</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa154275bc7ebcfcb3a335788ad4dfe09"></a><!-- doxytag: member="prefix.h::INET6_BUFSIZ" ref="aa154275bc7ebcfcb3a335788ad4dfe09" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INET6_BUFSIZ&#160;&#160;&#160;51</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00101">101</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a93b37007689284fd9c4bde1a8f4b9199"></a><!-- doxytag: member="prefix.h::INET_ADDRSTRLEN" ref="a93b37007689284fd9c4bde1a8f4b9199" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INET_ADDRSTRLEN&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00093">93</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="aed79e5e7f07f40fd10b39c04fbb24fc8"></a><!-- doxytag: member="prefix.h::IPV4_ADDR_CMP" ref="aed79e5e7f07f40fd10b39c04fbb24fc8" args="(D, S)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPV4_ADDR_CMP</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">D, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">S&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;memcmp ((D), (S), IPV4_MAX_BYTELEN)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00108">108</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a039bf23d5fa90bc3a9f97173253e14bc"></a><!-- doxytag: member="prefix.h::IPV4_ADDR_COPY" ref="a039bf23d5fa90bc3a9f97173253e14bc" args="(D, S)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPV4_ADDR_COPY</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">D, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">S&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;memcpy ((D), (S), IPV4_MAX_BYTELEN)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00110">110</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a52a7c965d0b22ca60fe38fa6c404dbcc"></a><!-- doxytag: member="prefix.h::IPV4_ADDR_SAME" ref="a52a7c965d0b22ca60fe38fa6c404dbcc" args="(D, S)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPV4_ADDR_SAME</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">D, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">S&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(memcmp ((D), (S), IPV4_MAX_BYTELEN) == 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00109">109</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a456b834f6c0154cb01cadca0aec37f6a"></a><!-- doxytag: member="prefix.h::IPV4_LINKLOCAL" ref="a456b834f6c0154cb01cadca0aec37f6a" args="(a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPV4_LINKLOCAL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a</td><td>)</td>
          <td>&#160;&#160;&#160;((((u_int32_t) (a)) &amp; 0xffff0000) == 0xa9fe0000)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00114">114</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9bd48f210d9f91d189e70196918f82c6"></a><!-- doxytag: member="prefix.h::IPV4_MAX_BITLEN" ref="a9bd48f210d9f91d189e70196918f82c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPV4_MAX_BITLEN&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00106">106</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a013983d7a5267a63023c50ab32a85c24"></a><!-- doxytag: member="prefix.h::IPV4_MAX_BYTELEN" ref="a013983d7a5267a63023c50ab32a85c24" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPV4_MAX_BYTELEN&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00105">105</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab98d836bf20a06de7a7358ab17832002"></a><!-- doxytag: member="prefix.h::IPV4_MAX_PREFIXLEN" ref="ab98d836bf20a06de7a7358ab17832002" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPV4_MAX_PREFIXLEN&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00107">107</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3864bb8a4b7cb6bff9e5c1d9ace8c215"></a><!-- doxytag: member="prefix.h::IPV4_NET0" ref="a3864bb8a4b7cb6bff9e5c1d9ace8c215" args="(a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPV4_NET0</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a</td><td>)</td>
          <td>&#160;&#160;&#160;((((u_int32_t) (a)) &amp; 0xff000000) == 0x00000000)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00112">112</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a255d6e4fa5cfaf4cd252266a0bd4dfda"></a><!-- doxytag: member="prefix.h::IPV4_NET127" ref="a255d6e4fa5cfaf4cd252266a0bd4dfda" args="(a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPV4_NET127</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a</td><td>)</td>
          <td>&#160;&#160;&#160;((((u_int32_t) (a)) &amp; 0xff000000) == 0x7f000000)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00113">113</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a480ef8d442476500bb29a6e43ac62a5f"></a><!-- doxytag: member="prefix.h::IPV6_ADDR_CMP" ref="a480ef8d442476500bb29a6e43ac62a5f" args="(D, S)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPV6_ADDR_CMP</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">D, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">S&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;memcmp ((D), (S), IPV6_MAX_BYTELEN)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00120">120</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="aea44c9c04fa7bd58457b572592d391a7"></a><!-- doxytag: member="prefix.h::IPV6_ADDR_COPY" ref="aea44c9c04fa7bd58457b572592d391a7" args="(D, S)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPV6_ADDR_COPY</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">D, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">S&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;memcpy ((D), (S), IPV6_MAX_BYTELEN)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00122">122</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5f1eaa85b153050a498dacc958ab8283"></a><!-- doxytag: member="prefix.h::IPV6_ADDR_SAME" ref="a5f1eaa85b153050a498dacc958ab8283" args="(D, S)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPV6_ADDR_SAME</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">D, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">S&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(memcmp ((D), (S), IPV6_MAX_BYTELEN) == 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00121">121</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a05e4b561a81bb5a6f28ac69717d25dbb"></a><!-- doxytag: member="prefix.h::IPV6_MAX_BITLEN" ref="a05e4b561a81bb5a6f28ac69717d25dbb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPV6_MAX_BITLEN&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00118">118</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac2642af4f4d7a4209ad6261e72c658f9"></a><!-- doxytag: member="prefix.h::IPV6_MAX_BYTELEN" ref="ac2642af4f4d7a4209ad6261e72c658f9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPV6_MAX_BYTELEN&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00117">117</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="af240d7cd80eb12fc2e7e73a36e506131"></a><!-- doxytag: member="prefix.h::IPV6_MAX_PREFIXLEN" ref="af240d7cd80eb12fc2e7e73a36e506131" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPV6_MAX_PREFIXLEN&#160;&#160;&#160;128</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00119">119</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="acd8595e70861e22a9f8277bca3535aed"></a><!-- doxytag: member="prefix.h::PREFIX_COPY_IPV4" ref="acd8595e70861e22a9f8277bca3535aed" args="(DST, SRC)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PREFIX_COPY_IPV4</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">DST, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">SRC&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;*((struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *)(DST)) = *((const struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *)(SRC));</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00171">171</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a936de9ce96dcf8ebdfd5942c08425663"></a><!-- doxytag: member="prefix.h::PREFIX_FAMILY" ref="a936de9ce96dcf8ebdfd5942c08425663" args="(p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PREFIX_FAMILY</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>)-&gt;family)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00128">128</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a472145011d944606a257487e80cc3ace"></a><!-- doxytag: member="prefix.h::PSIZE" ref="a472145011d944606a257487e80cc3ace" args="(a)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PSIZE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a</td><td>)</td>
          <td>&#160;&#160;&#160;(((a) + 7) / (8))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00125">125</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ac65f6c2eb3775d9da42ed6fc38c54458"></a><!-- doxytag: member="prefix.h::afi2family" ref="ac65f6c2eb3775d9da42ed6fc38c54458" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int afi2family </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00044">44</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (afi == <a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>)
    <span class="keywordflow">return</span> AF_INET;
<span class="preprocessor">#ifdef HAVE_IPV6</span>
<span class="preprocessor"></span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (afi == <a class="code" href="zebra_8h.html#ad10f30457e426e1d269466d3b6603c3c">AFI_IP6</a>)
    <span class="keywordflow">return</span> AF_INET6;
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad058c280dde1aa1b8e756472d8f07193"></a><!-- doxytag: member="prefix.h::all_digit" ref="ad058c280dde1aa1b8e756472d8f07193" args="(const char *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int all_digit </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00640">640</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">for</span> (; *<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> != <span class="charliteral">&#39;\0&#39;</span>; <a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>++)
    <span class="keywordflow">if</span> (!isdigit ((<span class="keywordtype">int</span>) *<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>))
      <span class="keywordflow">return</span> 0;
  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af122f6e798624c0069f2ac2f4777bfde"></a><!-- doxytag: member="prefix.h::apply_classful_mask_ipv4" ref="af122f6e798624c0069f2ac2f4777bfde" args="(struct prefix_ipv4 *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void apply_classful_mask_ipv4 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00649">649</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{

  u_int32_t destination;
  
  destination = ntohl (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefix.s_addr);
  
  <span class="keywordflow">if</span> (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen == <a class="code" href="prefix_8h.html#ab98d836bf20a06de7a7358ab17832002">IPV4_MAX_PREFIXLEN</a>);
  <span class="comment">/* do nothing for host routes */</span>
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IN_CLASSC (destination)) 
    {
      <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen=24;
      <a class="code" href="prefix_8c.html#a24093dc2a781bf7f05d8a410899de5c0">apply_mask_ipv4</a>(<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
    }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IN_CLASSB(destination)) 
    {
      <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen=16;
      <a class="code" href="prefix_8c.html#a24093dc2a781bf7f05d8a410899de5c0">apply_mask_ipv4</a>(<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
    }
  <span class="keywordflow">else</span> 
    {
      <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen=8;
      <a class="code" href="prefix_8c.html#a24093dc2a781bf7f05d8a410899de5c0">apply_mask_ipv4</a>(<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="af532305eb46d25c6e903f8ba0c70a974"></a><!-- doxytag: member="prefix.h::apply_mask" ref="af532305eb46d25c6e903f8ba0c70a974" args="(struct prefix *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void apply_mask </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00494">494</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">switch</span> (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;family)
    {
      <span class="keywordflow">case</span> AF_INET:
        <a class="code" href="prefix_8c.html#a24093dc2a781bf7f05d8a410899de5c0">apply_mask_ipv4</a> ((<span class="keyword">struct</span> <a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *)<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
        <span class="keywordflow">break</span>;
<span class="preprocessor">#ifdef HAVE_IPV6</span>
<span class="preprocessor"></span>      <span class="keywordflow">case</span> AF_INET6:
        apply_mask_ipv6 ((<span class="keyword">struct</span> prefix_ipv6 *)<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
        <span class="keywordflow">break</span>;
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
      <span class="keywordflow">default</span>:
        <span class="keywordflow">break</span>;
    }
  <span class="keywordflow">return</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa7a3fcb833e93602c456c013374f9057"></a><!-- doxytag: member="prefix.h::apply_mask_ipv4" ref="aa7a3fcb833e93602c456c013374f9057" args="(struct prefix_ipv4 *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void apply_mask_ipv4 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00318">318</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  u_char *pnt;
  <span class="keywordtype">int</span> index;
  <span class="keywordtype">int</span> offset;

  index = <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen / 8;

  <span class="keywordflow">if</span> (index &lt; 4)
    {
      pnt = (u_char *) &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefix;
      offset = <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen % 8;

      pnt[index] &amp;= <a class="code" href="prefix_8c.html#a675cc05c7391c1cd5e88ed25175ad5e1">maskbit</a>[offset];
      index++;

      while (index &lt; 4)
    pnt[index++] = 0;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac4de39a0f9819069a2348657629ff821"></a><!-- doxytag: member="prefix.h::family2afi" ref="ac4de39a0f9819069a2348657629ff821" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int family2afi </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00056">56</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (family == AF_INET)
    <span class="keywordflow">return</span> <a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>;
<span class="preprocessor">#ifdef HAVE_IPV6</span>
<span class="preprocessor"></span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (family == AF_INET6)
    <span class="keywordflow">return</span> <a class="code" href="zebra_8h.html#ad10f30457e426e1d269466d3b6603c3c">AFI_IP6</a>;
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5a02555d617a8c65acee96aec0de709a"></a><!-- doxytag: member="prefix.h::ip_masklen" ref="a5a02555d617a8c65acee96aec0de709a" args="(struct in_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u_char ip_masklen </td>
          <td>(</td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00287">287</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  u_char len;
  u_char *pnt;
  u_char *end;
  u_char <a class="code" href="prefix_8h.html#a43e03366be2dd9176e91229d76541ce9">val</a>;

  len = 0;
  pnt = (u_char *) &amp;netmask;
  end = pnt + 4;

  <span class="keywordflow">while</span> ((pnt &lt; end) &amp;&amp; (*pnt == 0xff))
    {
      len+= 8;
      pnt++;
    } 

  <span class="keywordflow">if</span> (pnt &lt; end)
    {
      val = *pnt;
      <span class="keywordflow">while</span> (val)
    {
      len++;
      val &lt;&lt;= 1;
    }
    }
  <span class="keywordflow">return</span> len;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0416c71ab42c828a9ee8ee82ddda6a77"></a><!-- doxytag: member="prefix.h::ipv4_broadcast_addr" ref="a0416c71ab42c828a9ee8ee82ddda6a77" args="(in_addr_t hostaddr, int masklen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">in_addr_t ipv4_broadcast_addr </td>
          <td>(</td>
          <td class="paramtype">in_addr_t&#160;</td>
          <td class="paramname"><em>hostaddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>masklen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00685">685</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span>in_addr mask;

  <a class="code" href="prefix_8c.html#ac618f277d6ed0ebc56781ec26e508157">masklen2ip</a> (masklen, &amp;mask);
  <span class="keywordflow">return</span> (masklen != <a class="code" href="prefix_8h.html#ab98d836bf20a06de7a7358ab17832002">IPV4_MAX_PREFIXLEN</a>-1) ?
     <span class="comment">/* normal case */</span>
         (hostaddr | ~mask.s_addr) :
     <span class="comment">/* special case for /31 */</span>
         (hostaddr ^ ~mask.s_addr);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab4067c206567a0757076aa3fb9f285ce"></a><!-- doxytag: member="prefix.h::ipv4_network_addr" ref="ab4067c206567a0757076aa3fb9f285ce" args="(in_addr_t hostaddr, int masklen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">in_addr_t ipv4_network_addr </td>
          <td>(</td>
          <td class="paramtype">in_addr_t&#160;</td>
          <td class="paramname"><em>hostaddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>masklen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00676">676</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span>in_addr mask;

  <a class="code" href="prefix_8c.html#ac618f277d6ed0ebc56781ec26e508157">masklen2ip</a> (masklen, &amp;mask);
  <span class="keywordflow">return</span> hostaddr &amp; mask.s_addr;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a363c1588cd88f6320097cb766b0251dd"></a><!-- doxytag: member="prefix.h::masklen2ip" ref="a363c1588cd88f6320097cb766b0251dd" args="(int, struct in_addr *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void masklen2ip </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00265">265</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  u_char *pnt;
  <span class="keywordtype">int</span> bit;
  <span class="keywordtype">int</span> offset;

  memset (netmask, 0, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> in_addr));
  pnt = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) netmask;

  offset = masklen / 8;
  bit = masklen % 8;
  
  <span class="keywordflow">while</span> (offset--)
    *pnt++ = 0xff;

  <span class="keywordflow">if</span> (bit)
    *pnt = <a class="code" href="prefix_8c.html#a675cc05c7391c1cd5e88ed25175ad5e1">maskbit</a>[bit];
}
</pre></div>
</div>
</div>
<a class="anchor" id="abca4a6936d31222cbb1fa9ea70f792d4"></a><!-- doxytag: member="prefix.h::netmask_str2prefix_str" ref="abca4a6936d31222cbb1fa9ea70f792d4" args="(const char *, const char *, char *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int netmask_str2prefix_str </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00701">701</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span>in_addr <a class="code" href="command_8c.html#acec200f241e2d8f6b38bc83616c4c468">network</a>;
  <span class="keyword">struct </span>in_addr mask;
  u_char prefixlen;
  u_int32_t destination;
  <span class="keywordtype">int</span> ret;

  ret = <a class="code" href="sockunion_8c.html#a4203367afaacee3fa5cc1626b2ef63c0">inet_aton</a> (net_str, &amp;<a class="code" href="command_8c.html#acec200f241e2d8f6b38bc83616c4c468">network</a>);
  <span class="keywordflow">if</span> (! ret)
    <span class="keywordflow">return</span> 0;

  <span class="keywordflow">if</span> (mask_str)
    {
      ret = <a class="code" href="sockunion_8c.html#a4203367afaacee3fa5cc1626b2ef63c0">inet_aton</a> (mask_str, &amp;mask);
      <span class="keywordflow">if</span> (! ret)
        <span class="keywordflow">return</span> 0;

      prefixlen = <a class="code" href="prefix_8c.html#ab83ffad6b766ddd0ef87e4da228c322d">ip_masklen</a> (mask);
    }
  <span class="keywordflow">else</span> 
    {
      destination = ntohl (<a class="code" href="command_8c.html#acec200f241e2d8f6b38bc83616c4c468">network</a>.s_addr);

      <span class="keywordflow">if</span> (<a class="code" href="command_8c.html#acec200f241e2d8f6b38bc83616c4c468">network</a>.s_addr == 0)
    prefixlen = 0;
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IN_CLASSC (destination))
    prefixlen = 24;
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IN_CLASSB (destination))
    prefixlen = 16;
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IN_CLASSA (destination))
    prefixlen = 8;
      <span class="keywordflow">else</span>
    <span class="keywordflow">return</span> 0;
    }

  sprintf (prefix_str, <span class="stringliteral">&quot;%s/%d&quot;</span>, net_str, prefixlen);

  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad3a0083f4d69cb282c34cfe391ab64de"></a><!-- doxytag: member="prefix.h::prefix2str" ref="ad3a0083f4d69cb282c34cfe391ab64de" args="(const struct prefix *, char *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int prefix2str </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00611">611</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span> buf[BUFSIZ];

  <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;family, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;u.prefix, buf, BUFSIZ);
  <a class="code" href="str_8c.html#ad76145a6edfc98981ded8815a760e0cd">snprintf</a> (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, size, <span class="stringliteral">&quot;%s/%d&quot;</span>, buf, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen);
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a977f32ed59782cfac9322d423455c189"></a><!-- doxytag: member="prefix.h::prefix6_bit" ref="a977f32ed59782cfac9322d423455c189" args="(const struct in6_addr *prefix, const u_char prefixlen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int prefix6_bit </td>
          <td>(</td>
          <td class="paramtype">const struct in6_addr *&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const u_char&#160;</td>
          <td class="paramname"><em>prefixlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00141">141</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="prefix_8h.html#a448f1ebdeae472533f8faafd675e8f0b">prefix_bit</a>((<span class="keyword">const</span> u_char *) &amp;<a class="code" href="structprefix.html">prefix</a>-&gt;s6_addr, prefixlen);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a448f1ebdeae472533f8faafd675e8f0b"></a><!-- doxytag: member="prefix.h::prefix_bit" ref="a448f1ebdeae472533f8faafd675e8f0b" args="(const u_char *prefix, const u_char prefixlen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int prefix_bit </td>
          <td>(</td>
          <td class="paramtype">const u_char *&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const u_char&#160;</td>
          <td class="paramname"><em>prefixlen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00132">132</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> offset = prefixlen / 8;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> shift  = 7 - (prefixlen % 8);

  <span class="keywordflow">return</span> (<a class="code" href="structprefix.html">prefix</a>[offset] &gt;&gt; shift) &amp; 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a26faede4fa0254eb3ae3f4ecda227b11"></a><!-- doxytag: member="prefix.h::prefix_blen" ref="a26faede4fa0254eb3ae3f4ecda227b11" args="(const struct prefix *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int prefix_blen </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00573">573</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">switch</span> (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;family) 
    {
    <span class="keywordflow">case</span> AF_INET:
      <span class="keywordflow">return</span> <a class="code" href="prefix_8h.html#a013983d7a5267a63023c50ab32a85c24">IPV4_MAX_BYTELEN</a>;
      <span class="keywordflow">break</span>;
<span class="preprocessor">#ifdef HAVE_IPV6</span>
<span class="preprocessor"></span>    <span class="keywordflow">case</span> AF_INET6:
      <span class="keywordflow">return</span> <a class="code" href="prefix_8h.html#ac2642af4f4d7a4209ad6261e72c658f9">IPV6_MAX_BYTELEN</a>;
      <span class="keywordflow">break</span>;
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
    }
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acd6fef1cce47c4acf254917901894e96"></a><!-- doxytag: member="prefix.h::prefix_cmp" ref="acd6fef1cce47c4acf254917901894e96" args="(const struct prefix *, const struct prefix *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int prefix_cmp </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00157">157</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> offset;
  <span class="keywordtype">int</span> shift;

  <span class="comment">/* Set both prefix&#39;s head pointer. */</span>
  <span class="keyword">const</span> u_char *pp1 = (<span class="keyword">const</span> u_char *)&amp;p1-&gt;u.prefix;
  <span class="keyword">const</span> u_char *pp2 = (<span class="keyword">const</span> u_char *)&amp;p2-&gt;u.prefix;

  <span class="keywordflow">if</span> (p1-&gt;family != p2-&gt;family || p1-&gt;prefixlen != p2-&gt;prefixlen)
    <span class="keywordflow">return</span> 1;

  offset = p1-&gt;prefixlen / 8;
  shift = p1-&gt;prefixlen % 8;

  <span class="keywordflow">if</span> (shift)
    <span class="keywordflow">if</span> (<a class="code" href="prefix_8c.html#a675cc05c7391c1cd5e88ed25175ad5e1">maskbit</a>[shift] &amp; (pp1[offset] ^ pp2[offset]))
      <span class="keywordflow">return</span> 1;

  <span class="keywordflow">while</span> (offset--)
    <span class="keywordflow">if</span> (pp1[offset] != pp2[offset])
      <span class="keywordflow">return</span> 1;

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="abaad44d47b408d45484fdd729ab501b2"></a><!-- doxytag: member="prefix.h::prefix_copy" ref="abaad44d47b408d45484fdd729ab501b2" args="(struct prefix *dest, const struct prefix *src)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prefix_copy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00097">97</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  dest-&gt;<a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a> = src-&gt;<a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a>;
  dest-&gt;<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a> = src-&gt;<a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a>;

  <span class="keywordflow">if</span> (src-&gt;<a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a> == AF_INET)
    dest-&gt;u.<a class="code" href="structprefix.html#ab37b8922554b41b7dc2417d8f37e7829">prefix4</a> = src-&gt;u.<a class="code" href="structprefix.html#ab37b8922554b41b7dc2417d8f37e7829">prefix4</a>;
<span class="preprocessor">#ifdef HAVE_IPV6</span>
<span class="preprocessor"></span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (src-&gt;<a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a> == AF_INET6)
    dest-&gt;u.prefix6 = src-&gt;u.prefix6;
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (src-&gt;<a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a> == AF_UNSPEC)
    {
      dest-&gt;u.<a class="code" href="structprefix.html#a416d94ff668bb11283d8e2aee61cca72">lp</a>.id = src-&gt;u.<a class="code" href="structprefix.html#a416d94ff668bb11283d8e2aee61cca72">lp</a>.id;
      dest-&gt;u.<a class="code" href="structprefix.html#a416d94ff668bb11283d8e2aee61cca72">lp</a>.adv_router = src-&gt;u.<a class="code" href="structprefix.html#a416d94ff668bb11283d8e2aee61cca72">lp</a>.adv_router;
    }
  <span class="keywordflow">else</span>
    {
      <a class="code" href="log_8c.html#a34f80af784b8ec394e7a7154a7ec7364">zlog</a> (<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, LOG_ERR, <span class="stringliteral">&quot;prefix_copy(): Unknown address family %d&quot;</span>,
          src-&gt;<a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a>);
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (0);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae710c06755a2945ac62a08f32bb63731"></a><!-- doxytag: member="prefix.h::prefix_family_str" ref="ae710c06755a2945ac62a08f32bb63731" args="(const struct prefix *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* prefix_family_str </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00185">185</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;family == AF_INET)
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;inet&quot;</span>;
<span class="preprocessor">#ifdef HAVE_IPV6</span>
<span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;family == AF_INET6)
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;inet6&quot;</span>;
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
  <span class="keywordflow">return</span> <span class="stringliteral">&quot;unspec&quot;</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a848b0f4b9eeeef6205405bc7b52f4cd8"></a><!-- doxytag: member="prefix.h::prefix_free" ref="a848b0f4b9eeeef6205405bc7b52f4cd8" args="(struct prefix *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prefix_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00631">631</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba00593e6e9d5a4e7185791c7a301cc53a">MTYPE_PREFIX</a>, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="adcdb9f71008bd3fce97b4a5d5422c513"></a><!-- doxytag: member="prefix.h::prefix_ipv4_any" ref="adcdb9f71008bd3fce97b4a5d5422c513" args="(const struct prefix_ipv4 *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int prefix_ipv4_any </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00341">341</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefix.s_addr == 0 &amp;&amp; <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen == 0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a41d10c09454545b63c7d05fb86bc7f30"></a><!-- doxytag: member="prefix.h::prefix_ipv4_free" ref="a41d10c09454545b63c7d05fb86bc7f30" args="(struct prefix_ipv4 *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prefix_ipv4_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00212">212</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="prefix_8c.html#a5d8a68bc25fb973c471e61aaeb76a015">prefix_free</a>((<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *)<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5e3deaec6e89929a639d0ef2662626d4"></a><!-- doxytag: member="prefix.h::prefix_ipv4_new" ref="a5e3deaec6e89929a639d0ef2662626d4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a>* prefix_ipv4_new </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00198">198</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

  <span class="comment">/* Call prefix_new to allocate a full-size struct prefix to avoid problems</span>
<span class="comment">     where the struct prefix_ipv4 is cast to struct prefix and unallocated</span>
<span class="comment">     bytes were being referenced (e.g. in structure assignments). */</span>
  p = (<span class="keyword">struct </span><a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *)<a class="code" href="prefix_8c.html#a334dfe0b68e0de68379895a8ff3057e7">prefix_new</a>();
  p-&gt;<a class="code" href="structprefix__ipv4.html#a3a879ea08458c4807130156f5f23dbc7">family</a> = AF_INET;
  <span class="keywordflow">return</span> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a951ca22d390167cd3894a4af9f1e9844"></a><!-- doxytag: member="prefix.h::prefix_match" ref="a951ca22d390167cd3894a4af9f1e9844" args="(const struct prefix *, const struct prefix *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int prefix_match </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00069">69</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> offset;
  <span class="keywordtype">int</span> shift;

  <span class="comment">/* Set both prefix&#39;s head pointer. */</span>
  <span class="keyword">const</span> u_char *<a class="code" href="spgrid_8c.html#a928495140935d9d6ce0a100550473140">np</a> = (<span class="keyword">const</span> u_char *)&amp;<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>-&gt;u.prefix;
  <span class="keyword">const</span> u_char *pp = (<span class="keyword">const</span> u_char *)&amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;u.prefix;

  <span class="comment">/* If n&#39;s prefix is longer than p&#39;s one return 0. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>-&gt;prefixlen &gt; <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen)
    <span class="keywordflow">return</span> 0;

  offset = <a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>-&gt;prefixlen / <a class="code" href="prefix_8c.html#a6f9a32b2fd315bf69360c883843e8699">PNBBY</a>;
  shift =  <a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>-&gt;prefixlen % <a class="code" href="prefix_8c.html#a6f9a32b2fd315bf69360c883843e8699">PNBBY</a>;

  <span class="keywordflow">if</span> (shift)
    <span class="keywordflow">if</span> (<a class="code" href="prefix_8c.html#a675cc05c7391c1cd5e88ed25175ad5e1">maskbit</a>[shift] &amp; (np[offset] ^ pp[offset]))
      <span class="keywordflow">return</span> 0;
  
  <span class="keywordflow">while</span> (offset--)
    <span class="keywordflow">if</span> (np[offset] != pp[offset])
      <span class="keywordflow">return</span> 0;
  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa7b687cc910573f9048db1419c65cf71"></a><!-- doxytag: member="prefix.h::prefix_new" ref="aa7b687cc910573f9048db1419c65cf71" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structprefix.html">prefix</a>* prefix_new </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00621">621</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structprefix.html">prefix</a> *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

  p = <a class="code" href="memory_8h.html#a7826e4ed1d152cad0666dcf43f11f663">XCALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba00593e6e9d5a4e7185791c7a301cc53a">MTYPE_PREFIX</a>, <span class="keyword">sizeof</span> *p);
  <span class="keywordflow">return</span> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac99ede75a1bff9198a4daebeb332d7b7"></a><!-- doxytag: member="prefix.h::prefix_same" ref="ac99ede75a1bff9198a4daebeb332d7b7" args="(const struct prefix *, const struct prefix *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int prefix_same </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00130">130</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (p1-&gt;family == p2-&gt;family &amp;&amp; p1-&gt;prefixlen == p2-&gt;prefixlen)
    {
      <span class="keywordflow">if</span> (p1-&gt;family == AF_INET)
    <span class="keywordflow">if</span> (<a class="code" href="prefix_8h.html#a52a7c965d0b22ca60fe38fa6c404dbcc">IPV4_ADDR_SAME</a> (&amp;p1-&gt;u.prefix, &amp;p2-&gt;u.prefix))
      <span class="keywordflow">return</span> 1;
<span class="preprocessor">#ifdef HAVE_IPV6</span>
<span class="preprocessor"></span>      <span class="keywordflow">if</span> (p1-&gt;family == AF_INET6 )
    <span class="keywordflow">if</span> (<a class="code" href="prefix_8h.html#a5f1eaa85b153050a498dacc958ab8283">IPV6_ADDR_SAME</a> (&amp;p1-&gt;u.prefix, &amp;p2-&gt;u.prefix))
      <span class="keywordflow">return</span> 1;
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
    }
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a773aca373c0f6aaa9668402ec2fd899c"></a><!-- doxytag: member="prefix.h::sockunion2hostprefix" ref="a773aca373c0f6aaa9668402ec2fd899c" args="(const union sockunion *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structprefix.html">prefix</a>* sockunion2hostprefix </td>
          <td>(</td>
          <td class="paramtype">const union <a class="el" href="unionsockunion.html">sockunion</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00545">545</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (su-&gt;sa.sa_family == AF_INET)
    {
      <span class="keyword">struct </span><a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

      p = <a class="code" href="prefix_8c.html#af674876d8d874e88225f559322d797ac">prefix_ipv4_new</a> ();
      p-&gt;<a class="code" href="structprefix__ipv4.html#a3a879ea08458c4807130156f5f23dbc7">family</a> = AF_INET;
      p-&gt;prefix = su-&gt;sin.sin_addr;
      p-&gt;<a class="code" href="structprefix__ipv4.html#ab96da4bf1eb37195bd564bcf1126a16a">prefixlen</a> = <a class="code" href="prefix_8h.html#a9bd48f210d9f91d189e70196918f82c6">IPV4_MAX_BITLEN</a>;
      <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
    }
<span class="preprocessor">#ifdef HAVE_IPV6</span>
<span class="preprocessor"></span>  <span class="keywordflow">if</span> (su-&gt;sa.sa_family == AF_INET6)
    {
      <span class="keyword">struct </span>prefix_ipv6 *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

      p = prefix_ipv6_new ();
      p-&gt;family = AF_INET6;
      p-&gt;prefixlen = <a class="code" href="prefix_8h.html#a05e4b561a81bb5a6f28ac69717d25dbb">IPV6_MAX_BITLEN</a>;
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (&amp;p-&gt;prefix, &amp;su-&gt;sin6.sin6_addr, sizeof (<span class="keyword">struct</span> in6_addr));
      <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
    }
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
  <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aec236431a98092b2c21d0ff8501e29ff"></a><!-- doxytag: member="prefix.h::sockunion2prefix" ref="aec236431a98092b2c21d0ff8501e29ff" args="(const union sockunion *dest, const union sockunion *mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structprefix.html">prefix</a>* sockunion2prefix </td>
          <td>(</td>
          <td class="paramtype">const union <a class="el" href="unionsockunion.html">sockunion</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const union <a class="el" href="unionsockunion.html">sockunion</a> *&#160;</td>
          <td class="paramname"><em>mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00515">515</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="unionsockunion.html#a696d7d44e90274cc3bb86231cd51cfd4">sa</a>.sa_family == AF_INET)
    {
      <span class="keyword">struct </span><a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

      p = <a class="code" href="prefix_8c.html#af674876d8d874e88225f559322d797ac">prefix_ipv4_new</a> ();
      p-&gt;<a class="code" href="structprefix__ipv4.html#a3a879ea08458c4807130156f5f23dbc7">family</a> = AF_INET;
      p-&gt;prefix = dest-&gt;<a class="code" href="unionsockunion.html#a50fab1a37b798a49a085f78351680ab7">sin</a>.sin_addr;
      p-&gt;<a class="code" href="structprefix__ipv4.html#ab96da4bf1eb37195bd564bcf1126a16a">prefixlen</a> = <a class="code" href="prefix_8c.html#ab83ffad6b766ddd0ef87e4da228c322d">ip_masklen</a> (mask-&gt;<a class="code" href="unionsockunion.html#a50fab1a37b798a49a085f78351680ab7">sin</a>.sin_addr);
      <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
    }
<span class="preprocessor">#ifdef HAVE_IPV6</span>
<span class="preprocessor"></span>  <span class="keywordflow">if</span> (dest-&gt;<a class="code" href="unionsockunion.html#a696d7d44e90274cc3bb86231cd51cfd4">sa</a>.sa_family == AF_INET6)
    {
      <span class="keyword">struct </span>prefix_ipv6 *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

      p = prefix_ipv6_new ();
      p-&gt;family = AF_INET6;
      p-&gt;prefixlen = ip6_masklen (mask-&gt;sin6.sin6_addr);
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (&amp;p-&gt;prefix, &amp;dest-&gt;sin6.sin6_addr, sizeof (<span class="keyword">struct</span> in6_addr));
      <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
    }
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>
  <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="afb255a2fd6bd0123b3c28d84edc06b65"></a><!-- doxytag: member="prefix.h::str2prefix" ref="afb255a2fd6bd0123b3c28d84edc06b65" args="(const char *, struct prefix *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int str2prefix </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00591">591</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> ret;

  <span class="comment">/* First we try to convert string to struct prefix_ipv4. */</span>
  ret = <a class="code" href="prefix_8c.html#aae422250092661b36915d1769df957f7">str2prefix_ipv4</a> (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, (<span class="keyword">struct</span> <a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *) <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
  <span class="keywordflow">if</span> (ret)
    <span class="keywordflow">return</span> ret;

<span class="preprocessor">#ifdef HAVE_IPV6</span>
<span class="preprocessor"></span>  <span class="comment">/* Next we try to convert string to struct prefix_ipv6. */</span>
  ret = str2prefix_ipv6 (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, (<span class="keyword">struct</span> prefix_ipv6 *) <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
  <span class="keywordflow">if</span> (ret)
    <span class="keywordflow">return</span> ret;
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5e0caf58f29c658e0716aae727128eba"></a><!-- doxytag: member="prefix.h::str2prefix_ipv4" ref="a5e0caf58f29c658e0716aae727128eba" args="(const char *, struct prefix_ipv4 *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int str2prefix_ipv4 </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8c_source.html#l00219">219</a> of file <a class="el" href="prefix_8c_source.html">prefix.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> ret;
  <span class="keywordtype">int</span> plen;
  <span class="keywordtype">char</span> *pnt;
  <span class="keywordtype">char</span> *cp;

  <span class="comment">/* Find slash inside string. */</span>
  pnt = strchr (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, <span class="charliteral">&#39;/&#39;</span>);

  <span class="comment">/* String doesn&#39;t contail slash. */</span>
  <span class="keywordflow">if</span> (pnt == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) 
    {
      <span class="comment">/* Convert string to prefix. */</span>
      ret = <a class="code" href="sockunion_8c.html#a4203367afaacee3fa5cc1626b2ef63c0">inet_aton</a> (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefix);
      <span class="keywordflow">if</span> (ret == 0)
    <span class="keywordflow">return</span> 0;

      <span class="comment">/* If address doesn&#39;t contain slash we assume it host address. */</span>
      <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;family = AF_INET;
      <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen = <a class="code" href="prefix_8h.html#a9bd48f210d9f91d189e70196918f82c6">IPV4_MAX_BITLEN</a>;

      <span class="keywordflow">return</span> ret;
    }
  <span class="keywordflow">else</span>
    {
      cp = <a class="code" href="memory_8h.html#a6491adf46c1d769b529a8f2f7d75f2fe">XMALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba563963518edb70d4cd7492b06f48106e">MTYPE_TMP</a>, (pnt - <a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>) + 1);
      strncpy (cp, <a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, pnt - <a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);
      *(cp + (pnt - <a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>)) = <span class="charliteral">&#39;\0&#39;</span>;
      ret = <a class="code" href="sockunion_8c.html#a4203367afaacee3fa5cc1626b2ef63c0">inet_aton</a> (cp, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefix);
      <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba563963518edb70d4cd7492b06f48106e">MTYPE_TMP</a>, cp);

      <span class="comment">/* Get prefix length. */</span>
      plen = (u_char) atoi (++pnt);
      <span class="keywordflow">if</span> (plen &gt; <a class="code" href="prefix_8h.html#ab98d836bf20a06de7a7358ab17832002">IPV4_MAX_PREFIXLEN</a>)
    <span class="keywordflow">return</span> 0;

      <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;family = AF_INET;
      <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen = plen;
    }

  <span class="keywordflow">return</span> ret;
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="aa4419784611184c74a36162ffcf0123d"></a><!-- doxytag: member="prefix.h::adv_router" ref="aa4419784611184c74a36162ffcf0123d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct in_addr <a class="el" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00064">64</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a68c0ada54c6414ef00bca919465286ac"></a><!-- doxytag: member="prefix.h::id" ref="a68c0ada54c6414ef00bca919465286ac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct in_addr <a class="el" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00063">63</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0ddcde6df622c79e6fb1279ca2b72da6"></a><!-- doxytag: member="prefix.h::lp" ref="a0ddcde6df622c79e6fb1279ca2b72da6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   <a class="el" href="prefix_8h.html#a0ddcde6df622c79e6fb1279ca2b72da6">lp</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6b458105367a186babd858fd008a66be"></a><!-- doxytag: member="prefix.h::prefix" ref="a6b458105367a186babd858fd008a66be" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u_char <a class="el" href="structprefix.html">prefix</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00056">56</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a08e40e2dbc7ccdbf7fb88358aead274e"></a><!-- doxytag: member="prefix.h::prefix4" ref="a08e40e2dbc7ccdbf7fb88358aead274e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct in_addr <a class="el" href="prefix_8h.html#a08e40e2dbc7ccdbf7fb88358aead274e">prefix4</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00057">57</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
<a class="anchor" id="a43e03366be2dd9176e91229d76541ce9"></a><!-- doxytag: member="prefix.h::val" ref="a43e03366be2dd9176e91229d76541ce9" args="[8]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u_char <a class="el" href="prefix_8h.html#a43e03366be2dd9176e91229d76541ce9">val</a>[8]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="prefix_8h_source.html#l00066">66</a> of file <a class="el" href="prefix_8h_source.html">prefix.h</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="prefix_8h.html">prefix.h</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:23 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
