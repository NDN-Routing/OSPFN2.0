<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: ospfd/ospf_lsa.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('ospf__lsa_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ospfd/ospf_lsa.h File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="stream_8h_source.html">stream.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ospf_lsa.h:</div>
<div class="dyncontent">
<div class="center"><img src="ospf__lsa_8h__incl.png" border="0" usemap="#ospfd_2ospf__lsa_8h" alt=""/></div>
<map name="ospfd_2ospf__lsa_8h" id="ospfd_2ospf__lsa_8h">
<area shape="rect" id="node3" href="stream_8h.html" title="stream.h" alt="" coords="29,80,104,107"/><area shape="rect" id="node5" href="prefix_8h.html" title="prefix.h" alt="" coords="33,155,100,181"/><area shape="rect" id="node7" href="sockunion_8h.html" title="sockunion.h" alt="" coords="20,229,113,256"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ospf__lsa_8h__dep__incl.png" border="0" usemap="#ospfd_2ospf__lsa_8hdep" alt=""/></div>
<map name="ospfd_2ospf__lsa_8hdep" id="ospfd_2ospf__lsa_8hdep">
<area shape="rect" id="node3" href="ospf__apiclient_8c.html" title="ospfclient/ospf_apiclient.c" alt="" coords="5,80,187,107"/><area shape="rect" id="node5" href="ospfclient_8c.html" title="ospfclient/ospfclient.c" alt="" coords="211,80,367,107"/><area shape="rect" id="node7" href="ospf__abr_8c.html" title="ospfd/ospf_abr.c" alt="" coords="391,80,515,107"/><area shape="rect" id="node9" href="ospf__asbr_8c.html" title="ospfd/ospf_asbr.c" alt="" coords="540,80,671,107"/><area shape="rect" id="node11" href="ospf__ase_8c.html" title="ospfd/ospf_ase.c" alt="" coords="695,80,821,107"/><area shape="rect" id="node13" href="ospf__dump_8c.html" title="ospfd/ospf_dump.c" alt="" coords="847,80,985,107"/><area shape="rect" id="node15" href="ospf__flood_8c.html" title="ospfd/ospf_flood.c" alt="" coords="1009,80,1145,107"/><area shape="rect" id="node17" href="ospf__ia_8c.html" title="ospfd/ospf_ia.c" alt="" coords="1169,80,1284,107"/><area shape="rect" id="node19" href="ospf__interface_8c.html" title="ospfd/ospf_interface.c" alt="" coords="1309,80,1467,107"/><area shape="rect" id="node21" href="ospf__ism_8c.html" title="ospfd/ospf_ism.c" alt="" coords="1491,80,1617,107"/><area shape="rect" id="node23" href="ospf__lsa_8c.html" title="ospfd/ospf_lsa.c" alt="" coords="1643,80,1765,107"/><area shape="rect" id="node25" href="ospf__lsdb_8c.html" title="ospfd/ospf_lsdb.c" alt="" coords="1789,80,1920,107"/><area shape="rect" id="node27" href="ospf__main_8c.html" title="ospfd/ospf_main.c" alt="" coords="1944,80,2077,107"/><area shape="rect" id="node29" href="ospf__neighbor_8c.html" title="ospfd/ospf_neighbor.c" alt="" coords="2102,80,2260,107"/><area shape="rect" id="node31" href="ospf__network_8c.html" title="ospfd/ospf_network.c" alt="" coords="2285,80,2440,107"/><area shape="rect" id="node33" href="ospf__nsm_8c.html" title="ospfd/ospf_nsm.c" alt="" coords="2464,80,2595,107"/><area shape="rect" id="node35" href="ospf__packet_8c.html" title="ospfd/ospf_packet.c" alt="" coords="2619,80,2765,107"/><area shape="rect" id="node37" href="ospf__route_8c.html" title="ospfd/ospf_route.c" alt="" coords="2790,80,2927,107"/><area shape="rect" id="node39" href="ospf__routemap_8c.html" title="ospfd/ospf_routemap.c" alt="" coords="2952,80,3115,107"/><area shape="rect" id="node41" href="ospf__spf_8c.html" title="ospfd/ospf_spf.c" alt="" coords="3139,80,3263,107"/><area shape="rect" id="node43" href="ospf__vty_8c.html" title="ospfd/ospf_vty.c" alt="" coords="3287,80,3411,107"/><area shape="rect" id="node45" href="ospf__zebra_8c.html" title="ospfd/ospf_zebra.c" alt="" coords="3436,80,3575,107"/><area shape="rect" id="node47" href="ospfd_8c.html" title="ospfd/ospfd.c" alt="" coords="3599,80,3705,107"/><area shape="rect" id="node49" href="ospfn_8c.html" title="OSPFN program designed for dynamic FIB manipulation for CCND." alt="" coords="3739,229,3843,256"/><area shape="rect" id="node51" href="ospfn__opaque__lsa_8h.html" title="ospfn/ospfn_opaque_lsa.h" alt="" coords="3780,155,3961,181"/><area shape="rect" id="node56" href="tables_8h.html" title="ospfn/tables.h" alt="" coords="3927,80,4035,107"/><area shape="rect" id="node54" href="ospfn__opaque__lsa_8c.html" title="Handle opaque lsa&#39;s functionality." alt="" coords="3867,229,4048,256"/><area shape="rect" id="node59" href="ospfn_8h.html" title="ospfn/ospfn.h" alt="" coords="3985,155,4089,181"/><area shape="rect" id="node63" href="tables_8c.html" title="ospfn/tables.c" alt="" coords="4073,229,4180,256"/></map>
</div>
</div>
<p><a href="ospf__lsa_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlsa__header.html">lsa_header</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structospf__lsa.html">ospf_lsa</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrouter__lsa__link.html">router_lsa_link</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structrouter__lsa.html">router_lsa</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnetwork__lsa.html">network_lsa</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsummary__lsa.html">summary_lsa</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structas__external__lsa.html">as_external_lsa</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a28f56e6e5dedc2dd8223832a029e18b1">OSPF_MIN_LSA</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a3e45213a5a73c9e6ca277573059d1fbc">OSPF_MAX_LSA</a>&#160;&#160;&#160;8</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a3734b71eca102548796f9ca67866e6ab">OSPF_UNKNOWN_LSA</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a35879db42bef5fa9b3c1540b7db95b6f">OSPF_ROUTER_LSA</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a28b795ddb745c95eef700c9a2134c806">OSPF_NETWORK_LSA</a>&#160;&#160;&#160;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a3a501e86708401620a7a61e9920cd9bd">OSPF_SUMMARY_LSA</a>&#160;&#160;&#160;3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a09d9e4a35705f96a15952c63088c0ccc">OSPF_ASBR_SUMMARY_LSA</a>&#160;&#160;&#160;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ae1f343a4ebcfe793c20519a447f7b851">OSPF_AS_EXTERNAL_LSA</a>&#160;&#160;&#160;5</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a36ce5ae9bc26dabbac37679e5f8403fe">OSPF_GROUP_MEMBER_LSA</a>&#160;&#160;&#160;6</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#adc97c8397af1195230a4a98bf67e5a9d">OSPF_AS_NSSA_LSA</a>&#160;&#160;&#160;7</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a1dfd785cbb3a39d4e0cab88f17de0003">OSPF_EXTERNAL_ATTRIBUTES_LSA</a>&#160;&#160;&#160;8</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a9f5ad1d8944ebad62941128f9aeee23a">OSPF_OPAQUE_LINK_LSA</a>&#160;&#160;&#160;9</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#affea3ed894380623d4d5bf5dbbad90e9">OSPF_OPAQUE_AREA_LSA</a>&#160;&#160;&#160;10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a4ec63a35fbaffb7350ff4d69002af21e">OSPF_OPAQUE_AS_LSA</a>&#160;&#160;&#160;11</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a7cf423b6ef1c2152b96c88e36593bec4">OSPF_LSA_HEADER_SIZE</a>&#160;&#160;&#160;20U</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a7b8bcb25ada885e766879978daeefb72">OSPF_ROUTER_LSA_LINK_SIZE</a>&#160;&#160;&#160;12U</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ac2b86f4ba477efd3b5ef794faa1a3300">OSPF_MAX_LSA_SIZE</a>&#160;&#160;&#160;1500U</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ac0488097cd4fde2b7a0c63001f958fda">LSA_REFRESH_IF_CHANGED</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a389234e05af4a29be76c63dc46576791">LSA_REFRESH_FORCE</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a718b20342734d47ebbdfe717b19084e1">OSPF_LSA_SELF</a>&#160;&#160;&#160;0x01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a1e84ca07fab175368ae0125c93e06e4f">OSPF_LSA_SELF_CHECKED</a>&#160;&#160;&#160;0x02</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a780906236e4b5ef16a4a720a57e3f617">OSPF_LSA_RECEIVED</a>&#160;&#160;&#160;0x04</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a7d310b6c5bc390fbe0a0da8a73c43d82">OSPF_LSA_APPROVED</a>&#160;&#160;&#160;0x08</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a7c24685e365aa6c180d976e7ccfeb302">OSPF_LSA_DISCARD</a>&#160;&#160;&#160;0x10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a20f98f1fb4931335ddf4dd15d8fe9040">OSPF_LSA_LOCAL_XLT</a>&#160;&#160;&#160;0x20</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a8a7a31ebbedfab83203700cb050661af">OSPF_LSA_PREMATURE_AGE</a>&#160;&#160;&#160;0x40</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a6c66943e47af1d443fee615f1a91b622">OSPF_LSA_IN_MAXAGE</a>&#160;&#160;&#160;0x80</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a3e6d46b027ed03c318fdeae73c1fe73f">LSA_SPF_NOT_EXPLORED</a>&#160;&#160;&#160;-1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a7015c96fff68b5041b7c15cbd471e5c0">LSA_SPF_IN_SPFTREE</a>&#160;&#160;&#160;-2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a2483fa27223921c560eb674fb2ef9005">LSA_LINK_TYPE_POINTOPOINT</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a1731562bead68083ecb572078dcce532">LSA_LINK_TYPE_TRANSIT</a>&#160;&#160;&#160;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#af1d17f85642c3c4a7308cb0fe1b2e9f4">LSA_LINK_TYPE_STUB</a>&#160;&#160;&#160;3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#af8bf6fe51034655bd253facfaaacc0d9">LSA_LINK_TYPE_VIRTUALLINK</a>&#160;&#160;&#160;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a209278297866e72da9d2f58dd83b17af">ROUTER_LSA_BORDER</a>&#160;&#160;&#160;0x01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a050470d5439fd96299124e0debe3444f">ROUTER_LSA_EXTERNAL</a>&#160;&#160;&#160;0x02</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ad4c4e0d4e06fdc774a8959655d3687d2">ROUTER_LSA_VIRTUAL</a>&#160;&#160;&#160;0x04</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a0de58a5368b872addf7bad6fee7805da">ROUTER_LSA_NT</a>&#160;&#160;&#160;0x10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ae763d55031a619d49a3b9dc7dbdbed15">ROUTER_LSA_SHORTCUT</a>&#160;&#160;&#160;0x20</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a73de61aacb8ece81398674acfc6fc583">IS_ROUTER_LSA_VIRTUAL</a>(<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)-&gt;<a class="el" href="structflags.html">flags</a> &amp; ROUTER_LSA_VIRTUAL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ae24763c612e28d32f19f5c4d49cf805c">IS_ROUTER_LSA_EXTERNAL</a>(<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)-&gt;<a class="el" href="structflags.html">flags</a> &amp; ROUTER_LSA_EXTERNAL)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a6741309c91ce8ca9fc9c07e1ac286c1c">IS_ROUTER_LSA_BORDER</a>(<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)-&gt;<a class="el" href="structflags.html">flags</a> &amp; ROUTER_LSA_BORDER)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a4a995259e401173f72e6ac53b2c35174">IS_ROUTER_LSA_SHORTCUT</a>(<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)-&gt;<a class="el" href="structflags.html">flags</a> &amp; ROUTER_LSA_SHORTCUT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#af2ae932f9055d5b3c649e6c474e91380">IS_ROUTER_LSA_NT</a>(<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)-&gt;<a class="el" href="structflags.html">flags</a> &amp; ROUTER_LSA_NT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#af484b7995c962cc7558d5fc385b835fc">GET_METRIC</a>(<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)&#160;&#160;&#160;get_metric(<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a57c9f704846d60fce6698705135004ca">IS_EXTERNAL_METRIC</a>(<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>) &amp; 0x80)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#af3ba9ca2a2ba3a1f1c461a95e78e341e">GET_AGE</a>(<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)&#160;&#160;&#160;(ntohs ((<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)-&gt;data-&gt;ls_age) + time (NULL) - (<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)-&gt;tv_recv)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ac3af6344813262fea1e037637547443f">LS_AGE</a>(<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#aba06df657f75f729003128da649322f8">IS_LSA_SELF</a>(L)&#160;&#160;&#160;(CHECK_FLAG ((L)-&gt;<a class="el" href="structflags.html">flags</a>, OSPF_LSA_SELF))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a29c1c83c9c5e24d75e33d7efd0d12b88">IS_LSA_MAXAGE</a>(L)&#160;&#160;&#160;(LS_AGE ((L)) == OSPF_LSA_MAXAGE)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a40abe6153ff06321e030f48daccf4966">OSPF_LSA_UPDATE_DELAY</a>&#160;&#160;&#160;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a4e6dbdfc66715f0533985e799a22b7b7">OSPF_LSA_UPDATE_TIMER_ON</a>(<a class="el" href="md5_8c.html#a7e83ec4daea14d9c3040af4e0ac30792">T</a>, F)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct timeval&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a27f96d4b01a4406a6aba16fa17a9dac1">tv_adjust</a> (struct timeval)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ac75d18dfecd52e7f9fd066aafd9a30c5">tv_ceil</a> (struct timeval)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#aa82e4baf2a0b6799fd3f59d01ebf6db7">tv_floor</a> (struct timeval)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct timeval&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#af7e099cd812353d2ef87d402130b629f">int2tv</a> (int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct timeval&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a98c0d67e652f81a5529f74f8eb4a934f">tv_add</a> (struct timeval, struct timeval)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct timeval&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ae592541db9f1c212440cf1c03755d7f3">tv_sub</a> (struct timeval, struct timeval)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#af21c082323ef9fa0771031b9c5537101">tv_cmp</a> (struct timeval, struct timeval)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ae19b7570f097fbd3c20fa1269f1801f7">get_age</a> (struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">u_int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a2efc94716b4e8cb91f93d009d1c2dc4d">ospf_lsa_checksum</a> (struct <a class="el" href="structlsa__header.html">lsa_header</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a7b96dc25c5c7a019f43892b368b29c42">ospf_lsa_refresh_delay</a> (struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ae594514d094d68a0c9e51fc55fad8b48">dump_lsa_key</a> (struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">u_int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#acafa020e9ae90f74eaa3916e41004883">lsa_seqnum_increment</a> (struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a1211ebb1d728958b25eaf544e9968ca5">lsa_header_set</a> (struct <a class="el" href="structstream.html">stream</a> *, u_char, u_char, struct in_addr, struct in_addr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ac7383ff5ec4fb8cbc715c436e4573964">ospf_nbr_lookup_ptop</a> (struct <a class="el" href="structospf__interface.html">ospf_interface</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#aebba93c085ea7c42e2bcabbc6874957f">ospf_lsa_new</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ac1224b0b246a54b4867426f227a30e03">ospf_lsa_dup</a> (struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a4b5ec84656d6c21105adef0bfdc6ab73">ospf_lsa_free</a> (struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a40b8b094191531b0308c298ce6058036">ospf_lsa_lock</a> (struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ae96b427b01d51365ea14bd1d76cfcac9">ospf_lsa_unlock</a> (struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> **)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a8921b085ab4ed737f5d0e0ff644f0204">ospf_lsa_discard</a> (struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlsa__header.html">lsa_header</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#afb2fd3fca6a5ed7335910d3dfd5b1a44">ospf_lsa_data_new</a> (size_t)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlsa__header.html">lsa_header</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a8fd4063729934fd81888c49d6d36ca1d">ospf_lsa_data_dup</a> (struct <a class="el" href="structlsa__header.html">lsa_header</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a1825eaac7b68fa1f4d85ffb64e16abb8">ospf_lsa_data_free</a> (struct <a class="el" href="structlsa__header.html">lsa_header</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ae00530be7fc69ada76d42f73820322f5">ospf_router_lsa_update_timer</a> (struct <a class="el" href="structthread.html">thread</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ac577ecc40a1819d54ecc17d5936a8403">ospf_router_lsa_timer_add</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a56a24bcd7d5879bc8ff507e57f8dfc0b">ospf_network_lsa_refresh</a> (struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *, struct <a class="el" href="structospf__interface.html">ospf_interface</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a09abc200dd6e0554308b06ec74533aec">ospf_network_lsa_timer_add</a> (struct <a class="el" href="structospf__interface.html">ospf_interface</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a106a6c8803287171f86977f17862cd1e">ospf_summary_lsa_originate</a> (struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *, u_int32_t, struct <a class="el" href="structospf__area.html">ospf_area</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a8510c3ddd9c757b499b9eab1608a73b9">ospf_summary_asbr_lsa_originate</a> (struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *, u_int32_t, struct <a class="el" href="structospf__area.html">ospf_area</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a48c11a7b8192dc4fc5adfc2eb479447b">ospf_summary_lsa_refresh</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#af23c4529d590add3e7bb1aec50c3b5aa">ospf_summary_asbr_lsa_refresh</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#afa0154b439d0131a45078ac83284c219">ospf_lsa_install</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct <a class="el" href="structospf__interface.html">ospf_interface</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ad7cf1f402786baeafb4b5c21bd6faf8d">ospf_nssa_lsa_flush</a> (struct <a class="el" href="structospf.html">ospf</a> *<a class="el" href="structospf.html">ospf</a>, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *<a class="el" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a888f81f438a9a131fd95013d2ad54bfd">ospf_external_lsa_flush</a> (struct <a class="el" href="structospf.html">ospf</a> *, u_char, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *, unsigned int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct in_addr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a658b13f336d173659b05e30dc047200f">ospf_get_ip_from_ifp</a> (struct <a class="el" href="structospf__interface.html">ospf_interface</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ac60055b9864d5e478770ddfd590bc2b3">ospf_external_lsa_originate</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct <a class="el" href="structexternal__info.html">external_info</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a046268e0875d667c0d1aacd0e7d6a992">ospf_external_lsa_originate_timer</a> (struct <a class="el" href="structthread.html">thread</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a1878fa64b13559db6b192a347aead20f">ospf_lsa_lookup</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *, u_int32_t, struct in_addr, struct in_addr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a3f56f98bc228ce3882b6793d77058933">ospf_lsa_lookup_by_id</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *, u_int32_t, struct in_addr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#af69c4186d5427b44e07a278b0d25a627">ospf_lsa_lookup_by_header</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *, struct <a class="el" href="structlsa__header.html">lsa_header</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#aace465890c49615e0b5d325b4c35b100">ospf_lsa_more_recent</a> (struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a07a157daaaf0ebb453170186353038c4">ospf_lsa_different</a> (struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a270f1bb6680ffc69986e5d684758597f">ospf_flush_self_originated_lsas_now</a> (struct <a class="el" href="structospf.html">ospf</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ac57d05fec0a5915f5162ffe134969467">ospf_lsa_is_self_originated</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#aec4a69c1f23bc211aece00d6523fd88a">ospf_lsa_lookup_by_prefix</a> (struct <a class="el" href="structospf__lsdb.html">ospf_lsdb</a> *, u_char, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *, struct in_addr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a6029d8bd0c462ff8d8f51c69c41bc8a1">ospf_lsa_maxage</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">u_int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#aa06363a3a7a9d2b8bd83fd1eae1189a3">get_metric</a> (u_char *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a395e4b273182b4cff680e4c0d5505db1">ospf_lsa_maxage_walker</a> (struct <a class="el" href="structthread.html">thread</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a97413521b9c6e9adce8c88b876a6180a">ospf_external_lsa_refresh_default</a> (struct <a class="el" href="structospf.html">ospf</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#acbb96d7f73022f78e79cfb7105dc58ea">ospf_external_lsa_refresh_type</a> (struct <a class="el" href="structospf.html">ospf</a> *, u_char, int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a5aa647e4f76cf142799feb6be21149e9">ospf_external_lsa_refresh</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *, struct <a class="el" href="structexternal__info.html">external_info</a> *, int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct in_addr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a206fb64a72438cbc87e97db0adb5f981">ospf_lsa_unique_id</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct <a class="el" href="structospf__lsdb.html">ospf_lsdb</a> *, u_char, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a6b4fcf9e272116dc362f9ef3f7066caf">ospf_schedule_lsa_flood_area</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ab78229c09f8b10565e442ba4c5524cc9">ospf_schedule_lsa_flush_area</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ac8e106cccc71de3202761a111e2f1786">ospf_refresher_register_lsa</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a6c94f384c422cafb544bfe0293e82668">ospf_refresher_unregister_lsa</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a9fa3894b5bc156fa3e5c96aa94e95e51">ospf_lsa_refresh_walker</a> (struct <a class="el" href="structthread.html">thread</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a29a9d1aedd5bc7998239d89484bca94b">ospf_lsa_maxage_delete</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a9e827ef720ff7567fc47cf89a69d0d23">ospf_discard_from_db</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct <a class="el" href="structospf__lsdb.html">ospf_lsdb</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a54be2b6fe5a33a6becd62e600f6edf0e">is_prefix_default</a> (struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a7257b6f7748cdb6c7adbaa02a96ec664">metric_type</a> (struct <a class="el" href="structospf.html">ospf</a> *, u_char)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#ae4d10a0d67a58c2b584cc43bc9f44e83">metric_value</a> (struct <a class="el" href="structospf.html">ospf</a> *, u_char)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct in_addr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a2cd41a57761c209589dced9ce607c678">ospf_get_nssa_ip</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a04e5b870febf5407013b1b8fbbd27017">ospf_translated_nssa_compare</a> (struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a29efa1b700697d250866e5f1296b0871">ospf_translated_nssa_refresh</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__lsa_8h.html#a11507f11c7985cb569de8fbe0d62f843">ospf_translated_nssa_originate</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="af3ba9ca2a2ba3a1f1c461a95e78e341e"></a><!-- doxytag: member="ospf_lsa.h::GET_AGE" ref="af3ba9ca2a2ba3a1f1c461a95e78e341e" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GET_AGE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;(ntohs ((<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)-&gt;data-&gt;ls_age) + time (NULL) - (<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)-&gt;tv_recv)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00212">212</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="af484b7995c962cc7558d5fc385b835fc"></a><!-- doxytag: member="ospf_lsa.h::GET_METRIC" ref="af484b7995c962cc7558d5fc385b835fc" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GET_METRIC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;get_metric(<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00209">209</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a57c9f704846d60fce6698705135004ca"></a><!-- doxytag: member="ospf_lsa.h::IS_EXTERNAL_METRIC" ref="a57c9f704846d60fce6698705135004ca" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_EXTERNAL_METRIC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>) &amp; 0x80)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00210">210</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a29c1c83c9c5e24d75e33d7efd0d12b88"></a><!-- doxytag: member="ospf_lsa.h::IS_LSA_MAXAGE" ref="a29c1c83c9c5e24d75e33d7efd0d12b88" args="(L)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_LSA_MAXAGE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">L</td><td>)</td>
          <td>&#160;&#160;&#160;(LS_AGE ((L)) == OSPF_LSA_MAXAGE)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00216">216</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="aba06df657f75f729003128da649322f8"></a><!-- doxytag: member="ospf_lsa.h::IS_LSA_SELF" ref="aba06df657f75f729003128da649322f8" args="(L)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_LSA_SELF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">L</td><td>)</td>
          <td>&#160;&#160;&#160;(CHECK_FLAG ((L)-&gt;<a class="el" href="structflags.html">flags</a>, OSPF_LSA_SELF))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00215">215</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6741309c91ce8ca9fc9c07e1ac286c1c"></a><!-- doxytag: member="ospf_lsa.h::IS_ROUTER_LSA_BORDER" ref="a6741309c91ce8ca9fc9c07e1ac286c1c" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_ROUTER_LSA_BORDER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)-&gt;<a class="el" href="structflags.html">flags</a> &amp; ROUTER_LSA_BORDER)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00139">139</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae24763c612e28d32f19f5c4d49cf805c"></a><!-- doxytag: member="ospf_lsa.h::IS_ROUTER_LSA_EXTERNAL" ref="ae24763c612e28d32f19f5c4d49cf805c" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_ROUTER_LSA_EXTERNAL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)-&gt;<a class="el" href="structflags.html">flags</a> &amp; ROUTER_LSA_EXTERNAL)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00138">138</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="af2ae932f9055d5b3c649e6c474e91380"></a><!-- doxytag: member="ospf_lsa.h::IS_ROUTER_LSA_NT" ref="af2ae932f9055d5b3c649e6c474e91380" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_ROUTER_LSA_NT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)-&gt;<a class="el" href="structflags.html">flags</a> &amp; ROUTER_LSA_NT)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00141">141</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4a995259e401173f72e6ac53b2c35174"></a><!-- doxytag: member="ospf_lsa.h::IS_ROUTER_LSA_SHORTCUT" ref="a4a995259e401173f72e6ac53b2c35174" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_ROUTER_LSA_SHORTCUT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)-&gt;<a class="el" href="structflags.html">flags</a> &amp; ROUTER_LSA_SHORTCUT)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00140">140</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a73de61aacb8ece81398674acfc6fc583"></a><!-- doxytag: member="ospf_lsa.h::IS_ROUTER_LSA_VIRTUAL" ref="a73de61aacb8ece81398674acfc6fc583" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IS_ROUTER_LSA_VIRTUAL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>)-&gt;<a class="el" href="structflags.html">flags</a> &amp; ROUTER_LSA_VIRTUAL)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00137">137</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac3af6344813262fea1e037637547443f"></a><!-- doxytag: member="ospf_lsa.h::LS_AGE" ref="ac3af6344813262fea1e037637547443f" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LS_AGE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">(<a class="code" href="ospfd_8h.html#a2f2ee186f07abbe2afec70662e026341">OSPF_LSA_MAXAGE</a> &lt; <a class="code" href="ospf__lsa_8c.html#aabea9a7010df99af7fd72822554cc25e">get_age</a>(<a class="code" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>) ? \
                                           OSPF_LSA_MAXAGE : <a class="code" href="ospf__lsa_8c.html#aabea9a7010df99af7fd72822554cc25e">get_age</a>(<a class="code" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>))
</pre></div>
<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00213">213</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2483fa27223921c560eb674fb2ef9005"></a><!-- doxytag: member="ospf_lsa.h::LSA_LINK_TYPE_POINTOPOINT" ref="a2483fa27223921c560eb674fb2ef9005" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LSA_LINK_TYPE_POINTOPOINT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00125">125</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="af1d17f85642c3c4a7308cb0fe1b2e9f4"></a><!-- doxytag: member="ospf_lsa.h::LSA_LINK_TYPE_STUB" ref="af1d17f85642c3c4a7308cb0fe1b2e9f4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LSA_LINK_TYPE_STUB&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00127">127</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1731562bead68083ecb572078dcce532"></a><!-- doxytag: member="ospf_lsa.h::LSA_LINK_TYPE_TRANSIT" ref="a1731562bead68083ecb572078dcce532" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LSA_LINK_TYPE_TRANSIT&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00126">126</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="af8bf6fe51034655bd253facfaaacc0d9"></a><!-- doxytag: member="ospf_lsa.h::LSA_LINK_TYPE_VIRTUALLINK" ref="af8bf6fe51034655bd253facfaaacc0d9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LSA_LINK_TYPE_VIRTUALLINK&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00128">128</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a389234e05af4a29be76c63dc46576791"></a><!-- doxytag: member="ospf_lsa.h::LSA_REFRESH_FORCE" ref="a389234e05af4a29be76c63dc46576791" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LSA_REFRESH_FORCE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00056">56</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac0488097cd4fde2b7a0c63001f958fda"></a><!-- doxytag: member="ospf_lsa.h::LSA_REFRESH_IF_CHANGED" ref="ac0488097cd4fde2b7a0c63001f958fda" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LSA_REFRESH_IF_CHANGED&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00055">55</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7015c96fff68b5041b7c15cbd471e5c0"></a><!-- doxytag: member="ospf_lsa.h::LSA_SPF_IN_SPFTREE" ref="a7015c96fff68b5041b7c15cbd471e5c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LSA_SPF_IN_SPFTREE&#160;&#160;&#160;-2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00100">100</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3e6d46b027ed03c318fdeae73c1fe73f"></a><!-- doxytag: member="ospf_lsa.h::LSA_SPF_NOT_EXPLORED" ref="a3e6d46b027ed03c318fdeae73c1fe73f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LSA_SPF_NOT_EXPLORED&#160;&#160;&#160;-1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00099">99</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae1f343a4ebcfe793c20519a447f7b851"></a><!-- doxytag: member="ospf_lsa.h::OSPF_AS_EXTERNAL_LSA" ref="ae1f343a4ebcfe793c20519a447f7b851" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_AS_EXTERNAL_LSA&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00042">42</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="adc97c8397af1195230a4a98bf67e5a9d"></a><!-- doxytag: member="ospf_lsa.h::OSPF_AS_NSSA_LSA" ref="adc97c8397af1195230a4a98bf67e5a9d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_AS_NSSA_LSA&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00044">44</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a09d9e4a35705f96a15952c63088c0ccc"></a><!-- doxytag: member="ospf_lsa.h::OSPF_ASBR_SUMMARY_LSA" ref="a09d9e4a35705f96a15952c63088c0ccc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_ASBR_SUMMARY_LSA&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00041">41</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1dfd785cbb3a39d4e0cab88f17de0003"></a><!-- doxytag: member="ospf_lsa.h::OSPF_EXTERNAL_ATTRIBUTES_LSA" ref="a1dfd785cbb3a39d4e0cab88f17de0003" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_EXTERNAL_ATTRIBUTES_LSA&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00045">45</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a36ce5ae9bc26dabbac37679e5f8403fe"></a><!-- doxytag: member="ospf_lsa.h::OSPF_GROUP_MEMBER_LSA" ref="a36ce5ae9bc26dabbac37679e5f8403fe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_GROUP_MEMBER_LSA&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00043">43</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7d310b6c5bc390fbe0a0da8a73c43d82"></a><!-- doxytag: member="ospf_lsa.h::OSPF_LSA_APPROVED" ref="a7d310b6c5bc390fbe0a0da8a73c43d82" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_LSA_APPROVED&#160;&#160;&#160;0x08</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00079">79</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7c24685e365aa6c180d976e7ccfeb302"></a><!-- doxytag: member="ospf_lsa.h::OSPF_LSA_DISCARD" ref="a7c24685e365aa6c180d976e7ccfeb302" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_LSA_DISCARD&#160;&#160;&#160;0x10</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00080">80</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7cf423b6ef1c2152b96c88e36593bec4"></a><!-- doxytag: member="ospf_lsa.h::OSPF_LSA_HEADER_SIZE" ref="a7cf423b6ef1c2152b96c88e36593bec4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_LSA_HEADER_SIZE&#160;&#160;&#160;20U</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00050">50</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6c66943e47af1d443fee615f1a91b622"></a><!-- doxytag: member="ospf_lsa.h::OSPF_LSA_IN_MAXAGE" ref="a6c66943e47af1d443fee615f1a91b622" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_LSA_IN_MAXAGE&#160;&#160;&#160;0x80</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00083">83</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a20f98f1fb4931335ddf4dd15d8fe9040"></a><!-- doxytag: member="ospf_lsa.h::OSPF_LSA_LOCAL_XLT" ref="a20f98f1fb4931335ddf4dd15d8fe9040" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_LSA_LOCAL_XLT&#160;&#160;&#160;0x20</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00081">81</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8a7a31ebbedfab83203700cb050661af"></a><!-- doxytag: member="ospf_lsa.h::OSPF_LSA_PREMATURE_AGE" ref="a8a7a31ebbedfab83203700cb050661af" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_LSA_PREMATURE_AGE&#160;&#160;&#160;0x40</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00082">82</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a780906236e4b5ef16a4a720a57e3f617"></a><!-- doxytag: member="ospf_lsa.h::OSPF_LSA_RECEIVED" ref="a780906236e4b5ef16a4a720a57e3f617" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_LSA_RECEIVED&#160;&#160;&#160;0x04</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00078">78</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a718b20342734d47ebbdfe717b19084e1"></a><!-- doxytag: member="ospf_lsa.h::OSPF_LSA_SELF" ref="a718b20342734d47ebbdfe717b19084e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_LSA_SELF&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00076">76</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1e84ca07fab175368ae0125c93e06e4f"></a><!-- doxytag: member="ospf_lsa.h::OSPF_LSA_SELF_CHECKED" ref="a1e84ca07fab175368ae0125c93e06e4f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_LSA_SELF_CHECKED&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00077">77</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a40abe6153ff06321e030f48daccf4966"></a><!-- doxytag: member="ospf_lsa.h::OSPF_LSA_UPDATE_DELAY" ref="a40abe6153ff06321e030f48daccf4966" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_LSA_UPDATE_DELAY&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00218">218</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4e6dbdfc66715f0533985e799a22b7b7"></a><!-- doxytag: member="ospf_lsa.h::OSPF_LSA_UPDATE_TIMER_ON" ref="a4e6dbdfc66715f0533985e799a22b7b7" args="(T, F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_LSA_UPDATE_TIMER_ON</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="md5_8c.html#a7e83ec4daea14d9c3040af4e0ac30792">T</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">if</span> (!(<a class="code" href="md5_8c.html#a7e83ec4daea14d9c3040af4e0ac30792">T</a>)) \
        (<a class="code" href="md5_8c.html#a7e83ec4daea14d9c3040af4e0ac30792">T</a>) = <a class="code" href="thread_8h.html#aca77b3bbd166d3573de5ecd9756a590c">thread_add_timer</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, (<a class="code" href="md5_8c.html#ad6d7c306af62dbc87d1fcde6cb1bfb0e">F</a>), 0, 2)
</pre></div>
<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00220">220</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3e45213a5a73c9e6ca277573059d1fbc"></a><!-- doxytag: member="ospf_lsa.h::OSPF_MAX_LSA" ref="a3e45213a5a73c9e6ca277573059d1fbc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_MAX_LSA&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00033">33</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac2b86f4ba477efd3b5ef794faa1a3300"></a><!-- doxytag: member="ospf_lsa.h::OSPF_MAX_LSA_SIZE" ref="ac2b86f4ba477efd3b5ef794faa1a3300" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_MAX_LSA_SIZE&#160;&#160;&#160;1500U</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00052">52</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a28f56e6e5dedc2dd8223832a029e18b1"></a><!-- doxytag: member="ospf_lsa.h::OSPF_MIN_LSA" ref="a28f56e6e5dedc2dd8223832a029e18b1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_MIN_LSA&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00029">29</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a28b795ddb745c95eef700c9a2134c806"></a><!-- doxytag: member="ospf_lsa.h::OSPF_NETWORK_LSA" ref="a28b795ddb745c95eef700c9a2134c806" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_NETWORK_LSA&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00039">39</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="affea3ed894380623d4d5bf5dbbad90e9"></a><!-- doxytag: member="ospf_lsa.h::OSPF_OPAQUE_AREA_LSA" ref="affea3ed894380623d4d5bf5dbbad90e9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_OPAQUE_AREA_LSA&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00047">47</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4ec63a35fbaffb7350ff4d69002af21e"></a><!-- doxytag: member="ospf_lsa.h::OSPF_OPAQUE_AS_LSA" ref="a4ec63a35fbaffb7350ff4d69002af21e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_OPAQUE_AS_LSA&#160;&#160;&#160;11</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00048">48</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9f5ad1d8944ebad62941128f9aeee23a"></a><!-- doxytag: member="ospf_lsa.h::OSPF_OPAQUE_LINK_LSA" ref="a9f5ad1d8944ebad62941128f9aeee23a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_OPAQUE_LINK_LSA&#160;&#160;&#160;9</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00046">46</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a35879db42bef5fa9b3c1540b7db95b6f"></a><!-- doxytag: member="ospf_lsa.h::OSPF_ROUTER_LSA" ref="a35879db42bef5fa9b3c1540b7db95b6f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_ROUTER_LSA&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00038">38</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7b8bcb25ada885e766879978daeefb72"></a><!-- doxytag: member="ospf_lsa.h::OSPF_ROUTER_LSA_LINK_SIZE" ref="a7b8bcb25ada885e766879978daeefb72" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_ROUTER_LSA_LINK_SIZE&#160;&#160;&#160;12U</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00051">51</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3a501e86708401620a7a61e9920cd9bd"></a><!-- doxytag: member="ospf_lsa.h::OSPF_SUMMARY_LSA" ref="a3a501e86708401620a7a61e9920cd9bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_SUMMARY_LSA&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00040">40</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3734b71eca102548796f9ca67866e6ab"></a><!-- doxytag: member="ospf_lsa.h::OSPF_UNKNOWN_LSA" ref="a3734b71eca102548796f9ca67866e6ab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_UNKNOWN_LSA&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00037">37</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a209278297866e72da9d2f58dd83b17af"></a><!-- doxytag: member="ospf_lsa.h::ROUTER_LSA_BORDER" ref="a209278297866e72da9d2f58dd83b17af" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROUTER_LSA_BORDER&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00131">131</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a050470d5439fd96299124e0debe3444f"></a><!-- doxytag: member="ospf_lsa.h::ROUTER_LSA_EXTERNAL" ref="a050470d5439fd96299124e0debe3444f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROUTER_LSA_EXTERNAL&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00132">132</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0de58a5368b872addf7bad6fee7805da"></a><!-- doxytag: member="ospf_lsa.h::ROUTER_LSA_NT" ref="a0de58a5368b872addf7bad6fee7805da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROUTER_LSA_NT&#160;&#160;&#160;0x10</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00134">134</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae763d55031a619d49a3b9dc7dbdbed15"></a><!-- doxytag: member="ospf_lsa.h::ROUTER_LSA_SHORTCUT" ref="ae763d55031a619d49a3b9dc7dbdbed15" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROUTER_LSA_SHORTCUT&#160;&#160;&#160;0x20</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00135">135</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad4c4e0d4e06fdc774a8959655d3687d2"></a><!-- doxytag: member="ospf_lsa.h::ROUTER_LSA_VIRTUAL" ref="ad4c4e0d4e06fdc774a8959655d3687d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROUTER_LSA_VIRTUAL&#160;&#160;&#160;0x04</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8h_source.html#l00133">133</a> of file <a class="el" href="ospf__lsa_8h_source.html">ospf_lsa.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae594514d094d68a0c9e51fc55fad8b48"></a><!-- doxytag: member="ospf_lsa.h::dump_lsa_key" ref="ae594514d094d68a0c9e51fc55fad8b48" args="(struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* dump_lsa_key </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00336">336</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">static</span> <span class="keywordtype">char</span> buf[] = {
    <span class="stringliteral">&quot;Type255,id(255.255.255.255),ar(255.255.255.255)&quot;</span>
  };
  <span class="keyword">struct </span><a class="code" href="structlsa__header.html">lsa_header</a> *lsah;

  <span class="keywordflow">if</span> (lsa != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; (lsah = lsa-&gt;data) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="keywordtype">char</span> <span class="keywordtype">id</span>[<a class="code" href="prefix_8h.html#a93b37007689284fd9c4bde1a8f4b9199">INET_ADDRSTRLEN</a>], ar[<a class="code" href="prefix_8h.html#a93b37007689284fd9c4bde1a8f4b9199">INET_ADDRSTRLEN</a>];
      strcpy (<span class="keywordtype">id</span>, inet_ntoa (lsah-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>));
      strcpy (ar, inet_ntoa (lsah-&gt;<a class="code" href="structlsa__header.html#a14cecc24f7274d590fc9666f9c62fdd4">adv_router</a>));

      sprintf (buf, <span class="stringliteral">&quot;Type%d,id(%s),ar(%s)&quot;</span>, lsah-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a>, <span class="keywordtype">id</span>, ar);
    }
  <span class="keywordflow">else</span>
    strcpy (buf, <span class="stringliteral">&quot;NULL&quot;</span>);

  <span class="keywordflow">return</span> buf;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae19b7570f097fbd3c20fa1269f1801f7"></a><!-- doxytag: member="ospf_lsa.h::get_age" ref="ae19b7570f097fbd3c20fa1269f1801f7" args="(struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_age </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00164">164</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> age;

  age = ntohs (lsa-&gt;data-&gt;ls_age) 
        + <a class="code" href="ospf__lsa_8c.html#ac65f591e95cfd07e00f945e86cb3d470">tv_floor</a> (<a class="code" href="ospf__lsa_8c.html#aaa9daa06f817fbcc8ff12657aeb5996c">tv_sub</a> (<a class="code" href="thread_8c.html#a010d58e49a3c74ae856d5cd111f7eb62">recent_relative_time</a> (), lsa-&gt;tv_recv));

  <span class="keywordflow">return</span> age;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa06363a3a7a9d2b8bd83fd1eae1189a3"></a><!-- doxytag: member="ospf_lsa.h::get_metric" ref="aa06363a3a7a9d2b8bd83fd1eae1189a3" args="(u_char *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u_int32_t get_metric </td>
          <td>(</td>
          <td class="paramtype">u_char *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00055">55</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  u_int32_t <a class="code" href="spgrid_8c.html#a5175b356eac1d83a42608b42a25d00b9">m</a>;
  m = <a class="code" href="structmetric.html">metric</a>[0];
  m = (m &lt;&lt; 8) + <a class="code" href="structmetric.html">metric</a>[1];
  m = (m &lt;&lt; 8) + <a class="code" href="structmetric.html">metric</a>[2];
  <span class="keywordflow">return</span> <a class="code" href="spgrid_8c.html#a5175b356eac1d83a42608b42a25d00b9">m</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af7e099cd812353d2ef87d402130b629f"></a><!-- doxytag: member="ospf_lsa.h::int2tv" ref="af7e099cd812353d2ef87d402130b629f" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timeval int2tv </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00100">100</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span>timeval ret;

  ret.tv_sec = <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>;
  ret.tv_usec = 0;

  <span class="keywordflow">return</span> ret;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a54be2b6fe5a33a6becd62e600f6edf0e"></a><!-- doxytag: member="ospf_lsa.h::is_prefix_default" ref="a54be2b6fe5a33a6becd62e600f6edf0e" args="(struct prefix_ipv4 *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_prefix_default </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l02017">2017</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> q;

  q.<a class="code" href="structprefix__ipv4.html#a3a879ea08458c4807130156f5f23dbc7">family</a> = AF_INET;
  q.prefix.s_addr = 0;
  q.prefixlen = 0;

  <span class="keywordflow">return</span> <a class="code" href="prefix_8c.html#ac3645297b5669182b5052aa7689712af">prefix_same</a> ((<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) &amp;q);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1211ebb1d728958b25eaf544e9968ca5"></a><!-- doxytag: member="ospf_lsa.h::lsa_header_set" ref="a1211ebb1d728958b25eaf544e9968ca5" args="(struct stream *, u_char, u_char, struct in_addr, struct in_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lsa_header_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structstream.html">stream</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_char&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_char&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00368">368</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlsa__header.html">lsa_header</a> *lsah;

  lsah = (<span class="keyword">struct </span><a class="code" href="structlsa__header.html">lsa_header</a> *) <a class="code" href="stream_8h.html#afde5f5db208a43da6faf7b830f26d7fc">STREAM_DATA</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>);

  lsah-&gt;<a class="code" href="structlsa__header.html#a797ae6158d74b4aa89a9d09c5edb13d2">ls_age</a> = htons (0);
  lsah-&gt;<a class="code" href="structlsa__header.html#ab09eba50538b8481e12d4825dc803716">options</a> = <a class="code" href="structlsa__header.html#ab09eba50538b8481e12d4825dc803716">options</a>;
  lsah-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a> = <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>;
  lsah-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a> = <a class="code" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>;
  lsah-&gt;<a class="code" href="structlsa__header.html#a14cecc24f7274d590fc9666f9c62fdd4">adv_router</a> = router_id;
  lsah-&gt;<a class="code" href="structlsa__header.html#ac9c2a10b78b2be23acfe6d0a54b9b6b5">ls_seqnum</a> = htonl (<a class="code" href="ospfd_8h.html#affb6c878aa462ae5de5e5db70631482d">OSPF_INITIAL_SEQUENCE_NUMBER</a>);

  <a class="code" href="stream_8c.html#aa8fdf46961b0a0aa3d014bb602712076">stream_forward_endp</a> (<a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>, <a class="code" href="ospf__lsa_8h.html#a7cf423b6ef1c2152b96c88e36593bec4">OSPF_LSA_HEADER_SIZE</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="acafa020e9ae90f74eaa3916e41004883"></a><!-- doxytag: member="ospf_lsa.h::lsa_seqnum_increment" ref="acafa020e9ae90f74eaa3916e41004883" args="(struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u_int32_t lsa_seqnum_increment </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00358">358</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  u_int32_t seqnum;

  seqnum = ntohl (lsa-&gt;data-&gt;ls_seqnum) + 1;

  <span class="keywordflow">return</span> htonl (seqnum);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7257b6f7748cdb6c7adbaa02a96ec664"></a><!-- doxytag: member="ospf_lsa.h::metric_type" ref="a7257b6f7748cdb6c7adbaa02a96ec664" args="(struct ospf *, u_char)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int metric_type </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_char&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l01601">1601</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a469871fc51798a2de7e3b19ada21d8ce">dmetric</a>[src].<a class="code" href="structospf.html#adcc2e8439120b1f4144a6be8d702f638">type</a> &lt; 0 ?
      <a class="code" href="ospf__lsa_8c.html#a48c5c8065d990b12ae7ec8ae63ad87b3">DEFAULT_METRIC_TYPE</a> : <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a469871fc51798a2de7e3b19ada21d8ce">dmetric</a>[src].<a class="code" href="structospf.html#adcc2e8439120b1f4144a6be8d702f638">type</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae4d10a0d67a58c2b584cc43bc9f44e83"></a><!-- doxytag: member="ospf_lsa.h::metric_value" ref="ae4d10a0d67a58c2b584cc43bc9f44e83" args="(struct ospf *, u_char)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int metric_value </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_char&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l01608">1608</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a469871fc51798a2de7e3b19ada21d8ce">dmetric</a>[src].<a class="code" href="structospf.html#a2bd05e59ebe8b6b342e19562d55a8a10">value</a> &lt; 0)
    {
      <span class="keywordflow">if</span> (src == <a class="code" href="ospf__zebra_8h.html#a353195a6a59d18a6807885cbefaf0d24">DEFAULT_ROUTE</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a1111f78d01dc9e8d522e639da7a2a36c">default_originate</a> == <a class="code" href="ospfd_8h.html#a7b4793232fba8efda09caec7411191ae">DEFAULT_ORIGINATE_ZEBRA</a>)
        <span class="keywordflow">return</span> <a class="code" href="ospf__lsa_8c.html#a0b6af5141b556d1ff1e433c475742c71">DEFAULT_DEFAULT_ORIGINATE_METRIC</a>;
      <span class="keywordflow">else</span>
        <span class="keywordflow">return</span> <a class="code" href="ospf__lsa_8c.html#a8f3d1904ca36a7ffd0778688e642b5fa">DEFAULT_DEFAULT_ALWAYS_METRIC</a>;
    }
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#ac586617fdf758555fca97155ad205a64">default_metric</a> &lt; 0)
    <span class="keywordflow">return</span> <a class="code" href="ospf__lsa_8c.html#a83dbba2d928d93b1fab8b1f1137828c7">DEFAULT_DEFAULT_METRIC</a>;
      <span class="keywordflow">else</span>
    <span class="keywordflow">return</span> <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#ac586617fdf758555fca97155ad205a64">default_metric</a>;
    }

  <span class="keywordflow">return</span> <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a469871fc51798a2de7e3b19ada21d8ce">dmetric</a>[src].<a class="code" href="structospf.html#a2bd05e59ebe8b6b342e19562d55a8a10">value</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9e827ef720ff7567fc47cf89a69d0d23"></a><!-- doxytag: member="ospf_lsa.h::ospf_discard_from_db" ref="a9e827ef720ff7567fc47cf89a69d0d23" args="(struct ospf *, struct ospf_lsdb *, struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_discard_from_db </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsdb.html">ospf_lsdb</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l02590">2590</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *old;
  
  <span class="keywordflow">if</span> (!<a class="code" href="structospf__lsa.html#acba2998d58a36757e13007afd1e6a224">lsdb</a>)
    {
      <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;%s: Called with NULL lsdb!&quot;</span>, __func__);
      <span class="keywordflow">if</span> (!lsa)
        <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;%s: and NULL LSA!&quot;</span>, __func__);
      <span class="keywordflow">else</span>
        <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: not associated with LSDB!&quot;</span>,
                   lsa-&gt;data-&gt;type, inet_ntoa (lsa-&gt;data-&gt;id));
      <span class="keywordflow">return</span>;
    }
  
  old = <a class="code" href="ospf__lsdb_8c.html#aaa05b45206ad37981306f38e098eae7d">ospf_lsdb_lookup</a> (<a class="code" href="structospf__lsa.html#acba2998d58a36757e13007afd1e6a224">lsdb</a>, lsa);

  <span class="keywordflow">if</span> (!old)
    <span class="keywordflow">return</span>;

  <span class="keywordflow">if</span> (old-&gt;<a class="code" href="structospf__lsa.html#a91e4ad20d925dcea4ad488137cce0e40">refresh_list</a> &gt;= 0)
    <a class="code" href="ospf__lsa_8c.html#a97aa8b72a68e3a1c96ce73a46d2c6c6c">ospf_refresher_unregister_lsa</a> (<a class="code" href="structospf.html">ospf</a>, old);

  <span class="keywordflow">switch</span> (old-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a>)
    {
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#ae1f343a4ebcfe793c20519a447f7b851">OSPF_AS_EXTERNAL_LSA</a>:
      <a class="code" href="ospf__ase_8c.html#a163acf395d21ed38123a06213d1050eb">ospf_ase_unregister_external_lsa</a> (old, <a class="code" href="structospf.html">ospf</a>);
      <a class="code" href="ospf__flood_8c.html#add1aa73829326bf3733d0d442002cb95">ospf_ls_retransmit_delete_nbr_as</a> (<a class="code" href="structospf.html">ospf</a>, old);
      <span class="keywordflow">break</span>;
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a4ec63a35fbaffb7350ff4d69002af21e">OSPF_OPAQUE_AS_LSA</a>:
      <a class="code" href="ospf__flood_8c.html#add1aa73829326bf3733d0d442002cb95">ospf_ls_retransmit_delete_nbr_as</a> (<a class="code" href="structospf.html">ospf</a>, old);
      <span class="keywordflow">break</span>;
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#adc97c8397af1195230a4a98bf67e5a9d">OSPF_AS_NSSA_LSA</a>:
      <a class="code" href="ospf__flood_8c.html#a8f46211a0fe7065405e8bdda81963204">ospf_ls_retransmit_delete_nbr_area</a> (old-&gt;<a class="code" href="structospf__lsa.html#aba0c88ecf7facd990c4d29466b823402">area</a>, old);
      <a class="code" href="ospf__ase_8c.html#a163acf395d21ed38123a06213d1050eb">ospf_ase_unregister_external_lsa</a> (old, <a class="code" href="structospf.html">ospf</a>);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
      <a class="code" href="ospf__flood_8c.html#a8f46211a0fe7065405e8bdda81963204">ospf_ls_retransmit_delete_nbr_area</a> (old-&gt;<a class="code" href="structospf__lsa.html#aba0c88ecf7facd990c4d29466b823402">area</a>, old);
      <span class="keywordflow">break</span>;
    }

  <a class="code" href="ospf__lsa_8c.html#a08116d262e54a43525af086f2bafe87c">ospf_lsa_maxage_delete</a> (<a class="code" href="structospf.html">ospf</a>, old);
  <a class="code" href="ospf__lsa_8c.html#a85a6af80b4a93ce1a4e9ebb397920de4">ospf_lsa_discard</a> (old);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a888f81f438a9a131fd95013d2ad54bfd"></a><!-- doxytag: member="ospf_lsa.h::ospf_external_lsa_flush" ref="a888f81f438a9a131fd95013d2ad54bfd" args="(struct ospf *, u_char, struct prefix_ipv4 *, unsigned int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_external_lsa_flush </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_char&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>int</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l02219">2219</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_FLOODING))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA: Flushing AS-external-LSA %s/%d&quot;</span>,
           inet_ntoa (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefix), <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen);

  <span class="comment">/* First lookup LSA from LSDB. */</span>
  <span class="keywordflow">if</span> (!(lsa = <a class="code" href="ospf__asbr_8c.html#ad45c036a67747a7f65338b7ec6ff748d">ospf_external_info_find_lsa</a> (<a class="code" href="structospf.html">ospf</a>, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>)))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_FLOODING))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA: There is no such AS-external-LSA %s/%d in LSDB&quot;</span>,
           inet_ntoa (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefix), <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen);
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* If LSA is selforiginated, not a translated LSA, and there is </span>
<span class="comment">   * NSSA area, flush Type-7 LSA&#39;s at first. </span>
<span class="comment">   */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8h.html#aba06df657f75f729003128da649322f8">IS_LSA_SELF</a>(lsa) &amp;&amp; (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#ad20715ef15a9c610284474aa9f1df3bc">anyNSSA</a>)
      &amp;&amp; !(<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;<a class="code" href="structospf__lsa.html#aa8c833176affd799afeb8db16cdb2602">flags</a>, <a class="code" href="ospf__lsa_8h.html#a20f98f1fb4931335ddf4dd15d8fe9040">OSPF_LSA_LOCAL_XLT</a>)))
    <a class="code" href="ospf__lsa_8c.html#ad7cf1f402786baeafb4b5c21bd6faf8d">ospf_nssa_lsa_flush</a> (<a class="code" href="structospf.html">ospf</a>, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);

  <span class="comment">/* Sweep LSA from Link State Retransmit List. */</span>
  <a class="code" href="ospf__flood_8c.html#add1aa73829326bf3733d0d442002cb95">ospf_ls_retransmit_delete_nbr_as</a> (<a class="code" href="structospf.html">ospf</a>, lsa);

  <span class="comment">/* There must be no self-originated LSA in rtrs_external. */</span>
<span class="preprocessor">#if 0</span>
<span class="preprocessor"></span>  <span class="comment">/* Remove External route from Zebra. */</span>
  <a class="code" href="ospf__zebra_8c.html#a083ae682548f0d7eb0761a2469c8d3f3">ospf_zebra_delete</a> ((<span class="keyword">struct</span> <a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *) <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, &amp;<a class="code" href="structnexthop.html">nexthop</a>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
  <span class="keywordflow">if</span> (!<a class="code" href="ospf__lsa_8h.html#a29c1c83c9c5e24d75e33d7efd0d12b88">IS_LSA_MAXAGE</a> (lsa))
    {
      <span class="comment">/* Unregister LSA from Refresh queue. */</span>
      <a class="code" href="ospf__lsa_8c.html#a97aa8b72a68e3a1c96ce73a46d2c6c6c">ospf_refresher_unregister_lsa</a> (<a class="code" href="structospf.html">ospf</a>, lsa);

      <span class="comment">/* Flush AS-external-LSA through AS. */</span>
      <a class="code" href="ospf__flood_8c.html#a68d550b90a6cd775d965f6e8f9309863">ospf_lsa_flush_as</a> (<a class="code" href="structospf.html">ospf</a>, lsa);
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_FLOODING))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_external_lsa_flush(): stop&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac60055b9864d5e478770ddfd590bc2b3"></a><!-- doxytag: member="ospf_lsa.h::ospf_external_lsa_originate" ref="ac60055b9864d5e478770ddfd590bc2b3" args="(struct ospf *, struct external_info *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_external_lsa_originate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structexternal__info.html">external_info</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l02030">2030</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *<span class="keyword">new</span>;

  <span class="comment">/* Added for NSSA project....</span>
<span class="comment"></span>
<span class="comment">       External LSAs are originated in ASBRs as usual, but for NSSA systems.</span>
<span class="comment">     there is the global Type-5 LSDB and a Type-7 LSDB installed for</span>
<span class="comment">     every area.  The Type-7&#39;s are flooded to every IR and every ABR; We</span>
<span class="comment">     install the Type-5 LSDB so that the normal &quot;refresh&quot; code operates</span>
<span class="comment">     as usual, and flag them as not used during ASE calculations.  The</span>
<span class="comment">     Type-7 LSDB is used for calculations.  Each Type-7 has a Forwarding</span>
<span class="comment">     Address of non-zero.</span>
<span class="comment"></span>
<span class="comment">     If an ABR is the elected NSSA translator, following SPF and during</span>
<span class="comment">     the ABR task it will translate all the scanned Type-7&#39;s, with P-bit</span>
<span class="comment">     ON and not-self generated, and translate to Type-5&#39;s throughout the</span>
<span class="comment">     non-NSSA/STUB AS.</span>
<span class="comment"></span>
<span class="comment">     A difference in operation depends whether this ASBR is an ABR</span>
<span class="comment">     or not.  If not an ABR, the P-bit is ON, to indicate that any</span>
<span class="comment">     elected NSSA-ABR can perform its translation.</span>
<span class="comment"></span>
<span class="comment">     If an ABR, the P-bit is OFF;  No ABR will perform translation and</span>
<span class="comment">     this ASBR will flood the Type-5 LSA as usual.</span>
<span class="comment"></span>
<span class="comment">     For the case where this ASBR is not an ABR, the ASE calculations</span>
<span class="comment">     are based on the Type-5 LSDB;  The Type-7 LSDB exists just to</span>
<span class="comment">     demonstrate to the user that there are LSA&#39;s that belong to any</span>
<span class="comment">     attached NSSA.</span>
<span class="comment"></span>
<span class="comment">     Finally, it just so happens that when the ABR is translating every</span>
<span class="comment">     Type-7 into Type-5, it installs it into the Type-5 LSDB as an</span>
<span class="comment">     approved Type-5 (translated from Type-7);  at the end of translation</span>
<span class="comment">     if any Translated Type-5&#39;s remain unapproved, then they must be</span>
<span class="comment">     flushed from the AS.</span>
<span class="comment"></span>
<span class="comment">     */</span>
  
  <span class="comment">/* Check the AS-external-LSA should be originated. */</span>
  <span class="keywordflow">if</span> (!<a class="code" href="ospf__zebra_8c.html#a7568b2d6ccc3687ad4a001cd142c4f6d">ospf_redistribute_check</a> (<a class="code" href="structospf.html">ospf</a>, ei, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  
  <span class="comment">/* Create new AS-external-LSA instance. */</span>
  <span class="keywordflow">if</span> ((<span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#a71319911c6d95fe6b798a45c5674732b">ospf_external_lsa_new</a> (<a class="code" href="structospf.html">ospf</a>, ei, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type5:%s]: Could not originate AS-external-LSA&quot;</span>,
           inet_ntoa (ei-&gt;p.prefix));
      <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }

  <span class="comment">/* Install newly created LSA into Type-5 LSDB, lock = 1. */</span>
  <a class="code" href="ospf__lsa_8c.html#a1733ac6eff32161699d5e9d80a893351">ospf_lsa_install</a> (<a class="code" href="structospf.html">ospf</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>);

  <span class="comment">/* Update LSA origination count. */</span>
  <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a4a3d13744fa4c72bfdab00cb7c7a3783">lsa_originate_count</a>++;

  <span class="comment">/* Flooding new LSA. only to AS (non-NSSA/STUB) */</span>
  <a class="code" href="ospf__flood_8c.html#a2169b7a36db2e596585f2d3242ac94b6">ospf_flood_through_as</a> (<a class="code" href="structospf.html">ospf</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>);

  <span class="comment">/* If there is any attached NSSA, do special handling */</span>
  <span class="keywordflow">if</span> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#ad20715ef15a9c610284474aa9f1df3bc">anyNSSA</a> &amp;&amp;
      <span class="comment">/* stay away from translated LSAs! */</span>
      !(<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (new-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a20f98f1fb4931335ddf4dd15d8fe9040">OSPF_LSA_LOCAL_XLT</a>)))
    <a class="code" href="ospf__lsa_8c.html#ac5aab1f054bdc79afeae5f25714ef277">ospf_install_flood_nssa</a> (<a class="code" href="structospf.html">ospf</a>, <span class="keyword">new</span>, ei); <span class="comment">/* Install/Flood Type-7 to all NSSAs */</span>

  <span class="comment">/* Debug logging. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
    {
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: Originate AS-external-LSA %p&quot;</span>,
         new-&gt;data-&gt;type, inet_ntoa (new-&gt;data-&gt;id), <span class="keyword">new</span>);
      <a class="code" href="ospf__dump_8c.html#a9f6f89130826976cb32a15187c88a397">ospf_lsa_header_dump</a> (new-&gt;data);
    }

  <span class="keywordflow">return</span> <span class="keyword">new</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a046268e0875d667c0d1aacd0e7d6a992"></a><!-- doxytag: member="ospf_lsa.h::ospf_external_lsa_originate_timer" ref="a046268e0875d667c0d1aacd0e7d6a992" args="(struct thread *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_external_lsa_originate_timer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l02110">2110</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf.html">ospf</a> *<a class="code" href="structospf.html">ospf</a> = <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (<a class="code" href="structthread.html">thread</a>);
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structexternal__info.html">external_info</a> *ei;
  <span class="keyword">struct </span><a class="code" href="structroute__table.html">route_table</a> *rt;
  <span class="keywordtype">int</span> <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a> = <a class="code" href="thread_8h.html#a88d7c483cad15baac709fac747480a11">THREAD_VAL</a> (<a class="code" href="structthread.html">thread</a>);

  ospf-&gt;<a class="code" href="structospf.html#ad5e7d717716a67c3b2198f40c2bf2598">t_external_lsa</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="comment">/* Originate As-external-LSA from all type of distribute source. */</span>
  <span class="keywordflow">if</span> ((rt = <a class="code" href="ospfd_8h.html#a9fa5e60f9244cb3ea41a0a96d3c9b85c">EXTERNAL_INFO</a> (type)))
    <span class="keywordflow">for</span> (rn = <a class="code" href="table_8c.html#aee1d06c531794df326d946bdac647fb2">route_top</a> (rt); rn; rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn))
      <span class="keywordflow">if</span> ((ei = rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">if</span> (!<a class="code" href="ospf__lsa_8c.html#ab361b6fb4bed2a417afb49ae46bae391">is_prefix_default</a> ((<span class="keyword">struct</span> <a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *)&amp;ei-&gt;<a class="code" href="structexternal__info.html#a15eb7ea975a1090a107d7d54b798822c">p</a>))
      <span class="keywordflow">if</span> (!<a class="code" href="ospf__lsa_8c.html#a96d24d54ba0ac3adc1ff557621ff2911">ospf_external_lsa_originate</a> (ospf, ei))
        <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;LSA: AS-external-LSA was not originated.&quot;</span>);
  
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5aa647e4f76cf142799feb6be21149e9"></a><!-- doxytag: member="ospf_lsa.h::ospf_external_lsa_refresh" ref="a5aa647e4f76cf142799feb6be21149e9" args="(struct ospf *, struct ospf_lsa *, struct external_info *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_external_lsa_refresh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structexternal__info.html">external_info</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l02331">2331</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *<span class="keyword">new</span>;
  <span class="keywordtype">int</span> changed;
  
  <span class="comment">/* Check the AS-external-LSA should be originated. */</span>
  <span class="keywordflow">if</span> (!<a class="code" href="ospf__zebra_8c.html#a7568b2d6ccc3687ad4a001cd142c4f6d">ospf_redistribute_check</a> (<a class="code" href="structospf.html">ospf</a>, ei, &amp;changed))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: Could not be refreshed, &quot;</span>
                   <span class="stringliteral">&quot;redist check fail&quot;</span>, 
                   lsa-&gt;data-&gt;type, inet_ntoa (lsa-&gt;data-&gt;id));
      <a class="code" href="ospf__lsa_8c.html#ae6fd27bc0a44fb71638c23c3ea829905">ospf_external_lsa_flush</a> (<a class="code" href="structospf.html">ospf</a>, ei-&gt;<a class="code" href="structospf.html#adcc2e8439120b1f4144a6be8d702f638">type</a>, &amp;ei-&gt;p,
                   ei-&gt;ifindex <span class="comment">/*, ei-&gt;nexthop */</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="keywordflow">if</span> (!changed &amp;&amp; !force)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: Not refreshed, not changed/forced&quot;</span>,
                   lsa-&gt;data-&gt;type, inet_ntoa (lsa-&gt;data-&gt;id));
      <span class="keywordflow">return</span>;
    }

  <span class="comment">/* Delete LSA from neighbor retransmit-list. */</span>
  <a class="code" href="ospf__flood_8c.html#add1aa73829326bf3733d0d442002cb95">ospf_ls_retransmit_delete_nbr_as</a> (<a class="code" href="structospf.html">ospf</a>, lsa);

  <span class="comment">/* Unregister AS-external-LSA from refresh-list. */</span>
  <a class="code" href="ospf__lsa_8c.html#a97aa8b72a68e3a1c96ce73a46d2c6c6c">ospf_refresher_unregister_lsa</a> (<a class="code" href="structospf.html">ospf</a>, lsa);

  <span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#a71319911c6d95fe6b798a45c5674732b">ospf_external_lsa_new</a> (<a class="code" href="structospf.html">ospf</a>, ei, &amp;lsa-&gt;data-&gt;id);
  
  <span class="keywordflow">if</span> (<span class="keyword">new</span> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: Could not be refreshed&quot;</span>, lsa-&gt;data-&gt;type,
           inet_ntoa (lsa-&gt;data-&gt;id));
      <span class="keywordflow">return</span>;
    }
  
  <span class="keyword">new</span>-&gt;data-&gt;ls_seqnum = <a class="code" href="ospf__lsa_8c.html#a0951db1fe1ad120fc1831443a9c834ca">lsa_seqnum_increment</a> (lsa);

  <a class="code" href="ospf__lsa_8c.html#a1733ac6eff32161699d5e9d80a893351">ospf_lsa_install</a> (<a class="code" href="structospf.html">ospf</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>);   <span class="comment">/* As type-5. */</span>

  <span class="comment">/* Flood LSA through AS. */</span>
  <a class="code" href="ospf__flood_8c.html#a2169b7a36db2e596585f2d3242ac94b6">ospf_flood_through_as</a> (<a class="code" href="structospf.html">ospf</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>);

  <span class="comment">/* If any attached NSSA, install as Type-7, flood to all NSSA Areas */</span>
  <span class="keywordflow">if</span> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#ad20715ef15a9c610284474aa9f1df3bc">anyNSSA</a> &amp;&amp; !(<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (new-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a20f98f1fb4931335ddf4dd15d8fe9040">OSPF_LSA_LOCAL_XLT</a>)))
    <a class="code" href="ospf__lsa_8c.html#ac5aab1f054bdc79afeae5f25714ef277">ospf_install_flood_nssa</a> (<a class="code" href="structospf.html">ospf</a>, <span class="keyword">new</span>, ei); <span class="comment">/* Install/Flood per new rules */</span>

  <span class="comment">/* Register self-originated LSA to refresh queue. </span>
<span class="comment">   * Translated LSAs should not be registered, but refreshed upon </span>
<span class="comment">   * refresh of the Type-7</span>
<span class="comment">   */</span>
  <span class="keywordflow">if</span> ( !<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (new-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a20f98f1fb4931335ddf4dd15d8fe9040">OSPF_LSA_LOCAL_XLT</a>) )
    <a class="code" href="ospf__lsa_8c.html#aac345ad0177ef3e0a5236ef623ffb176">ospf_refresher_register_lsa</a> (<a class="code" href="structospf.html">ospf</a>, <span class="keyword">new</span>);

  <span class="comment">/* Debug logging. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
    {
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: AS-external-LSA refresh&quot;</span>,
                 new-&gt;data-&gt;type, inet_ntoa (new-&gt;data-&gt;id));
      <a class="code" href="ospf__dump_8c.html#a9f6f89130826976cb32a15187c88a397">ospf_lsa_header_dump</a> (new-&gt;data);
    }

  <span class="keywordflow">return</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a97413521b9c6e9adce8c88b876a6180a"></a><!-- doxytag: member="ospf_lsa.h::ospf_external_lsa_refresh_default" ref="a97413521b9c6e9adce8c88b876a6180a" args="(struct ospf *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_external_lsa_refresh_default </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l02268">2268</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keyword">struct </span><a class="code" href="structexternal__info.html">external_info</a> *ei;
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;

  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.family = AF_INET;
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen = 0;
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefix.s_addr = 0;

  ei = <a class="code" href="ospf__lsa_8c.html#ad154699860ca80552cac4350e14a8023">ospf_default_external_info</a> (<a class="code" href="structospf.html">ospf</a>);
  lsa = <a class="code" href="ospf__asbr_8c.html#ad45c036a67747a7f65338b7ec6ff748d">ospf_external_info_find_lsa</a> (<a class="code" href="structospf.html">ospf</a>, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);

  <span class="keywordflow">if</span> (ei)
    {
      <span class="keywordflow">if</span> (lsa)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type5:0.0.0.0]: Refresh AS-external-LSA %p&quot;</span>, lsa);
      <a class="code" href="ospf__lsa_8c.html#a12f57ed226cea2cfd9499069dbde2f3c">ospf_external_lsa_refresh</a> (<a class="code" href="structospf.html">ospf</a>, lsa, ei, <a class="code" href="ospf__lsa_8h.html#a389234e05af4a29be76c63dc46576791">LSA_REFRESH_FORCE</a>);
    }
      <span class="keywordflow">else</span>
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type5:0.0.0.0]: Originate AS-external-LSA&quot;</span>);
      <a class="code" href="ospf__lsa_8c.html#a96d24d54ba0ac3adc1ff557621ff2911">ospf_external_lsa_originate</a> (<a class="code" href="structospf.html">ospf</a>, ei);
    }
    }
  <span class="keywordflow">else</span>
    {
      <span class="keywordflow">if</span> (lsa)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type5:0.0.0.0]: Flush AS-external-LSA&quot;</span>);
      <a class="code" href="ospf__flood_8c.html#a68d550b90a6cd775d965f6e8f9309863">ospf_lsa_flush_as</a> (<a class="code" href="structospf.html">ospf</a>, lsa);
    }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="acbb96d7f73022f78e79cfb7105dc58ea"></a><!-- doxytag: member="ospf_lsa.h::ospf_external_lsa_refresh_type" ref="acbb96d7f73022f78e79cfb7105dc58ea" args="(struct ospf *, u_char, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_external_lsa_refresh_type </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_char&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l02308">2308</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structexternal__info.html">external_info</a> *ei;

  <span class="keywordflow">if</span> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a> != <a class="code" href="ospf__zebra_8h.html#a353195a6a59d18a6807885cbefaf0d24">DEFAULT_ROUTE</a>)
    <span class="keywordflow">if</span> (<a class="code" href="ospfd_8h.html#a9fa5e60f9244cb3ea41a0a96d3c9b85c">EXTERNAL_INFO</a>(<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>))
      <span class="comment">/* Refresh each redistributed AS-external-LSAs. */</span>
      <span class="keywordflow">for</span> (rn = <a class="code" href="table_8c.html#aee1d06c531794df326d946bdac647fb2">route_top</a> (<a class="code" href="ospfd_8h.html#a9fa5e60f9244cb3ea41a0a96d3c9b85c">EXTERNAL_INFO</a> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>)); rn; rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn))
    <span class="keywordflow">if</span> ((ei = rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>))
      <span class="keywordflow">if</span> (!<a class="code" href="ospf__lsa_8c.html#ab361b6fb4bed2a417afb49ae46bae391">is_prefix_default</a> (&amp;ei-&gt;<a class="code" href="structexternal__info.html#a15eb7ea975a1090a107d7d54b798822c">p</a>))
        {
          <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;

          <span class="keywordflow">if</span> ((lsa = <a class="code" href="ospf__asbr_8c.html#ad45c036a67747a7f65338b7ec6ff748d">ospf_external_info_find_lsa</a> (<a class="code" href="structospf.html">ospf</a>, &amp;ei-&gt;<a class="code" href="structexternal__info.html#a15eb7ea975a1090a107d7d54b798822c">p</a>)))
        <a class="code" href="ospf__lsa_8c.html#a12f57ed226cea2cfd9499069dbde2f3c">ospf_external_lsa_refresh</a> (<a class="code" href="structospf.html">ospf</a>, lsa, ei, force);
          <span class="keywordflow">else</span>
        <a class="code" href="ospf__lsa_8c.html#a96d24d54ba0ac3adc1ff557621ff2911">ospf_external_lsa_originate</a> (<a class="code" href="structospf.html">ospf</a>, ei);
        }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a270f1bb6680ffc69986e5d684758597f"></a><!-- doxytag: member="ospf_lsa.h::ospf_flush_self_originated_lsas_now" ref="a270f1bb6680ffc69986e5d684758597f" args="(struct ospf *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_flush_self_originated_lsas_now </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l03371">3371</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node2, *nnode2;
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structospf__interface.html">ospf_interface</a> *oi;
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keywordtype">int</span> need_to_flush_ase = 0;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, nnode, area))
    {
      <span class="keywordflow">if</span> ((lsa = area-&gt;<a class="code" href="structospf__area.html#a53c30c4d48396f97336cf4e1ae4545e2">router_lsa_self</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: Schedule self-originated LSA to FLUSH&quot;</span>, lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a>, inet_ntoa (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>));

          <a class="code" href="ospf__flood_8c.html#ad3049ba87364a6fbed7d352023e33a4a">ospf_lsa_flush_area</a> (lsa, area);
          <a class="code" href="ospf__lsa_8c.html#a268fc5c6673caf7ee94c0eaaa88455b8">ospf_lsa_unlock</a> (&amp;area-&gt;<a class="code" href="structospf__area.html#a53c30c4d48396f97336cf4e1ae4545e2">router_lsa_self</a>);
          area-&gt;<a class="code" href="structospf__area.html#a53c30c4d48396f97336cf4e1ae4545e2">router_lsa_self</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
          <a class="code" href="ospfd_8h.html#aad5b9afadb0a72aae30f4a7e750cc66a">OSPF_TIMER_OFF</a> (area-&gt;<a class="code" href="structospf__area.html#a7101904a0d8d145b671919e47eb7c107">t_router_lsa_self</a>);
        }

      <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (area-&gt;<a class="code" href="structospf__area.html#aec49fceeb655dde5648208d29dfc66a4">oiflist</a>, node2, nnode2, oi))
        {
          <span class="keywordflow">if</span> ((lsa = oi-&gt;<a class="code" href="structospf__interface.html#a175c090a388cfc7d255012d0d569df6d">network_lsa_self</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>
               &amp;&amp;   oi-&gt;<a class="code" href="structospf__interface.html#a26605b9cc792cdd3e26c0481d24f0f63">state</a> == <a class="code" href="ospf__ism_8h.html#a7f179a571f4f8e112c0b887f39c87f23">ISM_DR</a>
               &amp;&amp;   oi-&gt;<a class="code" href="structospf__interface.html#a6030ef4a9cb03295e6ab3481df3e6147">full_nbrs</a> &gt; 0)
            {
              <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
                <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: Schedule self-originated LSA to FLUSH&quot;</span>, lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a>, inet_ntoa (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>));

              <a class="code" href="ospf__flood_8c.html#ad3049ba87364a6fbed7d352023e33a4a">ospf_lsa_flush_area</a> (oi-&gt;<a class="code" href="structospf__interface.html#a175c090a388cfc7d255012d0d569df6d">network_lsa_self</a>, area);
              <a class="code" href="ospf__lsa_8c.html#a268fc5c6673caf7ee94c0eaaa88455b8">ospf_lsa_unlock</a> (&amp;oi-&gt;<a class="code" href="structospf__interface.html#a175c090a388cfc7d255012d0d569df6d">network_lsa_self</a>);
              oi-&gt;<a class="code" href="structospf__interface.html#a175c090a388cfc7d255012d0d569df6d">network_lsa_self</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
              <a class="code" href="ospfd_8h.html#aad5b9afadb0a72aae30f4a7e750cc66a">OSPF_TIMER_OFF</a> (oi-&gt;<a class="code" href="structospf__interface.html#a278866980d98aa3ae2c393acb08c0337">t_network_lsa_self</a>);
            }

          <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf__interface.html#adb923b0bfebf30738af57dafcf0d0d57">type</a> != <a class="code" href="ospf__interface_8h.html#a45798a2a8b566abd1907f7ae8bc0a2be">OSPF_IFTYPE_VIRTUALLINK</a>
          &amp;&amp;  area-&gt;<a class="code" href="structospf__area.html#ac7c3a32e77b40506f5bc26209f41ab89">external_routing</a> == <a class="code" href="ospfd_8h.html#a43f84c8e8584ccc8b82990d251abec4d">OSPF_AREA_DEFAULT</a>)
            need_to_flush_ase = 1;
        }

      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#a58ae6df59f7476d7784e19f7ca19db1f">SUMMARY_LSDB</a> (area), rn, lsa)
    <a class="code" href="ospf__lsa_8c.html#ae95776abdf9ff1a75f16cae6680e1a08">ospf_lsa_flush_schedule</a> (<a class="code" href="structospf.html">ospf</a>, lsa);
      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#a145a10afd0c8a801d2e84b26c0becbfd">ASBR_SUMMARY_LSDB</a> (area), rn, lsa)
    <a class="code" href="ospf__lsa_8c.html#ae95776abdf9ff1a75f16cae6680e1a08">ospf_lsa_flush_schedule</a> (ospf, lsa);
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#a7b6d75a56662bb4e124777b376bb84da">OPAQUE_LINK_LSDB</a> (area), rn, lsa)
    <a class="code" href="ospf__lsa_8c.html#ae95776abdf9ff1a75f16cae6680e1a08">ospf_lsa_flush_schedule</a> (ospf, lsa);
      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#aec3918874489142043aedd1ac5855f57">OPAQUE_AREA_LSDB</a> (area), rn, lsa)
    <a class="code" href="ospf__lsa_8c.html#ae95776abdf9ff1a75f16cae6680e1a08">ospf_lsa_flush_schedule</a> (ospf, lsa);
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
    }

  <span class="keywordflow">if</span> (need_to_flush_ase)
    {
      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#ae56a8a7b638bd22caf86ea3d810fdbd9">EXTERNAL_LSDB</a> (ospf), rn, lsa)
    <a class="code" href="ospf__lsa_8c.html#ae95776abdf9ff1a75f16cae6680e1a08">ospf_lsa_flush_schedule</a> (ospf, lsa);
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#ac7a1aa21490d2bd86999d2e494cde6d0">OPAQUE_AS_LSDB</a> (ospf), rn, lsa)
    <a class="code" href="ospf__lsa_8c.html#ae95776abdf9ff1a75f16cae6680e1a08">ospf_lsa_flush_schedule</a> (ospf, lsa);
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
    }

  <span class="comment">/*</span>
<span class="comment">   * Make sure that the MaxAge LSA remover is executed immediately,</span>
<span class="comment">   * without conflicting to other threads.</span>
<span class="comment">   */</span>
  <span class="keywordflow">if</span> (ospf-&gt;t_maxage != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <a class="code" href="ospfd_8h.html#aad5b9afadb0a72aae30f4a7e750cc66a">OSPF_TIMER_OFF</a> (ospf-&gt;t_maxage);
      <a class="code" href="thread_8h.html#adfc9185c89375a240b90ab50241c497d">thread_execute</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf__lsa_8c.html#a45711592b5267b56be96e4504967ea69">ospf_maxage_lsa_remover</a>, ospf, 0);
    }

  <span class="keywordflow">return</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a658b13f336d173659b05e30dc047200f"></a><!-- doxytag: member="ospf_lsa.h::ospf_get_ip_from_ifp" ref="a658b13f336d173659b05e30dc047200f" args="(struct ospf_interface *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct in_addr ospf_get_ip_from_ifp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__interface.html">ospf_interface</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l01549">1549</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span>in_addr fwd;

  fwd.s_addr = 0;

  <span class="keywordflow">if</span> (<a class="code" href="if_8c.html#a96741fba2059f7591f57d18325664b7b">if_is_operative</a> (oi-&gt;ifp))
    <span class="keywordflow">return</span> oi-&gt;address-&gt;u.prefix4;
  
  <span class="keywordflow">return</span> fwd;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2cd41a57761c209589dced9ce607c678"></a><!-- doxytag: member="ospf_lsa.h::ospf_get_nssa_ip" ref="a2cd41a57761c209589dced9ce607c678" args="(struct ospf_area *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct in_addr ospf_get_nssa_ip </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l01563">1563</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span>in_addr fwd;
  <span class="keyword">struct </span>in_addr best_default;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;
  <span class="keyword">struct </span><a class="code" href="structospf__interface.html">ospf_interface</a> *oi;

  fwd.s_addr = 0;
  best_default.s_addr = 0;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;ospf-&gt;oiflist, node, oi))
    {
      <span class="keywordflow">if</span> (<a class="code" href="if_8c.html#a96741fba2059f7591f57d18325664b7b">if_is_operative</a> (oi-&gt;<a class="code" href="structospf__interface.html#a42f951186ccd68e63207f943cb894228">ifp</a>))
    <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf__interface.html#a7a0df59739f1ffa31ab75ff4b9bbcd95">area</a>-&gt;<a class="code" href="structospf__area.html#ac7c3a32e77b40506f5bc26209f41ab89">external_routing</a> == <a class="code" href="ospfd_8h.html#a871478d6ecced0907ee1f67c5dbacf99">OSPF_AREA_NSSA</a>)
      <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf__interface.html#a43493bc2b5d951e3e38ace850332eca1">address</a> &amp;&amp; oi-&gt;<a class="code" href="structospf__interface.html#a43493bc2b5d951e3e38ace850332eca1">address</a>-&gt;<a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a> == AF_INET)
        {
          <span class="keywordflow">if</span> (best_default.s_addr == 0)
        best_default = oi-&gt;<a class="code" href="structospf__interface.html#a43493bc2b5d951e3e38ace850332eca1">address</a>-&gt;u.<a class="code" href="structprefix.html#ab37b8922554b41b7dc2417d8f37e7829">prefix4</a>;
          <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf__interface.html#a7a0df59739f1ffa31ab75ff4b9bbcd95">area</a> == <a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>)
        <span class="keywordflow">return</span> oi-&gt;<a class="code" href="structospf__interface.html#a43493bc2b5d951e3e38ace850332eca1">address</a>-&gt;u.<a class="code" href="structprefix.html#ab37b8922554b41b7dc2417d8f37e7829">prefix4</a>;
        }
    }
  <span class="keywordflow">if</span> (best_default.s_addr != 0)
    <span class="keywordflow">return</span> best_default;

  <span class="keywordflow">if</span> (best_default.s_addr != 0)
    <span class="keywordflow">return</span> best_default;

  <span class="keywordflow">return</span> fwd;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2efc94716b4e8cb91f93d009d1c2dc4d"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_checksum" ref="a2efc94716b4e8cb91f93d009d1c2dc4d" args="(struct lsa_header *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u_int16_t ospf_lsa_checksum </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlsa__header.html">lsa_header</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00180">180</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  u_char *<a class="code" href="structbuffer.html">buffer</a> = (u_char *) &amp;lsa-&gt;options;
  <span class="keywordtype">int</span> options_offset = buffer - (u_char *) &amp;lsa-&gt;ls_age; <span class="comment">/* should be 2 */</span>

  <span class="comment">/* Skip the AGE field */</span>
  u_int16_t len = ntohs(lsa-&gt;length) - options_offset; 

  <span class="comment">/* Checksum offset starts from &quot;options&quot; field, not the beginning of the</span>
<span class="comment">     lsa_header struct. The offset is 14, rather than 16. */</span>
  <span class="keywordtype">int</span> checksum_offset = (u_char *) &amp;lsa-&gt;checksum - buffer;

  <span class="keywordflow">return</span> <a class="code" href="checksum_8c.html#a097fa5404eb654e8e112bb954bf4ef15">fletcher_checksum</a>(buffer, len, checksum_offset);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8fd4063729934fd81888c49d6d36ca1d"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_data_dup" ref="a8fd4063729934fd81888c49d6d36ca1d" args="(struct lsa_header *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlsa__header.html">lsa_header</a>* ospf_lsa_data_dup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlsa__header.html">lsa_header</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00311">311</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlsa__header.html">lsa_header</a> *<span class="keyword">new</span>;

  <span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#a6ac1c58b3b248e433f625521b186f923">ospf_lsa_data_new</a> (ntohs (lsah-&gt;length));
  <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (<span class="keyword">new</span>, lsah, ntohs (lsah-&gt;length));

  <span class="keywordflow">return</span> <span class="keyword">new</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1825eaac7b68fa1f4d85ffb64e16abb8"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_data_free" ref="a1825eaac7b68fa1f4d85ffb64e16abb8" args="(struct lsa_header *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_lsa_data_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlsa__header.html">lsa_header</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00323">323</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: data freed %p&quot;</span>,
           lsah-&gt;type, inet_ntoa (lsah-&gt;id), lsah);

  <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba69acc604a5c50231d2ce7a109094885e">MTYPE_OSPF_LSA_DATA</a>, lsah);
}
</pre></div>
</div>
</div>
<a class="anchor" id="afb2fd3fca6a5ed7335910d3dfd5b1a44"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_data_new" ref="afb2fd3fca6a5ed7335910d3dfd5b1a44" args="(size_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlsa__header.html">lsa_header</a>* ospf_lsa_data_new </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00304">304</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="memory_8h.html#a7826e4ed1d152cad0666dcf43f11f663">XCALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba69acc604a5c50231d2ce7a109094885e">MTYPE_OSPF_LSA_DATA</a>, size);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a07a157daaaf0ebb453170186353038c4"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_different" ref="a07a157daaaf0ebb453170186353038c4" args="(struct ospf_lsa *, struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_lsa_different </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l03263">3263</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span> *p1, *p2;
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (l1);
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (l2);
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (l1-&gt;data);
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (l2-&gt;data);

  <span class="keywordflow">if</span> (l1-&gt;data-&gt;options != l2-&gt;data-&gt;options)
    <span class="keywordflow">return</span> 1;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8h.html#a29c1c83c9c5e24d75e33d7efd0d12b88">IS_LSA_MAXAGE</a> (l1) &amp;&amp; !<a class="code" href="ospf__lsa_8h.html#a29c1c83c9c5e24d75e33d7efd0d12b88">IS_LSA_MAXAGE</a> (l2))
    <span class="keywordflow">return</span> 1;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8h.html#a29c1c83c9c5e24d75e33d7efd0d12b88">IS_LSA_MAXAGE</a> (l2) &amp;&amp; !<a class="code" href="ospf__lsa_8h.html#a29c1c83c9c5e24d75e33d7efd0d12b88">IS_LSA_MAXAGE</a> (l1))
    <span class="keywordflow">return</span> 1;

  <span class="keywordflow">if</span> (l1-&gt;data-&gt;length != l2-&gt;data-&gt;length)
    <span class="keywordflow">return</span> 1;

  <span class="keywordflow">if</span> (l1-&gt;data-&gt;length ==  0)
    <span class="keywordflow">return</span> 1;

  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> ((l1-&gt;flags ^ l2-&gt;flags), <a class="code" href="ospf__lsa_8h.html#a780906236e4b5ef16a4a720a57e3f617">OSPF_LSA_RECEIVED</a>))
    <span class="keywordflow">return</span> 1; <span class="comment">/* May be a stale LSA in the LSBD */</span>

  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> ( ntohs(l1-&gt;data-&gt;length) &gt; <a class="code" href="ospf__lsa_8h.html#a7cf423b6ef1c2152b96c88e36593bec4">OSPF_LSA_HEADER_SIZE</a>);

  p1 = (<span class="keywordtype">char</span> *) l1-&gt;data;
  p2 = (<span class="keywordtype">char</span> *) l2-&gt;data;

  <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a98d0dff0c7366f08562d8e8583df9bb9">memcmp</a> (p1 + <a class="code" href="ospf__lsa_8h.html#a7cf423b6ef1c2152b96c88e36593bec4">OSPF_LSA_HEADER_SIZE</a>, p2 + <a class="code" href="ospf__lsa_8h.html#a7cf423b6ef1c2152b96c88e36593bec4">OSPF_LSA_HEADER_SIZE</a>,
              ntohs( l1-&gt;data-&gt;length ) - <a class="code" href="ospf__lsa_8h.html#a7cf423b6ef1c2152b96c88e36593bec4">OSPF_LSA_HEADER_SIZE</a>) != 0)
    <span class="keywordflow">return</span> 1;

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8921b085ab4ed737f5d0e0ff644f0204"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_discard" ref="a8921b085ab4ed737f5d0e0ff644f0204" args="(struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_lsa_discard </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00293">293</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (!<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a7c24685e365aa6c180d976e7ccfeb302">OSPF_LSA_DISCARD</a>))
    {
      <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a7c24685e365aa6c180d976e7ccfeb302">OSPF_LSA_DISCARD</a>);
      <a class="code" href="ospf__lsa_8c.html#a268fc5c6673caf7ee94c0eaaa88455b8">ospf_lsa_unlock</a> (&amp;lsa);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac1224b0b246a54b4867426f227a30e03"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_dup" ref="ac1224b0b246a54b4867426f227a30e03" args="(struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_lsa_dup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00217">217</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *<span class="keyword">new</span>;

  <span class="keywordflow">if</span> (lsa == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keyword">new</span> = <a class="code" href="memory_8h.html#a7826e4ed1d152cad0666dcf43f11f663">XCALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba5bccaee3075ceeb63ae53e83a6ec262b">MTYPE_OSPF_LSA</a>, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf__lsa.html">ospf_lsa</a>));

  <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (<span class="keyword">new</span>, lsa, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf__lsa.html">ospf_lsa</a>));
  <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (new-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a7c24685e365aa6c180d976e7ccfeb302">OSPF_LSA_DISCARD</a>);
  <span class="keyword">new</span>-&gt;lock = 1;
  <span class="keyword">new</span>-&gt;retransmit_counter = 0;
  <span class="keyword">new</span>-&gt;data = <a class="code" href="ospf__lsa_8c.html#a8eac97d7859911bf5671284e8d03d1a9">ospf_lsa_data_dup</a> (lsa-&gt;data);

  <span class="comment">/* kevinm: Clear the refresh_list, otherwise there are going</span>
<span class="comment">     to be problems when we try to remove the LSA from the</span>
<span class="comment">     queue (which it&#39;s not a member of.)</span>
<span class="comment">     XXX: Should we add the LSA to the refresh_list queue? */</span>
  <span class="keyword">new</span>-&gt;refresh_list = -1;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA: duplicated %p (new: %p)&quot;</span>, lsa, <span class="keyword">new</span>);

  <span class="keywordflow">return</span> <span class="keyword">new</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4b5ec84656d6c21105adef0bfdc6ab73"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_free" ref="a4b5ec84656d6c21105adef0bfdc6ab73" args="(struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_lsa_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00246">246</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (lsa-&gt;lock == 0);
  
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA: freed %p&quot;</span>, lsa);

  <span class="comment">/* Delete LSA data. */</span>
  <span class="keywordflow">if</span> (lsa-&gt;data != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <a class="code" href="ospf__lsa_8c.html#af4bb20de4747d6f5a373b26584e0d4ce">ospf_lsa_data_free</a> (lsa-&gt;data);

  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (lsa-&gt;refresh_list &lt; 0);

  memset (lsa, 0, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf__lsa.html">ospf_lsa</a>)); 
  <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba5bccaee3075ceeb63ae53e83a6ec262b">MTYPE_OSPF_LSA</a>, lsa);
}
</pre></div>
</div>
</div>
<a class="anchor" id="afa0154b439d0131a45078ac83284c219"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_install" ref="afa0154b439d0131a45078ac83284c219" args="(struct ospf *, struct ospf_interface *, struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_lsa_install </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__interface.html">ospf_interface</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l02639">2639</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *<span class="keyword">new</span> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *old = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keyword">struct </span><a class="code" href="structospf__lsdb.html">ospf_lsdb</a> *lsdb = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordtype">int</span> rt_recalc;

  <span class="comment">/* Set LSDB. */</span>
  <span class="keywordflow">switch</span> (lsa-&gt;data-&gt;type)
    {
      <span class="comment">/* kevinm */</span>
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#adc97c8397af1195230a4a98bf67e5a9d">OSPF_AS_NSSA_LSA</a>:
      <span class="keywordflow">if</span> (lsa-&gt;area)
    lsdb = lsa-&gt;area-&gt;lsdb;
      <span class="keywordflow">else</span>
    lsdb = <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a2840075b79d0a04d991596028f6c2660">lsdb</a>;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#ae1f343a4ebcfe793c20519a447f7b851">OSPF_AS_EXTERNAL_LSA</a>:
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a4ec63a35fbaffb7350ff4d69002af21e">OSPF_OPAQUE_AS_LSA</a>:
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
      lsdb = <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a2840075b79d0a04d991596028f6c2660">lsdb</a>;
      <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
      lsdb = lsa-&gt;area-&gt;lsdb;
      <span class="keywordflow">break</span>;
    }

  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (lsdb);

  <span class="comment">/*  RFC 2328 13.2.  Installing LSAs in the database</span>
<span class="comment"></span>
<span class="comment">        Installing a new LSA in the database, either as the result of</span>
<span class="comment">        flooding or a newly self-originated LSA, may cause the OSPF</span>
<span class="comment">        routing table structure to be recalculated.  The contents of the</span>
<span class="comment">        new LSA should be compared to the old instance, if present.  If</span>
<span class="comment">        there is no difference, there is no need to recalculate the</span>
<span class="comment">        routing table. When comparing an LSA to its previous instance,</span>
<span class="comment">        the following are all considered to be differences in contents:</span>
<span class="comment"></span>
<span class="comment">            o   The LSA&#39;s Options field has changed.</span>
<span class="comment"></span>
<span class="comment">            o   One of the LSA instances has LS age set to MaxAge, and</span>
<span class="comment">                the other does not.</span>
<span class="comment"></span>
<span class="comment">            o   The length field in the LSA header has changed.</span>
<span class="comment"></span>
<span class="comment">            o   The body of the LSA (i.e., anything outside the 20-byte</span>
<span class="comment">                LSA header) has changed. Note that this excludes changes</span>
<span class="comment">                in LS Sequence Number and LS Checksum.</span>
<span class="comment"></span>
<span class="comment">  */</span>
  <span class="comment">/* Look up old LSA and determine if any SPF calculation or incremental</span>
<span class="comment">     update is needed */</span>
  old = <a class="code" href="ospf__lsdb_8c.html#aaa05b45206ad37981306f38e098eae7d">ospf_lsdb_lookup</a> (lsdb, lsa);

  <span class="comment">/* Do comparision and record if recalc needed. */</span>
  rt_recalc = 0;
  <span class="keywordflow">if</span> (  old == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || <a class="code" href="ospf__lsa_8c.html#ab52aee7f3611698de9df9e83d65eab82">ospf_lsa_different</a>(old, lsa))
    rt_recalc = 1;

  <span class="comment">/*</span>
<span class="comment">     Sequence number check (Section 14.1 of rfc 2328)</span>
<span class="comment">     &quot;Premature aging is used when it is time for a self-originated</span>
<span class="comment">      LSA&#39;s sequence number field to wrap.  At this point, the current</span>
<span class="comment">      LSA instance (having LS sequence number MaxSequenceNumber) must</span>
<span class="comment">      be prematurely aged and flushed from the routing domain before a</span>
<span class="comment">      new instance with sequence number equal to InitialSequenceNumber</span>
<span class="comment">      can be originated. &quot;</span>
<span class="comment">   */</span>

  <span class="keywordflow">if</span> (ntohl(lsa-&gt;data-&gt;ls_seqnum) - 1 == <a class="code" href="ospfd_8h.html#aac7261415d362e8c1ee96d13ddfe25de">OSPF_MAX_SEQUENCE_NUMBER</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8c.html#ad430a0bdeae46dc78ef311cf2c511bad">ospf_lsa_is_self_originated</a>(<a class="code" href="structospf.html">ospf</a>, lsa))
        {
          lsa-&gt;data-&gt;ls_seqnum = htonl(<a class="code" href="ospfd_8h.html#aac7261415d362e8c1ee96d13ddfe25de">OSPF_MAX_SEQUENCE_NUMBER</a>);
          
          <span class="keywordflow">if</span> (!<a class="code" href="ospf__lsa_8h.html#a29c1c83c9c5e24d75e33d7efd0d12b88">IS_LSA_MAXAGE</a>(lsa))
            lsa-&gt;flags |= <a class="code" href="ospf__lsa_8h.html#a8a7a31ebbedfab83203700cb050661af">OSPF_LSA_PREMATURE_AGE</a>;
          lsa-&gt;data-&gt;ls_age = htons (<a class="code" href="ospfd_8h.html#a2f2ee186f07abbe2afec70662e026341">OSPF_LSA_MAXAGE</a>);
        
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_REFRESH))
            {
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_lsa_install() Premature Aging &quot;</span>
                 <span class="stringliteral">&quot;lsa 0x%lx&quot;</span>, (u_long)lsa);
              <a class="code" href="ospf__dump_8c.html#a9f6f89130826976cb32a15187c88a397">ospf_lsa_header_dump</a> (lsa-&gt;data);
            }
        }
      <span class="keywordflow">else</span>
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
            {
              <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_lsa_install() got an lsa with seq 0x80000000 &quot;</span>
                 <span class="stringliteral">&quot;that was not self originated. Ignoring\n&quot;</span>);
              <a class="code" href="ospf__dump_8c.html#a9f6f89130826976cb32a15187c88a397">ospf_lsa_header_dump</a> (lsa-&gt;data);
            }
      <span class="keywordflow">return</span> old;
        }
    }

  <span class="comment">/* discard old LSA from LSDB */</span>
  <span class="keywordflow">if</span> (old != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <a class="code" href="ospf__lsa_8c.html#ad6d5a002c1a2e4d50dfed4a627ea42a8">ospf_discard_from_db</a> (<a class="code" href="structospf.html">ospf</a>, lsdb, lsa);

  <span class="comment">/* Calculate Checksum if self-originated?. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8h.html#aba06df657f75f729003128da649322f8">IS_LSA_SELF</a> (lsa))
    <a class="code" href="ospf__lsa_8c.html#a51f65ba10ce016111b959f7ce2790eaa">ospf_lsa_checksum</a> (lsa-&gt;data);

  <span class="comment">/* Insert LSA to LSDB. */</span>
  <a class="code" href="ospf__lsdb_8c.html#a4247fc1a76fbbc491d0d55ac0d77be71">ospf_lsdb_add</a> (lsdb, lsa);
  lsa-&gt;lsdb = lsdb;

  <span class="comment">/* Do LSA specific installation process. */</span>
  <span class="keywordflow">switch</span> (lsa-&gt;data-&gt;type)
    {
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a35879db42bef5fa9b3c1540b7db95b6f">OSPF_ROUTER_LSA</a>:
      <span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#a00547ded12be2b6f30d26527e6829584">ospf_router_lsa_install</a> (<a class="code" href="structospf.html">ospf</a>, lsa, rt_recalc);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a28b795ddb745c95eef700c9a2134c806">OSPF_NETWORK_LSA</a>:
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (oi);
      <span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#aeb017b8e734bbbae9f454b9bb23d7fd0">ospf_network_lsa_install</a> (<a class="code" href="structospf.html">ospf</a>, oi, lsa, rt_recalc);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a3a501e86708401620a7a61e9920cd9bd">OSPF_SUMMARY_LSA</a>:
      <span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#abbee2c4a7e1898de8eee25d1cc6b3164">ospf_summary_lsa_install</a> (<a class="code" href="structospf.html">ospf</a>, lsa, rt_recalc);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a09d9e4a35705f96a15952c63088c0ccc">OSPF_ASBR_SUMMARY_LSA</a>:
      <span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#a00b9af9ccc56dfb070dad158aef030fa">ospf_summary_asbr_lsa_install</a> (<a class="code" href="structospf.html">ospf</a>, lsa, rt_recalc);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#ae1f343a4ebcfe793c20519a447f7b851">OSPF_AS_EXTERNAL_LSA</a>:
      <span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#a725ac21be05680d8dd3066c63e7c795f">ospf_external_lsa_install</a> (<a class="code" href="structospf.html">ospf</a>, lsa, rt_recalc);
      <span class="keywordflow">break</span>;
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a9f5ad1d8944ebad62941128f9aeee23a">OSPF_OPAQUE_LINK_LSA</a>:
      <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8h.html#aba06df657f75f729003128da649322f8">IS_LSA_SELF</a> (lsa))
    lsa-&gt;oi = oi; <span class="comment">/* Specify outgoing ospf-interface for this LSA. */</span>
      else
    ; <span class="comment">/* Incoming &quot;oi&quot; for this LSA has set at LSUpd reception. */</span>
      <span class="comment">/* Fallthrough */</span>
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#affea3ed894380623d4d5bf5dbbad90e9">OSPF_OPAQUE_AREA_LSA</a>:
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a4ec63a35fbaffb7350ff4d69002af21e">OSPF_OPAQUE_AS_LSA</a>:
      <span class="keyword">new</span> = <a class="code" href="ospf__opaque_8h.html#adcdf3f83a447665cfcb282c18ab5cc71">ospf_opaque_lsa_install</a> (lsa, rt_recalc);
      <span class="keywordflow">break</span>;
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#adc97c8397af1195230a4a98bf67e5a9d">OSPF_AS_NSSA_LSA</a>:
      <span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#a725ac21be05680d8dd3066c63e7c795f">ospf_external_lsa_install</a> (<a class="code" href="structospf.html">ospf</a>, lsa, rt_recalc);
    <span class="keywordflow">default</span>: <span class="comment">/* type-6,8,9....nothing special */</span>
      <span class="keywordflow">break</span>;
    }

  <span class="keywordflow">if</span> (<span class="keyword">new</span> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> <span class="keyword">new</span>;  <span class="comment">/* Installation failed, cannot proceed further -- endo. */</span>

  <span class="comment">/* Debug logs. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_INSTALL))
    {
      <span class="keywordtype">char</span> area_str[<a class="code" href="prefix_8h.html#a93b37007689284fd9c4bde1a8f4b9199">INET_ADDRSTRLEN</a>];

      <span class="keywordflow">switch</span> (lsa-&gt;data-&gt;type)
        {
        <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#ae1f343a4ebcfe793c20519a447f7b851">OSPF_AS_EXTERNAL_LSA</a>:
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>        <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a4ec63a35fbaffb7350ff4d69002af21e">OSPF_OPAQUE_AS_LSA</a>:
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
        <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#adc97c8397af1195230a4a98bf67e5a9d">OSPF_AS_NSSA_LSA</a>:
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[%s]: Install %s&quot;</span>,
                 <a class="code" href="ospf__lsa_8c.html#aa3a9efa2cceb09f1a6c7e3b5beba8bf6">dump_lsa_key</a> (<span class="keyword">new</span>),
                 <a class="code" href="log_8h.html#a3a4b1cad85aa6752f39580944e24a868">LOOKUP</a> (<a class="code" href="ospf__dump_8c.html#a00a70af067512935cf2897331ec40bb2">ospf_lsa_type_msg</a>, new-&gt;data-&gt;type));
          <span class="keywordflow">break</span>;
        <span class="keywordflow">default</span>:
      strcpy (area_str, inet_ntoa (new-&gt;area-&gt;area_id));
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[%s]: Install %s to Area %s&quot;</span>,
                 <a class="code" href="ospf__lsa_8c.html#aa3a9efa2cceb09f1a6c7e3b5beba8bf6">dump_lsa_key</a> (<span class="keyword">new</span>),
                 <a class="code" href="log_8h.html#a3a4b1cad85aa6752f39580944e24a868">LOOKUP</a> (<a class="code" href="ospf__dump_8c.html#a00a70af067512935cf2897331ec40bb2">ospf_lsa_type_msg</a>, new-&gt;data-&gt;type), area_str);
          <span class="keywordflow">break</span>;
        }
    }

  <span class="comment">/* </span>
<span class="comment">     If received LSA&#39; ls_age is MaxAge, or lsa is being prematurely aged</span>
<span class="comment">     (it&#39;s getting flushed out of the area), set LSA on MaxAge LSA list. </span>
<span class="comment">   */</span>
  <span class="keywordflow">if</span> ((lsa-&gt;flags &amp; <a class="code" href="ospf__lsa_8h.html#a8a7a31ebbedfab83203700cb050661af">OSPF_LSA_PREMATURE_AGE</a>) ||
      (<a class="code" href="ospf__lsa_8h.html#a29c1c83c9c5e24d75e33d7efd0d12b88">IS_LSA_MAXAGE</a> (<span class="keyword">new</span>) &amp;&amp; !<a class="code" href="ospf__lsa_8h.html#aba06df657f75f729003128da649322f8">IS_LSA_SELF</a> (<span class="keyword">new</span>)))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_INSTALL))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: Install LSA 0x%p, MaxAge&quot;</span>,
                   new-&gt;data-&gt;type, 
                   inet_ntoa (new-&gt;data-&gt;id), 
                   lsa);
      <a class="code" href="ospf__lsa_8c.html#ab730b081b5aa660ffc5d0ec642d03d27">ospf_lsa_maxage</a> (<a class="code" href="structospf.html">ospf</a>, lsa);
    }

  <span class="keywordflow">return</span> <span class="keyword">new</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac57d05fec0a5915f5162ffe134969467"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_is_self_originated" ref="ac57d05fec0a5915f5162ffe134969467" args="(struct ospf *, struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_lsa_is_self_originated </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l03453">3453</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;
  <span class="keyword">struct </span><a class="code" href="structospf__interface.html">ospf_interface</a> *oi;

  <span class="comment">/* This LSA is already checked. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a1e84ca07fab175368ae0125c93e06e4f">OSPF_LSA_SELF_CHECKED</a>))
    <span class="keywordflow">return</span> <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a718b20342734d47ebbdfe717b19084e1">OSPF_LSA_SELF</a>);

  <span class="comment">/* Make sure LSA is self-checked. */</span>
  <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a1e84ca07fab175368ae0125c93e06e4f">OSPF_LSA_SELF_CHECKED</a>);

  <span class="comment">/* AdvRouter and Router ID is the same. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="prefix_8h.html#a52a7c965d0b22ca60fe38fa6c404dbcc">IPV4_ADDR_SAME</a> (&amp;lsa-&gt;data-&gt;adv_router, &amp;<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#acda9328f4f8627516f5c4942a45b4c25">router_id</a>))
    <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a718b20342734d47ebbdfe717b19084e1">OSPF_LSA_SELF</a>);

  <span class="comment">/* LSA is router-LSA. */</span>
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lsa-&gt;data-&gt;type == <a class="code" href="ospf__lsa_8h.html#a35879db42bef5fa9b3c1540b7db95b6f">OSPF_ROUTER_LSA</a> &amp;&amp;
      <a class="code" href="prefix_8h.html#a52a7c965d0b22ca60fe38fa6c404dbcc">IPV4_ADDR_SAME</a> (&amp;lsa-&gt;data-&gt;id, &amp;<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#acda9328f4f8627516f5c4942a45b4c25">router_id</a>))
    <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a718b20342734d47ebbdfe717b19084e1">OSPF_LSA_SELF</a>);

  <span class="comment">/* LSA is network-LSA.  Compare Link ID with all interfaces. */</span>
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lsa-&gt;data-&gt;type == <a class="code" href="ospf__lsa_8h.html#a28b795ddb745c95eef700c9a2134c806">OSPF_NETWORK_LSA</a>)
    <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a977d3608343fe5db7900ec646880cb6a">oiflist</a>, node, oi))
      {
    <span class="comment">/* Ignore virtual link. */</span>
        <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf__interface.html#adb923b0bfebf30738af57dafcf0d0d57">type</a> != <a class="code" href="ospf__interface_8h.html#a45798a2a8b566abd1907f7ae8bc0a2be">OSPF_IFTYPE_VIRTUALLINK</a>)
      <span class="keywordflow">if</span> (oi-&gt;<a class="code" href="structospf__interface.html#a43493bc2b5d951e3e38ace850332eca1">address</a>-&gt;<a class="code" href="structprefix.html#a3848d44348192dc4de7ac89e317399bd">family</a> == AF_INET)
        <span class="keywordflow">if</span> (<a class="code" href="prefix_8h.html#a52a7c965d0b22ca60fe38fa6c404dbcc">IPV4_ADDR_SAME</a> (&amp;lsa-&gt;data-&gt;id, &amp;oi-&gt;<a class="code" href="structospf__interface.html#a43493bc2b5d951e3e38ace850332eca1">address</a>-&gt;u.<a class="code" href="structprefix.html#ab37b8922554b41b7dc2417d8f37e7829">prefix4</a>))
          {
        <span class="comment">/* to make it easier later */</span>
        <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a718b20342734d47ebbdfe717b19084e1">OSPF_LSA_SELF</a>);
        <span class="keywordflow">return</span> <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a718b20342734d47ebbdfe717b19084e1">OSPF_LSA_SELF</a>);
          }
      }

  <span class="keywordflow">return</span> <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a718b20342734d47ebbdfe717b19084e1">OSPF_LSA_SELF</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a40b8b094191531b0308c298ce6058036"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_lock" ref="a40b8b094191531b0308c298ce6058036" args="(struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_lsa_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00265">265</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  lsa-&gt;lock++;
  <span class="keywordflow">return</span> lsa;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1878fa64b13559db6b192a347aead20f"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_lookup" ref="a1878fa64b13559db6b192a347aead20f" args="(struct ospf_area *, u_int32_t, struct in_addr, struct in_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_lsa_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l03121">3121</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf.html">ospf</a> *<a class="code" href="structospf.html">ospf</a> = <a class="code" href="ospfd_8c.html#a8ea0c935a4862c1469bc962e93fee74b">ospf_lookup</a>();
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a>(ospf);

  <span class="keywordflow">switch</span> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>)
    {
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a35879db42bef5fa9b3c1540b7db95b6f">OSPF_ROUTER_LSA</a>:
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a28b795ddb745c95eef700c9a2134c806">OSPF_NETWORK_LSA</a>:
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a3a501e86708401620a7a61e9920cd9bd">OSPF_SUMMARY_LSA</a>:
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a09d9e4a35705f96a15952c63088c0ccc">OSPF_ASBR_SUMMARY_LSA</a>:
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#adc97c8397af1195230a4a98bf67e5a9d">OSPF_AS_NSSA_LSA</a>:
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a9f5ad1d8944ebad62941128f9aeee23a">OSPF_OPAQUE_LINK_LSA</a>:
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#affea3ed894380623d4d5bf5dbbad90e9">OSPF_OPAQUE_AREA_LSA</a>:
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
      <span class="keywordflow">return</span> <a class="code" href="ospf__lsdb_8c.html#a272e7b17825b0ec09ece8ffe848d9a9f">ospf_lsdb_lookup_by_id</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;lsdb, <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, <span class="keywordtype">id</span>, <a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>);
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#ae1f343a4ebcfe793c20519a447f7b851">OSPF_AS_EXTERNAL_LSA</a>:
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a4ec63a35fbaffb7350ff4d69002af21e">OSPF_OPAQUE_AS_LSA</a>:
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
      <span class="keywordflow">return</span> <a class="code" href="ospf__lsdb_8c.html#a272e7b17825b0ec09ece8ffe848d9a9f">ospf_lsdb_lookup_by_id</a> (ospf-&gt;<a class="code" href="structospf.html#a2840075b79d0a04d991596028f6c2660">lsdb</a>, <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, <span class="keywordtype">id</span>, <a class="code" href="prefix_8h.html#aa4419784611184c74a36162ffcf0123d">adv_router</a>);
    <span class="keywordflow">default</span>:
      <span class="keywordflow">break</span>;
    }

  <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af69c4186d5427b44e07a278b0d25a627"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_lookup_by_header" ref="af69c4186d5427b44e07a278b0d25a627" args="(struct ospf_area *, struct lsa_header *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_lsa_lookup_by_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlsa__header.html">lsa_header</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l03193">3193</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *match;

<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>  <span class="comment">/*</span>
<span class="comment">   * Strictly speaking, the LSA-ID field for Opaque-LSAs (type-9/10/11)</span>
<span class="comment">   * is redefined to have two subfields; opaque-type and opaque-id.</span>
<span class="comment">   * However, it is harmless to treat the two sub fields together, as if</span>
<span class="comment">   * they two were forming a unique LSA-ID.</span>
<span class="comment">   */</span>
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>

  match = <a class="code" href="ospf__lsa_8c.html#a1f0fd75e3aea10b1c15ffcc28fba7a58">ospf_lsa_lookup</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>, lsah-&gt;type, lsah-&gt;id, lsah-&gt;adv_router);

  <span class="keywordflow">if</span> (match == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA) == <a class="code" href="ospf__dump_8h.html#a53cfd985a6bfab8b48b939e4b8a5a32a">OSPF_DEBUG_LSA</a>)
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: Lookup by header, NO MATCH&quot;</span>,
         lsah-&gt;type, inet_ntoa (lsah-&gt;id));

  <span class="keywordflow">return</span> match;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3f56f98bc228ce3882b6793d77058933"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_lookup_by_id" ref="a3f56f98bc228ce3882b6793d77058933" args="(struct ospf_area *, u_int32_t, struct in_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_lsa_lookup_by_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l03152">3152</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;

  <span class="keywordflow">switch</span> (<a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>)
    {
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a35879db42bef5fa9b3c1540b7db95b6f">OSPF_ROUTER_LSA</a>:
      <span class="keywordflow">return</span> <a class="code" href="ospf__lsdb_8c.html#a272e7b17825b0ec09ece8ffe848d9a9f">ospf_lsdb_lookup_by_id</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;lsdb, <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, <span class="keywordtype">id</span>, <span class="keywordtype">id</span>);
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a28b795ddb745c95eef700c9a2134c806">OSPF_NETWORK_LSA</a>:
      <span class="keywordflow">for</span> (rn = <a class="code" href="table_8c.html#aee1d06c531794df326d946bdac647fb2">route_top</a> (<a class="code" href="ospf__lsdb_8h.html#a73230fbde5946c52a9905d9d56f5eb0d">NETWORK_LSDB</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>)); rn; rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn))
    <span class="keywordflow">if</span> ((lsa = rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>))
      <span class="keywordflow">if</span> (<a class="code" href="prefix_8h.html#a52a7c965d0b22ca60fe38fa6c404dbcc">IPV4_ADDR_SAME</a> (&amp;lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>, &amp;<span class="keywordtype">id</span>))
        {
          <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (rn);
          <span class="keywordflow">return</span> lsa;
        }
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a3a501e86708401620a7a61e9920cd9bd">OSPF_SUMMARY_LSA</a>:
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a09d9e4a35705f96a15952c63088c0ccc">OSPF_ASBR_SUMMARY_LSA</a>:
      <span class="comment">/* Currently not used. */</span>
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (1);
      <span class="keywordflow">return</span> <a class="code" href="ospf__lsdb_8c.html#a272e7b17825b0ec09ece8ffe848d9a9f">ospf_lsdb_lookup_by_id</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;lsdb, <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, <span class="keywordtype">id</span>, <span class="keywordtype">id</span>);
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#ae1f343a4ebcfe793c20519a447f7b851">OSPF_AS_EXTERNAL_LSA</a>:
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#adc97c8397af1195230a4a98bf67e5a9d">OSPF_AS_NSSA_LSA</a>:
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a9f5ad1d8944ebad62941128f9aeee23a">OSPF_OPAQUE_LINK_LSA</a>:
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#affea3ed894380623d4d5bf5dbbad90e9">OSPF_OPAQUE_AREA_LSA</a>:
    <span class="keywordflow">case</span> <a class="code" href="ospf__lsa_8h.html#a4ec63a35fbaffb7350ff4d69002af21e">OSPF_OPAQUE_AS_LSA</a>:
      <span class="comment">/* Currently not used. */</span>
      <span class="keywordflow">break</span>;
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
    <span class="keywordflow">default</span>:
      <span class="keywordflow">break</span>;
    }

  <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aec4a69c1f23bc211aece00d6523fd88a"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_lookup_by_prefix" ref="aec4a69c1f23bc211aece00d6523fd88a" args="(struct ospf_lsdb *, u_char, struct prefix_ipv4 *, struct in_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_lsa_lookup_by_prefix </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__lsdb.html">ospf_lsdb</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_char&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l03090">3090</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;
  <span class="keyword">struct </span>in_addr mask, <a class="code" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>;
  <span class="keyword">struct </span>lsa_header_mask
  {
    <span class="keyword">struct </span><a class="code" href="structlsa__header.html">lsa_header</a> header;
    <span class="keyword">struct </span>in_addr mask;
  } *hmask;

  lsa = <a class="code" href="ospf__lsdb_8c.html#a272e7b17825b0ec09ece8ffe848d9a9f">ospf_lsdb_lookup_by_id</a> (lsdb, <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefix, router_id);
  <span class="keywordflow">if</span> (lsa == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <a class="code" href="prefix_8c.html#ac618f277d6ed0ebc56781ec26e508157">masklen2ip</a> (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen, &amp;mask);

  hmask = (<span class="keyword">struct </span>lsa_header_mask *) lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>;

  if (mask.s_addr != hmask-&gt;mask.s_addr)
    {
      <span class="keywordtype">id</span>.s_addr = <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefix.s_addr | (~mask.s_addr);
      lsa = <a class="code" href="ospf__lsdb_8c.html#a272e7b17825b0ec09ece8ffe848d9a9f">ospf_lsdb_lookup_by_id</a> (lsdb, <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, <span class="keywordtype">id</span>, router_id);
      <span class="keywordflow">if</span> (!lsa)
        <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }

  <span class="keywordflow">return</span> lsa;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6029d8bd0c462ff8d8f51c69c41bc8a1"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_maxage" ref="a6029d8bd0c462ff8d8f51c69c41bc8a1" args="(struct ospf *, struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_lsa_maxage </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l02975">2975</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">/* When we saw a MaxAge LSA flooded to us, we put it on the list</span>
<span class="comment">     and schedule the MaxAge LSA remover. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a>(lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a6c66943e47af1d443fee615f1a91b622">OSPF_LSA_IN_MAXAGE</a>))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_FLOODING))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: %p already exists on MaxAge LSA list&quot;</span>,
           lsa-&gt;data-&gt;type, inet_ntoa (lsa-&gt;data-&gt;id), lsa);
      <span class="keywordflow">return</span>;
    }

  <a class="code" href="linklist_8c.html#adb2a0478aba995441aaf691d1f6fe5db">listnode_add</a> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a846adae0f5fad7050467a638fc775ee1">maxage_lsa</a>, <a class="code" href="ospf__lsa_8c.html#a312850eed27e83bb9f66d27bb5bfb144">ospf_lsa_lock</a> (lsa));
  <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a>(lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a6c66943e47af1d443fee615f1a91b622">OSPF_LSA_IN_MAXAGE</a>);

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_FLOODING))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[%s]: MaxAge LSA remover scheduled.&quot;</span>, <a class="code" href="ospf__lsa_8c.html#aa3a9efa2cceb09f1a6c7e3b5beba8bf6">dump_lsa_key</a> (lsa));

  <a class="code" href="ospfd_8h.html#af55bc6c498265fffa9294d0f1b952267">OSPF_TIMER_ON</a> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#ab8f18d70bc4436f4f060a328ebea77b1">t_maxage</a>, <a class="code" href="ospf__lsa_8c.html#a45711592b5267b56be96e4504967ea69">ospf_maxage_lsa_remover</a>, 2);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a29a9d1aedd5bc7998239d89484bca94b"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_maxage_delete" ref="a29a9d1aedd5bc7998239d89484bca94b" args="(struct ospf *, struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_lsa_maxage_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l02962">2962</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *<a class="code" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>;

  <span class="keywordflow">if</span> ((n = <a class="code" href="linklist_8c.html#aff2a6c7dcdf74c05eb320db319f83990">listnode_lookup</a> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a846adae0f5fad7050467a638fc775ee1">maxage_lsa</a>, lsa)))
    {
      <a class="code" href="linklist_8c.html#a44569d4d868c60e29b21409612a5df05">list_delete_node</a> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a846adae0f5fad7050467a638fc775ee1">maxage_lsa</a>, n);
      <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a>(lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a6c66943e47af1d443fee615f1a91b622">OSPF_LSA_IN_MAXAGE</a>);
      <a class="code" href="ospf__lsa_8c.html#a268fc5c6673caf7ee94c0eaaa88455b8">ospf_lsa_unlock</a> (&amp;lsa); <span class="comment">/* maxage_lsa */</span>
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a395e4b273182b4cff680e4c0d5505db1"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_maxage_walker" ref="a395e4b273182b4cff680e4c0d5505db1" args="(struct thread *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_lsa_maxage_walker </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l03043">3043</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf.html">ospf</a> *<a class="code" href="structospf.html">ospf</a> = <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (<a class="code" href="structthread.html">thread</a>);
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;

  ospf-&gt;<a class="code" href="structospf.html#afc0d99523632821dde306d634e1c5ad1">t_maxage_walker</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, nnode, area))
    {
      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#a9b953d2ac1c54862e897adada93cb8a4">ROUTER_LSDB</a> (area), rn, lsa)
    <a class="code" href="ospf__lsa_8c.html#a3782d39ad4a1fe76eb0bc8e4b5a9a86f">ospf_lsa_maxage_walker_remover</a> (ospf, lsa);
      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#a73230fbde5946c52a9905d9d56f5eb0d">NETWORK_LSDB</a> (area), rn, lsa)
    <a class="code" href="ospf__lsa_8c.html#a3782d39ad4a1fe76eb0bc8e4b5a9a86f">ospf_lsa_maxage_walker_remover</a> (ospf, lsa);
      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#a58ae6df59f7476d7784e19f7ca19db1f">SUMMARY_LSDB</a> (area), rn, lsa)
    <a class="code" href="ospf__lsa_8c.html#a3782d39ad4a1fe76eb0bc8e4b5a9a86f">ospf_lsa_maxage_walker_remover</a> (ospf, lsa);
      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#a145a10afd0c8a801d2e84b26c0becbfd">ASBR_SUMMARY_LSDB</a> (area), rn, lsa)
    <a class="code" href="ospf__lsa_8c.html#a3782d39ad4a1fe76eb0bc8e4b5a9a86f">ospf_lsa_maxage_walker_remover</a> (ospf, lsa);
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#aec3918874489142043aedd1ac5855f57">OPAQUE_AREA_LSDB</a> (area), rn, lsa)
    <a class="code" href="ospf__lsa_8c.html#a3782d39ad4a1fe76eb0bc8e4b5a9a86f">ospf_lsa_maxage_walker_remover</a> (ospf, lsa);
      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#a7b6d75a56662bb4e124777b376bb84da">OPAQUE_LINK_LSDB</a> (area), rn, lsa)
    <a class="code" href="ospf__lsa_8c.html#a3782d39ad4a1fe76eb0bc8e4b5a9a86f">ospf_lsa_maxage_walker_remover</a> (ospf, lsa);
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#aa704d331d2ac4e4034faca5c0f177364">NSSA_LSDB</a> (area), rn, lsa)
        <a class="code" href="ospf__lsa_8c.html#a3782d39ad4a1fe76eb0bc8e4b5a9a86f">ospf_lsa_maxage_walker_remover</a> (ospf, lsa);
    }

  <span class="comment">/* for AS-external-LSAs. */</span>
  if (ospf-&gt;lsdb)
    {
      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#ae56a8a7b638bd22caf86ea3d810fdbd9">EXTERNAL_LSDB</a> (ospf), rn, lsa)
    <a class="code" href="ospf__lsa_8c.html#a3782d39ad4a1fe76eb0bc8e4b5a9a86f">ospf_lsa_maxage_walker_remover</a> (ospf, lsa);
<span class="preprocessor">#ifdef HAVE_OPAQUE_LSA</span>
<span class="preprocessor"></span>      <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#ac7a1aa21490d2bd86999d2e494cde6d0">OPAQUE_AS_LSDB</a> (ospf), rn, lsa)
    <a class="code" href="ospf__lsa_8c.html#a3782d39ad4a1fe76eb0bc8e4b5a9a86f">ospf_lsa_maxage_walker_remover</a> (ospf, lsa);
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_OPAQUE_LSA */</span>
    }

  <a class="code" href="ospfd_8h.html#af55bc6c498265fffa9294d0f1b952267">OSPF_TIMER_ON</a> (ospf-&gt;t_maxage_walker, <a class="code" href="ospf__lsa_8c.html#a4069275df453331e7b1c742d1aa7e2e1">ospf_lsa_maxage_walker</a>,
         <a class="code" href="ospfd_8h.html#a5344576f6e042edd999d545d7b530aa3">OSPF_LSA_MAXAGE_CHECK_INTERVAL</a>);
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aace465890c49615e0b5d325b4c35b100"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_more_recent" ref="aace465890c49615e0b5d325b4c35b100" args="(struct ospf_lsa *, struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_lsa_more_recent </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l03220">3220</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> r;
  <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a3162ada50d1df39e0f0555ea3d60dea1">x</a>, <a class="code" href="spgrid_8c.html#a04ee6b20e6d3476ab1f51397993cfeef">y</a>;

  <span class="keywordflow">if</span> (l1 == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; l2 == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;
  <span class="keywordflow">if</span> (l1 == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> -1;
  <span class="keywordflow">if</span> (l2 == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 1;

  <span class="comment">/* compare LS sequence number. */</span>
  x = (int) ntohl (l1-&gt;data-&gt;ls_seqnum);
  y = (int) ntohl (l2-&gt;data-&gt;ls_seqnum);
  <span class="keywordflow">if</span> (x &gt; y)
    <span class="keywordflow">return</span> 1;
  <span class="keywordflow">if</span> (x &lt; y)
    <span class="keywordflow">return</span> -1;

  <span class="comment">/* compare LS checksum. */</span>
  r = ntohs (l1-&gt;data-&gt;checksum) - ntohs (l2-&gt;data-&gt;checksum);
  <span class="keywordflow">if</span> (r)
    <span class="keywordflow">return</span> r;

  <span class="comment">/* compare LS age. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8h.html#a29c1c83c9c5e24d75e33d7efd0d12b88">IS_LSA_MAXAGE</a> (l1) &amp;&amp; !<a class="code" href="ospf__lsa_8h.html#a29c1c83c9c5e24d75e33d7efd0d12b88">IS_LSA_MAXAGE</a> (l2))
    <span class="keywordflow">return</span> 1;
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="ospf__lsa_8h.html#a29c1c83c9c5e24d75e33d7efd0d12b88">IS_LSA_MAXAGE</a> (l1) &amp;&amp; <a class="code" href="ospf__lsa_8h.html#a29c1c83c9c5e24d75e33d7efd0d12b88">IS_LSA_MAXAGE</a> (l2))
    <span class="keywordflow">return</span> -1;

  <span class="comment">/* compare LS age with MaxAgeDiff. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8h.html#ac3af6344813262fea1e037637547443f">LS_AGE</a> (l1) - <a class="code" href="ospf__lsa_8h.html#ac3af6344813262fea1e037637547443f">LS_AGE</a> (l2) &gt; <a class="code" href="ospfd_8h.html#aae6f593f9fdab4f907f59f1676e4f98c">OSPF_LSA_MAXAGE_DIFF</a>)
    <span class="keywordflow">return</span> -1;
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8h.html#ac3af6344813262fea1e037637547443f">LS_AGE</a> (l2) - <a class="code" href="ospf__lsa_8h.html#ac3af6344813262fea1e037637547443f">LS_AGE</a> (l1) &gt; <a class="code" href="ospfd_8h.html#aae6f593f9fdab4f907f59f1676e4f98c">OSPF_LSA_MAXAGE_DIFF</a>)
    <span class="keywordflow">return</span> 1;

  <span class="comment">/* LSAs are identical. */</span>
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aebba93c085ea7c42e2bcabbc6874957f"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_new" ref="aebba93c085ea7c42e2bcabbc6874957f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_lsa_new </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00199">199</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *<span class="keyword">new</span>;

  <span class="keyword">new</span> = <a class="code" href="memory_8h.html#a7826e4ed1d152cad0666dcf43f11f663">XCALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba5bccaee3075ceeb63ae53e83a6ec262b">MTYPE_OSPF_LSA</a>, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structospf__lsa.html">ospf_lsa</a>));

  <span class="keyword">new</span>-&gt;flags = 0;
  <span class="keyword">new</span>-&gt;lock = 1;
  <span class="keyword">new</span>-&gt;retransmit_counter = 0;
  <span class="keyword">new</span>-&gt;tv_recv = <a class="code" href="thread_8c.html#a010d58e49a3c74ae856d5cd111f7eb62">recent_relative_time</a> ();
  <span class="keyword">new</span>-&gt;tv_orig = <span class="keyword">new</span>-&gt;tv_recv;
  <span class="keyword">new</span>-&gt;refresh_list = -1;
  
  <span class="keywordflow">return</span> <span class="keyword">new</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7b96dc25c5c7a019f43892b368b29c42"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_refresh_delay" ref="a7b96dc25c5c7a019f43892b368b29c42" args="(struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_lsa_refresh_delay </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00140">140</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span>timeval delta, now;
  <span class="keywordtype">int</span> delay = 0;

  <a class="code" href="thread_8c.html#abf5861abe71d6f9a1ddd493be0218de1">quagga_gettime</a> (<a class="code" href="thread_8h.html#a64fff521e88ba8b01645c5bb89085b33a7f92aaa461f13c163b13f96085eb3cd9">QUAGGA_CLK_MONOTONIC</a>, &amp;now);
  delta = <a class="code" href="ospf__lsa_8c.html#aaa9daa06f817fbcc8ff12657aeb5996c">tv_sub</a> (now, lsa-&gt;tv_orig);

  <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8c.html#a5ba57790910a88ececacfd1d3f69538c">tv_cmp</a> (delta, <a class="code" href="ospf__lsa_8c.html#a2543635ecb435d64f2b40f9cfdf75fc5">int2tv</a> (<a class="code" href="ospfd_8h.html#a8e517a858d0da0eb3b4fcf8c06391117">OSPF_MIN_LS_INTERVAL</a>)) &lt; 0)
    {
      delay = <a class="code" href="ospf__lsa_8c.html#a3d712873cc4897fcc355a0c65e4e7009">tv_ceil</a> (<a class="code" href="ospf__lsa_8c.html#aaa9daa06f817fbcc8ff12657aeb5996c">tv_sub</a> (<a class="code" href="ospf__lsa_8c.html#a2543635ecb435d64f2b40f9cfdf75fc5">int2tv</a> (<a class="code" href="ospfd_8h.html#a8e517a858d0da0eb3b4fcf8c06391117">OSPF_MIN_LS_INTERVAL</a>), delta));

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: Refresh timer delay %d seconds&quot;</span>,
               lsa-&gt;data-&gt;type, inet_ntoa (lsa-&gt;data-&gt;id), delay);

      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (delay &gt; 0);
    }

  <span class="keywordflow">return</span> delay;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9fa3894b5bc156fa3e5c96aa94e95e51"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_refresh_walker" ref="a9fa3894b5bc156fa3e5c96aa94e95e51" args="(struct thread *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_lsa_refresh_walker </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l03711">3711</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlist.html">list</a> *refresh_list;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structospf.html">ospf</a> *<a class="code" href="structospf.html">ospf</a> = <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (<a class="code" href="test-sig_8c.html#ab4ed0bba3292270af8ad67b45a21280d">t</a>);
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;
  <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>;
  <span class="keyword">struct </span><a class="code" href="structlist.html">list</a> *lsa_to_refresh = <a class="code" href="linklist_8c.html#af156f4ae343ef4a625f75b6c38845aef">list_new</a> ();

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_REFRESH))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Refresh]:ospf_lsa_refresh_walker(): start&quot;</span>);

  
  i = ospf-&gt;<a class="code" href="structospf.html#a063c49a13f4c394dafb8d92113410e9a">lsa_refresh_queue</a>.<a class="code" href="structospf.html#a65bdce49ac806b7af091220184559635">index</a>;
  
  <span class="comment">/* Note: if clock has jumped backwards, then time change could be negative,</span>
<span class="comment">     so we are careful to cast the expression to unsigned before taking</span>
<span class="comment">     modulus. */</span>
  ospf-&gt;<a class="code" href="structospf.html#a063c49a13f4c394dafb8d92113410e9a">lsa_refresh_queue</a>.<a class="code" href="structospf.html#a65bdce49ac806b7af091220184559635">index</a> =
   ((<span class="keywordtype">unsigned</span> long)(ospf-&gt;<a class="code" href="structospf.html#a063c49a13f4c394dafb8d92113410e9a">lsa_refresh_queue</a>.<a class="code" href="structospf.html#a65bdce49ac806b7af091220184559635">index</a> +
            (<a class="code" href="thread_8c.html#acbaf2206b84f93fbe18f33483bf101d2">quagga_time</a> (<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) - ospf-&gt;<a class="code" href="structospf.html#ab5d0a648175f600f62a12444c237dd8f">lsa_refresher_started</a>) /
            <a class="code" href="ospfd_8h.html#a62aca10324b168da898934617ebf36f9">OSPF_LSA_REFRESHER_GRANULARITY</a>)) % <a class="code" href="ospfd_8h.html#a09a36e0ed4763356a713ba83d0bc3dda">OSPF_LSA_REFRESHER_SLOTS</a>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_REFRESH))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Refresh]: ospf_lsa_refresh_walker(): next index %d&quot;</span>,
           ospf-&gt;<a class="code" href="structospf.html#a063c49a13f4c394dafb8d92113410e9a">lsa_refresh_queue</a>.<a class="code" href="structospf.html#a65bdce49ac806b7af091220184559635">index</a>);

  <span class="keywordflow">for</span> (;i != ospf-&gt;<a class="code" href="structospf.html#a063c49a13f4c394dafb8d92113410e9a">lsa_refresh_queue</a>.<a class="code" href="structospf.html#a65bdce49ac806b7af091220184559635">index</a>;
       i = (i + 1) % <a class="code" href="ospfd_8h.html#a09a36e0ed4763356a713ba83d0bc3dda">OSPF_LSA_REFRESHER_SLOTS</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_REFRESH))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Refresh]: ospf_lsa_refresh_walker(): &quot;</span>
               <span class="stringliteral">&quot;refresh index %d&quot;</span>, i);

      refresh_list = ospf-&gt;<a class="code" href="structospf.html#a063c49a13f4c394dafb8d92113410e9a">lsa_refresh_queue</a>.<a class="code" href="structospf.html#ac5484d1394af906226eb62611a0329d1">qs</a> [<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>];
      
      ospf-&gt;<a class="code" href="structospf.html#a063c49a13f4c394dafb8d92113410e9a">lsa_refresh_queue</a>.<a class="code" href="structospf.html#ac5484d1394af906226eb62611a0329d1">qs</a> [<a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>] = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

      <span class="keywordflow">if</span> (refresh_list)
    {
      <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (refresh_list, node, nnode, lsa))
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_REFRESH))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Refresh:%s]: ospf_lsa_refresh_walker(): &quot;</span>
                   <span class="stringliteral">&quot;refresh lsa %p (slot %d)&quot;</span>, 
                   inet_ntoa (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>), lsa, <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>);
          
          <a class="code" href="linklist_8c.html#a44569d4d868c60e29b21409612a5df05">list_delete_node</a> (refresh_list, node);
          <a class="code" href="ospf__lsa_8c.html#a268fc5c6673caf7ee94c0eaaa88455b8">ospf_lsa_unlock</a> (&amp;lsa); <span class="comment">/* lsa_refresh_queue */</span>
          lsa-&gt;<a class="code" href="structospf__lsa.html#a91e4ad20d925dcea4ad488137cce0e40">refresh_list</a> = -1;
          <a class="code" href="linklist_8c.html#adb2a0478aba995441aaf691d1f6fe5db">listnode_add</a> (lsa_to_refresh, lsa);
        }
      <a class="code" href="linklist_8c.html#a15aa9f8cf8424489adf1efd4d075aac6">list_free</a> (refresh_list);
    }
    }

  ospf-&gt;<a class="code" href="structospf.html#a3f56b5850d9efb087ddb6d2eb79dd291">t_lsa_refresher</a> = <a class="code" href="thread_8h.html#aca77b3bbd166d3573de5ecd9756a590c">thread_add_timer</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf__lsa_8c.html#aba5248867f4c5f9ca904d27b89482c20">ospf_lsa_refresh_walker</a>,
                       ospf, ospf-&gt;<a class="code" href="structospf.html#acbe4f365624a63f3ec08e10e296050a3">lsa_refresh_interval</a>);
  ospf-&gt;<a class="code" href="structospf.html#ab5d0a648175f600f62a12444c237dd8f">lsa_refresher_started</a> = <a class="code" href="thread_8c.html#acbaf2206b84f93fbe18f33483bf101d2">quagga_time</a> (<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (lsa_to_refresh, node, nnode, lsa))
    <a class="code" href="ospf__lsa_8c.html#a482369a73eab5b0a9bc39e9ad754e864">ospf_lsa_refresh</a> (ospf, lsa);
  
  <a class="code" href="linklist_8c.html#ab5fdf1a904264be077ce19a432b1b119">list_delete</a> (lsa_to_refresh);
  
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_REFRESH))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Refresh]: ospf_lsa_refresh_walker(): end&quot;</span>);
  
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a206fb64a72438cbc87e97db0adb5f981"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_unique_id" ref="a206fb64a72438cbc87e97db0adb5f981" args="(struct ospf *, struct ospf_lsdb *, u_char, struct prefix_ipv4 *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct in_addr ospf_lsa_unique_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsdb.html">ospf_lsdb</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_char&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l03494">3494</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;
  <span class="keyword">struct </span>in_addr mask, <a class="code" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>;

  <span class="keywordtype">id</span> = <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefix;

  <span class="comment">/* Check existence of LSA instance. */</span>
  lsa = <a class="code" href="ospf__lsdb_8c.html#a272e7b17825b0ec09ece8ffe848d9a9f">ospf_lsdb_lookup_by_id</a> (lsdb, <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, <span class="keywordtype">id</span>, <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#acda9328f4f8627516f5c4942a45b4c25">router_id</a>);
  <span class="keywordflow">if</span> (lsa)
    {
      <span class="keyword">struct </span><a class="code" href="structas__external__lsa.html">as_external_lsa</a> *<a class="code" href="spgrid_8c.html#a7c4593313d1839d57c28594a69357bab">al</a> = (<span class="keyword">struct </span><a class="code" href="structas__external__lsa.html">as_external_lsa</a> *) lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>;
      if (<a class="code" href="prefix_8c.html#ab83ffad6b766ddd0ef87e4da228c322d">ip_masklen</a> (al-&gt;<a class="code" href="structas__external__lsa.html#aa860fac77968c497496d16df6d325651">mask</a>) == <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_lsa_unique_id(): &quot;</span>
               <span class="stringliteral">&quot;Can&#39;t get Link State ID for %s/%d&quot;</span>,
               inet_ntoa (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefix), <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen);
      <span class="comment">/*      id.s_addr = 0; */</span>
      <span class="keywordtype">id</span>.s_addr = 0xffffffff;
      <span class="keywordflow">return</span> <a class="code" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>;
    }
      <span class="comment">/* Masklen differs, then apply wildcard mask to Link State ID. */</span>
      <span class="keywordflow">else</span>
    {
      <a class="code" href="prefix_8c.html#ac618f277d6ed0ebc56781ec26e508157">masklen2ip</a> (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen, &amp;<a class="code" href="structas__external__lsa.html#aa860fac77968c497496d16df6d325651">mask</a>);

      <span class="keywordtype">id</span>.s_addr = <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefix.s_addr | (~<a class="code" href="structas__external__lsa.html#aa860fac77968c497496d16df6d325651">mask</a>.s_addr);
      lsa = <a class="code" href="ospf__lsdb_8c.html#a272e7b17825b0ec09ece8ffe848d9a9f">ospf_lsdb_lookup_by_id</a> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a2840075b79d0a04d991596028f6c2660">lsdb</a>, <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>,
                       <span class="keywordtype">id</span>, <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#acda9328f4f8627516f5c4942a45b4c25">router_id</a>);
      <span class="keywordflow">if</span> (lsa)
        {
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_lsa_unique_id(): &quot;</span>
               <span class="stringliteral">&quot;Can&#39;t get Link State ID for %s/%d&quot;</span>,
               inet_ntoa (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefix), <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen);
          <span class="comment">/*          id.s_addr = 0; */</span>
          <span class="keywordtype">id</span>.s_addr = 0xffffffff;
          <span class="keywordflow">return</span> <a class="code" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>;
        }
    }
    }

  <span class="keywordflow">return</span> <a class="code" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae96b427b01d51365ea14bd1d76cfcac9"></a><!-- doxytag: member="ospf_lsa.h::ospf_lsa_unlock" ref="ae96b427b01d51365ea14bd1d76cfcac9" args="(struct ospf_lsa **)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_lsa_unlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> **&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00273">273</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">/* This is sanity check. */</span>
  <span class="keywordflow">if</span> (!lsa || !*lsa)
    <span class="keywordflow">return</span>;
  
  (*lsa)-&gt;lock--;

  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> ((*lsa)-&gt;lock &gt;= 0);

  <span class="keywordflow">if</span> ((*lsa)-&gt;lock == 0)
    {
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> ((*lsa)-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a7c24685e365aa6c180d976e7ccfeb302">OSPF_LSA_DISCARD</a>));
      <a class="code" href="ospf__lsa_8c.html#a904e1877aa655ae5311549df1b51efcf">ospf_lsa_free</a> (*lsa);
      *lsa = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac7383ff5ec4fb8cbc715c436e4573964"></a><!-- doxytag: member="ospf_lsa.h::ospf_nbr_lookup_ptop" ref="ac7383ff5ec4fb8cbc715c436e4573964" args="(struct ospf_interface *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__neighbor.html">ospf_neighbor</a>* ospf_nbr_lookup_ptop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__interface.html">ospf_interface</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00436">436</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__neighbor.html">ospf_neighbor</a> *nbr = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;

  <span class="comment">/* Search neighbor, there must be one of two nbrs. */</span>
  <span class="keywordflow">for</span> (rn = <a class="code" href="table_8c.html#aee1d06c531794df326d946bdac647fb2">route_top</a> (oi-&gt;nbrs); rn; rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn))
    <span class="keywordflow">if</span> ((nbr = rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>))
      <span class="keywordflow">if</span> (!<a class="code" href="prefix_8h.html#a52a7c965d0b22ca60fe38fa6c404dbcc">IPV4_ADDR_SAME</a> (&amp;nbr-&gt;<a class="code" href="structospf__neighbor.html#a2257238c9040a76e9de9a78cf95bae0d">router_id</a>, &amp;oi-&gt;ospf-&gt;router_id))
    <span class="keywordflow">if</span> (nbr-&gt;<a class="code" href="structospf__neighbor.html#a07061a68f4e15effd12479e1047120c7">state</a> == <a class="code" href="ospf__nsm_8h.html#aae3fb624a87adcc8ae4d12d694fc0929">NSM_Full</a>)
      {
        <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (rn);
        <span class="keywordflow">break</span>;
      }

  <span class="comment">/* PtoP link must have only 1 neighbor. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__neighbor_8c.html#a0988186d79c97a6ef8211bdf208e0113">ospf_nbr_count</a> (oi, 0) &gt; 1)
    <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;Point-to-Point link has more than 1 neighobrs.&quot;</span>);

  <span class="keywordflow">return</span> nbr;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a56a24bcd7d5879bc8ff507e57f8dfc0b"></a><!-- doxytag: member="ospf_lsa.h::ospf_network_lsa_refresh" ref="a56a24bcd7d5879bc8ff507e57f8dfc0b" args="(struct ospf_lsa *, struct ospf_interface *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_network_lsa_refresh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__interface.html">ospf_interface</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l01124">1124</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a> = lsa-&gt;area;
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *<span class="keyword">new</span>;

  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (lsa-&gt;data);

  <span class="comment">/* Delete LSA from neighbor retransmit-list. */</span>
  <a class="code" href="ospf__flood_8c.html#a8f46211a0fe7065405e8bdda81963204">ospf_ls_retransmit_delete_nbr_area</a> (area, lsa);

  <span class="comment">/* Create new network-LSA instance. */</span>
  <span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#a38e5969eb071bb01f295114f99809694">ospf_network_lsa_new</a> (oi);
  <span class="keywordflow">if</span> (<span class="keyword">new</span> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> -1;
  <span class="keyword">new</span>-&gt;data-&gt;ls_seqnum = <a class="code" href="ospf__lsa_8c.html#a0951db1fe1ad120fc1831443a9c834ca">lsa_seqnum_increment</a> (lsa);

  <a class="code" href="ospf__lsa_8c.html#a1733ac6eff32161699d5e9d80a893351">ospf_lsa_install</a> (area-&gt;<a class="code" href="structospf__area.html#a0858934cbc3476d83ba7604309c813ad">ospf</a>, oi, <span class="keyword">new</span>);

  <span class="comment">/* Flood LSA through aera. */</span>
  <a class="code" href="ospf__flood_8c.html#aa350bf192623114dae7914a98325a71f">ospf_flood_through_area</a> (area, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>);

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
    {
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: network-LSA refresh&quot;</span>,
         new-&gt;data-&gt;type, inet_ntoa (new-&gt;data-&gt;id));
      <a class="code" href="ospf__dump_8c.html#a9f6f89130826976cb32a15187c88a397">ospf_lsa_header_dump</a> (new-&gt;data);
    }

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a09abc200dd6e0554308b06ec74533aec"></a><!-- doxytag: member="ospf_lsa.h::ospf_network_lsa_timer_add" ref="a09abc200dd6e0554308b06ec74533aec" args="(struct ospf_interface *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_network_lsa_timer_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__interface.html">ospf_interface</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l01174">1174</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">/* Keep interface&#39;s self-originated network-LSA. */</span>
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa = oi-&gt;network_lsa_self;

  <span class="comment">/* Cancel previously schedules network-LSA timer. */</span>
  <span class="keywordflow">if</span> (oi-&gt;t_network_lsa_self)
    <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type2]: Cancel previous network-LSA timer&quot;</span>);
  <a class="code" href="ospfd_8h.html#aad5b9afadb0a72aae30f4a7e750cc66a">OSPF_TIMER_OFF</a> (oi-&gt;t_network_lsa_self);

  <span class="comment">/* If network-LSA is originated previously, check the interval time. */</span>
  <span class="keywordflow">if</span> (lsa)
    {
      <span class="keywordtype">int</span> delay;
      <span class="keywordflow">if</span> ((delay = <a class="code" href="ospf__lsa_8c.html#a8f4fa72b19256ed0ecd962b21a9241a7">ospf_lsa_refresh_delay</a> (lsa)) &gt; 0)
        {
          oi-&gt;t_network_lsa_self =
            <a class="code" href="thread_8h.html#aca77b3bbd166d3573de5ecd9756a590c">thread_add_timer</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf__lsa_8c.html#af846c8b91a957413be3751610d0d3008">ospf_network_lsa_refresh_timer</a>,
                  oi, delay);
          <span class="keywordflow">return</span>;
        }
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Scheduling network-LSA origination right away&quot;</span>);

  <span class="comment">/* Immediately refresh network-LSA. */</span>
  oi-&gt;t_network_lsa_self =
    <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf__lsa_8c.html#af846c8b91a957413be3751610d0d3008">ospf_network_lsa_refresh_timer</a>, oi, 0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad7cf1f402786baeafb4b5c21bd6faf8d"></a><!-- doxytag: member="ospf_lsa.h::ospf_nssa_lsa_flush" ref="ad7cf1f402786baeafb4b5c21bd6faf8d" args="(struct ospf *ospf, struct prefix_ipv4 *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_nssa_lsa_flush </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"><em>ospf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l02189">2189</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, nnode, area))
  {
    <span class="keywordflow">if</span> (area-&gt;<a class="code" href="structospf__area.html#ac7c3a32e77b40506f5bc26209f41ab89">external_routing</a> == <a class="code" href="ospfd_8h.html#a871478d6ecced0907ee1f67c5dbacf99">OSPF_AREA_NSSA</a>)
    {
      <span class="keywordflow">if</span> (!(lsa = <a class="code" href="ospf__lsa_8c.html#a1f0fd75e3aea10b1c15ffcc28fba7a58">ospf_lsa_lookup</a> (area, <a class="code" href="ospf__lsa_8h.html#adc97c8397af1195230a4a98bf67e5a9d">OSPF_AS_NSSA_LSA</a>, p-&gt;prefix,
                                ospf-&gt;<a class="code" href="structospf.html#acda9328f4f8627516f5c4942a45b4c25">router_id</a>))) 
      {
        <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_FLOODING)) 
          <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA: There is no such AS-NSSA-LSA %s/%d in LSDB&quot;</span>,
                    inet_ntoa (p-&gt;prefix), p-&gt;<a class="code" href="structprefix__ipv4.html#ab96da4bf1eb37195bd564bcf1126a16a">prefixlen</a>);
        <span class="keywordflow">continue</span>;
      }
      <a class="code" href="ospf__flood_8c.html#a8f46211a0fe7065405e8bdda81963204">ospf_ls_retransmit_delete_nbr_area</a> (area, lsa);
      <span class="keywordflow">if</span> (!<a class="code" href="ospf__lsa_8h.html#a29c1c83c9c5e24d75e33d7efd0d12b88">IS_LSA_MAXAGE</a> (lsa)) 
      {
        <a class="code" href="ospf__lsa_8c.html#a97aa8b72a68e3a1c96ce73a46d2c6c6c">ospf_refresher_unregister_lsa</a> (ospf, lsa);
        <a class="code" href="ospf__flood_8c.html#ad3049ba87364a6fbed7d352023e33a4a">ospf_lsa_flush_area</a> (lsa, area);
      }
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac8e106cccc71de3202761a111e2f1786"></a><!-- doxytag: member="ospf_lsa.h::ospf_refresher_register_lsa" ref="ac8e106cccc71de3202761a111e2f1786" args="(struct ospf *, struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_refresher_register_lsa </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l03649">3649</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  u_int16_t index, current_index;
  
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a718b20342734d47ebbdfe717b19084e1">OSPF_LSA_SELF</a>));

  <span class="keywordflow">if</span> (lsa-&gt;refresh_list &lt; 0)
    {
      <span class="keywordtype">int</span> delay;

      <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8h.html#ac3af6344813262fea1e037637547443f">LS_AGE</a> (lsa) == 0 &amp;&amp;
      ntohl (lsa-&gt;data-&gt;ls_seqnum) == <a class="code" href="ospfd_8h.html#affb6c878aa462ae5de5e5db70631482d">OSPF_INITIAL_SEQUENCE_NUMBER</a>)
    <span class="comment">/* Randomize first update by  OSPF_LS_REFRESH_SHIFT factor */</span> 
    delay = <a class="code" href="ospfd_8h.html#a1baa2977bccd65eda7f1c3dcede72af2">OSPF_LS_REFRESH_SHIFT</a> + (random () % <a class="code" href="ospfd_8h.html#a5fe58ce24b916ba7a90e574173aa0349">OSPF_LS_REFRESH_TIME</a>);
      <span class="keywordflow">else</span>
    <span class="comment">/* Randomize another updates by +-OSPF_LS_REFRESH_JITTER factor */</span>
    delay = <a class="code" href="ospfd_8h.html#a5fe58ce24b916ba7a90e574173aa0349">OSPF_LS_REFRESH_TIME</a> - <a class="code" href="ospf__lsa_8h.html#ac3af6344813262fea1e037637547443f">LS_AGE</a> (lsa) - <a class="code" href="ospfd_8h.html#aa4491785ec311e7281d1b48564cefd6b">OSPF_LS_REFRESH_JITTER</a>
      + (random () % (2*<a class="code" href="ospfd_8h.html#aa4491785ec311e7281d1b48564cefd6b">OSPF_LS_REFRESH_JITTER</a>)); 

      <span class="keywordflow">if</span> (delay &lt; 0)
    delay = 0;

      current_index = <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a063c49a13f4c394dafb8d92113410e9a">lsa_refresh_queue</a>.<a class="code" href="structospf.html#a65bdce49ac806b7af091220184559635">index</a> +
    (<a class="code" href="thread_8c.html#acbaf2206b84f93fbe18f33483bf101d2">quagga_time</a> (<a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) - <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#ab5d0a648175f600f62a12444c237dd8f">lsa_refresher_started</a>)/<a class="code" href="ospfd_8h.html#a62aca10324b168da898934617ebf36f9">OSPF_LSA_REFRESHER_GRANULARITY</a>;
      
      index = (current_index + delay/<a class="code" href="ospfd_8h.html#a62aca10324b168da898934617ebf36f9">OSPF_LSA_REFRESHER_GRANULARITY</a>)
    % (<a class="code" href="ospfd_8h.html#a09a36e0ed4763356a713ba83d0bc3dda">OSPF_LSA_REFRESHER_SLOTS</a>);

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_REFRESH))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Refresh]: lsa %s with age %d added to index %d&quot;</span>,
           inet_ntoa (lsa-&gt;data-&gt;id), <a class="code" href="ospf__lsa_8h.html#ac3af6344813262fea1e037637547443f">LS_AGE</a> (lsa), index);
      <span class="keywordflow">if</span> (!<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a063c49a13f4c394dafb8d92113410e9a">lsa_refresh_queue</a>.<a class="code" href="structospf.html#ac5484d1394af906226eb62611a0329d1">qs</a>[index])
    <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a063c49a13f4c394dafb8d92113410e9a">lsa_refresh_queue</a>.<a class="code" href="structospf.html#ac5484d1394af906226eb62611a0329d1">qs</a>[index] = <a class="code" href="linklist_8c.html#af156f4ae343ef4a625f75b6c38845aef">list_new</a> ();
      <a class="code" href="linklist_8c.html#adb2a0478aba995441aaf691d1f6fe5db">listnode_add</a> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a063c49a13f4c394dafb8d92113410e9a">lsa_refresh_queue</a>.<a class="code" href="structospf.html#ac5484d1394af906226eb62611a0329d1">qs</a>[index],
                    <a class="code" href="ospf__lsa_8c.html#a312850eed27e83bb9f66d27bb5bfb144">ospf_lsa_lock</a> (lsa)); <span class="comment">/* lsa_refresh_queue */</span>
      lsa-&gt;refresh_list = index;
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_REFRESH))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Refresh:%s]: ospf_refresher_register_lsa(): &quot;</span>
                   <span class="stringliteral">&quot;setting refresh_list on lsa %p (slod %d)&quot;</span>, 
                   inet_ntoa (lsa-&gt;data-&gt;id), lsa, index);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6c94f384c422cafb544bfe0293e82668"></a><!-- doxytag: member="ospf_lsa.h::ospf_refresher_unregister_lsa" ref="a6c94f384c422cafb544bfe0293e82668" args="(struct ospf *, struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_refresher_unregister_lsa </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l03693">3693</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (lsa-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a718b20342734d47ebbdfe717b19084e1">OSPF_LSA_SELF</a>));
  <span class="keywordflow">if</span> (lsa-&gt;refresh_list &gt;= 0)
    {
      <span class="keyword">struct </span><a class="code" href="structlist.html">list</a> *refresh_list = <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a063c49a13f4c394dafb8d92113410e9a">lsa_refresh_queue</a>.<a class="code" href="structospf.html#ac5484d1394af906226eb62611a0329d1">qs</a>[lsa-&gt;refresh_list];
      <a class="code" href="linklist_8c.html#a8cbdaa18db1ceacaadbc457a0c634e02">listnode_delete</a> (refresh_list, lsa);
      <span class="keywordflow">if</span> (!<a class="code" href="linklist_8h.html#a0429e6385b31a314cc64432a906201e5">listcount</a> (refresh_list))
    {
      <a class="code" href="linklist_8c.html#a15aa9f8cf8424489adf1efd4d075aac6">list_free</a> (refresh_list);
      <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a063c49a13f4c394dafb8d92113410e9a">lsa_refresh_queue</a>.<a class="code" href="structospf.html#ac5484d1394af906226eb62611a0329d1">qs</a>[lsa-&gt;refresh_list] = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }
      <a class="code" href="ospf__lsa_8c.html#a268fc5c6673caf7ee94c0eaaa88455b8">ospf_lsa_unlock</a> (&amp;lsa); <span class="comment">/* lsa_refresh_queue */</span>
      lsa-&gt;refresh_list = -1;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac577ecc40a1819d54ecc17d5936a8403"></a><!-- doxytag: member="ospf_lsa.h::ospf_router_lsa_timer_add" ref="ac577ecc40a1819d54ecc17d5936a8403" args="(struct ospf_area *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_router_lsa_timer_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00935">935</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">/* Keep area&#39;s self-originated router-LSA. */</span>
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa = <a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;router_lsa_self;

  <span class="comment">/* Cancel previously scheduled router-LSA timer. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;t_router_lsa_self)
    <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type1]: Cancel previous router-LSA timer&quot;</span>);

  <a class="code" href="ospfd_8h.html#aad5b9afadb0a72aae30f4a7e750cc66a">OSPF_TIMER_OFF</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;t_router_lsa_self);

  <span class="comment">/* If router-LSA is originated previously, check the interval time. */</span>
  <span class="keywordflow">if</span> (lsa)
    {
      <span class="keywordtype">int</span> delay;
      <span class="keywordflow">if</span> ((delay = <a class="code" href="ospf__lsa_8c.html#a8f4fa72b19256ed0ecd962b21a9241a7">ospf_lsa_refresh_delay</a> (lsa)) &gt; 0)
        {
      <a class="code" href="ospfd_8h.html#a9ebaef78d2ca515b0c4fbc4aebd82d5e">OSPF_AREA_TIMER_ON</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;t_router_lsa_self,
                  <a class="code" href="ospf__lsa_8c.html#a0aa16c23a7fe1f38a172c06579e5ca25">ospf_router_lsa_timer</a>, delay);
      <span class="keywordflow">return</span>;
        }
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type1]: Scheduling router-LSA origination right away&quot;</span>);

  <span class="comment">/* Immediately refresh router-LSA. */</span>
  <a class="code" href="ospfd_8h.html#a9ebaef78d2ca515b0c4fbc4aebd82d5e">OSPF_AREA_TIMER_ON</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;t_router_lsa_self, <a class="code" href="ospf__lsa_8c.html#a0aa16c23a7fe1f38a172c06579e5ca25">ospf_router_lsa_timer</a>, 0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae00530be7fc69ada76d42f73820322f5"></a><!-- doxytag: member="ospf_lsa.h::ospf_router_lsa_update_timer" ref="ae00530be7fc69ada76d42f73820322f5" args="(struct thread *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_router_lsa_update_timer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structthread.html">thread</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00967">967</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf.html">ospf</a> *<a class="code" href="structospf.html">ospf</a> = <a class="code" href="thread_8h.html#a78f2ae47a7a334f7f74bfed7fda48e5a">THREAD_ARG</a> (<a class="code" href="structthread.html">thread</a>);
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Timer[router-LSA Update]: (timer expire)&quot;</span>);

  ospf-&gt;<a class="code" href="structospf.html#a94a369b811b335e1d05e1dab77096606">t_router_lsa_update</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (ospf-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, nnode, area))
    {
      <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa = area-&gt;<a class="code" href="structospf__area.html#a53c30c4d48396f97336cf4e1ae4545e2">router_lsa_self</a>;
      <span class="keyword">struct </span><a class="code" href="structrouter__lsa.html">router_lsa</a> *rl;
      <span class="keyword">const</span> <span class="keywordtype">char</span> *area_str;

      <span class="comment">/* Keep Area ID string. */</span>
      area_str = <a class="code" href="ospf__dump_8h.html#ac60094bacaf4a0d4f8036cbbebb17e6f">AREA_NAME</a> (area);

      <span class="comment">/* If LSA not exist in this Area, originate new. */</span>
      <span class="keywordflow">if</span> (lsa == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a>(<span class="stringliteral">&quot;LSA[Type1]: Create router-LSA for Area %s&quot;</span>, area_str);

      <a class="code" href="ospf__lsa_8c.html#a6740a0233b05e58420186ba666abcc54">ospf_router_lsa_originate</a> (area);
        }
      <span class="comment">/* If router-ID is changed, Link ID must change.</span>
<span class="comment">     First flush old LSA, then originate new. */</span>
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="prefix_8h.html#a52a7c965d0b22ca60fe38fa6c404dbcc">IPV4_ADDR_SAME</a> (&amp;lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>, &amp;ospf-&gt;<a class="code" href="structospf.html#acda9328f4f8627516f5c4942a45b4c25">router_id</a>))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a>(<span class="stringliteral">&quot;LSA[Type%d:%s]: Refresh router-LSA for Area %s&quot;</span>,
              lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a609df537f85c14e7146107e0cb67eae7">type</a>, inet_ntoa (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>), area_str);
      <a class="code" href="ospf__flood_8c.html#ad3049ba87364a6fbed7d352023e33a4a">ospf_lsa_flush_area</a> (lsa, area);
      <a class="code" href="ospf__lsa_8c.html#a268fc5c6673caf7ee94c0eaaa88455b8">ospf_lsa_unlock</a> (&amp;area-&gt;<a class="code" href="structospf__area.html#a53c30c4d48396f97336cf4e1ae4545e2">router_lsa_self</a>);
      area-&gt;<a class="code" href="structospf__area.html#a53c30c4d48396f97336cf4e1ae4545e2">router_lsa_self</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

      <span class="comment">/* Refresh router-LSA, (not install) and flood through area. */</span>
      <a class="code" href="ospf__lsa_8c.html#a66ad8a1fd151b43b11d7ec9650a644bf">ospf_router_lsa_timer_add</a> (area);
    }
      <span class="keywordflow">else</span>
    {
      rl = (<span class="keyword">struct </span><a class="code" href="structrouter__lsa.html">router_lsa</a> *) lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>;
      <span class="comment">/* Refresh router-LSA, (not install) and flood through area. */</span>
      if (rl-&gt;<a class="code" href="structrouter__lsa.html#a1fdd09ba13cd7ca0f1b1d694d2d839aa">flags</a> != ospf-&gt;<a class="code" href="structospf.html#a435f2a4e7119f86c682366f6319ce64f">flags</a>)
        <a class="code" href="ospf__lsa_8c.html#a66ad8a1fd151b43b11d7ec9650a644bf">ospf_router_lsa_timer_add</a> (area);
    }
    }

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6b4fcf9e272116dc362f9ef3f7066caf"></a><!-- doxytag: member="ospf_lsa.h::ospf_schedule_lsa_flood_area" ref="a6b4fcf9e272116dc362f9ef3f7066caf" args="(struct ospf_area *, struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_schedule_lsa_flood_area </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l03579">3579</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlsa__action.html">lsa_action</a> *<a class="code" href="dict_8c.html#a43a278d13284fb3412e9eee1db1d967e">data</a>;

  data = <a class="code" href="memory_8h.html#a7826e4ed1d152cad0666dcf43f11f663">XCALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba66fb9102d923b5abeecd720d1a6e1342">MTYPE_OSPF_MESSAGE</a>, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structlsa__action.html">lsa_action</a>));
  data-&gt;<a class="code" href="structlsa__action.html#a81079a909cd32f9abb9f4fc1d71c82f4">action</a> = <a class="code" href="ospf__lsa_8c.html#a0771b37557fd8283b02242fef0a3cde6">LSA_ACTION_FLOOD_AREA</a>;
  data-&gt;<a class="code" href="structlsa__action.html#aadabd29582be574d1435449db2549728">area</a> = <a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  data-&gt;<a class="code" href="structlsa__action.html#a32e411c8427242dd9b30498702559a88">lsa</a>  = <a class="code" href="ospf__lsa_8c.html#a312850eed27e83bb9f66d27bb5bfb144">ospf_lsa_lock</a> (<a class="code" href="structlsa__action.html#a32e411c8427242dd9b30498702559a88">lsa</a>); <span class="comment">/* Message / Flood area */</span>

  <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf__lsa_8c.html#ae43288239f3e631018a7d2320b76fc6b">ospf_lsa_action</a>, data, 0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab78229c09f8b10565e442ba4c5524cc9"></a><!-- doxytag: member="ospf_lsa.h::ospf_schedule_lsa_flush_area" ref="ab78229c09f8b10565e442ba4c5524cc9" args="(struct ospf_area *, struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_schedule_lsa_flush_area </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l03592">3592</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlsa__action.html">lsa_action</a> *<a class="code" href="dict_8c.html#a43a278d13284fb3412e9eee1db1d967e">data</a>;

  data = <a class="code" href="memory_8h.html#a7826e4ed1d152cad0666dcf43f11f663">XCALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba66fb9102d923b5abeecd720d1a6e1342">MTYPE_OSPF_MESSAGE</a>, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structlsa__action.html">lsa_action</a>));
  data-&gt;<a class="code" href="structlsa__action.html#a81079a909cd32f9abb9f4fc1d71c82f4">action</a> = <a class="code" href="ospf__lsa_8c.html#a880dbf45969502cf9f7b5b99a30a727d">LSA_ACTION_FLUSH_AREA</a>;
  data-&gt;<a class="code" href="structlsa__action.html#aadabd29582be574d1435449db2549728">area</a> = <a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  data-&gt;<a class="code" href="structlsa__action.html#a32e411c8427242dd9b30498702559a88">lsa</a>  = <a class="code" href="ospf__lsa_8c.html#a312850eed27e83bb9f66d27bb5bfb144">ospf_lsa_lock</a> (<a class="code" href="structlsa__action.html#a32e411c8427242dd9b30498702559a88">lsa</a>); <span class="comment">/* Message / Flush area */</span>

  <a class="code" href="thread_8h.html#a1067157ad59ad46f29bf87158dffc3de">thread_add_event</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf__lsa_8c.html#ae43288239f3e631018a7d2320b76fc6b">ospf_lsa_action</a>, data, 0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8510c3ddd9c757b499b9eab1608a73b9"></a><!-- doxytag: member="ospf_lsa.h::ospf_summary_asbr_lsa_originate" ref="a8510c3ddd9c757b499b9eab1608a73b9" args="(struct prefix_ipv4 *, u_int32_t, struct ospf_area *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_summary_asbr_lsa_originate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l01435">1435</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *<span class="keyword">new</span>;
  <span class="keyword">struct </span>in_addr <a class="code" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>;
  
  <span class="keywordtype">id</span> = <a class="code" href="ospf__lsa_8c.html#a3af5cb403d133f3276e5a744f03b309a">ospf_lsa_unique_id</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;ospf, <a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;lsdb, <a class="code" href="ospf__lsa_8h.html#a09d9e4a35705f96a15952c63088c0ccc">OSPF_ASBR_SUMMARY_LSA</a>, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);

  <span class="keywordflow">if</span> (<span class="keywordtype">id</span>.s_addr == 0xffffffff)
    {
      <span class="comment">/* Maybe Link State ID not available. */</span>
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d]: Link ID not available, can&#39;t originate&quot;</span>,
                    <a class="code" href="ospf__lsa_8h.html#a09d9e4a35705f96a15952c63088c0ccc">OSPF_ASBR_SUMMARY_LSA</a>);
      <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }
  
  <span class="comment">/* Create new summary-LSA instance. */</span>
  <span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#ac75ce3827118eaf0817aef1d5dee7322">ospf_summary_asbr_lsa_new</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, <a class="code" href="structmetric.html">metric</a>, <span class="keywordtype">id</span>);
  <span class="keywordflow">if</span> (!<span class="keyword">new</span>)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="comment">/* Install LSA to LSDB. */</span>
  <span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#a1733ac6eff32161699d5e9d80a893351">ospf_lsa_install</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;ospf, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>);
  
  <span class="comment">/* Update LSA origination count. */</span>
  <a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;ospf-&gt;lsa_originate_count++;

  <span class="comment">/* Flooding new LSA through area. */</span>
  <a class="code" href="ospf__flood_8c.html#aa350bf192623114dae7914a98325a71f">ospf_flood_through_area</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>);

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
    {
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: Originate summary-ASBR-LSA %p&quot;</span>,
         new-&gt;data-&gt;type, inet_ntoa (new-&gt;data-&gt;id), <span class="keyword">new</span>);
      <a class="code" href="ospf__dump_8c.html#a9f6f89130826976cb32a15187c88a397">ospf_lsa_header_dump</a> (new-&gt;data);
    }

  <span class="keywordflow">return</span> <span class="keyword">new</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="af23c4529d590add3e7bb1aec50c3b5aa"></a><!-- doxytag: member="ospf_lsa.h::ospf_summary_asbr_lsa_refresh" ref="af23c4529d590add3e7bb1aec50c3b5aa" args="(struct ospf *, struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_summary_asbr_lsa_refresh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l01477">1477</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *<span class="keyword">new</span>;
  <span class="keyword">struct </span><a class="code" href="structsummary__lsa.html">summary_lsa</a> *<a class="code" href="spgrid_8c.html#a1c244c66d157ebaf785a7d1368bf4a28">sl</a>;
  <span class="keyword">struct </span><a class="code" href="structprefix.html">prefix</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

  <span class="comment">/* Sanity check. */</span>
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (lsa-&gt;data);

  sl = (<span class="keyword">struct </span><a class="code" href="structsummary__lsa.html">summary_lsa</a> *)lsa-&gt;data;
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen = <a class="code" href="prefix_8c.html#ab83ffad6b766ddd0ef87e4da228c322d">ip_masklen</a> (sl-&gt;<a class="code" href="structsummary__lsa.html#a3e279837bb9ae312a172bda61fb24043">mask</a>);
  <span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#ac75ce3827118eaf0817aef1d5dee7322">ospf_summary_asbr_lsa_new</a> (lsa-&gt;area, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, <a class="code" href="ospf__lsa_8h.html#af484b7995c962cc7558d5fc385b835fc">GET_METRIC</a> (sl-&gt;<a class="code" href="structsummary__lsa.html#a0353f250382513bdfb5962e9c23f822a">metric</a>),
                   sl-&gt;<a class="code" href="structsummary__lsa.html#a78511b56eed6986c0288fa7da9c4b7a1">header</a>.<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>);
  <span class="keywordflow">if</span> (!<span class="keyword">new</span>)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  
  <span class="keyword">new</span>-&gt;data-&gt;ls_seqnum = <a class="code" href="ospf__lsa_8c.html#a0951db1fe1ad120fc1831443a9c834ca">lsa_seqnum_increment</a> (lsa);

  <a class="code" href="ospf__lsa_8c.html#a1733ac6eff32161699d5e9d80a893351">ospf_lsa_install</a> (<a class="code" href="structospf.html">ospf</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>);
  
  <span class="comment">/* Flood LSA through area. */</span>
  <a class="code" href="ospf__flood_8c.html#aa350bf192623114dae7914a98325a71f">ospf_flood_through_area</a> (new-&gt;area, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>);

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
    {
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: summary-ASBR-LSA refresh&quot;</span>,
         new-&gt;data-&gt;type, inet_ntoa (new-&gt;data-&gt;id));
      <a class="code" href="ospf__dump_8c.html#a9f6f89130826976cb32a15187c88a397">ospf_lsa_header_dump</a> (new-&gt;data);
    }

  <span class="keywordflow">return</span> <span class="keyword">new</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a106a6c8803287171f86977f17862cd1e"></a><!-- doxytag: member="ospf_lsa.h::ospf_summary_lsa_originate" ref="a106a6c8803287171f86977f17862cd1e" args="(struct prefix_ipv4 *, u_int32_t, struct ospf_area *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_summary_lsa_originate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l01289">1289</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *<span class="keyword">new</span>;
  <span class="keyword">struct </span>in_addr <a class="code" href="prefix_8h.html#a68c0ada54c6414ef00bca919465286ac">id</a>;
  
  <span class="keywordtype">id</span> = <a class="code" href="ospf__lsa_8c.html#a3af5cb403d133f3276e5a744f03b309a">ospf_lsa_unique_id</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;ospf, <a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;lsdb, <a class="code" href="ospf__lsa_8h.html#a3a501e86708401620a7a61e9920cd9bd">OSPF_SUMMARY_LSA</a>, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);

  <span class="keywordflow">if</span> (<span class="keywordtype">id</span>.s_addr == 0xffffffff)
    {
      <span class="comment">/* Maybe Link State ID not available. */</span>
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d]: Link ID not available, can&#39;t originate&quot;</span>,
                    <a class="code" href="ospf__lsa_8h.html#a3a501e86708401620a7a61e9920cd9bd">OSPF_SUMMARY_LSA</a>);
      <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }
  
  <span class="comment">/* Create new summary-LSA instance. */</span>
  <span class="keywordflow">if</span> ( !(<span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#aa1b062969828a13e6912c100de373fcd">ospf_summary_lsa_new</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, <a class="code" href="structmetric.html">metric</a>, <span class="keywordtype">id</span>)))
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="comment">/* Instlal LSA to LSDB. */</span>
  <span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#a1733ac6eff32161699d5e9d80a893351">ospf_lsa_install</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;ospf, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>);

  <span class="comment">/* Update LSA origination count. */</span>
  <a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;ospf-&gt;lsa_originate_count++;

  <span class="comment">/* Flooding new LSA through area. */</span>
  <a class="code" href="ospf__flood_8c.html#aa350bf192623114dae7914a98325a71f">ospf_flood_through_area</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>);

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
    {
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: Originate summary-LSA %p&quot;</span>,
         new-&gt;data-&gt;type, inet_ntoa (new-&gt;data-&gt;id), <span class="keyword">new</span>);
      <a class="code" href="ospf__dump_8c.html#a9f6f89130826976cb32a15187c88a397">ospf_lsa_header_dump</a> (new-&gt;data);
    }

  <span class="keywordflow">return</span> <span class="keyword">new</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a48c11a7b8192dc4fc5adfc2eb479447b"></a><!-- doxytag: member="ospf_lsa.h::ospf_summary_lsa_refresh" ref="a48c11a7b8192dc4fc5adfc2eb479447b" args="(struct ospf *, struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_summary_lsa_refresh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l01330">1330</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *<span class="keyword">new</span>;
  <span class="keyword">struct </span><a class="code" href="structsummary__lsa.html">summary_lsa</a> *<a class="code" href="spgrid_8c.html#a1c244c66d157ebaf785a7d1368bf4a28">sl</a>;
  <span class="keyword">struct </span><a class="code" href="structprefix.html">prefix</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  
  <span class="comment">/* Sanity check. */</span>
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (lsa-&gt;data);

  sl = (<span class="keyword">struct </span><a class="code" href="structsummary__lsa.html">summary_lsa</a> *)lsa-&gt;data;
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen = <a class="code" href="prefix_8c.html#ab83ffad6b766ddd0ef87e4da228c322d">ip_masklen</a> (sl-&gt;<a class="code" href="structsummary__lsa.html#a3e279837bb9ae312a172bda61fb24043">mask</a>);
  <span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#aa1b062969828a13e6912c100de373fcd">ospf_summary_lsa_new</a> (lsa-&gt;area, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, <a class="code" href="ospf__lsa_8h.html#af484b7995c962cc7558d5fc385b835fc">GET_METRIC</a> (sl-&gt;<a class="code" href="structsummary__lsa.html#a0353f250382513bdfb5962e9c23f822a">metric</a>),
                  sl-&gt;<a class="code" href="structsummary__lsa.html#a78511b56eed6986c0288fa7da9c4b7a1">header</a>.<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>);
  
  <span class="keywordflow">if</span> (!<span class="keyword">new</span>)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  
  <span class="keyword">new</span>-&gt;data-&gt;ls_seqnum = <a class="code" href="ospf__lsa_8c.html#a0951db1fe1ad120fc1831443a9c834ca">lsa_seqnum_increment</a> (lsa);

  <a class="code" href="ospf__lsa_8c.html#a1733ac6eff32161699d5e9d80a893351">ospf_lsa_install</a> (<a class="code" href="structospf.html">ospf</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>);
  
  <span class="comment">/* Flood LSA through AS. */</span>
  <a class="code" href="ospf__flood_8c.html#aa350bf192623114dae7914a98325a71f">ospf_flood_through_area</a> (new-&gt;area, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>);

  <span class="comment">/* Debug logging. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a065e478fcd8bd7a409804fc9e9e67e70">IS_DEBUG_OSPF</a> (lsa, LSA_GENERATE))
    {
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;LSA[Type%d:%s]: summary-LSA refresh&quot;</span>,
         new-&gt;data-&gt;type, inet_ntoa (new-&gt;data-&gt;id));
      <a class="code" href="ospf__dump_8c.html#a9f6f89130826976cb32a15187c88a397">ospf_lsa_header_dump</a> (new-&gt;data);
    }
  
  <span class="keywordflow">return</span> <span class="keyword">new</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a04e5b870febf5407013b1b8fbbd27017"></a><!-- doxytag: member="ospf_lsa.h::ospf_translated_nssa_compare" ref="a04e5b870febf5407013b1b8fbbd27017" args="(struct ospf_lsa *, struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_translated_nssa_compare </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a11507f11c7985cb569de8fbe0d62f843"></a><!-- doxytag: member="ospf_lsa.h::ospf_translated_nssa_originate" ref="a11507f11c7985cb569de8fbe0d62f843" args="(struct ospf *, struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_translated_nssa_originate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l01866">1866</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *<span class="keyword">new</span>;
  <span class="keyword">struct </span><a class="code" href="structas__external__lsa.html">as_external_lsa</a> *extnew;
  
  <span class="comment">/* we cant use ospf_external_lsa_originate() as we need to set</span>
<span class="comment">   * the OSPF_LSA_LOCAL_XLT flag, must originate by hand</span>
<span class="comment">   */</span>
  
  <span class="keywordflow">if</span> ( (<span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#a47659a8de2d310c23ffdb3852c9e3679">ospf_lsa_translated_nssa_new</a> (<a class="code" href="structospf.html">ospf</a>, type7)) == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_translated_nssa_originate(): Could not translate &quot;</span>
                 <span class="stringliteral">&quot;Type-7, Id %s, to Type-5&quot;</span>,
                 inet_ntoa (type7-&gt;data-&gt;id));
      <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }
    
  extnew = (<span class="keyword">struct </span><a class="code" href="structas__external__lsa.html">as_external_lsa</a> *)<span class="keyword">new</span>;
  
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
    {
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_translated_nssa_originate(): &quot;</span>
                 <span class="stringliteral">&quot;translated Type 7, installed:&quot;</span>);
      <a class="code" href="ospf__dump_8c.html#a9f6f89130826976cb32a15187c88a397">ospf_lsa_header_dump</a> (new-&gt;data);
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;   Network mask: %d&quot;</span>,<a class="code" href="prefix_8c.html#ab83ffad6b766ddd0ef87e4da228c322d">ip_masklen</a> (extnew-&gt;<a class="code" href="structas__external__lsa.html#aa860fac77968c497496d16df6d325651">mask</a>));
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;   Forward addr: %s&quot;</span>, inet_ntoa (extnew-&gt;<a class="code" href="structas__external__lsa.html#a51c29f7223123224ae18468efee20ee0">e</a>[0].<a class="code" href="structas__external__lsa.html#a5817fa032c9f6c8f23d975ec1c5dfa20">fwd_addr</a>));
    }
  
  <span class="keywordflow">if</span> ( (<span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#a1733ac6eff32161699d5e9d80a893351">ospf_lsa_install</a> (<a class="code" href="structospf.html">ospf</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>)) == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>);
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_lsa_translated_nssa_originate(): &quot;</span>
                   <span class="stringliteral">&quot;Could not install LSA &quot;</span>
                   <span class="stringliteral">&quot;id %s&quot;</span>, inet_ntoa (type7-&gt;data-&gt;id));
      <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }
    
  <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a4a3d13744fa4c72bfdab00cb7c7a3783">lsa_originate_count</a>++;
  <a class="code" href="ospf__flood_8c.html#a2169b7a36db2e596585f2d3242ac94b6">ospf_flood_through_as</a> (<a class="code" href="structospf.html">ospf</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>);

  <span class="keywordflow">return</span> <span class="keyword">new</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a29efa1b700697d250866e5f1296b0871"></a><!-- doxytag: member="ospf_lsa.h::ospf_translated_nssa_refresh" ref="a29efa1b700697d250866e5f1296b0871" args="(struct ospf *, struct ospf_lsa *, struct ospf_lsa *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a>* ospf_translated_nssa_refresh </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__lsa.html">ospf_lsa</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l01912">1912</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *<span class="keyword">new</span> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  
  <span class="comment">/* Sanity checks. */</span>
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (type7 || type5);
  <span class="keywordflow">if</span> (!(type7 || type5))
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">if</span> (type7)
    <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (type7-&gt;data);
  <span class="keywordflow">if</span> (type5)
    <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (type5-&gt;data);
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#ad20715ef15a9c610284474aa9f1df3bc">anyNSSA</a>);

  <span class="comment">/* get required data according to what has been given */</span>
  <span class="keywordflow">if</span> (type7 &amp;&amp; type5 == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="comment">/* find the translated Type-5 for this Type-7 */</span>
      <span class="keyword">struct </span><a class="code" href="structas__external__lsa.html">as_external_lsa</a> *<a class="code" href="spgrid_8c.html#a1425d79154ffdc9e1fa0e41d6e6c85b8">ext</a> = (<span class="keyword">struct </span><a class="code" href="structas__external__lsa.html">as_external_lsa</a> *)(type7-&gt;data);
      <span class="keyword">struct </span><a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a> = 
        { 
          .prefix = type7-&gt;data-&gt;id,
          .prefixlen = <a class="code" href="prefix_8c.html#ab83ffad6b766ddd0ef87e4da228c322d">ip_masklen</a> (ext-&gt;<a class="code" href="structas__external__lsa.html#aa860fac77968c497496d16df6d325651">mask</a>),
          .family = AF_INET,
        };

      type5 = <a class="code" href="ospf__asbr_8c.html#ad45c036a67747a7f65338b7ec6ff748d">ospf_external_info_find_lsa</a> (<a class="code" href="structospf.html">ospf</a>, &amp;p);
    }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type5 &amp;&amp; type7 == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="comment">/* find the type-7 from which supplied type-5 was translated,</span>
<span class="comment">       * ie find first type-7 with same LSA Id.</span>
<span class="comment">       */</span>
      <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *ln, *lnn;
      <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
      <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa;
      <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
          
      <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, ln, lnn, area))
        {
          <span class="keywordflow">if</span> (area-&gt;<a class="code" href="structospf__area.html#ac7c3a32e77b40506f5bc26209f41ab89">external_routing</a> != <a class="code" href="ospfd_8h.html#a871478d6ecced0907ee1f67c5dbacf99">OSPF_AREA_NSSA</a> 
              &amp;&amp; !type7)
            <span class="keywordflow">continue</span>;
            
          <a class="code" href="ospf__lsdb_8h.html#a3112a41cf80dfabbf2962e8df1b8504b">LSDB_LOOP</a> (<a class="code" href="ospf__lsdb_8h.html#aa704d331d2ac4e4034faca5c0f177364">NSSA_LSDB</a>(area), rn, lsa)
            {
              <span class="keywordflow">if</span> (lsa-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>-&gt;<a class="code" href="structlsa__header.html#a8f4602786c2de855a418b553a4555683">id</a>.s_addr == type5-&gt;data-&gt;id.s_addr)
                {
                  type7 = lsa;
                  <span class="keywordflow">break</span>;
                }
            }
        }
    }

  <span class="comment">/* do we have type7? */</span>
  <span class="keywordflow">if</span> (!type7)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_translated_nssa_refresh(): no Type-7 found for &quot;</span>
                   <span class="stringliteral">&quot;Type-5 LSA Id %s&quot;</span>,
                   inet_ntoa (type5-&gt;data-&gt;id));
      <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }

  <span class="comment">/* do we have valid translated type5? */</span>
  <span class="keywordflow">if</span> (type5 == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || !<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (type5-&gt;flags, <a class="code" href="ospf__lsa_8h.html#a20f98f1fb4931335ddf4dd15d8fe9040">OSPF_LSA_LOCAL_XLT</a>) )
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_translated_nssa_refresh(): No translated Type-5 &quot;</span>
                   <span class="stringliteral">&quot;found for Type-7 with Id %s&quot;</span>,
                   inet_ntoa (type7-&gt;data-&gt;id));
      <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }

  <span class="comment">/* Delete LSA from neighbor retransmit-list. */</span>
  <a class="code" href="ospf__flood_8c.html#add1aa73829326bf3733d0d442002cb95">ospf_ls_retransmit_delete_nbr_as</a> (<a class="code" href="structospf.html">ospf</a>, type5);
  
  <span class="comment">/* create new translated LSA */</span>
  <span class="keywordflow">if</span> ( (<span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#a47659a8de2d310c23ffdb3852c9e3679">ospf_lsa_translated_nssa_new</a> (<a class="code" href="structospf.html">ospf</a>, type7)) == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_translated_nssa_refresh(): Could not translate &quot;</span>
                   <span class="stringliteral">&quot;Type-7 for %s to Type-5&quot;</span>,
                   inet_ntoa (type7-&gt;data-&gt;id));
      <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }

  <span class="keywordflow">if</span> ( !(<span class="keyword">new</span> = <a class="code" href="ospf__lsa_8c.html#a1733ac6eff32161699d5e9d80a893351">ospf_lsa_install</a> (<a class="code" href="structospf.html">ospf</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>)) )
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a181c69f5e384d952ea4908799967534a">IS_DEBUG_OSPF_NSSA</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_translated_nssa_refresh(): Could not install &quot;</span>
                   <span class="stringliteral">&quot;translated LSA, Id %s&quot;</span>,
                   inet_ntoa (type7-&gt;data-&gt;id));
      <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }
  
  <span class="comment">/* Flood LSA through area. */</span>
  <a class="code" href="ospf__flood_8c.html#a2169b7a36db2e596585f2d3242ac94b6">ospf_flood_through_as</a> (<a class="code" href="structospf.html">ospf</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">new</span>);

  <span class="keywordflow">return</span> <span class="keyword">new</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a98c0d67e652f81a5529f74f8eb4a934f"></a><!-- doxytag: member="ospf_lsa.h::tv_add" ref="a98c0d67e652f81a5529f74f8eb4a934f" args="(struct timeval, struct timeval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timeval tv_add </td>
          <td>(</td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00111">111</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span>timeval ret;

  ret.tv_sec = <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>.tv_sec + <a class="code" href="ripng__nexthop_8h.html#a337ad8a7e52da2d584c2018f2ec2c81e">b</a>.tv_sec;
  ret.tv_usec = <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>.tv_usec + <a class="code" href="ripng__nexthop_8h.html#a337ad8a7e52da2d584c2018f2ec2c81e">b</a>.tv_usec;

  <span class="keywordflow">return</span> <a class="code" href="ospf__lsa_8c.html#ace21ae195421265bf16acf3d6d07f32b">tv_adjust</a> (ret);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a27f96d4b01a4406a6aba16fa17a9dac1"></a><!-- doxytag: member="ospf_lsa.h::tv_adjust" ref="a27f96d4b01a4406a6aba16fa17a9dac1" args="(struct timeval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timeval tv_adjust </td>
          <td>(</td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00066">66</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">while</span> (<a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>.tv_usec &gt;= 1000000)
    {
      <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>.tv_usec -= 1000000;
      <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>.tv_sec++;
    }

  <span class="keywordflow">while</span> (<a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>.tv_usec &lt; 0)
    {
      <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>.tv_usec += 1000000;
      <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>.tv_sec--;
    }

  <span class="keywordflow">return</span> <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac75d18dfecd52e7f9fd066aafd9a30c5"></a><!-- doxytag: member="ospf_lsa.h::tv_ceil" ref="ac75d18dfecd52e7f9fd066aafd9a30c5" args="(struct timeval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tv_ceil </td>
          <td>(</td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00084">84</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a> = <a class="code" href="ospf__lsa_8c.html#ace21ae195421265bf16acf3d6d07f32b">tv_adjust</a> (a);

  <span class="keywordflow">return</span> (<a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>.tv_usec ? <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>.tv_sec + 1 : <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>.tv_sec);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af21c082323ef9fa0771031b9c5537101"></a><!-- doxytag: member="ospf_lsa.h::tv_cmp" ref="af21c082323ef9fa0771031b9c5537101" args="(struct timeval, struct timeval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tv_cmp </td>
          <td>(</td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00133">133</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> (<a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>.tv_sec == <a class="code" href="ripng__nexthop_8h.html#a337ad8a7e52da2d584c2018f2ec2c81e">b</a>.tv_sec ?
      <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>.tv_usec - <a class="code" href="ripng__nexthop_8h.html#a337ad8a7e52da2d584c2018f2ec2c81e">b</a>.tv_usec : <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>.tv_sec - <a class="code" href="ripng__nexthop_8h.html#a337ad8a7e52da2d584c2018f2ec2c81e">b</a>.tv_sec);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa82e4baf2a0b6799fd3f59d01ebf6db7"></a><!-- doxytag: member="ospf_lsa.h::tv_floor" ref="aa82e4baf2a0b6799fd3f59d01ebf6db7" args="(struct timeval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tv_floor </td>
          <td>(</td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00092">92</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a> = <a class="code" href="ospf__lsa_8c.html#ace21ae195421265bf16acf3d6d07f32b">tv_adjust</a> (a);

  <span class="keywordflow">return</span> <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>.tv_sec;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae592541db9f1c212440cf1c03755d7f3"></a><!-- doxytag: member="ospf_lsa.h::tv_sub" ref="ae592541db9f1c212440cf1c03755d7f3" args="(struct timeval, struct timeval)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timeval tv_sub </td>
          <td>(</td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__lsa_8c_source.html#l00122">122</a> of file <a class="el" href="ospf__lsa_8c_source.html">ospf_lsa.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span>timeval ret;

  ret.tv_sec = <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>.tv_sec - <a class="code" href="ripng__nexthop_8h.html#a337ad8a7e52da2d584c2018f2ec2c81e">b</a>.tv_sec;
  ret.tv_usec = <a class="code" href="ripng__nexthop_8h.html#aa9b8e98b3989bdffd7f36b281c72a693">a</a>.tv_usec - <a class="code" href="ripng__nexthop_8h.html#a337ad8a7e52da2d584c2018f2ec2c81e">b</a>.tv_usec;

  <span class="keywordflow">return</span> <a class="code" href="ospf__lsa_8c.html#ace21ae195421265bf16acf3d6d07f32b">tv_adjust</a> (ret);
}
</pre></div>
</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="ospf__lsa_8h.html">ospf_lsa.h</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:29 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
