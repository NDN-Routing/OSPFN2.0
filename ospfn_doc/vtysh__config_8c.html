<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: vtysh/vtysh_config.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('vtysh__config_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">vtysh/vtysh_config.c File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="zebra_8h_source.html">zebra.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="command_8h_source.html">command.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="linklist_8h_source.html">linklist.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="memory_8h_source.html">memory.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="vtysh_8h_source.html">vtysh/vtysh.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for vtysh_config.c:</div>
<div class="dyncontent">
<div class="center"><img src="vtysh__config_8c__incl.png" border="0" usemap="#vtysh_2vtysh__config_8c" alt=""/></div>
<map name="vtysh_2vtysh__config_8c" id="vtysh_2vtysh__config_8c">
<area shape="rect" id="node3" href="zebra_8h.html" title="zebra.h" alt="" coords="1345,80,1412,107"/><area shape="rect" id="node61" href="command_8h.html" title="command.h" alt="" coords="2875,80,2967,107"/><area shape="rect" id="node74" href="linklist_8h.html" title="linklist.h" alt="" coords="2991,80,3061,107"/><area shape="rect" id="node76" href="memory_8h.html" title="memory.h" alt="" coords="3087,80,3169,107"/><area shape="rect" id="node80" href="vtysh_8h.html" title="vtysh/vtysh.h" alt="" coords="3194,80,3296,107"/><area shape="rect" id="node57" href="zassert_8h.html" title="zassert.h" alt="" coords="2623,155,2700,181"/><area shape="rect" id="node59" href="str_8h.html" title="str.h" alt="" coords="2725,155,2773,181"/><area shape="rect" id="node63" href="vector_8h.html" title="vector.h" alt="" coords="2799,155,2871,181"/><area shape="rect" id="node65" href="vty_8h.html" title="vty.h" alt="" coords="2895,155,2947,181"/><area shape="rect" id="node72" href="route__types_8h.html" title="lib/route_types.h" alt="" coords="2971,155,3095,181"/><area shape="rect" id="node67" href="thread_8h.html" title="thread.h" alt="" coords="2799,229,2871,256"/><area shape="rect" id="node69" href="log_8h.html" title="log.h" alt="" coords="2895,229,2947,256"/><area shape="rect" id="node78" href="memtypes_8h.html" title="lib/memtypes.h" alt="" coords="3120,155,3235,181"/></map>
</div>
</div>
<p><a href="vtysh__config_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structconfig.html">config</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#ac8e12adaeb85e59f541dab5acce7ea54">NO_DELIMITER</a>(I)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#a6557e0153eb1c1745ea182d13d8f0269">line_cmp</a> (char *c1, char *c2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#a268b5c73afc582950691fc0d8b6811f9">line_del</a> (char *line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structconfig.html">config</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#adbe7c0222482735d4275a1ff19511e9c">config_new</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#abba59f32bad9ebe6279f8aa87f76c8b9">config_cmp</a> (struct <a class="el" href="structconfig.html">config</a> *c1, struct <a class="el" href="structconfig.html">config</a> *c2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#a23a15d1c919f14521f0f4cf8b27af31e">config_del</a> (struct <a class="el" href="structconfig.html">config</a> *<a class="el" href="structconfig.html">config</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structconfig.html">config</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (int index, const char *line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#a2f5e8a3367a0387acb0dd3dc0298ff16">config_add_line</a> (struct <a class="el" href="structlist.html">list</a> *<a class="el" href="structconfig.html">config</a>, const char *line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#adf7ee39ec528478aa75d97c159d74bb0">config_add_line_uniq</a> (struct <a class="el" href="structlist.html">list</a> *<a class="el" href="structconfig.html">config</a>, const char *line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#abb99093276220ff4f86687c3979af512">vtysh_config_parse_line</a> (const char *line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#ac7b6fe49f66138eb146ac7fb23439893">vtysh_config_parse</a> (char *line)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#a473100033a7b54b6e23480af02174cd4">vtysh_config_dump</a> (FILE *fp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#aa3504a83e654b85ea5e9d52a0ff24878">vtysh_read_file</a> (FILE *confp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#a2d5ea6c2a97a8c021dfbba7d1b901cdf">vtysh_read_config</a> (char *config_default_dir)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#a91fa390503533d9788fb135882776ba7">vtysh_config_write</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#a78d32d8d99176f6ed44c750918e86b43">vtysh_config_init</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="vector_8h.html#a7fe85bb4f5ec8665f4ef33dab2fdc2db">vector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#a792dadf96aff95127bd5232a9d79f5aa">configvec</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#a7b75b9e8f63b3edb257192b65ff12ac7">vtysh_writeconfig_integrated</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlist.html">list</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vtysh__config_8c.html#a90c87b8eea10b531951fff29089a3183">config_top</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ac8e12adaeb85e59f541dab5acce7ea54"></a><!-- doxytag: member="vtysh_config.c::NO_DELIMITER" ref="ac8e12adaeb85e59f541dab5acce7ea54" args="(I)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NO_DELIMITER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">I</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">((<a class="code" href="md5_8c.html#aa33f2e8f2d68506493eccef4bc022cb5">I</a>) == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ae806fc228c2ba88d9b33ab3ae68019aa">ACCESS_NODE</a> || (<a class="code" href="md5_8c.html#aa33f2e8f2d68506493eccef4bc022cb5">I</a>) == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682aa78f0d8ad632def29091e10567cf3a16">PREFIX_NODE</a> || (<a class="code" href="md5_8c.html#aa33f2e8f2d68506493eccef4bc022cb5">I</a>) == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682adafbb26bf3b8466e3650a35d29a0e528">IP_NODE</a> \
   || (<a class="code" href="md5_8c.html#aa33f2e8f2d68506493eccef4bc022cb5">I</a>) == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a9de2b881538121d08176e571f809ca3e">AS_LIST_NODE</a> || (<a class="code" href="md5_8c.html#aa33f2e8f2d68506493eccef4bc022cb5">I</a>) == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50bb47a450b76fefe234dcca5205f931">COMMUNITY_LIST_NODE</a> || \
   (<a class="code" href="md5_8c.html#aa33f2e8f2d68506493eccef4bc022cb5">I</a>) == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ac108432039855372bd806df6259a21d1">ACCESS_IPV6_NODE</a> || (<a class="code" href="md5_8c.html#aa33f2e8f2d68506493eccef4bc022cb5">I</a>) == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a5972acab3e98c0a9eb99bdd89b02b5d8">PREFIX_IPV6_NODE</a> \
   || (<a class="code" href="md5_8c.html#aa33f2e8f2d68506493eccef4bc022cb5">I</a>) == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a08f3c0e0d651e5835e84cac733ba7d88">SERVICE_NODE</a> || (<a class="code" href="md5_8c.html#aa33f2e8f2d68506493eccef4bc022cb5">I</a>) == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a2e962d19f03c7e6249023fe5f1f311ce">FORWARDING_NODE</a> || (<a class="code" href="md5_8c.html#aa33f2e8f2d68506493eccef4bc022cb5">I</a>) == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a6528486974fa9575be1ad0e96261f7be">DEBUG_NODE</a> \
   || (<a class="code" href="md5_8c.html#aa33f2e8f2d68506493eccef4bc022cb5">I</a>) == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a75f8c1cca576850deb9f2e829ba61705">AAA_NODE</a>)
</pre></div>
<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00288">288</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a2f5e8a3367a0387acb0dd3dc0298ff16"></a><!-- doxytag: member="vtysh_config.c::config_add_line" ref="a2f5e8a3367a0387acb0dd3dc0298ff16" args="(struct list *config, const char *line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void config_add_line </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlist.html">list</a> *&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00125">125</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="linklist_8c.html#adb2a0478aba995441aaf691d1f6fe5db">listnode_add</a> (config, <a class="code" href="memory_8h.html#aa7c561b5824edc16351f22b8df155c0e">XSTRDUP</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167baece70bf291f5c14c0777d44c9d68a16c">MTYPE_VTYSH_CONFIG_LINE</a>, line));
}
</pre></div>
</div>
</div>
<a class="anchor" id="adf7ee39ec528478aa75d97c159d74bb0"></a><!-- doxytag: member="vtysh_config.c::config_add_line_uniq" ref="adf7ee39ec528478aa75d97c159d74bb0" args="(struct list *config, const char *line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void config_add_line_uniq </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlist.html">list</a> *&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00131">131</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keywordtype">char</span> *pnt;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (config, node, nnode, pnt))
    {
      <span class="keywordflow">if</span> (strcmp (pnt, line) == 0)
    <span class="keywordflow">return</span>;
    }
  <a class="code" href="linklist_8c.html#abfe4a1419e46dc9e1235dcbe6b52a022">listnode_add_sort</a> (config, <a class="code" href="memory_8h.html#aa7c561b5824edc16351f22b8df155c0e">XSTRDUP</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167baece70bf291f5c14c0777d44c9d68a16c">MTYPE_VTYSH_CONFIG_LINE</a>, line));
}
</pre></div>
</div>
</div>
<a class="anchor" id="abba59f32bad9ebe6279f8aa87f76c8b9"></a><!-- doxytag: member="vtysh_config.c::config_cmp" ref="abba59f32bad9ebe6279f8aa87f76c8b9" args="(struct config *c1, struct config *c2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int config_cmp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structconfig.html">config</a> *&#160;</td>
          <td class="paramname"><em>c1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structconfig.html">config</a> *&#160;</td>
          <td class="paramname"><em>c2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00071">71</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> strcmp (c1-&gt;<a class="code" href="structconfig.html#a9f766c1a57e7c4dee4c9ea928c1ce91c">name</a>, c2-&gt;<a class="code" href="structconfig.html#a9f766c1a57e7c4dee4c9ea928c1ce91c">name</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a23a15d1c919f14521f0f4cf8b27af31e"></a><!-- doxytag: member="vtysh_config.c::config_del" ref="a23a15d1c919f14521f0f4cf8b27af31e" args="(struct config *config)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void config_del </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structconfig.html">config</a> *&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00077">77</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="linklist_8c.html#ab5fdf1a904264be077ce19a432b1b119">list_delete</a> (config-&gt;<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
  <span class="keywordflow">if</span> (config-&gt;<a class="code" href="structconfig.html#a9f766c1a57e7c4dee4c9ea928c1ce91c">name</a>)
    <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167baece70bf291f5c14c0777d44c9d68a16c">MTYPE_VTYSH_CONFIG_LINE</a>, config-&gt;<a class="code" href="structconfig.html#a9f766c1a57e7c4dee4c9ea928c1ce91c">name</a>);
  <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167baec881c772fd3bfeeb712241782293a34">MTYPE_VTYSH_CONFIG</a>, config);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1c102f4ab2cd340f767234cd1944014b"></a><!-- doxytag: member="vtysh_config.c::config_get" ref="a1c102f4ab2cd340f767234cd1944014b" args="(int index, const char *line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structconfig.html">config</a>* config_get </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00086">86</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structconfig.html">config</a> *<a class="code" href="command_8c.html#a6ab108e8a77e1ecf7b2d2c319125e53d">config</a>;
  <span class="keyword">struct </span>config *config_loop;
  <span class="keyword">struct </span><a class="code" href="structlist.html">list</a> *<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;

  config = config_loop = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  master = <a class="code" href="vector_8c.html#a346c9866c235d928f4633c192a9da52b">vector_lookup_ensure</a> (<a class="code" href="vtysh__config_8c.html#a792dadf96aff95127bd5232a9d79f5aa">configvec</a>, index);

  <span class="keywordflow">if</span> (! master)
    {
      master = <a class="code" href="linklist_8c.html#af156f4ae343ef4a625f75b6c38845aef">list_new</a> ();
      master-&gt;<a class="code" href="structlist.html#ac4fd9a331fe65f4c0891aa35bf84a6f5">del</a> = (void (*) (<span class="keywordtype">void</span> *))<a class="code" href="vtysh__config_8c.html#a23a15d1c919f14521f0f4cf8b27af31e">config_del</a>;
      master-&gt;<a class="code" href="structlist.html#af19c9d07985ca8f95f0098bb0ef98f66">cmp</a> = (int (*)(<span class="keywordtype">void</span> *, <span class="keywordtype">void</span> *)) <a class="code" href="vtysh__config_8c.html#abba59f32bad9ebe6279f8aa87f76c8b9">config_cmp</a>;
      <a class="code" href="vector_8c.html#a4ab15201b63a93279459a6d3d90600e5">vector_set_index</a> (<a class="code" href="vtysh__config_8c.html#a792dadf96aff95127bd5232a9d79f5aa">configvec</a>, index, master);
    }
  
  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (master, node, nnode, config_loop))
    {
      <span class="keywordflow">if</span> (strcmp (config_loop-&gt;<a class="code" href="structconfig.html#a9f766c1a57e7c4dee4c9ea928c1ce91c">name</a>, line) == 0)
    config = config_loop;
    }

  <span class="keywordflow">if</span> (! config)
    {
      config = <a class="code" href="vtysh__config_8c.html#adbe7c0222482735d4275a1ff19511e9c">config_new</a> ();
      config-&gt;<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a> = <a class="code" href="linklist_8c.html#af156f4ae343ef4a625f75b6c38845aef">list_new</a> ();
      config-&gt;<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>-&gt;<a class="code" href="structlist.html#ac4fd9a331fe65f4c0891aa35bf84a6f5">del</a> = (void (*) (<span class="keywordtype">void</span> *))<a class="code" href="vtysh__config_8c.html#a268b5c73afc582950691fc0d8b6811f9">line_del</a>;
      config-&gt;<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>-&gt;<a class="code" href="structlist.html#af19c9d07985ca8f95f0098bb0ef98f66">cmp</a> = (int (*)(<span class="keywordtype">void</span> *, <span class="keywordtype">void</span> *)) <a class="code" href="vtysh__config_8c.html#a6557e0153eb1c1745ea182d13d8f0269">line_cmp</a>;
      config-&gt;<a class="code" href="structconfig.html#a9f766c1a57e7c4dee4c9ea928c1ce91c">name</a> = <a class="code" href="memory_8h.html#aa7c561b5824edc16351f22b8df155c0e">XSTRDUP</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167baece70bf291f5c14c0777d44c9d68a16c">MTYPE_VTYSH_CONFIG_LINE</a>, line);
      config-&gt;<a class="code" href="structconfig.html#a58eb433fffe12a0153ead8370ebd59a6">index</a> = index;
      <a class="code" href="linklist_8c.html#adb2a0478aba995441aaf691d1f6fe5db">listnode_add</a> (master, config);
    }
  <span class="keywordflow">return</span> <a class="code" href="command_8c.html#a6ab108e8a77e1ecf7b2d2c319125e53d">config</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adbe7c0222482735d4275a1ff19511e9c"></a><!-- doxytag: member="vtysh_config.c::config_new" ref="adbe7c0222482735d4275a1ff19511e9c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structconfig.html">config</a>* config_new </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00063">63</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structconfig.html">config</a> *<a class="code" href="command_8c.html#a6ab108e8a77e1ecf7b2d2c319125e53d">config</a>;
  config = <a class="code" href="memory_8h.html#a7826e4ed1d152cad0666dcf43f11f663">XCALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167baec881c772fd3bfeeb712241782293a34">MTYPE_VTYSH_CONFIG</a>, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> config));
  <span class="keywordflow">return</span> <a class="code" href="command_8c.html#a6ab108e8a77e1ecf7b2d2c319125e53d">config</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6557e0153eb1c1745ea182d13d8f0269"></a><!-- doxytag: member="vtysh_config.c::line_cmp" ref="a6557e0153eb1c1745ea182d13d8f0269" args="(char *c1, char *c2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int line_cmp </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>c1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>c2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00051">51</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> strcmp (c1, c2);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a268b5c73afc582950691fc0d8b6811f9"></a><!-- doxytag: member="vtysh_config.c::line_del" ref="a268b5c73afc582950691fc0d8b6811f9" args="(char *line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void line_del </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>line</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00057">57</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167baece70bf291f5c14c0777d44c9d68a16c">MTYPE_VTYSH_CONFIG_LINE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a473100033a7b54b6e23480af02174cd4"></a><!-- doxytag: member="vtysh_config.c::vtysh_config_dump" ref="a473100033a7b54b6e23480af02174cd4" args="(FILE *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vtysh_config_dump </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00297">297</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *mnode, *mnnode;
  <span class="keyword">struct </span><a class="code" href="structconfig.html">config</a> *<a class="code" href="command_8c.html#a6ab108e8a77e1ecf7b2d2c319125e53d">config</a>;
  <span class="keyword">struct </span><a class="code" href="structlist.html">list</a> *<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>;
  <span class="keywordtype">char</span> *line;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (<a class="code" href="vtysh__config_8c.html#a90c87b8eea10b531951fff29089a3183">config_top</a>, node, nnode, line))
    {
      fprintf (fp, <span class="stringliteral">&quot;%s\n&quot;</span>, line);
      fflush (fp);
    }
  fprintf (fp, <span class="stringliteral">&quot;!\n&quot;</span>);
  fflush (fp);

  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="vector_8h.html#ac96b7beddf251a81df131543d06d63c7">vector_active</a> (<a class="code" href="vtysh__config_8c.html#a792dadf96aff95127bd5232a9d79f5aa">configvec</a>); i++)
    <span class="keywordflow">if</span> ((master = <a class="code" href="vector_8h.html#a34cb4a77fbd6ab6cb23707cdd1c4c0d2">vector_slot</a> (<a class="code" href="vtysh__config_8c.html#a792dadf96aff95127bd5232a9d79f5aa">configvec</a>, i)) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
      {
    <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (master, node, nnode, config))
      {
        fprintf (fp, <span class="stringliteral">&quot;%s\n&quot;</span>, config-&gt;<a class="code" href="structconfig.html#a9f766c1a57e7c4dee4c9ea928c1ce91c">name</a>);
        fflush (fp);

        <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (config-&gt;<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, mnode, mnnode, line))
          {
        fprintf  (fp, <span class="stringliteral">&quot;%s\n&quot;</span>, line);
        fflush (fp);
          }
        <span class="keywordflow">if</span> (! <a class="code" href="vtysh__config_8c.html#ac8e12adaeb85e59f541dab5acce7ea54">NO_DELIMITER</a> (i))
          {
        fprintf (fp, <span class="stringliteral">&quot;!\n&quot;</span>);
        fflush (fp);
          }
      }
    <span class="keywordflow">if</span> (<a class="code" href="vtysh__config_8c.html#ac8e12adaeb85e59f541dab5acce7ea54">NO_DELIMITER</a> (i))
      {
        fprintf (fp, <span class="stringliteral">&quot;!\n&quot;</span>);
        fflush (fp);
      }
      }

  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="vector_8h.html#ac96b7beddf251a81df131543d06d63c7">vector_active</a> (<a class="code" href="vtysh__config_8c.html#a792dadf96aff95127bd5232a9d79f5aa">configvec</a>); i++)
    <span class="keywordflow">if</span> ((master = <a class="code" href="vector_8h.html#a34cb4a77fbd6ab6cb23707cdd1c4c0d2">vector_slot</a> (<a class="code" href="vtysh__config_8c.html#a792dadf96aff95127bd5232a9d79f5aa">configvec</a>, i)) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
      {
    <a class="code" href="linklist_8c.html#ab5fdf1a904264be077ce19a432b1b119">list_delete</a> (master);
    <a class="code" href="vector_8h.html#a34cb4a77fbd6ab6cb23707cdd1c4c0d2">vector_slot</a> (<a class="code" href="vtysh__config_8c.html#a792dadf96aff95127bd5232a9d79f5aa">configvec</a>, i) = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
      }
  <a class="code" href="linklist_8c.html#acd6daa4be8ab3f175376e63c9d9c9500">list_delete_all_node</a> (<a class="code" href="vtysh__config_8c.html#a90c87b8eea10b531951fff29089a3183">config_top</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a78d32d8d99176f6ed44c750918e86b43"></a><!-- doxytag: member="vtysh_config.c::vtysh_config_init" ref="a78d32d8d99176f6ed44c750918e86b43" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vtysh_config_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00426">426</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="vtysh__config_8c.html#a90c87b8eea10b531951fff29089a3183">config_top</a> = <a class="code" href="linklist_8c.html#af156f4ae343ef4a625f75b6c38845aef">list_new</a> ();
  <a class="code" href="vtysh__config_8c.html#a90c87b8eea10b531951fff29089a3183">config_top</a>-&gt;<a class="code" href="structlist.html#ac4fd9a331fe65f4c0891aa35bf84a6f5">del</a> = (void (*) (<span class="keywordtype">void</span> *))<a class="code" href="vtysh__config_8c.html#a268b5c73afc582950691fc0d8b6811f9">line_del</a>;
  <a class="code" href="vtysh__config_8c.html#a792dadf96aff95127bd5232a9d79f5aa">configvec</a> = <a class="code" href="vector_8c.html#ae6a929ac3530de06eee1df3629d15247">vector_init</a> (1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac7b6fe49f66138eb146ac7fb23439893"></a><!-- doxytag: member="vtysh_config.c::vtysh_config_parse" ref="ac7b6fe49f66138eb146ac7fb23439893" args="(char *line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vtysh_config_parse </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>line</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00264">264</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span> *begin;
  <span class="keywordtype">char</span> *pnt;
  
  begin = pnt = line;

  <span class="keywordflow">while</span> (*pnt != <span class="charliteral">&#39;\0&#39;</span>)
    {
      <span class="keywordflow">if</span> (*pnt == <span class="charliteral">&#39;\n&#39;</span>)
    {
      *pnt++ = <span class="charliteral">&#39;\0&#39;</span>;
      <a class="code" href="vtysh__config_8c.html#abb99093276220ff4f86687c3979af512">vtysh_config_parse_line</a> (begin);
      begin = pnt;
    }
      <span class="keywordflow">else</span>
    {
      pnt++;
    }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="abb99093276220ff4f86687c3979af512"></a><!-- doxytag: member="vtysh_config.c::vtysh_config_parse_line" ref="abb99093276220ff4f86687c3979af512" args="(const char *line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vtysh_config_parse_line </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>line</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00145">145</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span> c;
  <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structconfig.html">config</a> *<a class="code" href="structconfig.html">config</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">if</span> (! <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>)
    <span class="keywordflow">return</span>;

  c = <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>[0];

  <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;\0&#39;</span>)
    <span class="keywordflow">return</span>;

  <span class="comment">/* printf (&quot;[%s]\n&quot;, line); */</span>

  <span class="keywordflow">switch</span> (c)
    {
    <span class="keywordflow">case</span> <span class="charliteral">&#39;!&#39;</span>:
    <span class="keywordflow">case</span> <span class="charliteral">&#39;#&#39;</span>:
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <span class="charliteral">&#39; &#39;</span>:
      <span class="comment">/* Store line to current configuration. */</span>
      <span class="keywordflow">if</span> (config)
    {
      <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot; address-family vpnv4&quot;</span>,
          strlen (<span class="stringliteral">&quot; address-family vpnv4&quot;</span>)) == 0)
        config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a7d6209ce7672734b4681adb05e925e08">BGP_VPNV4_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot; address-family ipv4 multicast&quot;</span>,
           strlen (<span class="stringliteral">&quot; address-family ipv4 multicast&quot;</span>)) == 0)
        config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a0f046c161a229e71ed9da963e29c961d">BGP_IPV4M_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot; address-family ipv6&quot;</span>,
           strlen (<span class="stringliteral">&quot; address-family ipv6&quot;</span>)) == 0)
        config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ad40fb52980325d9440b23b5f86701ffc">BGP_IPV6_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (config-&gt;<a class="code" href="structconfig.html#a58eb433fffe12a0153ead8370ebd59a6">index</a> == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a6488e3f7329874893b68bb22f6c6fed0">RMAP_NODE</a> ||
               config-&gt;<a class="code" href="structconfig.html#a58eb433fffe12a0153ead8370ebd59a6">index</a> == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a> ||
           config-&gt;<a class="code" href="structconfig.html#a58eb433fffe12a0153ead8370ebd59a6">index</a> == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a42e5cebd0265d2c03a8da6fa220e11c6">VTY_NODE</a>)
        <a class="code" href="vtysh__config_8c.html#adf7ee39ec528478aa75d97c159d74bb0">config_add_line_uniq</a> (config-&gt;<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span>
        <a class="code" href="vtysh__config_8c.html#a2f5e8a3367a0387acb0dd3dc0298ff16">config_add_line</a> (config-&gt;<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
    }
      <span class="keywordflow">else</span>
    <a class="code" href="vtysh__config_8c.html#a2f5e8a3367a0387acb0dd3dc0298ff16">config_add_line</a> (<a class="code" href="vtysh__config_8c.html#a90c87b8eea10b531951fff29089a3183">config_top</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
      <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;interface&quot;</span>, strlen (<span class="stringliteral">&quot;interface&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab6c1e2776b59860b606da9864e608e39">INTERFACE_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;router-id&quot;</span>, strlen (<span class="stringliteral">&quot;router-id&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682af7fc20f627618eee254477289b890df3">ZEBRA_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;router rip&quot;</span>, strlen (<span class="stringliteral">&quot;router rip&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682aba91035637d2e661aaea111ea200751a">RIP_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;router ripng&quot;</span>, strlen (<span class="stringliteral">&quot;router ripng&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a54754d9b49687991ae5cf0ba4d32dab2">RIPNG_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;router ospf&quot;</span>, strlen (<span class="stringliteral">&quot;router ospf&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a53037feb34b636b5cabbcdb85698ac35">OSPF_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;router ospf6&quot;</span>, strlen (<span class="stringliteral">&quot;router ospf6&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a3e34f801d98de220164f1a6b7976d3c4">OSPF6_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;router bgp&quot;</span>, strlen (<span class="stringliteral">&quot;router bgp&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a7493d9d6392a7010c13aa962093436a7">BGP_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;router isis&quot;</span>, strlen (<span class="stringliteral">&quot;router isis&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab25ba1a66148ff64a7b5aa681cc8c2dd">ISIS_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;router bgp&quot;</span>, strlen (<span class="stringliteral">&quot;router bgp&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a7493d9d6392a7010c13aa962093436a7">BGP_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;route-map&quot;</span>, strlen (<span class="stringliteral">&quot;route-map&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a6488e3f7329874893b68bb22f6c6fed0">RMAP_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;access-list&quot;</span>, strlen (<span class="stringliteral">&quot;access-list&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ae806fc228c2ba88d9b33ab3ae68019aa">ACCESS_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;ipv6 access-list&quot;</span>,
           strlen (<span class="stringliteral">&quot;ipv6 access-list&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ac108432039855372bd806df6259a21d1">ACCESS_IPV6_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;ip prefix-list&quot;</span>,
           strlen (<span class="stringliteral">&quot;ip prefix-list&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682aa78f0d8ad632def29091e10567cf3a16">PREFIX_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;ipv6 prefix-list&quot;</span>,
           strlen (<span class="stringliteral">&quot;ipv6 prefix-list&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a5972acab3e98c0a9eb99bdd89b02b5d8">PREFIX_IPV6_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;ip as-path access-list&quot;</span>,
           strlen (<span class="stringliteral">&quot;ip as-path access-list&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a9de2b881538121d08176e571f809ca3e">AS_LIST_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;ip community-list&quot;</span>,
           strlen (<span class="stringliteral">&quot;ip community-list&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50bb47a450b76fefe234dcca5205f931">COMMUNITY_LIST_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;ip route&quot;</span>, strlen (<span class="stringliteral">&quot;ip route&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682adafbb26bf3b8466e3650a35d29a0e528">IP_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;ipv6 route&quot;</span>, strlen (<span class="stringliteral">&quot;ipv6 route&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682adafbb26bf3b8466e3650a35d29a0e528">IP_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;key&quot;</span>, strlen (<span class="stringliteral">&quot;key&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a17696c332f7c9a776b7ce27fab05739b">KEYCHAIN_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;line&quot;</span>, strlen (<span class="stringliteral">&quot;line&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a42e5cebd0265d2c03a8da6fa220e11c6">VTY_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;ipv6 forwarding&quot;</span>,
         strlen (<span class="stringliteral">&quot;ipv6 forwarding&quot;</span>)) == 0)
           || (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;ip forwarding&quot;</span>,
           strlen (<span class="stringliteral">&quot;ip forwarding&quot;</span>)) == 0) )
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a2e962d19f03c7e6249023fe5f1f311ce">FORWARDING_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;service&quot;</span>, strlen (<span class="stringliteral">&quot;service&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a08f3c0e0d651e5835e84cac733ba7d88">SERVICE_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;debug&quot;</span>, strlen (<span class="stringliteral">&quot;debug&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a6528486974fa9575be1ad0e96261f7be">DEBUG_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;password&quot;</span>, strlen (<span class="stringliteral">&quot;password&quot;</span>)) == 0
           || strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;enable password&quot;</span>,
               strlen (<span class="stringliteral">&quot;enable password&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a75f8c1cca576850deb9f2e829ba61705">AAA_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;ip protocol&quot;</span>, strlen (<span class="stringliteral">&quot;ip protocol&quot;</span>)) == 0)
    config = <a class="code" href="vtysh__config_8c.html#a1c102f4ab2cd340f767234cd1944014b">config_get</a> (<a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ab73828c0526b367435ebc7ed4f676bbf">PROTOCOL_NODE</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span>
    {
      <span class="keywordflow">if</span> (strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;log&quot;</span>, strlen (<span class="stringliteral">&quot;log&quot;</span>)) == 0
          || strncmp (<a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>, <span class="stringliteral">&quot;hostname&quot;</span>, strlen (<span class="stringliteral">&quot;hostname&quot;</span>)) == 0
         )
        <a class="code" href="vtysh__config_8c.html#adf7ee39ec528478aa75d97c159d74bb0">config_add_line_uniq</a> (<a class="code" href="vtysh__config_8c.html#a90c87b8eea10b531951fff29089a3183">config_top</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      <span class="keywordflow">else</span>
        <a class="code" href="vtysh__config_8c.html#a2f5e8a3367a0387acb0dd3dc0298ff16">config_add_line</a> (<a class="code" href="vtysh__config_8c.html#a90c87b8eea10b531951fff29089a3183">config_top</a>, <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>);
      config = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }
      <span class="keywordflow">break</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a91fa390503533d9788fb135882776ba7"></a><!-- doxytag: member="vtysh_config.c::vtysh_config_write" ref="a91fa390503533d9788fb135882776ba7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vtysh_config_write </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00411">411</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span> <a class="code" href="structconfig.html#ae9f57f202a78e2ce400660ed533e169d">line</a>[81];
  <span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structhost.html">host</a> <a class="code" href="structhost.html">host</a>;

  <span class="keywordflow">if</span> (<a class="code" href="structhost.html">host</a>.<a class="code" href="structhost.html#ae29a96977a9350ec0d4323ccd38ebc9b">name</a>)
    {
      sprintf (line, <span class="stringliteral">&quot;hostname %s&quot;</span>, <a class="code" href="structhost.html">host</a>.<a class="code" href="structhost.html#ae29a96977a9350ec0d4323ccd38ebc9b">name</a>);
      <a class="code" href="vtysh__config_8c.html#abb99093276220ff4f86687c3979af512">vtysh_config_parse_line</a>(line);
    }
  <span class="keywordflow">if</span> (<a class="code" href="vtysh_8c.html#a7b75b9e8f63b3edb257192b65ff12ac7">vtysh_writeconfig_integrated</a>)
    <a class="code" href="vtysh__config_8c.html#abb99093276220ff4f86687c3979af512">vtysh_config_parse_line</a> (<span class="stringliteral">&quot;service integrated-vtysh-config&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2d5ea6c2a97a8c021dfbba7d1b901cdf"></a><!-- doxytag: member="vtysh_config.c::vtysh_read_config" ref="a2d5ea6c2a97a8c021dfbba7d1b901cdf" args="(char *config_default_dir)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vtysh_read_config </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>config_default_dir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00391">391</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  FILE *confp = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  confp = fopen (config_default_dir, <span class="stringliteral">&quot;r&quot;</span>);
  <span class="keywordflow">if</span> (confp == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> (1);

  <a class="code" href="vtysh__config_8c.html#aa3504a83e654b85ea5e9d52a0ff24878">vtysh_read_file</a> (confp);
  fclose (confp);
  <a class="code" href="command_8h.html#a98321817fecd3351cf782333d614c04f">host_config_set</a> (config_default_dir);

  <span class="keywordflow">return</span> (0);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa3504a83e654b85ea5e9d52a0ff24878"></a><!-- doxytag: member="vtysh_config.c::vtysh_read_file" ref="aa3504a83e654b85ea5e9d52a0ff24878" args="(FILE *confp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void vtysh_read_file </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>confp</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00351">351</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> ret;
  <span class="keyword">struct </span><a class="code" href="structvty.html">vty</a> *<a class="code" href="vtysh_8c.html#a15b2c4e868040617c54eaaba3663b337">vty</a>;

  vty = <a class="code" href="vty_8c.html#a5761c76c7eaf421587052c372034cd57">vty_new</a> ();
  vty-&gt;<a class="code" href="structvty.html#aee2408e6a9e7f85adeba482cd2b5da42">fd</a> = 0;          <span class="comment">/* stdout */</span>
  vty-&gt;<a class="code" href="structvty.html#a918d01c53936e81c45a177b0ceda3eca">type</a> = <a class="code" href="structvty.html#a6cef26c7c345053bf910a8869d5c3d29adabc52cc2665954eb91c79357821ccb7">VTY_TERM</a>;
  vty-&gt;<a class="code" href="structvty.html#a9ac72abb8e0411b52a9d91d1a11aeaff">node</a> = <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a50754044f565f7421a152eaa411eebcc">CONFIG_NODE</a>;
  
  <a class="code" href="vtysh_8c.html#af04c7a1095e117c5c064f96269a5f3e5">vtysh_execute_no_pager</a> (<span class="stringliteral">&quot;enable&quot;</span>);
  <a class="code" href="vtysh_8c.html#af04c7a1095e117c5c064f96269a5f3e5">vtysh_execute_no_pager</a> (<span class="stringliteral">&quot;configure terminal&quot;</span>);

  <span class="comment">/* Execute configuration file. */</span>
  ret = <a class="code" href="vtysh_8c.html#a132411707cd09c54f31ceb78ee4556a8">vtysh_config_from_file</a> (vty, confp);

  <a class="code" href="vtysh_8c.html#af04c7a1095e117c5c064f96269a5f3e5">vtysh_execute_no_pager</a> (<span class="stringliteral">&quot;end&quot;</span>);
  <a class="code" href="vtysh_8c.html#af04c7a1095e117c5c064f96269a5f3e5">vtysh_execute_no_pager</a> (<span class="stringliteral">&quot;disable&quot;</span>);

  <a class="code" href="vty_8c.html#af1d7e2c952dfb90e0a7e2bbe194dedfb">vty_close</a> (vty);

  <span class="keywordflow">if</span> (ret != <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>) 
    {
      <span class="keywordflow">switch</span> (ret)
    {
    <span class="keywordflow">case</span> <a class="code" href="command_8h.html#aaca9c63a322f9ed0311fd20404ce8e9a">CMD_ERR_AMBIGUOUS</a>:
      fprintf (stderr, <span class="stringliteral">&quot;Ambiguous command.\n&quot;</span>);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="command_8h.html#a007b585758677d61751303a88c8914d5">CMD_ERR_NO_MATCH</a>:
      fprintf (stderr, <span class="stringliteral">&quot;There is no such command.\n&quot;</span>);
      <span class="keywordflow">break</span>;
    }
      fprintf (stderr, <span class="stringliteral">&quot;Error occured during reading below line.\n%s\n&quot;</span>, 
           vty-&gt;<a class="code" href="structvty.html#aa9d1b3b4593ff8e576a7e012c6b45570">buf</a>);
      <a class="code" href="vtysh_8c.html#afa5f6ba5518772e1487b961507e2a570">exit</a> (1);
    }
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a90c87b8eea10b531951fff29089a3183"></a><!-- doxytag: member="vtysh_config.c::config_top" ref="a90c87b8eea10b531951fff29089a3183" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlist.html">list</a>* <a class="el" href="vtysh__config_8c.html#a90c87b8eea10b531951fff29089a3183">config_top</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00048">48</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>

</div>
</div>
<a class="anchor" id="a792dadf96aff95127bd5232a9d79f5aa"></a><!-- doxytag: member="vtysh_config.c::configvec" ref="a792dadf96aff95127bd5232a9d79f5aa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vector_8h.html#a7fe85bb4f5ec8665f4ef33dab2fdc2db">vector</a> <a class="el" href="vtysh__config_8c.html#a792dadf96aff95127bd5232a9d79f5aa">configvec</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh__config_8c_source.html#l00029">29</a> of file <a class="el" href="vtysh__config_8c_source.html">vtysh_config.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7b75b9e8f63b3edb257192b65ff12ac7"></a><!-- doxytag: member="vtysh_config.c::vtysh_writeconfig_integrated" ref="a7b75b9e8f63b3edb257192b65ff12ac7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="vtysh__config_8c.html#a7b75b9e8f63b3edb257192b65ff12ac7">vtysh_writeconfig_integrated</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vtysh_8c_source.html#l00070">70</a> of file <a class="el" href="vtysh_8c_source.html">vtysh.c</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="vtysh__config_8c.html">vtysh_config.c</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:37 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
