<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: bgpd/bgp_community.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('bgp__community_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">bgpd/bgp_community.h File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="bgp__community_8h__dep__incl.png" border="0" usemap="#bgpd_2bgp__community_8hdep" alt=""/></div>
<map name="bgpd_2bgp__community_8hdep" id="bgpd_2bgp__community_8hdep">
<area shape="rect" id="node3" href="bgp__attr_8c.html" title="bgpd/bgp_attr.c" alt="" coords="5,80,125,107"/><area shape="rect" id="node5" href="bgp__clist_8c.html" title="bgpd/bgp_clist.c" alt="" coords="150,80,273,107"/><area shape="rect" id="node7" href="bgp__community_8c.html" title="bgpd/bgp_community.c" alt="" coords="299,80,464,107"/><area shape="rect" id="node9" href="bgp__debug_8c.html" title="bgpd/bgp_debug.c" alt="" coords="488,80,627,107"/><area shape="rect" id="node11" href="bgp__packet_8c.html" title="bgpd/bgp_packet.c" alt="" coords="651,80,791,107"/><area shape="rect" id="node13" href="bgp__route_8c.html" title="bgpd/bgp_route.c" alt="" coords="816,80,947,107"/><area shape="rect" id="node15" href="bgp__routemap_8c.html" title="bgpd/bgp_routemap.c" alt="" coords="971,80,1128,107"/><area shape="rect" id="node17" href="bgp__vty_8c.html" title="bgpd/bgp_vty.c" alt="" coords="1153,80,1271,107"/><area shape="rect" id="node19" href="bgpd_8c.html" title="bgpd/bgpd.c" alt="" coords="1295,80,1395,107"/></map>
</div>
</div>
<p><a href="bgp__community_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcommunity.html">community</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#a963dbe34b652eddc5e57390c16fe5063">COMMUNITY_INTERNET</a>&#160;&#160;&#160;0x0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#a219dabc199faf8a9c3d75d8cccd2aa04">COMMUNITY_NO_EXPORT</a>&#160;&#160;&#160;0xFFFFFF01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#ad48733d7ee618f0eb7371ca7300af9fc">COMMUNITY_NO_ADVERTISE</a>&#160;&#160;&#160;0xFFFFFF02</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#a689f5d1583f5815924638159de3d3832">COMMUNITY_NO_EXPORT_SUBCONFED</a>&#160;&#160;&#160;0xFFFFFF03</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#acacc3f9ae32baf1130b9cd46f1c7bf90">COMMUNITY_LOCAL_AS</a>&#160;&#160;&#160;0xFFFFFF03</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#abe4fac602a39f27f2c0cc4d54cd4bc59">com_length</a>(<a class="el" href="spgrid_8c.html#a90fd6c5f495a36ebf73ab5d2f1c21b47">X</a>)&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a90fd6c5f495a36ebf73ab5d2f1c21b47">X</a>)-&gt;size * 4)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#a4e74eab3b93846015a2b974e33537aba">com_lastval</a>(<a class="el" href="spgrid_8c.html#a90fd6c5f495a36ebf73ab5d2f1c21b47">X</a>)&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a90fd6c5f495a36ebf73ab5d2f1c21b47">X</a>)-&gt;<a class="el" href="prefix_8h.html#a43e03366be2dd9176e91229d76541ce9">val</a> + (<a class="el" href="spgrid_8c.html#a90fd6c5f495a36ebf73ab5d2f1c21b47">X</a>)-&gt;size - 1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#af94a7f226b0984e690c90fe23355d71b">com_nthval</a>(<a class="el" href="spgrid_8c.html#a90fd6c5f495a36ebf73ab5d2f1c21b47">X</a>, <a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>)&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a90fd6c5f495a36ebf73ab5d2f1c21b47">X</a>)-&gt;<a class="el" href="prefix_8h.html#a43e03366be2dd9176e91229d76541ce9">val</a> + (<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>))</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#a24d2ec91020660700696ad24408b4768">community_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#a29420c210e4ff289843eb117aed4350a">community_finish</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#acd0a5a483b6d509597f31d8b6d48acdf">community_free</a> (struct <a class="el" href="structcommunity.html">community</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#a7be51eeed3983b7ce49878db491f62fb">community_uniq_sort</a> (struct <a class="el" href="structcommunity.html">community</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#a6966d2f3ee34a8c0aae751114ba3e20d">community_parse</a> (u_int32_t *, u_short)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#af69444d1eba6d1ac12cf571914f32f64">community_intern</a> (struct <a class="el" href="structcommunity.html">community</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#a3ab6e7797206067713f43249fc455701">community_unintern</a> (struct <a class="el" href="structcommunity.html">community</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#a5def10e2175f89262ee05064ad1a5d8a">community_str</a> (struct <a class="el" href="structcommunity.html">community</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#a7f696fc030c5ad819536b81844a69de2">community_hash_make</a> (struct <a class="el" href="structcommunity.html">community</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#a595108682453984948c3227c6b1716cd">community_str2com</a> (const char *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#aa6124e44320e2f38a8e9029877ec7db2">community_match</a> (const struct <a class="el" href="structcommunity.html">community</a> *, const struct <a class="el" href="structcommunity.html">community</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#a87a5c4b736650116a403b39e8e9f2146">community_cmp</a> (const struct <a class="el" href="structcommunity.html">community</a> *, const struct <a class="el" href="structcommunity.html">community</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#ac36e998fc28a016ed6c4bf8133c3acab">community_merge</a> (struct <a class="el" href="structcommunity.html">community</a> *, struct <a class="el" href="structcommunity.html">community</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#a4a5f23235bffadb85e5ae4427dca09d5">community_delete</a> (struct <a class="el" href="structcommunity.html">community</a> *, struct <a class="el" href="structcommunity.html">community</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#aa156b62f7b929463eb5af06dcdfae969">community_dup</a> (struct <a class="el" href="structcommunity.html">community</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#ae60528c776b982103e2290271d4c9f9f">community_include</a> (struct <a class="el" href="structcommunity.html">community</a> *, u_int32_t)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#ab2acfb9aef13f543406ac57d7948a965">community_del_val</a> (struct <a class="el" href="structcommunity.html">community</a> *, u_int32_t *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#a934a23fba97b07c3074615743a5a36f4">community_count</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structhash.html">hash</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__community_8h.html#a2ad08ece0d19f7c8a7c05f360e60a344">community_hash</a> (void)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a4e74eab3b93846015a2b974e33537aba"></a><!-- doxytag: member="bgp_community.h::com_lastval" ref="a4e74eab3b93846015a2b974e33537aba" args="(X)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define com_lastval</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="spgrid_8c.html#a90fd6c5f495a36ebf73ab5d2f1c21b47">X</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a90fd6c5f495a36ebf73ab5d2f1c21b47">X</a>)-&gt;<a class="el" href="prefix_8h.html#a43e03366be2dd9176e91229d76541ce9">val</a> + (<a class="el" href="spgrid_8c.html#a90fd6c5f495a36ebf73ab5d2f1c21b47">X</a>)-&gt;size - 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8h_source.html#l00050">50</a> of file <a class="el" href="bgp__community_8h_source.html">bgp_community.h</a>.</p>

</div>
</div>
<a class="anchor" id="abe4fac602a39f27f2c0cc4d54cd4bc59"></a><!-- doxytag: member="bgp_community.h::com_length" ref="abe4fac602a39f27f2c0cc4d54cd4bc59" args="(X)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define com_length</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="spgrid_8c.html#a90fd6c5f495a36ebf73ab5d2f1c21b47">X</a></td><td>)</td>
          <td>&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a90fd6c5f495a36ebf73ab5d2f1c21b47">X</a>)-&gt;size * 4)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8h_source.html#l00049">49</a> of file <a class="el" href="bgp__community_8h_source.html">bgp_community.h</a>.</p>

</div>
</div>
<a class="anchor" id="af94a7f226b0984e690c90fe23355d71b"></a><!-- doxytag: member="bgp_community.h::com_nthval" ref="af94a7f226b0984e690c90fe23355d71b" args="(X, n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define com_nthval</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="spgrid_8c.html#a90fd6c5f495a36ebf73ab5d2f1c21b47">X</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((<a class="el" href="spgrid_8c.html#a90fd6c5f495a36ebf73ab5d2f1c21b47">X</a>)-&gt;<a class="el" href="prefix_8h.html#a43e03366be2dd9176e91229d76541ce9">val</a> + (<a class="el" href="spgrid_8c.html#abe63e991a7bf5d666068b15c9064428d">n</a>))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8h_source.html#l00051">51</a> of file <a class="el" href="bgp__community_8h_source.html">bgp_community.h</a>.</p>

</div>
</div>
<a class="anchor" id="a963dbe34b652eddc5e57390c16fe5063"></a><!-- doxytag: member="bgp_community.h::COMMUNITY_INTERNET" ref="a963dbe34b652eddc5e57390c16fe5063" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMUNITY_INTERNET&#160;&#160;&#160;0x0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8h_source.html#l00042">42</a> of file <a class="el" href="bgp__community_8h_source.html">bgp_community.h</a>.</p>

</div>
</div>
<a class="anchor" id="acacc3f9ae32baf1130b9cd46f1c7bf90"></a><!-- doxytag: member="bgp_community.h::COMMUNITY_LOCAL_AS" ref="acacc3f9ae32baf1130b9cd46f1c7bf90" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMUNITY_LOCAL_AS&#160;&#160;&#160;0xFFFFFF03</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8h_source.html#l00046">46</a> of file <a class="el" href="bgp__community_8h_source.html">bgp_community.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad48733d7ee618f0eb7371ca7300af9fc"></a><!-- doxytag: member="bgp_community.h::COMMUNITY_NO_ADVERTISE" ref="ad48733d7ee618f0eb7371ca7300af9fc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMUNITY_NO_ADVERTISE&#160;&#160;&#160;0xFFFFFF02</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8h_source.html#l00044">44</a> of file <a class="el" href="bgp__community_8h_source.html">bgp_community.h</a>.</p>

</div>
</div>
<a class="anchor" id="a219dabc199faf8a9c3d75d8cccd2aa04"></a><!-- doxytag: member="bgp_community.h::COMMUNITY_NO_EXPORT" ref="a219dabc199faf8a9c3d75d8cccd2aa04" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMUNITY_NO_EXPORT&#160;&#160;&#160;0xFFFFFF01</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8h_source.html#l00043">43</a> of file <a class="el" href="bgp__community_8h_source.html">bgp_community.h</a>.</p>

</div>
</div>
<a class="anchor" id="a689f5d1583f5815924638159de3d3832"></a><!-- doxytag: member="bgp_community.h::COMMUNITY_NO_EXPORT_SUBCONFED" ref="a689f5d1583f5815924638159de3d3832" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMUNITY_NO_EXPORT_SUBCONFED&#160;&#160;&#160;0xFFFFFF03</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8h_source.html#l00045">45</a> of file <a class="el" href="bgp__community_8h_source.html">bgp_community.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a87a5c4b736650116a403b39e8e9f2146"></a><!-- doxytag: member="bgp_community.h::community_cmp" ref="a87a5c4b736650116a403b39e8e9f2146" args="(const struct community *, const struct community *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int community_cmp </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00441">441</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (com1 == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; com2 == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 1;
  <span class="keywordflow">if</span> (com1 == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || com2 == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  <span class="keywordflow">if</span> (com1-&gt;size == com2-&gt;size)
    <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a98d0dff0c7366f08562d8e8583df9bb9">memcmp</a> (com1-&gt;val, com2-&gt;val, com1-&gt;size * 4) == 0)
      <span class="keywordflow">return</span> 1;
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a934a23fba97b07c3074615743a5a36f4"></a><!-- doxytag: member="bgp_community.h::community_count" ref="a934a23fba97b07c3074615743a5a36f4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long community_count </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00620">620</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="bgp__community_8c.html#ac193534d60b78ef4c2e98afff7edbff7">comhash</a>-&gt;<a class="code" href="structhash.html#a4d82055a4a52d99ee887d24004fd91d3">count</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab2acfb9aef13f543406ac57d7948a965"></a><!-- doxytag: member="bgp_community.h::community_del_val" ref="ab2acfb9aef13f543406ac57d7948a965" args="(struct community *, u_int32_t *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void community_del_val </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00066">66</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a> = 0;
  <span class="keywordtype">int</span> c = 0;

  <span class="keywordflow">if</span> (! com-&gt;val)
    <span class="keywordflow">return</span>;

  <span class="keywordflow">while</span> (i &lt; com-&gt;<a class="code" href="structcommunity.html#ad54bd9c20e0cf4fa4674f5b76703d192">size</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a98d0dff0c7366f08562d8e8583df9bb9">memcmp</a> (com-&gt;val + i, <a class="code" href="prefix_8h.html#a43e03366be2dd9176e91229d76541ce9">val</a>, sizeof (u_int32_t)) == 0)
    {
      c = com-&gt;size -i -1;

      <span class="keywordflow">if</span> (c &gt; 0)
        <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (com-&gt;val + i, com-&gt;val + (i + 1), c * sizeof (*<a class="code" href="prefix_8h.html#a43e03366be2dd9176e91229d76541ce9">val</a>));

      com-&gt;size--;

      <span class="keywordflow">if</span> (com-&gt;size &gt; 0)
        com-&gt;val = <a class="code" href="memory_8h.html#ad9ab7c99da79ca966328c35e9185cc57">XREALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba88d525f9622740f3095d16c525973859">MTYPE_COMMUNITY_VAL</a>, com-&gt;val,
                 <a class="code" href="bgp__community_8h.html#abe4fac602a39f27f2c0cc4d54cd4bc59">com_length</a> (com));
      <span class="keywordflow">else</span>
        {
          <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba88d525f9622740f3095d16c525973859">MTYPE_COMMUNITY_VAL</a>, com-&gt;val);
          com-&gt;val = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
        }
      <span class="keywordflow">return</span>;
    }
      i++;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4a5f23235bffadb85e5ae4427dca09d5"></a><!-- doxytag: member="bgp_community.h::community_delete" ref="a4a5f23235bffadb85e5ae4427dca09d5" args="(struct community *, struct community *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcommunity.html">community</a>* community_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00101">101</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a> = 0;

  <span class="keywordflow">while</span>(i &lt; com2-&gt;<a class="code" href="structcommunity.html#ad54bd9c20e0cf4fa4674f5b76703d192">size</a>)
    {
      <a class="code" href="bgp__community_8c.html#acca441f8b245fa4d9f981db44782e3ee">community_del_val</a> (com1, com2-&gt;val + i);
      i++;
    }

  <span class="keywordflow">return</span> com1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa156b62f7b929463eb5af06dcdfae969"></a><!-- doxytag: member="bgp_community.h::community_dup" ref="aa156b62f7b929463eb5af06dcdfae969" args="(struct community *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcommunity.html">community</a>* community_dup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00363">363</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity.html">community</a> *<span class="keyword">new</span>;

  <span class="keyword">new</span> = <a class="code" href="memory_8h.html#a7826e4ed1d152cad0666dcf43f11f663">XCALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba010f020f9da1ea285c55a553451b3572">MTYPE_COMMUNITY</a>, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structcommunity.html">community</a>));
  <span class="keyword">new</span>-&gt;size = com-&gt;size;
  <span class="keywordflow">if</span> (new-&gt;size)
    {
      <span class="keyword">new</span>-&gt;val = <a class="code" href="memory_8h.html#a6491adf46c1d769b529a8f2f7d75f2fe">XMALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba88d525f9622740f3095d16c525973859">MTYPE_COMMUNITY_VAL</a>, com-&gt;size * 4);
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (new-&gt;val, com-&gt;val, com-&gt;size * 4);
    }
  <span class="keywordflow">else</span>
    <span class="keyword">new</span>-&gt;val = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">return</span> <span class="keyword">new</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a29420c210e4ff289843eb117aed4350a"></a><!-- doxytag: member="bgp_community.h::community_finish" ref="a29420c210e4ff289843eb117aed4350a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void community_finish </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00641">641</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="hash_8c.html#ad0d6074e4b7475f7c249212bb8e67de5">hash_free</a> (<a class="code" href="bgp__community_8c.html#ac193534d60b78ef4c2e98afff7edbff7">comhash</a>);
  <a class="code" href="bgp__community_8c.html#ac193534d60b78ef4c2e98afff7edbff7">comhash</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acd0a5a483b6d509597f31d8b6d48acdf"></a><!-- doxytag: member="bgp_community.h::community_free" ref="acd0a5a483b6d509597f31d8b6d48acdf" args="(struct community *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void community_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00041">41</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (com-&gt;val)
    <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba88d525f9622740f3095d16c525973859">MTYPE_COMMUNITY_VAL</a>, com-&gt;val);
  <span class="keywordflow">if</span> (com-&gt;str)
    <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba3ab59fdf5f4673b09edb9121a05c83cb">MTYPE_COMMUNITY_STR</a>, com-&gt;str);
  <a class="code" href="memory_8h.html#a29f1ce2c850a3163cd6b1b0bd460705d">XFREE</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba010f020f9da1ea285c55a553451b3572">MTYPE_COMMUNITY</a>, com);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2ad08ece0d19f7c8a7c05f360e60a344"></a><!-- doxytag: member="bgp_community.h::community_hash" ref="a2ad08ece0d19f7c8a7c05f360e60a344" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structhash.html">hash</a>* community_hash </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00627">627</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> <a class="code" href="bgp__community_8c.html#ac193534d60b78ef4c2e98afff7edbff7">comhash</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7f696fc030c5ad819536b81844a69de2"></a><!-- doxytag: member="bgp_community.h::community_hash_make" ref="a7f696fc030c5ad819536b81844a69de2" args="(struct community *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int community_hash_make </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00394">394</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> c;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="zebra__rib_8c.html#a35af0be900467fedbb610bd6ea65ed78">key</a>;
  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *pnt;

  key = 0;
  pnt = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)com-&gt;val;
  
  <span class="keywordflow">for</span>(c = 0; c &lt; com-&gt;<a class="code" href="structcommunity.html#ad54bd9c20e0cf4fa4674f5b76703d192">size</a> * 4; c++)
    key += pnt[c];
      
  <span class="keywordflow">return</span> <a class="code" href="zebra__rib_8c.html#a35af0be900467fedbb610bd6ea65ed78">key</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae60528c776b982103e2290271d4c9f9f"></a><!-- doxytag: member="bgp_community.h::community_include" ref="ae60528c776b982103e2290271d4c9f9f" args="(struct community *, u_int32_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int community_include </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00134">134</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>;

  <a class="code" href="prefix_8h.html#a43e03366be2dd9176e91229d76541ce9">val</a> = htonl (<a class="code" href="prefix_8h.html#a43e03366be2dd9176e91229d76541ce9">val</a>);

  <span class="keywordflow">for</span> (i = 0; i &lt; com-&gt;size; i++)
    <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a98d0dff0c7366f08562d8e8583df9bb9">memcmp</a> (&amp;<a class="code" href="prefix_8h.html#a43e03366be2dd9176e91229d76541ce9">val</a>, <a class="code" href="bgp__community_8h.html#af94a7f226b0984e690c90fe23355d71b">com_nthval</a> (com, i), <span class="keyword">sizeof</span> (u_int32_t)) == 0)
      <span class="keywordflow">return</span> 1;

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a24d2ec91020660700696ad24408b4768"></a><!-- doxytag: member="bgp_community.h::community_init" ref="a24d2ec91020660700696ad24408b4768" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void community_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00634">634</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="bgp__community_8c.html#ac193534d60b78ef4c2e98afff7edbff7">comhash</a> = <a class="code" href="hash_8c.html#af8af448ae70e3d3b1fe45295b5e8fb78">hash_create</a> ((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> (*) (<span class="keywordtype">void</span> *))<a class="code" href="bgp__community_8c.html#ad929d0c5734e5a2df900d29ab3c59921">community_hash_make</a>,
             (<span class="keywordtype">int</span> (*) (<span class="keyword">const</span> <span class="keywordtype">void</span> *, <span class="keyword">const</span> <span class="keywordtype">void</span> *))<a class="code" href="bgp__community_8c.html#ab78dd69e6f3b202f3ab726654ea54193">community_cmp</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af69444d1eba6d1ac12cf571914f32f64"></a><!-- doxytag: member="bgp_community.h::community_intern" ref="af69444d1eba6d1ac12cf571914f32f64" args="(struct community *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcommunity.html">community</a>* community_intern </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00297">297</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity.html">community</a> *find;

  <span class="comment">/* Assert this community structure is not interned. */</span>
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (com-&gt;refcnt == 0);

  <span class="comment">/* Lookup community hash. */</span>
  find = (<span class="keyword">struct </span><a class="code" href="structcommunity.html">community</a> *) <a class="code" href="hash_8c.html#ab0bb31bd6c883d6563930341dccedd22">hash_get</a> (<a class="code" href="bgp__community_8c.html#ac193534d60b78ef4c2e98afff7edbff7">comhash</a>, com, <a class="code" href="hash_8c.html#ac2705f6d220cf4d8049201e369ff6d62">hash_alloc_intern</a>);

  <span class="comment">/* Arguemnt com is allocated temporary.  So when it is not used in</span>
<span class="comment">     hash, it should be freed.  */</span>
  <span class="keywordflow">if</span> (find != com)
    <a class="code" href="bgp__community_8c.html#a890bdfd2f7517c0fe7f30687d1d4d825">community_free</a> (com);

  <span class="comment">/* Increment refrence counter.  */</span>
  find-&gt;<a class="code" href="structcommunity.html#a52dd7a5a975af9d21ad9f93a91deb739">refcnt</a>++;

  <span class="comment">/* Make string.  */</span>
  <span class="keywordflow">if</span> (! find-&gt;<a class="code" href="structcommunity.html#ab723f1eb3237360a86acf75893985ce8">str</a>)
    find-&gt;<a class="code" href="structcommunity.html#ab723f1eb3237360a86acf75893985ce8">str</a> = <a class="code" href="bgp__community_8c.html#a830b613212ba0ebdf6a229f35621a703">community_com2str</a> (find);

  <span class="keywordflow">return</span> find;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa6124e44320e2f38a8e9029877ec7db2"></a><!-- doxytag: member="bgp_community.h::community_match" ref="aa6124e44320e2f38a8e9029877ec7db2" args="(const struct community *, const struct community *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int community_match </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00410">410</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a> = 0;
  <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a7113d77fc628f14d4e7d1262969c613e">j</a> = 0;

  <span class="keywordflow">if</span> (com1 == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; com2 == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 1;

  <span class="keywordflow">if</span> (com1 == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || com2 == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  <span class="keywordflow">if</span> (com1-&gt;size &lt; com2-&gt;size)
    <span class="keywordflow">return</span> 0;

  <span class="comment">/* Every community on com2 needs to be on com1 for this to match */</span>
  <span class="keywordflow">while</span> (i &lt; com1-&gt;<a class="code" href="structcommunity.html#ad54bd9c20e0cf4fa4674f5b76703d192">size</a> &amp;&amp; j &lt; com2-&gt;<a class="code" href="structcommunity.html#ad54bd9c20e0cf4fa4674f5b76703d192">size</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="regex_8c.html#a98d0dff0c7366f08562d8e8583df9bb9">memcmp</a> (com1-&gt;val + i, com2-&gt;val + j, sizeof (u_int32_t)) == 0)
    j++;
      i++;
    }

  <span class="keywordflow">if</span> (j == com2-&gt;size)
    <span class="keywordflow">return</span> 1;
  <span class="keywordflow">else</span>
    <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac36e998fc28a016ed6c4bf8133c3acab"></a><!-- doxytag: member="bgp_community.h::community_merge" ref="ac36e998fc28a016ed6c4bf8133c3acab" args="(struct community *, struct community *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcommunity.html">community</a>* community_merge </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00456">456</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (com1-&gt;val)
    com1-&gt;val = <a class="code" href="memory_8h.html#ad9ab7c99da79ca966328c35e9185cc57">XREALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba88d525f9622740f3095d16c525973859">MTYPE_COMMUNITY_VAL</a>, com1-&gt;val, 
              (com1-&gt;size + com2-&gt;size) * 4);
  <span class="keywordflow">else</span>
    com1-&gt;val = <a class="code" href="memory_8h.html#a6491adf46c1d769b529a8f2f7d75f2fe">XMALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba88d525f9622740f3095d16c525973859">MTYPE_COMMUNITY_VAL</a>, (com1-&gt;size + com2-&gt;size) * 4);

  <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (com1-&gt;val + com1-&gt;size, com2-&gt;val, com2-&gt;size * 4);
  com1-&gt;size += com2-&gt;size;

  <span class="keywordflow">return</span> com1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6966d2f3ee34a8c0aae751114ba3e20d"></a><!-- doxytag: member="bgp_community.h::community_parse" ref="a6966d2f3ee34a8c0aae751114ba3e20d" args="(u_int32_t *, u_short)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcommunity.html">community</a>* community_parse </td>
          <td>(</td>
          <td class="paramtype">u_int32_t *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_short&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00344">344</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity.html">community</a> tmp;
  <span class="keyword">struct </span><a class="code" href="structcommunity.html">community</a> *<span class="keyword">new</span>;

  <span class="comment">/* If length is malformed return NULL. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="isis__pdu_8h.html#a64ed70bbcb4536e2af22a1aaf5209d18">length</a> % 4)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="comment">/* Make temporary community for hash look up. */</span>
  tmp.size = <a class="code" href="isis__pdu_8h.html#a64ed70bbcb4536e2af22a1aaf5209d18">length</a> / 4;
  tmp.val = pnt;

  <span class="keyword">new</span> = <a class="code" href="bgp__community_8c.html#a7bab71e747c1164320fd14c061956516">community_uniq_sort</a> (&amp;tmp);

  <span class="keywordflow">return</span> <a class="code" href="bgp__community_8c.html#a13f3f19052ddd0201e67b155a5d55657">community_intern</a> (<span class="keyword">new</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5def10e2175f89262ee05064ad1a5d8a"></a><!-- doxytag: member="bgp_community.h::community_str" ref="a5def10e2175f89262ee05064ad1a5d8a" args="(struct community *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* community_str </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00381">381</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (!com)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  
  <span class="keywordflow">if</span> (! com-&gt;str)
    com-&gt;str = <a class="code" href="bgp__community_8c.html#a830b613212ba0ebdf6a229f35621a703">community_com2str</a> (com);
  <span class="keywordflow">return</span> com-&gt;str;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a595108682453984948c3227c6b1716cd"></a><!-- doxytag: member="bgp_community.h::community_str2com" ref="a595108682453984948c3227c6b1716cd" args="(const char *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcommunity.html">community</a>* community_str2com </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00580">580</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity.html">community</a> *com = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keyword">struct </span><a class="code" href="structcommunity.html">community</a> *com_sort = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  u_int32_t <a class="code" href="prefix_8h.html#a43e03366be2dd9176e91229d76541ce9">val</a> = 0;
  <span class="keyword">enum</span> <a class="code" href="bgp__community_8c.html#aef7a1650b1624d9d0e7392103cebe7e6">community_token</a> token = <a class="code" href="bgp__community_8c.html#aef7a1650b1624d9d0e7392103cebe7e6a153577a8fb13ad658a926a2d59749272">community_token_unknown</a>;

  <span class="keywordflow">do</span> 
    {
      <a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <a class="code" href="bgp__community_8c.html#a982ac0fb80448e336156b3aeb09f8a78">community_gettoken</a> (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, &amp;token, &amp;val);
      
      <span class="keywordflow">switch</span> (token)
    {
    <span class="keywordflow">case</span> <a class="code" href="bgp__community_8c.html#aef7a1650b1624d9d0e7392103cebe7e6a750fe18892ebfdab2f50190451e4e876">community_token_val</a>:
    <span class="keywordflow">case</span> <a class="code" href="bgp__community_8c.html#aef7a1650b1624d9d0e7392103cebe7e6ad36c89bcdf7f763d0d8c63ca24f7a90f">community_token_no_export</a>:
    <span class="keywordflow">case</span> <a class="code" href="bgp__community_8c.html#aef7a1650b1624d9d0e7392103cebe7e6a39f9702b8994890ec7f5e7a439903c1d">community_token_no_advertise</a>:
    <span class="keywordflow">case</span> <a class="code" href="bgp__community_8c.html#aef7a1650b1624d9d0e7392103cebe7e6a4ac4dc0109da1b57830d75af9862c338">community_token_local_as</a>:
      <span class="keywordflow">if</span> (com == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        com = <a class="code" href="bgp__community_8c.html#af4553289199b5f1c2089e4d95c570148">community_new</a>();
      <a class="code" href="bgp__community_8c.html#a9c66d86ece1bd928c16238f25fab62ec">community_add_val</a> (com, val);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="bgp__community_8c.html#aef7a1650b1624d9d0e7392103cebe7e6a153577a8fb13ad658a926a2d59749272">community_token_unknown</a>:
    <span class="keywordflow">default</span>:
      <span class="keywordflow">if</span> (com)
        <a class="code" href="bgp__community_8c.html#a890bdfd2f7517c0fe7f30687d1d4d825">community_free</a> (com);
      <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }
    } <span class="keywordflow">while</span> (<a class="code" href="rip__zebra_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);
  
  <span class="keywordflow">if</span> (! com)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  com_sort = <a class="code" href="bgp__community_8c.html#a7bab71e747c1164320fd14c061956516">community_uniq_sort</a> (com);
  <a class="code" href="bgp__community_8c.html#a890bdfd2f7517c0fe7f30687d1d4d825">community_free</a> (com);

  <span class="keywordflow">return</span> com_sort;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3ab6e7797206067713f43249fc455701"></a><!-- doxytag: member="bgp_community.h::community_unintern" ref="a3ab6e7797206067713f43249fc455701" args="(struct community *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void community_unintern </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00324">324</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structcommunity.html">community</a> *ret;

  <span class="keywordflow">if</span> (com-&gt;refcnt)
    com-&gt;<a class="code" href="structcommunity.html#a52dd7a5a975af9d21ad9f93a91deb739">refcnt</a>--;

  <span class="comment">/* Pull off from hash.  */</span>
  <span class="keywordflow">if</span> (com-&gt;refcnt == 0)
    {
      <span class="comment">/* Community value com must exist in hash. */</span>
      ret = (<span class="keyword">struct </span><a class="code" href="structcommunity.html">community</a> *) <a class="code" href="hash_8c.html#a67f4f46ccd66f0b0c2a047eeb130c19e">hash_release</a> (<a class="code" href="bgp__community_8c.html#ac193534d60b78ef4c2e98afff7edbff7">comhash</a>, com);
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (ret != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);

      <a class="code" href="bgp__community_8c.html#a890bdfd2f7517c0fe7f30687d1d4d825">community_free</a> (com);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7be51eeed3983b7ce49878db491f62fb"></a><!-- doxytag: member="bgp_community.h::community_uniq_sort" ref="a7be51eeed3983b7ce49878db491f62fb" args="(struct community *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcommunity.html">community</a>* community_uniq_sort </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcommunity.html">community</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__community_8c_source.html#l00163">163</a> of file <a class="el" href="bgp__community_8c_source.html">bgp_community.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> <a class="code" href="spgrid_8c.html#a139066bd9e344a8daae82c5ca919fffe">i</a>;
  <span class="keyword">struct </span><a class="code" href="structcommunity.html">community</a> *<span class="keyword">new</span>;
  u_int32_t <a class="code" href="prefix_8h.html#a43e03366be2dd9176e91229d76541ce9">val</a>;

  <span class="keywordflow">if</span> (! com)
    <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  
  <span class="keyword">new</span> = <a class="code" href="bgp__community_8c.html#af4553289199b5f1c2089e4d95c570148">community_new</a> ();;
  
  <span class="keywordflow">for</span> (i = 0; i &lt; com-&gt;size; i++)
    {
      val = <a class="code" href="bgp__community_8c.html#a82eb1e83d4b715c33bacdc9574ef4389">community_val_get</a> (com, i);

      <span class="keywordflow">if</span> (! <a class="code" href="bgp__community_8c.html#a0191e40f098590ab68b99a24c2a2e931">community_include</a> (<span class="keyword">new</span>, val))
    <a class="code" href="bgp__community_8c.html#a9c66d86ece1bd928c16238f25fab62ec">community_add_val</a> (<span class="keyword">new</span>, val);
    }

  qsort (new-&gt;val, new-&gt;size, sizeof (u_int32_t), <a class="code" href="bgp__community_8c.html#a65fc140b4680cbf69c768238db4c242e">community_compare</a>);

  <span class="keywordflow">return</span> <span class="keyword">new</span>;
}
</pre></div>
</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="bgp__community_8h.html">bgp_community.h</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:11 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
