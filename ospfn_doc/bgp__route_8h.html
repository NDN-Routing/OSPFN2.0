<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: bgpd/bgp_route.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('bgp__route_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">bgpd/bgp_route.h File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="bgp__table_8h_source.html">bgp_table.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for bgp_route.h:</div>
<div class="dyncontent">
<div class="center"><img src="bgp__route_8h__incl.png" border="0" usemap="#bgpd_2bgp__route_8h" alt=""/></div>
<map name="bgpd_2bgp__route_8h" id="bgpd_2bgp__route_8h">
<area shape="rect" id="node3" href="bgp__table_8h.html" title="bgp_table.h" alt="" coords="23,80,117,107"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="bgp__route_8h__dep__incl.png" border="0" usemap="#bgpd_2bgp__route_8hdep" alt=""/></div>
<map name="bgpd_2bgp__route_8hdep" id="bgpd_2bgp__route_8hdep">
<area shape="rect" id="node3" href="bgp__advertise_8c.html" title="bgpd/bgp_advertise.c" alt="" coords="5,80,160,107"/><area shape="rect" id="node5" href="bgp__attr_8c.html" title="bgpd/bgp_attr.c" alt="" coords="185,80,305,107"/><area shape="rect" id="node7" href="bgp__damp_8c.html" title="bgpd/bgp_damp.c" alt="" coords="329,80,463,107"/><area shape="rect" id="node9" href="bgp__debug_8c.html" title="bgpd/bgp_debug.c" alt="" coords="487,80,625,107"/><area shape="rect" id="node11" href="bgp__dump_8c.html" title="bgpd/bgp_dump.c" alt="" coords="649,80,783,107"/><area shape="rect" id="node13" href="bgp__fsm_8c.html" title="bgpd/bgp_fsm.c" alt="" coords="807,80,928,107"/><area shape="rect" id="node15" href="bgp__main_8c.html" title="bgpd/bgp_main.c" alt="" coords="953,80,1079,107"/><area shape="rect" id="node17" href="bgp__mplsvpn_8c.html" title="bgpd/bgp_mplsvpn.c" alt="" coords="1103,80,1253,107"/><area shape="rect" id="node19" href="bgp__nexthop_8c.html" title="bgpd/bgp_nexthop.c" alt="" coords="1278,80,1428,107"/><area shape="rect" id="node21" href="bgp__packet_8c.html" title="bgpd/bgp_packet.c" alt="" coords="1453,80,1592,107"/><area shape="rect" id="node23" href="bgp__route_8c.html" title="bgpd/bgp_route.c" alt="" coords="1617,80,1748,107"/><area shape="rect" id="node25" href="bgp__routemap_8c.html" title="bgpd/bgp_routemap.c" alt="" coords="1772,80,1929,107"/><area shape="rect" id="node27" href="bgp__vty_8c.html" title="bgpd/bgp_vty.c" alt="" coords="1954,80,2072,107"/><area shape="rect" id="node29" href="bgp__zebra_8c.html" title="bgpd/bgp_zebra.c" alt="" coords="2097,80,2228,107"/><area shape="rect" id="node31" href="bgpd_8c.html" title="bgpd/bgpd.c" alt="" coords="2253,80,2352,107"/></map>
</div>
</div>
<p><a href="bgp__route_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbgp__info__extra.html">bgp_info_extra</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbgp__info.html">bgp_info</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbgp__static.html">bgp_static</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a364ac84609844c369deadc56ea2ab24f">BGP_INFO_IGP_CHANGED</a>&#160;&#160;&#160;(1 &lt;&lt; 0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a8ef9b384054b6b52e7d0af4021a3cc05">BGP_INFO_DAMPED</a>&#160;&#160;&#160;(1 &lt;&lt; 1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a57adf9fc517cc65fb9f4bcbf8ff796f2">BGP_INFO_HISTORY</a>&#160;&#160;&#160;(1 &lt;&lt; 2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a43b3eb776824e6b86970e3886120913e">BGP_INFO_SELECTED</a>&#160;&#160;&#160;(1 &lt;&lt; 3)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#aa7f689448430856658d348cc8d84f27d">BGP_INFO_VALID</a>&#160;&#160;&#160;(1 &lt;&lt; 4)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#abf27b05ce5e7ef154318fb01c218d611">BGP_INFO_ATTR_CHANGED</a>&#160;&#160;&#160;(1 &lt;&lt; 5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a1f4be6cad311d6e4638b723b4420f4e9">BGP_INFO_DMED_CHECK</a>&#160;&#160;&#160;(1 &lt;&lt; 6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a9486d9e223de55b24716f63d58a615d1">BGP_INFO_DMED_SELECTED</a>&#160;&#160;&#160;(1 &lt;&lt; 7)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a455eac0750f63b056c8c5aff39222927">BGP_INFO_STALE</a>&#160;&#160;&#160;(1 &lt;&lt; 8)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a0ff836da32782fe548f3fe570e5107e7">BGP_INFO_REMOVED</a>&#160;&#160;&#160;(1 &lt;&lt; 9)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#aff6e02f7d4d370e90e7eba7323b7f335">BGP_INFO_COUNTED</a>&#160;&#160;&#160;(1 &lt;&lt; 10)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a4734a795191347f5279e59e64c75b7a3">BGP_ROUTE_NORMAL</a>&#160;&#160;&#160;0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a3c52611f8ef467c61080e1444b91d73d">BGP_ROUTE_STATIC</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a643a61537d50b199b001824d82b2e66d">BGP_ROUTE_AGGREGATE</a>&#160;&#160;&#160;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a0e973ed2530863b634c03e48637ce7b0">BGP_ROUTE_REDISTRIBUTE</a>&#160;&#160;&#160;3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#aee2c962749a7df25a38ccd80559e50d5">BGP_INFO_UNUSEABLE</a>&#160;&#160;&#160;(BGP_INFO_HISTORY|BGP_INFO_DAMPED|BGP_INFO_REMOVED)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a51bf9498518258866f4ba6b2b19b587a">BGP_INFO_HOLDDOWN</a>(BI)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#adde5be7d0e3ee93b4cbcdc35c20dcf14">DISTRIBUTE_IN_NAME</a>(F)&#160;&#160;&#160;((F)-&gt;dlist[FILTER_IN].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a6c29d53e2f61e4572a69923c2d3f681b">DISTRIBUTE_IN</a>(F)&#160;&#160;&#160;((F)-&gt;dlist[FILTER_IN].alist)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#aa6a662c312c62895639e9bdb1acb86c4">DISTRIBUTE_OUT_NAME</a>(F)&#160;&#160;&#160;((F)-&gt;dlist[FILTER_OUT].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#adf2dd58f4ff66c6b914c2162ddfa315c">DISTRIBUTE_OUT</a>(F)&#160;&#160;&#160;((F)-&gt;dlist[FILTER_OUT].alist)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a633cce0e1ccfb302dd012ef0286ec75a">PREFIX_LIST_IN_NAME</a>(F)&#160;&#160;&#160;((F)-&gt;plist[FILTER_IN].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#ad143503066e23e446015fc61ba2e72ed">PREFIX_LIST_IN</a>(F)&#160;&#160;&#160;((F)-&gt;plist[FILTER_IN].plist)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a0b2a78984ce18b840dba34e64295c2cf">PREFIX_LIST_OUT_NAME</a>(F)&#160;&#160;&#160;((F)-&gt;plist[FILTER_OUT].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#ab694ea0ccae4db3b7e858c2517e41480">PREFIX_LIST_OUT</a>(F)&#160;&#160;&#160;((F)-&gt;plist[FILTER_OUT].plist)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a51c6471831f36ab7819abac5582a83d2">FILTER_LIST_IN_NAME</a>(F)&#160;&#160;&#160;((F)-&gt;aslist[FILTER_IN].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#ae97bb21aa1bfa3da36fe31980b840098">FILTER_LIST_IN</a>(F)&#160;&#160;&#160;((F)-&gt;aslist[FILTER_IN].aslist)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a806f03b22742b30b320bcb6bfdbbbb80">FILTER_LIST_OUT_NAME</a>(F)&#160;&#160;&#160;((F)-&gt;aslist[FILTER_OUT].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#aa5c389065b014b5737f4a216a708b361">FILTER_LIST_OUT</a>(F)&#160;&#160;&#160;((F)-&gt;aslist[FILTER_OUT].aslist)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a7ce451237d01fbec8276be12dd5355dc">ROUTE_MAP_IN_NAME</a>(F)&#160;&#160;&#160;((F)-&gt;map[RMAP_IN].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#ac48b58884ad8f80b21a9e116ce3097f8">ROUTE_MAP_IN</a>(F)&#160;&#160;&#160;((F)-&gt;map[RMAP_IN].map)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a74b8c19a64169d6d012582c4350ee71b">ROUTE_MAP_OUT_NAME</a>(F)&#160;&#160;&#160;((F)-&gt;map[RMAP_OUT].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a723d63ede8a87e162c1bf2097b2466b6">ROUTE_MAP_OUT</a>(F)&#160;&#160;&#160;((F)-&gt;map[RMAP_OUT].map)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#ab0211ed3cdec21a8ad4ea8b9329cbfdc">ROUTE_MAP_IMPORT_NAME</a>(F)&#160;&#160;&#160;((F)-&gt;map[RMAP_IMPORT].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#aaf7edc00b003acb19b6b2f48c6be6c02">ROUTE_MAP_IMPORT</a>(F)&#160;&#160;&#160;((F)-&gt;map[RMAP_IMPORT].map)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a9a3b5d5b467eb3306b8399063dbaca05">ROUTE_MAP_EXPORT_NAME</a>(F)&#160;&#160;&#160;((F)-&gt;map[RMAP_EXPORT].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#aee3fa611a841ec8c25ef28971e2c1791">ROUTE_MAP_EXPORT</a>(F)&#160;&#160;&#160;((F)-&gt;map[RMAP_EXPORT].map)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a5d8b5b2174fe271354ba0def2c0a749e">UNSUPPRESS_MAP_NAME</a>(F)&#160;&#160;&#160;((F)-&gt;<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">usmap.name</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a346dd5110ed3bda9be8ffd4a42e5f52b">UNSUPPRESS_MAP</a>(F)&#160;&#160;&#160;((F)-&gt;usmap.map)</td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a6a68ec86881e2e24c1dfdd8a47267e81">bgp_clear_route_type</a> { <a class="el" href="bgp__route_8h.html#a6a68ec86881e2e24c1dfdd8a47267e81a362c076b1b729ff5b2c64125e029bb83">BGP_CLEAR_ROUTE_NORMAL</a>, 
<a class="el" href="bgp__route_8h.html#a6a68ec86881e2e24c1dfdd8a47267e81a8c1adeda524233bcf00f4616680e0643">BGP_CLEAR_ROUTE_MY_RSCLIENT</a>
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a1d94be4492850d1be9670012f7706620">bgp_route_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a12f57c2100947b29dacea6b47b0bfa79">bgp_route_finish</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#adf17dd6a8dfaa2ab4f271b491de030d0">bgp_cleanup_routes</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a2382a6967df7af7f2b52a8afdb9b57b8">bgp_announce_route</a> (struct <a class="el" href="structpeer.html">peer</a> *, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#ae8a4fa2ea66d3ef20564f2404a5fda5c">bgp_announce_route_all</a> (struct <a class="el" href="structpeer.html">peer</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a4432313420cf4b67e1b84b05e4b7a025">bgp_default_originate</a> (struct <a class="el" href="structpeer.html">peer</a> *, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>, int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a554bf0135ffc3a68ac99947f528cf9fc">bgp_soft_reconfig_in</a> (struct <a class="el" href="structpeer.html">peer</a> *, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a02e56f5ae76eee6eec3cb44867837609">bgp_soft_reconfig_rsclient</a> (struct <a class="el" href="structpeer.html">peer</a> *, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a2fdb62c8a10046002627ce0298e0d404">bgp_check_local_routes_rsclient</a> (struct <a class="el" href="structpeer.html">peer</a> *rsclient, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a> afi, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a> safi)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a3df4ec5505fc1d5ad1434122c008f9cd">bgp_clear_route</a> (struct <a class="el" href="structpeer.html">peer</a> *, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>, enum <a class="el" href="bgp__route_8h.html#a6a68ec86881e2e24c1dfdd8a47267e81">bgp_clear_route_type</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a179a18ad1eb8a8d2e914f90f4a227226">bgp_clear_route_all</a> (struct <a class="el" href="structpeer.html">peer</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a7420ba6c9ffc1bee7f06418e2872f1c6">bgp_clear_adj_in</a> (struct <a class="el" href="structpeer.html">peer</a> *, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a98cfb4a18642829264e13a2397a800ed">bgp_clear_stale_route</a> (struct <a class="el" href="structpeer.html">peer</a> *, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structbgp__info.html">bgp_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a659c82db6cce309f5b40eb1aff360ea6">bgp_info_lock</a> (struct <a class="el" href="structbgp__info.html">bgp_info</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structbgp__info.html">bgp_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a08aecc5ca9b3d1055fcc1de43226d891">bgp_info_unlock</a> (struct <a class="el" href="structbgp__info.html">bgp_info</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#ac7472ce06f993cd544f794c7b0381954">bgp_info_add</a> (struct <a class="el" href="structbgp__node.html">bgp_node</a> *rn, struct <a class="el" href="structbgp__info.html">bgp_info</a> *ri)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#abfe260239e1b72a286e9c45a5aa1afbd">bgp_info_delete</a> (struct <a class="el" href="structbgp__node.html">bgp_node</a> *rn, struct <a class="el" href="structbgp__info.html">bgp_info</a> *ri)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structbgp__info__extra.html">bgp_info_extra</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a3636e4f4e5593b053bd4de054972ae11">bgp_info_extra_get</a> (struct <a class="el" href="structbgp__info.html">bgp_info</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#ae5eb4de33b827eb9901877a609e2a41e">bgp_info_set_flag</a> (struct <a class="el" href="structbgp__node.html">bgp_node</a> *, struct <a class="el" href="structbgp__info.html">bgp_info</a> *, u_int32_t)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#aa0b07d2d5f1e2f1f8bfccedb2f4d19af">bgp_info_unset_flag</a> (struct <a class="el" href="structbgp__node.html">bgp_node</a> *, struct <a class="el" href="structbgp__info.html">bgp_info</a> *, u_int32_t)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a121b1ac2ca3b5db4479c018cce058312">bgp_nlri_sanity_check</a> (struct <a class="el" href="structpeer.html">peer</a> *, int, u_char *, <a class="el" href="bgpd_8h.html#ae2ac1a1db99d420f5a214c418552fd1e">bgp_size_t</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a8e19b0828d731508778b7c28a7f17298">bgp_nlri_parse</a> (struct <a class="el" href="structpeer.html">peer</a> *, struct <a class="el" href="structattr.html">attr</a> *, struct <a class="el" href="structbgp__nlri.html">bgp_nlri</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#abc5dfdd23721464c47397f09e2a8d40d">bgp_maximum_prefix_overflow</a> (struct <a class="el" href="structpeer.html">peer</a> *, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>, int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#ad43d4207e8e8d357b758d7898f59dfec">bgp_redistribute_add</a> (struct <a class="el" href="structprefix.html">prefix</a> *, struct in_addr *, u_int32_t, u_char)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a7484774dce89c4dd82bf5e17b1688cbb">bgp_redistribute_delete</a> (struct <a class="el" href="structprefix.html">prefix</a> *, u_char)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#ab7121f0cd3100fffb819723728d50c2e">bgp_redistribute_withdraw</a> (struct <a class="el" href="structbgp.html">bgp</a> *, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>, int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a11050c063fc4bf2dade8bddefecd117e">bgp_static_delete</a> (struct <a class="el" href="structbgp.html">bgp</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a3c60dc79eda8a778b3bd202a10b413c7">bgp_static_update</a> (struct <a class="el" href="structbgp.html">bgp</a> *, struct <a class="el" href="structprefix.html">prefix</a> *, struct <a class="el" href="structbgp__static.html">bgp_static</a> *, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a2b87965793d5ca53685fc17b9c5f9cc2">bgp_static_withdraw</a> (struct <a class="el" href="structbgp.html">bgp</a> *, struct <a class="el" href="structprefix.html">prefix</a> *, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#af7cc8ee989b92046e19dc2db89fe1bd8">bgp_static_set_vpnv4</a> (struct <a class="el" href="structvty.html">vty</a> *<a class="el" href="structvty.html">vty</a>, const char *, const char *, const char *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#adbb9c96c25faf124bcf3e104607777f1">bgp_static_unset_vpnv4</a> (struct <a class="el" href="structvty.html">vty</a> *, const char *, const char *, const char *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a3fd28b643a06863a65e3e9ccaa465b55">bgp_update</a> (struct <a class="el" href="structpeer.html">peer</a> *, struct <a class="el" href="structprefix.html">prefix</a> *, struct <a class="el" href="structattr.html">attr</a> *, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>, int, int, struct <a class="el" href="structprefix__rd.html">prefix_rd</a> *, u_char *, int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#ab19eddf74f3d5f8d8cd7fcc6dd2404cb">bgp_withdraw</a> (struct <a class="el" href="structpeer.html">peer</a> *, struct <a class="el" href="structprefix.html">prefix</a> *, struct <a class="el" href="structattr.html">attr</a> *, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>, int, int, struct <a class="el" href="structprefix__rd.html">prefix_rd</a> *, u_char *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a2ea14a69ee3c2a03b1bbee2c3961261d">bgp_process</a> (struct <a class="el" href="structbgp.html">bgp</a> *, struct <a class="el" href="structbgp__node.html">bgp_node</a> *, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#aa38f753615df9694fa3f47fa11b3ebf2">bgp_config_write_network</a> (struct <a class="el" href="structvty.html">vty</a> *, struct <a class="el" href="structbgp.html">bgp</a> *, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>, int *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#ac7a2375c41537180015d8dd33798155e">bgp_config_write_distance</a> (struct <a class="el" href="structvty.html">vty</a> *, struct <a class="el" href="structbgp.html">bgp</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#ac218a5ef2e04869ebdac5ea9bfbf19e2">bgp_aggregate_increment</a> (struct <a class="el" href="structbgp.html">bgp</a> *, struct <a class="el" href="structprefix.html">prefix</a> *, struct <a class="el" href="structbgp__info.html">bgp_info</a> *, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a91162dd024d89c577f51b3615b75496f">bgp_aggregate_decrement</a> (struct <a class="el" href="structbgp.html">bgp</a> *, struct <a class="el" href="structprefix.html">prefix</a> *, struct <a class="el" href="structbgp__info.html">bgp_info</a> *, <a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">u_char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a45aae1ba2d5eedac029237c73f16881e">bgp_distance_apply</a> (struct <a class="el" href="structprefix.html">prefix</a> *, struct <a class="el" href="structbgp__info.html">bgp_info</a> *, struct <a class="el" href="structbgp.html">bgp</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a70784e3a19cf0c0482e98535f6a66e6d">bgp_node_afi</a> (struct <a class="el" href="structvty.html">vty</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#ad5e89c162061cc75087adcc4527438b1">bgp_node_safi</a> (struct <a class="el" href="structvty.html">vty</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a9c8ca3acfad463c61259edab3afd7220">route_vty_out</a> (struct <a class="el" href="structvty.html">vty</a> *, struct <a class="el" href="structprefix.html">prefix</a> *, struct <a class="el" href="structbgp__info.html">bgp_info</a> *, int, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#ae57510a15d9159581f1e32f10aac1a9c">route_vty_out_tag</a> (struct <a class="el" href="structvty.html">vty</a> *, struct <a class="el" href="structprefix.html">prefix</a> *, struct <a class="el" href="structbgp__info.html">bgp_info</a> *, int, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bgp__route_8h.html#a0f21f671849f68f41259f9aa94ba9925">route_vty_out_tmp</a> (struct <a class="el" href="structvty.html">vty</a> *, struct <a class="el" href="structprefix.html">prefix</a> *, struct <a class="el" href="structattr.html">attr</a> *, <a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abf27b05ce5e7ef154318fb01c218d611"></a><!-- doxytag: member="bgp_route.h::BGP_INFO_ATTR_CHANGED" ref="abf27b05ce5e7ef154318fb01c218d611" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGP_INFO_ATTR_CHANGED&#160;&#160;&#160;(1 &lt;&lt; 5)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00073">73</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="aff6e02f7d4d370e90e7eba7323b7f335"></a><!-- doxytag: member="bgp_route.h::BGP_INFO_COUNTED" ref="aff6e02f7d4d370e90e7eba7323b7f335" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGP_INFO_COUNTED&#160;&#160;&#160;(1 &lt;&lt; 10)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00078">78</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8ef9b384054b6b52e7d0af4021a3cc05"></a><!-- doxytag: member="bgp_route.h::BGP_INFO_DAMPED" ref="a8ef9b384054b6b52e7d0af4021a3cc05" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGP_INFO_DAMPED&#160;&#160;&#160;(1 &lt;&lt; 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00069">69</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1f4be6cad311d6e4638b723b4420f4e9"></a><!-- doxytag: member="bgp_route.h::BGP_INFO_DMED_CHECK" ref="a1f4be6cad311d6e4638b723b4420f4e9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGP_INFO_DMED_CHECK&#160;&#160;&#160;(1 &lt;&lt; 6)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00074">74</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9486d9e223de55b24716f63d58a615d1"></a><!-- doxytag: member="bgp_route.h::BGP_INFO_DMED_SELECTED" ref="a9486d9e223de55b24716f63d58a615d1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGP_INFO_DMED_SELECTED&#160;&#160;&#160;(1 &lt;&lt; 7)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00075">75</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a57adf9fc517cc65fb9f4bcbf8ff796f2"></a><!-- doxytag: member="bgp_route.h::BGP_INFO_HISTORY" ref="a57adf9fc517cc65fb9f4bcbf8ff796f2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGP_INFO_HISTORY&#160;&#160;&#160;(1 &lt;&lt; 2)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00070">70</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a51bf9498518258866f4ba6b2b19b587a"></a><!-- doxytag: member="bgp_route.h::BGP_INFO_HOLDDOWN" ref="a51bf9498518258866f4ba6b2b19b587a" args="(BI)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGP_INFO_HOLDDOWN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">BI</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">(! <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> ((BI)-&gt;<a class="code" href="structflags.html">flags</a>, <a class="code" href="bgp__route_8h.html#aa7f689448430856658d348cc8d84f27d">BGP_INFO_VALID</a>) \
   || <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> ((BI)-&gt;<a class="code" href="structflags.html">flags</a>, <a class="code" href="bgp__route_8h.html#aee2c962749a7df25a38ccd80559e50d5">BGP_INFO_UNUSEABLE</a>))
</pre></div>
<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00131">131</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a364ac84609844c369deadc56ea2ab24f"></a><!-- doxytag: member="bgp_route.h::BGP_INFO_IGP_CHANGED" ref="a364ac84609844c369deadc56ea2ab24f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGP_INFO_IGP_CHANGED&#160;&#160;&#160;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00068">68</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0ff836da32782fe548f3fe570e5107e7"></a><!-- doxytag: member="bgp_route.h::BGP_INFO_REMOVED" ref="a0ff836da32782fe548f3fe570e5107e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGP_INFO_REMOVED&#160;&#160;&#160;(1 &lt;&lt; 9)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00077">77</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a43b3eb776824e6b86970e3886120913e"></a><!-- doxytag: member="bgp_route.h::BGP_INFO_SELECTED" ref="a43b3eb776824e6b86970e3886120913e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGP_INFO_SELECTED&#160;&#160;&#160;(1 &lt;&lt; 3)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00071">71</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a455eac0750f63b056c8c5aff39222927"></a><!-- doxytag: member="bgp_route.h::BGP_INFO_STALE" ref="a455eac0750f63b056c8c5aff39222927" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGP_INFO_STALE&#160;&#160;&#160;(1 &lt;&lt; 8)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00076">76</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="aee2c962749a7df25a38ccd80559e50d5"></a><!-- doxytag: member="bgp_route.h::BGP_INFO_UNUSEABLE" ref="aee2c962749a7df25a38ccd80559e50d5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGP_INFO_UNUSEABLE&#160;&#160;&#160;(BGP_INFO_HISTORY|BGP_INFO_DAMPED|BGP_INFO_REMOVED)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00125">125</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa7f689448430856658d348cc8d84f27d"></a><!-- doxytag: member="bgp_route.h::BGP_INFO_VALID" ref="aa7f689448430856658d348cc8d84f27d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGP_INFO_VALID&#160;&#160;&#160;(1 &lt;&lt; 4)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00072">72</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a643a61537d50b199b001824d82b2e66d"></a><!-- doxytag: member="bgp_route.h::BGP_ROUTE_AGGREGATE" ref="a643a61537d50b199b001824d82b2e66d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGP_ROUTE_AGGREGATE&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00088">88</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4734a795191347f5279e59e64c75b7a3"></a><!-- doxytag: member="bgp_route.h::BGP_ROUTE_NORMAL" ref="a4734a795191347f5279e59e64c75b7a3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGP_ROUTE_NORMAL&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00086">86</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0e973ed2530863b634c03e48637ce7b0"></a><!-- doxytag: member="bgp_route.h::BGP_ROUTE_REDISTRIBUTE" ref="a0e973ed2530863b634c03e48637ce7b0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGP_ROUTE_REDISTRIBUTE&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00089">89</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3c52611f8ef467c61080e1444b91d73d"></a><!-- doxytag: member="bgp_route.h::BGP_ROUTE_STATIC" ref="a3c52611f8ef467c61080e1444b91d73d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BGP_ROUTE_STATIC&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00087">87</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6c29d53e2f61e4572a69923c2d3f681b"></a><!-- doxytag: member="bgp_route.h::DISTRIBUTE_IN" ref="a6c29d53e2f61e4572a69923c2d3f681b" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DISTRIBUTE_IN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;dlist[FILTER_IN].alist)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00136">136</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="adde5be7d0e3ee93b4cbcdc35c20dcf14"></a><!-- doxytag: member="bgp_route.h::DISTRIBUTE_IN_NAME" ref="adde5be7d0e3ee93b4cbcdc35c20dcf14" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DISTRIBUTE_IN_NAME</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;dlist[FILTER_IN].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00135">135</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="adf2dd58f4ff66c6b914c2162ddfa315c"></a><!-- doxytag: member="bgp_route.h::DISTRIBUTE_OUT" ref="adf2dd58f4ff66c6b914c2162ddfa315c" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DISTRIBUTE_OUT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;dlist[FILTER_OUT].alist)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00138">138</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa6a662c312c62895639e9bdb1acb86c4"></a><!-- doxytag: member="bgp_route.h::DISTRIBUTE_OUT_NAME" ref="aa6a662c312c62895639e9bdb1acb86c4" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DISTRIBUTE_OUT_NAME</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;dlist[FILTER_OUT].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00137">137</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae97bb21aa1bfa3da36fe31980b840098"></a><!-- doxytag: member="bgp_route.h::FILTER_LIST_IN" ref="ae97bb21aa1bfa3da36fe31980b840098" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FILTER_LIST_IN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;aslist[FILTER_IN].aslist)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00146">146</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a51c6471831f36ab7819abac5582a83d2"></a><!-- doxytag: member="bgp_route.h::FILTER_LIST_IN_NAME" ref="a51c6471831f36ab7819abac5582a83d2" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FILTER_LIST_IN_NAME</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;aslist[FILTER_IN].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00145">145</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa5c389065b014b5737f4a216a708b361"></a><!-- doxytag: member="bgp_route.h::FILTER_LIST_OUT" ref="aa5c389065b014b5737f4a216a708b361" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FILTER_LIST_OUT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;aslist[FILTER_OUT].aslist)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00148">148</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a806f03b22742b30b320bcb6bfdbbbb80"></a><!-- doxytag: member="bgp_route.h::FILTER_LIST_OUT_NAME" ref="a806f03b22742b30b320bcb6bfdbbbb80" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FILTER_LIST_OUT_NAME</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;aslist[FILTER_OUT].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00147">147</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad143503066e23e446015fc61ba2e72ed"></a><!-- doxytag: member="bgp_route.h::PREFIX_LIST_IN" ref="ad143503066e23e446015fc61ba2e72ed" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PREFIX_LIST_IN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;plist[FILTER_IN].plist)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00141">141</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a633cce0e1ccfb302dd012ef0286ec75a"></a><!-- doxytag: member="bgp_route.h::PREFIX_LIST_IN_NAME" ref="a633cce0e1ccfb302dd012ef0286ec75a" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PREFIX_LIST_IN_NAME</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;plist[FILTER_IN].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00140">140</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab694ea0ccae4db3b7e858c2517e41480"></a><!-- doxytag: member="bgp_route.h::PREFIX_LIST_OUT" ref="ab694ea0ccae4db3b7e858c2517e41480" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PREFIX_LIST_OUT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;plist[FILTER_OUT].plist)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00143">143</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0b2a78984ce18b840dba34e64295c2cf"></a><!-- doxytag: member="bgp_route.h::PREFIX_LIST_OUT_NAME" ref="a0b2a78984ce18b840dba34e64295c2cf" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PREFIX_LIST_OUT_NAME</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;plist[FILTER_OUT].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00142">142</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="aee3fa611a841ec8c25ef28971e2c1791"></a><!-- doxytag: member="bgp_route.h::ROUTE_MAP_EXPORT" ref="aee3fa611a841ec8c25ef28971e2c1791" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROUTE_MAP_EXPORT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;map[RMAP_EXPORT].map)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00158">158</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9a3b5d5b467eb3306b8399063dbaca05"></a><!-- doxytag: member="bgp_route.h::ROUTE_MAP_EXPORT_NAME" ref="a9a3b5d5b467eb3306b8399063dbaca05" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROUTE_MAP_EXPORT_NAME</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;map[RMAP_EXPORT].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00157">157</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="aaf7edc00b003acb19b6b2f48c6be6c02"></a><!-- doxytag: member="bgp_route.h::ROUTE_MAP_IMPORT" ref="aaf7edc00b003acb19b6b2f48c6be6c02" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROUTE_MAP_IMPORT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;map[RMAP_IMPORT].map)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00156">156</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab0211ed3cdec21a8ad4ea8b9329cbfdc"></a><!-- doxytag: member="bgp_route.h::ROUTE_MAP_IMPORT_NAME" ref="ab0211ed3cdec21a8ad4ea8b9329cbfdc" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROUTE_MAP_IMPORT_NAME</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;map[RMAP_IMPORT].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00155">155</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac48b58884ad8f80b21a9e116ce3097f8"></a><!-- doxytag: member="bgp_route.h::ROUTE_MAP_IN" ref="ac48b58884ad8f80b21a9e116ce3097f8" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROUTE_MAP_IN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;map[RMAP_IN].map)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00151">151</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7ce451237d01fbec8276be12dd5355dc"></a><!-- doxytag: member="bgp_route.h::ROUTE_MAP_IN_NAME" ref="a7ce451237d01fbec8276be12dd5355dc" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROUTE_MAP_IN_NAME</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;map[RMAP_IN].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00150">150</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a723d63ede8a87e162c1bf2097b2466b6"></a><!-- doxytag: member="bgp_route.h::ROUTE_MAP_OUT" ref="a723d63ede8a87e162c1bf2097b2466b6" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROUTE_MAP_OUT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;map[RMAP_OUT].map)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00153">153</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a74b8c19a64169d6d012582c4350ee71b"></a><!-- doxytag: member="bgp_route.h::ROUTE_MAP_OUT_NAME" ref="a74b8c19a64169d6d012582c4350ee71b" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ROUTE_MAP_OUT_NAME</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;map[RMAP_OUT].<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00152">152</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a346dd5110ed3bda9be8ffd4a42e5f52b"></a><!-- doxytag: member="bgp_route.h::UNSUPPRESS_MAP" ref="a346dd5110ed3bda9be8ffd4a42e5f52b" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNSUPPRESS_MAP</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;usmap.map)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00161">161</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5d8b5b2174fe271354ba0def2c0a749e"></a><!-- doxytag: member="bgp_route.h::UNSUPPRESS_MAP_NAME" ref="a5d8b5b2174fe271354ba0def2c0a749e" args="(F)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNSUPPRESS_MAP_NAME</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F</td><td>)</td>
          <td>&#160;&#160;&#160;((F)-&gt;<a class="el" href="memory_8c.html#a5ac083a645d964373f022d03df4849c8">usmap.name</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00160">160</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a6a68ec86881e2e24c1dfdd8a47267e81"></a><!-- doxytag: member="bgp_route.h::bgp_clear_route_type" ref="a6a68ec86881e2e24c1dfdd8a47267e81" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="bgp__route_8h.html#a6a68ec86881e2e24c1dfdd8a47267e81">bgp_clear_route_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a6a68ec86881e2e24c1dfdd8a47267e81a362c076b1b729ff5b2c64125e029bb83"></a><!-- doxytag: member="BGP_CLEAR_ROUTE_NORMAL" ref="a6a68ec86881e2e24c1dfdd8a47267e81a362c076b1b729ff5b2c64125e029bb83" args="" -->BGP_CLEAR_ROUTE_NORMAL</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a6a68ec86881e2e24c1dfdd8a47267e81a8c1adeda524233bcf00f4616680e0643"></a><!-- doxytag: member="BGP_CLEAR_ROUTE_MY_RSCLIENT" ref="a6a68ec86881e2e24c1dfdd8a47267e81a8c1adeda524233bcf00f4616680e0643" args="" -->BGP_CLEAR_ROUTE_MY_RSCLIENT</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="bgp__route_8h_source.html#l00163">163</a> of file <a class="el" href="bgp__route_8h_source.html">bgp_route.h</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="bgp__route_8h.html#a6a68ec86881e2e24c1dfdd8a47267e81a362c076b1b729ff5b2c64125e029bb83">BGP_CLEAR_ROUTE_NORMAL</a>,
  <a class="code" href="bgp__route_8h.html#a6a68ec86881e2e24c1dfdd8a47267e81a8c1adeda524233bcf00f4616680e0643">BGP_CLEAR_ROUTE_MY_RSCLIENT</a>
};
</pre></div>
</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a91162dd024d89c577f51b3615b75496f"></a><!-- doxytag: member="bgp_route.h::bgp_aggregate_decrement" ref="a91162dd024d89c577f51b3615b75496f" args="(struct bgp *, struct prefix *, struct bgp_info *, afi_t, safi_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_aggregate_decrement </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbgp.html">bgp</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbgp__info.html">bgp_info</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac218a5ef2e04869ebdac5ea9bfbf19e2"></a><!-- doxytag: member="bgp_route.h::bgp_aggregate_increment" ref="ac218a5ef2e04869ebdac5ea9bfbf19e2" args="(struct bgp *, struct prefix *, struct bgp_info *, afi_t, safi_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_aggregate_increment </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbgp.html">bgp</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbgp__info.html">bgp_info</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2382a6967df7af7f2b52a8afdb9b57b8"></a><!-- doxytag: member="bgp_route.h::bgp_announce_route" ref="a2382a6967df7af7f2b52a8afdb9b57b8" args="(struct peer *, afi_t, safi_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_announce_route </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpeer.html">peer</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l02551">2551</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structbgp__table.html">bgp_table</a> *table;

  <span class="keywordflow">if</span> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ae39d16f69d65fec0f4f1908b4a33e6c6">status</a> != <a class="code" href="bgpd_8h.html#aa87809ec7dea97b0e970e98ae6c181ea">Established</a>)
    <span class="keywordflow">return</span>;

  <span class="keywordflow">if</span> (! <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a08da0f40c72c2016e659539e6af6dc2d">afc_nego</a>[<a class="code" href="structbgp__table.html#a65e5c5b62b7afc22106369584ecefd5d">afi</a>][<a class="code" href="structbgp__table.html#a1c64abd56c9540ab9e4a144068ed1caa">safi</a>])
    <span class="keywordflow">return</span>;

  <span class="comment">/* First update is deferred until ORF or ROUTE-REFRESH is received */</span>
  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ab49d7e30a6869bf9f0753afe25b17c6a">af_sflags</a>[<a class="code" href="structbgp__table.html#a65e5c5b62b7afc22106369584ecefd5d">afi</a>][safi], <a class="code" href="bgpd_8h.html#af38b3d01fa7faa6698e76d7932ff717f">PEER_STATUS_ORF_WAIT_REFRESH</a>))
    <span class="keywordflow">return</span>;

  <span class="keywordflow">if</span> (safi != <a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>)
    <a class="code" href="bgp__route_8c.html#aed62e72345c65c8374702d58b4d8a5fa">bgp_announce_table</a> (<a class="code" href="structpeer.html">peer</a>, <a class="code" href="structbgp__table.html#a65e5c5b62b7afc22106369584ecefd5d">afi</a>, safi, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);
  <span class="keywordflow">else</span>
    <span class="keywordflow">for</span> (rn = <a class="code" href="bgp__table_8c.html#af8ce42494729d03a8c7ca41ded487bb2">bgp_table_top</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#aaff7e2f66146a076913d2fe3217edf2c">bgp</a>-&gt;<a class="code" href="structbgp.html#a165710ce04dcbf78397c514707c15f3b">rib</a>[<a class="code" href="structbgp__table.html#a65e5c5b62b7afc22106369584ecefd5d">afi</a>][safi]); rn;
     rn = <a class="code" href="bgp__table_8c.html#abdeced48b9b4aad614c88dc63ea0a4cf">bgp_route_next</a>(rn))
      <span class="keywordflow">if</span> ((table = (rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>)) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
       <a class="code" href="bgp__route_8c.html#aed62e72345c65c8374702d58b4d8a5fa">bgp_announce_table</a> (<a class="code" href="structpeer.html">peer</a>, <a class="code" href="structbgp__table.html#a65e5c5b62b7afc22106369584ecefd5d">afi</a>, safi, table, 0);

  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a>(<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ad491ddb5e6d94d1db07405243d445c54">af_flags</a>[<a class="code" href="structbgp__table.html#a65e5c5b62b7afc22106369584ecefd5d">afi</a>][safi], <a class="code" href="bgpd_8h.html#abf59e9a9022e80ecdc266d86f35b378e">PEER_FLAG_RSERVER_CLIENT</a>))
    <a class="code" href="bgp__route_8c.html#aed62e72345c65c8374702d58b4d8a5fa">bgp_announce_table</a> (<a class="code" href="structpeer.html">peer</a>, <a class="code" href="structbgp__table.html#a65e5c5b62b7afc22106369584ecefd5d">afi</a>, safi, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae8a4fa2ea66d3ef20564f2404a5fda5c"></a><!-- doxytag: member="bgp_route.h::bgp_announce_route_all" ref="ae8a4fa2ea66d3ef20564f2404a5fda5c" args="(struct peer *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_announce_route_all </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpeer.html">peer</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l02579">2579</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a> <a class="code" href="structbgp__table.html#a65e5c5b62b7afc22106369584ecefd5d">afi</a>;
  <a class="code" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a> <a class="code" href="structbgp__table.html#a1c64abd56c9540ab9e4a144068ed1caa">safi</a>;
  
  <span class="keywordflow">for</span> (afi = <a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>; afi &lt; <a class="code" href="zebra_8h.html#abf129a17e985713a26a6181a198d5f1a">AFI_MAX</a>; afi++)
    <span class="keywordflow">for</span> (safi = <a class="code" href="zebra_8h.html#afb8a63d76f4951ff8d73c32256b4a497">SAFI_UNICAST</a>; safi &lt; <a class="code" href="zebra_8h.html#a82fe6f63e822f7bf9e4567873d809ed8">SAFI_MAX</a>; safi++)
      <a class="code" href="bgp__route_8c.html#a034115d44bc2a9935df0a481d462aaf7">bgp_announce_route</a> (<a class="code" href="structpeer.html">peer</a>, afi, safi);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2fdb62c8a10046002627ce0298e0d404"></a><!-- doxytag: member="bgp_route.h::bgp_check_local_routes_rsclient" ref="a2fdb62c8a10046002627ce0298e0d404" args="(struct peer *rsclient, afi_t afi, safi_t safi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_check_local_routes_rsclient </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpeer.html">peer</a> *&#160;</td>
          <td class="paramname"><em>rsclient</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname"><em>afi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname"><em>safi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l03582">3582</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structbgp__static.html">bgp_static</a> *<a class="code" href="structbgp__static.html">bgp_static</a>;
  <span class="keyword">struct </span><a class="code" href="structbgp.html">bgp</a> *<a class="code" href="bgp__capability__test_8c.html#a528a1146825f30f8df2ae2e9d61dd7be">bgp</a>;
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structprefix.html">prefix</a> *<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;

  bgp = rsclient-&gt;<a class="code" href="structpeer.html#aaff7e2f66146a076913d2fe3217edf2c">bgp</a>;

  <span class="keywordflow">for</span> (rn = <a class="code" href="bgp__table_8c.html#af8ce42494729d03a8c7ca41ded487bb2">bgp_table_top</a> (bgp-&gt;<a class="code" href="structbgp.html#af06132502d1bbb4584e996e978254e34">route</a>[afi][safi]); rn; rn = <a class="code" href="bgp__table_8c.html#abdeced48b9b4aad614c88dc63ea0a4cf">bgp_route_next</a> (rn))
    <span class="keywordflow">if</span> ((bgp_static = rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
      {
        p = &amp;rn-&gt;<a class="code" href="structbgp__node.html#a61c7e08de23a3c64f8dd738448567cde">p</a>;

        <a class="code" href="bgp__route_8c.html#adde0f36163e0fb2c47de7cf95f8bbe56">bgp_static_update_rsclient</a> (rsclient, p, bgp_static,
                afi, safi);
      }
}
</pre></div>
</div>
</div>
<a class="anchor" id="adf17dd6a8dfaa2ab4f271b491de030d0"></a><!-- doxytag: member="bgp_route.h::bgp_cleanup_routes" ref="adf17dd6a8dfaa2ab4f271b491de030d0" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_cleanup_routes </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l02969">2969</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structbgp.html">bgp</a> *<a class="code" href="bgp__capability__test_8c.html#a528a1146825f30f8df2ae2e9d61dd7be">bgp</a>;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structbgp__table.html">bgp_table</a> *table;
  <span class="keyword">struct </span><a class="code" href="structbgp__info.html">bgp_info</a> *ri;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (<a class="code" href="bgpd_8c.html#adeab9451f33cb80e3dad19688138d378">bm</a>-&gt;<a class="code" href="structbgp__master.html#a781eb39eeb74ba12d8cb78f887d4d755">bgp</a>, node, nnode, bgp))
    {
      table = bgp-&gt;<a class="code" href="structbgp.html#a165710ce04dcbf78397c514707c15f3b">rib</a>[<a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>][<a class="code" href="zebra_8h.html#afb8a63d76f4951ff8d73c32256b4a497">SAFI_UNICAST</a>];

      <span class="keywordflow">for</span> (rn = <a class="code" href="bgp__table_8c.html#af8ce42494729d03a8c7ca41ded487bb2">bgp_table_top</a> (table); rn; rn = <a class="code" href="bgp__table_8c.html#abdeced48b9b4aad614c88dc63ea0a4cf">bgp_route_next</a> (rn))
    <span class="keywordflow">for</span> (ri = rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>; ri; ri = ri-&gt;<a class="code" href="structbgp__info.html#a7a49886b20a2c95c08baa23149501a2a">next</a>)
      <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (ri-&gt;<a class="code" href="structbgp__info.html#a7ae2579adaf8f2fae14dc9d5fc23e976">flags</a>, <a class="code" href="bgp__route_8h.html#a43b3eb776824e6b86970e3886120913e">BGP_INFO_SELECTED</a>)
          &amp;&amp; ri-&gt;<a class="code" href="structbgp__info.html#a7d70d35aa6ab6fa769c8e7d662288a35">type</a> == <a class="code" href="zebra_8h.html#a1991829492a88a5df46712d8782240a0">ZEBRA_ROUTE_BGP</a> 
          &amp;&amp; ri-&gt;<a class="code" href="structbgp__info.html#a1126336f7eec606018fa96967a4e5bfb">sub_type</a> == <a class="code" href="bgp__route_8h.html#a4734a795191347f5279e59e64c75b7a3">BGP_ROUTE_NORMAL</a>)
        <a class="code" href="bgp__zebra_8c.html#a067b7ce285841e44d9fa9d827bb83740">bgp_zebra_withdraw</a> (&amp;rn-&gt;<a class="code" href="structbgp__node.html#a61c7e08de23a3c64f8dd738448567cde">p</a>, ri);

      table = bgp-&gt;<a class="code" href="structbgp.html#a165710ce04dcbf78397c514707c15f3b">rib</a>[<a class="code" href="zebra_8h.html#ad10f30457e426e1d269466d3b6603c3c">AFI_IP6</a>][<a class="code" href="zebra_8h.html#afb8a63d76f4951ff8d73c32256b4a497">SAFI_UNICAST</a>];

      <span class="keywordflow">for</span> (rn = <a class="code" href="bgp__table_8c.html#af8ce42494729d03a8c7ca41ded487bb2">bgp_table_top</a> (table); rn; rn = <a class="code" href="bgp__table_8c.html#abdeced48b9b4aad614c88dc63ea0a4cf">bgp_route_next</a> (rn))
    <span class="keywordflow">for</span> (ri = rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>; ri; ri = ri-&gt;<a class="code" href="structbgp__info.html#a7a49886b20a2c95c08baa23149501a2a">next</a>)
      <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (ri-&gt;<a class="code" href="structbgp__info.html#a7ae2579adaf8f2fae14dc9d5fc23e976">flags</a>, <a class="code" href="bgp__route_8h.html#a43b3eb776824e6b86970e3886120913e">BGP_INFO_SELECTED</a>)
          &amp;&amp; ri-&gt;<a class="code" href="structbgp__info.html#a7d70d35aa6ab6fa769c8e7d662288a35">type</a> == <a class="code" href="zebra_8h.html#a1991829492a88a5df46712d8782240a0">ZEBRA_ROUTE_BGP</a> 
          &amp;&amp; ri-&gt;<a class="code" href="structbgp__info.html#a1126336f7eec606018fa96967a4e5bfb">sub_type</a> == <a class="code" href="bgp__route_8h.html#a4734a795191347f5279e59e64c75b7a3">BGP_ROUTE_NORMAL</a>)
        <a class="code" href="bgp__zebra_8c.html#a067b7ce285841e44d9fa9d827bb83740">bgp_zebra_withdraw</a> (&amp;rn-&gt;<a class="code" href="structbgp__node.html#a61c7e08de23a3c64f8dd738448567cde">p</a>, ri);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7420ba6c9ffc1bee7f06418e2872f1c6"></a><!-- doxytag: member="bgp_route.h::bgp_clear_adj_in" ref="a7420ba6c9ffc1bee7f06418e2872f1c6" args="(struct peer *, afi_t, safi_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_clear_adj_in </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpeer.html">peer</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l02928">2928</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structbgp__table.html">bgp_table</a> *table;
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structbgp__adj__in.html">bgp_adj_in</a> *ain;

  table = <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#aaff7e2f66146a076913d2fe3217edf2c">bgp</a>-&gt;<a class="code" href="structbgp.html#a165710ce04dcbf78397c514707c15f3b">rib</a>[afi][safi];

  <span class="keywordflow">for</span> (rn = <a class="code" href="bgp__table_8c.html#af8ce42494729d03a8c7ca41ded487bb2">bgp_table_top</a> (table); rn; rn = <a class="code" href="bgp__table_8c.html#abdeced48b9b4aad614c88dc63ea0a4cf">bgp_route_next</a> (rn))
    <span class="keywordflow">for</span> (ain = rn-&gt;<a class="code" href="structbgp__node.html#a47213f2ff58ef9de9f5daf62b8f918be">adj_in</a>; ain ; ain = ain-&gt;<a class="code" href="structbgp__adj__in.html#aaa2dc023411504da13bde05352687565">next</a>)
      <span class="keywordflow">if</span> (ain-&gt;<a class="code" href="structbgp__adj__in.html#ab6bb20edc80c75c836662a675102301d">peer</a> == <a class="code" href="structpeer.html">peer</a>)
    {
          <a class="code" href="bgp__advertise_8c.html#a10c89147ee0e113b39318daa8cb5dc66">bgp_adj_in_remove</a> (rn, ain);
          <a class="code" href="bgp__table_8c.html#a5f6b53d4f2cd155109c2eec1fcf80687">bgp_unlock_node</a> (rn);
          <span class="keywordflow">break</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3df4ec5505fc1d5ad1434122c008f9cd"></a><!-- doxytag: member="bgp_route.h::bgp_clear_route" ref="a3df4ec5505fc1d5ad1434122c008f9cd" args="(struct peer *, afi_t, safi_t, enum bgp_clear_route_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_clear_route </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpeer.html">peer</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum&#160;</td>
          <td class="paramname"><em>bgp_clear_route_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l02841">2841</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structbgp__table.html">bgp_table</a> *table;
  <span class="keyword">struct </span><a class="code" href="structpeer.html">peer</a> *rsclient;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;

  <span class="keywordflow">if</span> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a194efb8be481f6589ff18fbbc509edbd">clear_node_queue</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <a class="code" href="bgp__route_8c.html#a59f1fa7a624fe068801d9dc834b7272f">bgp_clear_node_queue_init</a> (<a class="code" href="structpeer.html">peer</a>);
  
  <span class="comment">/* bgp_fsm.c keeps sessions in state Clearing, not transitioning to</span>
<span class="comment">   * Idle until it receives a Clearing_Completed event. This protects</span>
<span class="comment">   * against peers which flap faster than we can we clear, which could</span>
<span class="comment">   * lead to:</span>
<span class="comment">   *</span>
<span class="comment">   * a) race with routes from the new session being installed before</span>
<span class="comment">   *    clear_route_node visits the node (to delete the route of that</span>
<span class="comment">   *    peer)</span>
<span class="comment">   * b) resource exhaustion, clear_route_node likely leads to an entry</span>
<span class="comment">   *    on the process_main queue. Fast-flapping could cause that queue</span>
<span class="comment">   *    to grow and grow.</span>
<span class="comment">   */</span>
  <span class="keywordflow">if</span> (!<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a194efb8be481f6589ff18fbbc509edbd">clear_node_queue</a>-&gt;<a class="code" href="structwork__queue.html#aa7a1097e517f22c4a289a8db9e91005d">thread</a>)
    <a class="code" href="bgpd_8c.html#a05008955933f8ba5f831e03862ca5b94">peer_lock</a> (<a class="code" href="structpeer.html">peer</a>); <span class="comment">/* bgp_clear_node_complete */</span>

  <span class="keywordflow">switch</span> (purpose)
    {
    <span class="keywordflow">case</span> <a class="code" href="bgp__route_8h.html#a6a68ec86881e2e24c1dfdd8a47267e81a362c076b1b729ff5b2c64125e029bb83">BGP_CLEAR_ROUTE_NORMAL</a>:
      <span class="keywordflow">if</span> (safi != <a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>)
        <a class="code" href="bgp__route_8c.html#ad3a33b21d2801a0df0a610da8d41783f">bgp_clear_route_table</a> (<a class="code" href="structpeer.html">peer</a>, afi, safi, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, purpose);
      <span class="keywordflow">else</span>
        <span class="keywordflow">for</span> (rn = <a class="code" href="bgp__table_8c.html#af8ce42494729d03a8c7ca41ded487bb2">bgp_table_top</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#aaff7e2f66146a076913d2fe3217edf2c">bgp</a>-&gt;<a class="code" href="structbgp.html#a165710ce04dcbf78397c514707c15f3b">rib</a>[afi][safi]); rn;
             rn = <a class="code" href="bgp__table_8c.html#abdeced48b9b4aad614c88dc63ea0a4cf">bgp_route_next</a> (rn))
          <span class="keywordflow">if</span> ((table = rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
            <a class="code" href="bgp__route_8c.html#ad3a33b21d2801a0df0a610da8d41783f">bgp_clear_route_table</a> (<a class="code" href="structpeer.html">peer</a>, afi, safi, table, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, purpose);

      <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#aaff7e2f66146a076913d2fe3217edf2c">bgp</a>-&gt;<a class="code" href="structbgp.html#a4ccd4dea11eddfa74dc5518fdb448b67">rsclient</a>, node, nnode, rsclient))
        <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a>(rsclient-&gt;<a class="code" href="structpeer.html#ad491ddb5e6d94d1db07405243d445c54">af_flags</a>[afi][safi],
                       <a class="code" href="bgpd_8h.html#abf59e9a9022e80ecdc266d86f35b378e">PEER_FLAG_RSERVER_CLIENT</a>))
          <a class="code" href="bgp__route_8c.html#ad3a33b21d2801a0df0a610da8d41783f">bgp_clear_route_table</a> (<a class="code" href="structpeer.html">peer</a>, afi, safi, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, rsclient, purpose);
      <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="bgp__route_8h.html#a6a68ec86881e2e24c1dfdd8a47267e81a8c1adeda524233bcf00f4616680e0643">BGP_CLEAR_ROUTE_MY_RSCLIENT</a>:
      <a class="code" href="bgp__route_8c.html#ad3a33b21d2801a0df0a610da8d41783f">bgp_clear_route_table</a> (<a class="code" href="structpeer.html">peer</a>, afi, safi, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="structpeer.html">peer</a>, purpose);
      <span class="keywordflow">break</span>;

    <span class="keywordflow">default</span>:
      <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (0);
      <span class="keywordflow">break</span>;
    }
  
  <span class="comment">/* If no routes were cleared, nothing was added to workqueue, the</span>
<span class="comment">   * completion function won&#39;t be run by workqueue code - call it here. </span>
<span class="comment">   * XXX: Actually, this assumption doesn&#39;t hold, see</span>
<span class="comment">   * bgp_clear_route_table(), we queue all non-empty nodes.</span>
<span class="comment">   *</span>
<span class="comment">   * Additionally, there is a presumption in FSM that clearing is only</span>
<span class="comment">   * really needed if peer state is Established - peers in</span>
<span class="comment">   * pre-Established states shouldn&#39;t have any route-update state</span>
<span class="comment">   * associated with them (in or out).</span>
<span class="comment">   *</span>
<span class="comment">   * We still can get here in pre-Established though, through</span>
<span class="comment">   * peer_delete -&gt; bgp_fsm_change_status, so this is a useful sanity</span>
<span class="comment">   * check to ensure the assumption above holds.</span>
<span class="comment">   *</span>
<span class="comment">   * At some future point, this check could be move to the top of the</span>
<span class="comment">   * function, and do a quick early-return when state is</span>
<span class="comment">   * pre-Established, avoiding above list and table scans. Once we&#39;re</span>
<span class="comment">   * sure it is safe..</span>
<span class="comment">   */</span>
  <span class="keywordflow">if</span> (!<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a194efb8be481f6589ff18fbbc509edbd">clear_node_queue</a>-&gt;<a class="code" href="structwork__queue.html#aa7a1097e517f22c4a289a8db9e91005d">thread</a>)
    <a class="code" href="bgp__route_8c.html#ac0796b20b150f25a0bb4f1427ac71c86">bgp_clear_node_complete</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a194efb8be481f6589ff18fbbc509edbd">clear_node_queue</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a179a18ad1eb8a8d2e914f90f4a227226"></a><!-- doxytag: member="bgp_route.h::bgp_clear_route_all" ref="a179a18ad1eb8a8d2e914f90f4a227226" args="(struct peer *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_clear_route_all </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpeer.html">peer</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l02917">2917</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a> afi;
  <a class="code" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a> safi;

  <span class="keywordflow">for</span> (afi = <a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>; afi &lt; <a class="code" href="zebra_8h.html#abf129a17e985713a26a6181a198d5f1a">AFI_MAX</a>; afi++)
    <span class="keywordflow">for</span> (safi = <a class="code" href="zebra_8h.html#afb8a63d76f4951ff8d73c32256b4a497">SAFI_UNICAST</a>; safi &lt; <a class="code" href="zebra_8h.html#a82fe6f63e822f7bf9e4567873d809ed8">SAFI_MAX</a>; safi++)
      <a class="code" href="bgp__route_8c.html#a6b07bcee214a0802a945370276bb213e">bgp_clear_route</a> (<a class="code" href="structpeer.html">peer</a>, afi, safi, <a class="code" href="bgp__route_8h.html#a6a68ec86881e2e24c1dfdd8a47267e81a362c076b1b729ff5b2c64125e029bb83">BGP_CLEAR_ROUTE_NORMAL</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a98cfb4a18642829264e13a2397a800ed"></a><!-- doxytag: member="bgp_route.h::bgp_clear_stale_route" ref="a98cfb4a18642829264e13a2397a800ed" args="(struct peer *, afi_t, safi_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_clear_stale_route </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpeer.html">peer</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l02947">2947</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structbgp__info.html">bgp_info</a> *ri;
  <span class="keyword">struct </span><a class="code" href="structbgp__table.html">bgp_table</a> *table;

  table = <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#aaff7e2f66146a076913d2fe3217edf2c">bgp</a>-&gt;<a class="code" href="structbgp.html#a165710ce04dcbf78397c514707c15f3b">rib</a>[<a class="code" href="structbgp__table.html#a65e5c5b62b7afc22106369584ecefd5d">afi</a>][<a class="code" href="structbgp__table.html#a1c64abd56c9540ab9e4a144068ed1caa">safi</a>];

  <span class="keywordflow">for</span> (rn = <a class="code" href="bgp__table_8c.html#af8ce42494729d03a8c7ca41ded487bb2">bgp_table_top</a> (table); rn; rn = <a class="code" href="bgp__table_8c.html#abdeced48b9b4aad614c88dc63ea0a4cf">bgp_route_next</a> (rn))
    {
      <span class="keywordflow">for</span> (ri = rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>; ri; ri = ri-&gt;<a class="code" href="structbgp__info.html#a7a49886b20a2c95c08baa23149501a2a">next</a>)
    <span class="keywordflow">if</span> (ri-&gt;<a class="code" href="structbgp__info.html#a367917f671400c20f33e512fa2c435dc">peer</a> == <a class="code" href="structpeer.html">peer</a>)
      {
        <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (ri-&gt;<a class="code" href="structbgp__info.html#a7ae2579adaf8f2fae14dc9d5fc23e976">flags</a>, <a class="code" href="bgp__route_8h.html#a455eac0750f63b056c8c5aff39222927">BGP_INFO_STALE</a>))
          <a class="code" href="bgp__route_8c.html#af17eefd0fc4a1bd8d98f657810e26741">bgp_rib_remove</a> (rn, ri, <a class="code" href="structpeer.html">peer</a>, <a class="code" href="structbgp__table.html#a65e5c5b62b7afc22106369584ecefd5d">afi</a>, <a class="code" href="structbgp__table.html#a1c64abd56c9540ab9e4a144068ed1caa">safi</a>);
        <span class="keywordflow">break</span>;
      }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac7a2375c41537180015d8dd33798155e"></a><!-- doxytag: member="bgp_route.h::bgp_config_write_distance" ref="ac7a2375c41537180015d8dd33798155e" args="(struct vty *, struct bgp *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bgp_config_write_distance </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbgp.html">bgp</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa38f753615df9694fa3f47fa11b3ebf2"></a><!-- doxytag: member="bgp_route.h::bgp_config_write_network" ref="aa38f753615df9694fa3f47fa11b3ebf2" args="(struct vty *, struct bgp *, afi_t, safi_t, int *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bgp_config_write_network </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbgp.html">bgp</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4432313420cf4b67e1b84b05e4b7a025"></a><!-- doxytag: member="bgp_route.h::bgp_default_originate" ref="a4432313420cf4b67e1b84b05e4b7a025" args="(struct peer *, afi_t, safi_t, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_default_originate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpeer.html">peer</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l02434">2434</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structbgp.html">bgp</a> *<a class="code" href="bgp__capability__test_8c.html#a528a1146825f30f8df2ae2e9d61dd7be">bgp</a>;
  <span class="keyword">struct </span><a class="code" href="structattr.html">attr</a> <a class="code" href="structattr.html">attr</a> = { 0 };
  <span class="keyword">struct </span><a class="code" href="structaspath.html">aspath</a> *<a class="code" href="structaspath.html">aspath</a> = { 0 };
  <span class="keyword">struct </span><a class="code" href="structprefix.html">prefix</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keyword">struct </span><a class="code" href="structbgp__info.html">bgp_info</a> binfo;
  <span class="keyword">struct </span><a class="code" href="structpeer.html">peer</a> *from;
  <span class="keywordtype">int</span> ret = <a class="code" href="routemap_8h.html#afd7345bfd662f1e7c77f0be351cd1516aa0f40f0a91e43bfe7131839fe179ac64">RMAP_DENYMATCH</a>;
  
  <span class="keywordflow">if</span> (!(afi == <a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a> || afi == <a class="code" href="zebra_8h.html#ad10f30457e426e1d269466d3b6603c3c">AFI_IP6</a>))
    <span class="keywordflow">return</span>;
  
  bgp = <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#aaff7e2f66146a076913d2fe3217edf2c">bgp</a>;
  from = bgp-&gt;<a class="code" href="structbgp.html#ad576e7fa007ce5b32e2d6768813841f2">peer_self</a>;
  
  <a class="code" href="bgp__attr_8c.html#afe11e9b57f736617eca855aceae26f28">bgp_attr_default_set</a> (&amp;attr, <a class="code" href="bgpd_8h.html#a23e729207777c4691b94d476003c6ac9">BGP_ORIGIN_IGP</a>);
  aspath = attr.<a class="code" href="structattr.html#a89311608450bb3b97bccc835e9b004f0">aspath</a>;
  attr.<a class="code" href="structattr.html#aa7caa960ced4e67e8aec2b0ab3d9b0b0">local_pref</a> = bgp-&gt;<a class="code" href="structbgp.html#a401cfb8180562498c071d48e0fe58c97">default_local_pref</a>;
  <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (&amp;attr.<a class="code" href="structattr.html#ab23f9ed5b7c55ea658ab6dc729bc9e63">nexthop</a>, &amp;<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#acf0de33545a449bafcefaefd963f1995">nexthop</a>.<a class="code" href="structbgp__nexthop.html#a8fed6fdf9282fb5e87f3f52b94313646">v4</a>, <a class="code" href="prefix_8h.html#a013983d7a5267a63023c50ab32a85c24">IPV4_MAX_BYTELEN</a>);

  <span class="keywordflow">if</span> (afi == <a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>)
    <a class="code" href="prefix_8c.html#a35f57d44562d00baaf5d227d03214786">str2prefix</a> (<span class="stringliteral">&quot;0.0.0.0/0&quot;</span>, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
<span class="preprocessor">#ifdef HAVE_IPV6</span>
<span class="preprocessor"></span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (afi == <a class="code" href="zebra_8h.html#ad10f30457e426e1d269466d3b6603c3c">AFI_IP6</a>)
    {
      <span class="keyword">struct </span><a class="code" href="structattr__extra.html">attr_extra</a> *ae;
      attr.<a class="code" href="structattr.html#a948ca8050af06bf4fda46519eb8ec179">extra</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
      
      ae = <a class="code" href="bgp__attr_8c.html#a31ef3828cd7a1375f7b7dfe02aab705f">bgp_attr_extra_get</a> (&amp;attr);
      attr.<a class="code" href="structattr.html#a948ca8050af06bf4fda46519eb8ec179">extra</a> = ae;
      
      <a class="code" href="prefix_8c.html#a35f57d44562d00baaf5d227d03214786">str2prefix</a> (<span class="stringliteral">&quot;::/0&quot;</span>, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);

      <span class="comment">/* IPv6 global nexthop must be included. */</span>
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (&amp;ae-&gt;mp_nexthop_global, &amp;<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#acf0de33545a449bafcefaefd963f1995">nexthop</a>.v6_global, 
          <a class="code" href="prefix_8h.html#ac2642af4f4d7a4209ad6261e72c658f9">IPV6_MAX_BYTELEN</a>);
          ae-&gt;<a class="code" href="structattr__extra.html#aa9572231b6d45822cd1af557583cdba5">mp_nexthop_len</a> = 16;
 
      <span class="comment">/* If the peer is on shared nextwork and we have link-local</span>
<span class="comment">     nexthop set it. */</span>
      <span class="keywordflow">if</span> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ab2847caa2148b30de1db8f52b8c7dad9">shared_network</a> 
      &amp;&amp; !IN6_IS_ADDR_UNSPECIFIED (&amp;<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#acf0de33545a449bafcefaefd963f1995">nexthop</a>.v6_local))
    {
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (&amp;ae-&gt;mp_nexthop_local, &amp;<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#acf0de33545a449bafcefaefd963f1995">nexthop</a>.v6_local, 
          <a class="code" href="prefix_8h.html#ac2642af4f4d7a4209ad6261e72c658f9">IPV6_MAX_BYTELEN</a>);
      ae-&gt;<a class="code" href="structattr__extra.html#aa9572231b6d45822cd1af557583cdba5">mp_nexthop_len</a> = 32;
    }
    }
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>

  <span class="keywordflow">if</span> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#adaa47d231b6aae95157727ddbb836886">default_rmap</a>[afi][safi].<a class="code" href="structpeer.html#a72e35e12b6a073cd627df5e012038c16">name</a>)
    {
      binfo.peer = bgp-&gt;<a class="code" href="structbgp.html#ad576e7fa007ce5b32e2d6768813841f2">peer_self</a>;
      binfo.attr = &amp;attr;

      <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (bgp-&gt;<a class="code" href="structbgp.html#ad576e7fa007ce5b32e2d6768813841f2">peer_self</a>-&gt;<a class="code" href="structpeer.html#afad0d7ca0b1d0d8bdea5bb8eaba1ef65">rmap_type</a>, <a class="code" href="bgpd_8h.html#aa2464065e408b72a051e299c8b11e1f9">PEER_RMAP_TYPE_DEFAULT</a>);

      ret = <a class="code" href="routemap_8c.html#a3372553a024332702cfd603e1f4c08d6">route_map_apply</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#adaa47d231b6aae95157727ddbb836886">default_rmap</a>[afi][safi].<a class="code" href="structpeer.html#a4e3fea3d9cdc1addc3615f1906220a54">map</a>, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>,
                 <a class="code" href="routemap_8h.html#ae21439463f873ce0ce1556c9d6fa7370adcb3bc0f6448923a387dfe3658ca7bda">RMAP_BGP</a>, &amp;binfo);

      bgp-&gt;<a class="code" href="structbgp.html#ad576e7fa007ce5b32e2d6768813841f2">peer_self</a>-&gt;<a class="code" href="structpeer.html#afad0d7ca0b1d0d8bdea5bb8eaba1ef65">rmap_type</a> = 0;

      <span class="keywordflow">if</span> (ret == <a class="code" href="routemap_8h.html#afd7345bfd662f1e7c77f0be351cd1516aa0f40f0a91e43bfe7131839fe179ac64">RMAP_DENYMATCH</a>)
    {
      <a class="code" href="bgp__attr_8c.html#a3ea9ed94bcd0236f8f83310615e7c022">bgp_attr_flush</a> (&amp;attr);
      withdraw = 1;
    }
    }

  <span class="keywordflow">if</span> (withdraw)
    {
      <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ab49d7e30a6869bf9f0753afe25b17c6a">af_sflags</a>[afi][safi], <a class="code" href="bgpd_8h.html#a7ce39647237ee1e1b720e6d0d4056efe">PEER_STATUS_DEFAULT_ORIGINATE</a>))
    <a class="code" href="bgp__packet_8c.html#aa71da9143ef196d665fd6cb773885f61">bgp_default_withdraw_send</a> (<a class="code" href="structpeer.html">peer</a>, afi, safi);
      <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ab49d7e30a6869bf9f0753afe25b17c6a">af_sflags</a>[afi][safi], <a class="code" href="bgpd_8h.html#a7ce39647237ee1e1b720e6d0d4056efe">PEER_STATUS_DEFAULT_ORIGINATE</a>);
    }
  <span class="keywordflow">else</span>
    {
      <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ab49d7e30a6869bf9f0753afe25b17c6a">af_sflags</a>[afi][safi], <a class="code" href="bgpd_8h.html#a7ce39647237ee1e1b720e6d0d4056efe">PEER_STATUS_DEFAULT_ORIGINATE</a>);
      <a class="code" href="bgp__packet_8c.html#abe0b30eef3af58da0c5ae5e870e91851">bgp_default_update_send</a> (<a class="code" href="structpeer.html">peer</a>, &amp;attr, afi, safi, from);
    }
  
  <a class="code" href="bgp__attr_8c.html#ad1dd9bb1bf877185bbf32226438a03b0">bgp_attr_extra_free</a> (&amp;attr);
  <a class="code" href="bgp__aspath_8c.html#a414aa289179196886d9f059bdd41e81c">aspath_unintern</a> (aspath);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a45aae1ba2d5eedac029237c73f16881e"></a><!-- doxytag: member="bgp_route.h::bgp_distance_apply" ref="a45aae1ba2d5eedac029237c73f16881e" args="(struct prefix *, struct bgp_info *, struct bgp *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u_char bgp_distance_apply </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbgp__info.html">bgp_info</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbgp.html">bgp</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac7472ce06f993cd544f794c7b0381954"></a><!-- doxytag: member="bgp_route.h::bgp_info_add" ref="ac7472ce06f993cd544f794c7b0381954" args="(struct bgp_node *rn, struct bgp_info *ri)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_info_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbgp__node.html">bgp_node</a> *&#160;</td>
          <td class="paramname"><em>rn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbgp__info.html">bgp_info</a> *&#160;</td>
          <td class="paramname"><em>ri</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l00184">184</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structbgp__info.html">bgp_info</a> *top;

  top = rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>;
  
  ri-&gt;<a class="code" href="structbgp__info.html#a7a49886b20a2c95c08baa23149501a2a">next</a> = rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>;
  ri-&gt;<a class="code" href="structbgp__info.html#aa0fdbfcd4a2876a68a4476136b01fe3b">prev</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keywordflow">if</span> (top)
    top-&gt;<a class="code" href="structbgp__info.html#aa0fdbfcd4a2876a68a4476136b01fe3b">prev</a> = ri;
  rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a> = ri;
  
  <a class="code" href="bgp__route_8c.html#a58d087602593301ee3256a1ffd1321b8">bgp_info_lock</a> (ri);
  <a class="code" href="bgp__table_8c.html#a8c629ca0214d269ce20f39268b9196d7">bgp_lock_node</a> (rn);
  <a class="code" href="bgpd_8c.html#a05008955933f8ba5f831e03862ca5b94">peer_lock</a> (ri-&gt;<a class="code" href="structbgp__info.html#a367917f671400c20f33e512fa2c435dc">peer</a>); <span class="comment">/* bgp_info peer reference */</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="abfe260239e1b72a286e9c45a5aa1afbd"></a><!-- doxytag: member="bgp_route.h::bgp_info_delete" ref="abfe260239e1b72a286e9c45a5aa1afbd" args="(struct bgp_node *rn, struct bgp_info *ri)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_info_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbgp__node.html">bgp_node</a> *&#160;</td>
          <td class="paramname"><em>rn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbgp__info.html">bgp_info</a> *&#160;</td>
          <td class="paramname"><em>ri</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l00218">218</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="bgp__route_8c.html#a44f265aae5a483d9cef00d766759584a">bgp_info_set_flag</a> (rn, ri, <a class="code" href="bgp__route_8h.html#a0ff836da32782fe548f3fe570e5107e7">BGP_INFO_REMOVED</a>);
  <span class="comment">/* set of previous already took care of pcount */</span>
  <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (ri-&gt;<a class="code" href="structbgp__info.html#a7ae2579adaf8f2fae14dc9d5fc23e976">flags</a>, <a class="code" href="bgp__route_8h.html#aa7f689448430856658d348cc8d84f27d">BGP_INFO_VALID</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3636e4f4e5593b053bd4de054972ae11"></a><!-- doxytag: member="bgp_route.h::bgp_info_extra_get" ref="a3636e4f4e5593b053bd4de054972ae11" args="(struct bgp_info *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structbgp__info__extra.html">bgp_info_extra</a>* bgp_info_extra_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbgp__info.html">bgp_info</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l00121">121</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (!ri-&gt;extra)
    ri-&gt;extra = <a class="code" href="bgp__route_8c.html#a87ee6a929c17bd9186e7125d5670a309">bgp_info_extra_new</a>();
  <span class="keywordflow">return</span> ri-&gt;extra;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a659c82db6cce309f5b40eb1aff360ea6"></a><!-- doxytag: member="bgp_route.h::bgp_info_lock" ref="a659c82db6cce309f5b40eb1aff360ea6" args="(struct bgp_info *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structbgp__info.html">bgp_info</a>* bgp_info_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbgp__info.html">bgp_info</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l00150">150</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  binfo-&gt;lock++;
  <span class="keywordflow">return</span> binfo;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae5eb4de33b827eb9901877a609e2a41e"></a><!-- doxytag: member="bgp_route.h::bgp_info_set_flag" ref="ae5eb4de33b827eb9901877a609e2a41e" args="(struct bgp_node *, struct bgp_info *, u_int32_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_info_set_flag </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbgp__node.html">bgp_node</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbgp__info.html">bgp_info</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l00278">278</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (ri-&gt;flags, flag);
  
  <span class="comment">/* early bath if we know it&#39;s not a flag that changes useability state */</span>
  <span class="keywordflow">if</span> (!<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (flag, <a class="code" href="bgp__route_8h.html#aa7f689448430856658d348cc8d84f27d">BGP_INFO_VALID</a>|<a class="code" href="bgp__route_8h.html#aee2c962749a7df25a38ccd80559e50d5">BGP_INFO_UNUSEABLE</a>))
    <span class="keywordflow">return</span>;
  
  <a class="code" href="bgp__route_8c.html#af45d15e7f24645ea70bf8f3c8250921d">bgp_pcount_adjust</a> (rn, ri);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a08aecc5ca9b3d1055fcc1de43226d891"></a><!-- doxytag: member="bgp_route.h::bgp_info_unlock" ref="a08aecc5ca9b3d1055fcc1de43226d891" args="(struct bgp_info *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structbgp__info.html">bgp_info</a>* bgp_info_unlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbgp__info.html">bgp_info</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l00157">157</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="regex_8c.html#ad6d5aaa966ca7424f7cb9bd01f2c838b">assert</a> (binfo &amp;&amp; binfo-&gt;lock &gt; 0);
  binfo-&gt;lock--;
  
  <span class="keywordflow">if</span> (binfo-&gt;lock == 0)
    {
<span class="preprocessor">#if 0</span>
<span class="preprocessor"></span>      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;%s: unlocked and freeing&quot;</span>, __func__);
      <a class="code" href="log_8c.html#a007e475475f7a96147bbb4315b58bb2e">zlog_backtrace</a> (LOG_DEBUG);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>      <a class="code" href="bgp__route_8c.html#a5f6151beff24268f62320f62df673be2">bgp_info_free</a> (binfo);
      <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
    }

<span class="preprocessor">#if 0</span>
<span class="preprocessor"></span>  <span class="keywordflow">if</span> (binfo-&gt;lock == 1)
    {
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;%s: unlocked to 1&quot;</span>, __func__);
      <a class="code" href="log_8c.html#a007e475475f7a96147bbb4315b58bb2e">zlog_backtrace</a> (LOG_DEBUG);
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>  
  <span class="keywordflow">return</span> binfo;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa0b07d2d5f1e2f1f8bfccedb2f4d19af"></a><!-- doxytag: member="bgp_route.h::bgp_info_unset_flag" ref="aa0b07d2d5f1e2f1f8bfccedb2f4d19af" args="(struct bgp_node *, struct bgp_info *, u_int32_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_info_unset_flag </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbgp__node.html">bgp_node</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbgp__info.html">bgp_info</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l00290">290</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (ri-&gt;flags, flag);
  
  <span class="comment">/* early bath if we know it&#39;s not a flag that changes useability state */</span>
  <span class="keywordflow">if</span> (!<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (flag, <a class="code" href="bgp__route_8h.html#aa7f689448430856658d348cc8d84f27d">BGP_INFO_VALID</a>|<a class="code" href="bgp__route_8h.html#aee2c962749a7df25a38ccd80559e50d5">BGP_INFO_UNUSEABLE</a>))
    <span class="keywordflow">return</span>;
  
  <a class="code" href="bgp__route_8c.html#af45d15e7f24645ea70bf8f3c8250921d">bgp_pcount_adjust</a> (rn, ri);
}
</pre></div>
</div>
</div>
<a class="anchor" id="abc5dfdd23721464c47397f09e2a8d40d"></a><!-- doxytag: member="bgp_route.h::bgp_maximum_prefix_overflow" ref="abc5dfdd23721464c47397f09e2a8d40d" args="(struct peer *, afi_t, safi_t, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bgp_maximum_prefix_overflow </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpeer.html">peer</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l01684">1684</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (!<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ad491ddb5e6d94d1db07405243d445c54">af_flags</a>[afi][safi], <a class="code" href="bgpd_8h.html#a710895028dd35954651499aabaaadd8f">PEER_FLAG_MAX_PREFIX</a>))
    <span class="keywordflow">return</span> 0;

  <span class="keywordflow">if</span> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ad330ebcaa29077b76720f2d62f36dc24">pcount</a>[afi][safi] &gt; <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ac8db3cf3b014af5c13a5fdd81aa308dc">pmax</a>[afi][safi])
    {
      <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ab49d7e30a6869bf9f0753afe25b17c6a">af_sflags</a>[afi][safi], <a class="code" href="bgpd_8h.html#a9ffcb5ccd61d7cdd5809ff789a5f3ee6">PEER_STATUS_PREFIX_LIMIT</a>)
         &amp;&amp; ! always)
       <span class="keywordflow">return</span> 0;

      <a class="code" href="log_8c.html#a34f80af784b8ec394e7a7154a7ec7364">zlog</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a8042cd53718885196f47ee66b471ec3d">log</a>, LOG_INFO,
        <span class="stringliteral">&quot;%%MAXPFXEXCEED: No. of %s prefix received from %s %ld exceed, &quot;</span>
        <span class="stringliteral">&quot;limit %ld&quot;</span>, <a class="code" href="bgp__vty_8c.html#a12e00d9262b9e4efc00b5f1216541967">afi_safi_print</a> (afi, safi), <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ac3e4ca25642ebcc52b2d4b2143fa74fa">host</a>,
        <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ad330ebcaa29077b76720f2d62f36dc24">pcount</a>[afi][safi], <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ac8db3cf3b014af5c13a5fdd81aa308dc">pmax</a>[afi][safi]);
      <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ab49d7e30a6869bf9f0753afe25b17c6a">af_sflags</a>[afi][safi], <a class="code" href="bgpd_8h.html#a9ffcb5ccd61d7cdd5809ff789a5f3ee6">PEER_STATUS_PREFIX_LIMIT</a>);

      <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ad491ddb5e6d94d1db07405243d445c54">af_flags</a>[afi][safi], <a class="code" href="bgpd_8h.html#accd30eb7914fa9da016163a7679278e2">PEER_FLAG_MAX_PREFIX_WARNING</a>))
       <span class="keywordflow">return</span> 0;

      {
       u_int8_t ndata[7];

       <span class="keywordflow">if</span> (safi == <a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>)
         safi = <a class="code" href="bgpd_8h.html#a597e9437c3d1c7d5551d8232a70e89ae">BGP_SAFI_VPNV4</a>;
         
       ndata[0] = (afi &gt;&gt;  8);
       ndata[1] = afi;
       ndata[2] = safi;
       ndata[3] = (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ac8db3cf3b014af5c13a5fdd81aa308dc">pmax</a>[afi][safi] &gt;&gt; 24);
       ndata[4] = (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ac8db3cf3b014af5c13a5fdd81aa308dc">pmax</a>[afi][safi] &gt;&gt; 16);
       ndata[5] = (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ac8db3cf3b014af5c13a5fdd81aa308dc">pmax</a>[afi][safi] &gt;&gt; 8);
       ndata[6] = (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ac8db3cf3b014af5c13a5fdd81aa308dc">pmax</a>[afi][safi]);

       <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a8dd1d16a0890967ee343e1bc70292e4f">sflags</a>, <a class="code" href="bgpd_8h.html#a6df26783180e94b98072394c3c19e11b">PEER_STATUS_PREFIX_OVERFLOW</a>);
       <a class="code" href="bgp__packet_8c.html#a451c099a790874d1bca55ccb2c4a4057">bgp_notify_send_with_data</a> (<a class="code" href="structpeer.html">peer</a>, <a class="code" href="bgpd_8h.html#a3c020cba1f9b12568599a3eb7c979b09">BGP_NOTIFY_CEASE</a>,
                                  <a class="code" href="bgpd_8h.html#abcf95c6082bef31695fe404a22ff070c">BGP_NOTIFY_CEASE_MAX_PREFIX</a>, ndata, 7);
      }

      <span class="comment">/* restart timer start */</span>
      <span class="keywordflow">if</span> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a96573836a6d4f851ce15a2f8608e7298">pmax_restart</a>[afi][safi])
    {
      <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a5fd66e2c0a312e45d6eb755d4025ffd2">v_pmax_restart</a> = <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a96573836a6d4f851ce15a2f8608e7298">pmax_restart</a>[afi][safi] * 60;

      <span class="keywordflow">if</span> (<a class="code" href="bgp__debug_8h.html#a3652951eb4451c498ae4be9890d4b7a4">BGP_DEBUG</a> (events, EVENTS))
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;%s Maximum-prefix restart timer started for %d secs&quot;</span>,
            <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ac3e4ca25642ebcc52b2d4b2143fa74fa">host</a>, <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a5fd66e2c0a312e45d6eb755d4025ffd2">v_pmax_restart</a>);

      <a class="code" href="bgp__fsm_8h.html#aaf9fcd8314ca70eef21f5689423d7152">BGP_TIMER_ON</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ae4340980236449843f55d04b3ad4bf7e">t_pmax_restart</a>, <a class="code" href="bgp__route_8c.html#aa5fa9e55ce4581d5456d115a3f0a38a6">bgp_maximum_prefix_restart_timer</a>,
            <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a5fd66e2c0a312e45d6eb755d4025ffd2">v_pmax_restart</a>);
    }

      <span class="keywordflow">return</span> 1;
    }
  <span class="keywordflow">else</span>
    <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ab49d7e30a6869bf9f0753afe25b17c6a">af_sflags</a>[afi][safi], <a class="code" href="bgpd_8h.html#a9ffcb5ccd61d7cdd5809ff789a5f3ee6">PEER_STATUS_PREFIX_LIMIT</a>);

  <span class="keywordflow">if</span> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ad330ebcaa29077b76720f2d62f36dc24">pcount</a>[afi][safi] &gt; (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ac8db3cf3b014af5c13a5fdd81aa308dc">pmax</a>[afi][safi] * <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a197807bc5b1ad8f1ab100bca6e8d5227">pmax_threshold</a>[afi][safi] / 100))
    {
      <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ab49d7e30a6869bf9f0753afe25b17c6a">af_sflags</a>[afi][safi], <a class="code" href="bgpd_8h.html#a8ad5053ef329eaa221d650cdda116b61">PEER_STATUS_PREFIX_THRESHOLD</a>)
         &amp;&amp; ! always)
       <span class="keywordflow">return</span> 0;

      <a class="code" href="log_8c.html#a34f80af784b8ec394e7a7154a7ec7364">zlog</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a8042cd53718885196f47ee66b471ec3d">log</a>, LOG_INFO,
        <span class="stringliteral">&quot;%%MAXPFX: No. of %s prefix received from %s reaches %ld, max %ld&quot;</span>,
        <a class="code" href="bgp__vty_8c.html#a12e00d9262b9e4efc00b5f1216541967">afi_safi_print</a> (afi, safi), <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ac3e4ca25642ebcc52b2d4b2143fa74fa">host</a>, <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ad330ebcaa29077b76720f2d62f36dc24">pcount</a>[afi][safi],
        <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ac8db3cf3b014af5c13a5fdd81aa308dc">pmax</a>[afi][safi]);
      <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ab49d7e30a6869bf9f0753afe25b17c6a">af_sflags</a>[afi][safi], <a class="code" href="bgpd_8h.html#a8ad5053ef329eaa221d650cdda116b61">PEER_STATUS_PREFIX_THRESHOLD</a>);
    }
  <span class="keywordflow">else</span>
    <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ab49d7e30a6869bf9f0753afe25b17c6a">af_sflags</a>[afi][safi], <a class="code" href="bgpd_8h.html#a8ad5053ef329eaa221d650cdda116b61">PEER_STATUS_PREFIX_THRESHOLD</a>);
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8e19b0828d731508778b7c28a7f17298"></a><!-- doxytag: member="bgp_route.h::bgp_nlri_parse" ref="a8e19b0828d731508778b7c28a7f17298" args="(struct peer *, struct attr *, struct bgp_nlri *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bgp_nlri_parse </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpeer.html">peer</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structattr.html">attr</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbgp__nlri.html">bgp_nlri</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l03011">3011</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  u_char *pnt;
  u_char *lim;
  <span class="keyword">struct </span><a class="code" href="structprefix.html">prefix</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keywordtype">int</span> psize;
  <span class="keywordtype">int</span> ret;

  <span class="comment">/* Check peer status. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ae39d16f69d65fec0f4f1908b4a33e6c6">status</a> != <a class="code" href="bgpd_8h.html#aa87809ec7dea97b0e970e98ae6c181ea">Established</a>)
    <span class="keywordflow">return</span> 0;
  
  pnt = packet-&gt;nlri;
  lim = pnt + packet-&gt;length;

  <span class="keywordflow">for</span> (; pnt &lt; lim; pnt += psize)
    {
      <span class="comment">/* Clear prefix structure. */</span>
      memset (&amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, 0, <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a>));

      <span class="comment">/* Fetch prefix length. */</span>
      <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen = *pnt++;
      <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.family = <a class="code" href="prefix_8c.html#a6d5ede437568763fc6ef7d9cc772b501">afi2family</a> (packet-&gt;afi);
      
      <span class="comment">/* Already checked in nlri_sanity_check().  We do double check</span>
<span class="comment">         here. */</span>
      <span class="keywordflow">if</span> ((packet-&gt;afi == <a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a> &amp;&amp; <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen &gt; 32)
      || (packet-&gt;afi == <a class="code" href="zebra_8h.html#ad10f30457e426e1d269466d3b6603c3c">AFI_IP6</a> &amp;&amp; <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen &gt; 128))
    <span class="keywordflow">return</span> -1;

      <span class="comment">/* Packet size overflow check. */</span>
      psize = <a class="code" href="bgpd_8h.html#a472145011d944606a257487e80cc3ace">PSIZE</a> (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen);

      <span class="comment">/* When packet overflow occur return immediately. */</span>
      <span class="keywordflow">if</span> (pnt + psize &gt; lim)
    <span class="keywordflow">return</span> -1;

      <span class="comment">/* Fetch prefix from NLRI packet. */</span>
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (&amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.u.prefix, pnt, psize);

      <span class="comment">/* Check address. */</span>
      <span class="keywordflow">if</span> (packet-&gt;afi == <a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a> &amp;&amp; packet-&gt;safi == <a class="code" href="zebra_8h.html#afb8a63d76f4951ff8d73c32256b4a497">SAFI_UNICAST</a>)
    {
      <span class="keywordflow">if</span> (IN_CLASSD (ntohl (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.u.prefix4.s_addr)))
        {
         <span class="comment">/* </span>
<span class="comment">          * From draft-ietf-idr-bgp4-22, Section 6.3: </span>
<span class="comment">          * If a BGP router receives an UPDATE message with a</span>
<span class="comment">          * semantically incorrect NLRI field, in which a prefix is</span>
<span class="comment">          * semantically incorrect (eg. an unexpected multicast IP</span>
<span class="comment">          * address), it should ignore the prefix.</span>
<span class="comment">          */</span>
          <a class="code" href="log_8c.html#a34f80af784b8ec394e7a7154a7ec7364">zlog</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a8042cd53718885196f47ee66b471ec3d">log</a>, LOG_ERR, 
            <span class="stringliteral">&quot;IPv4 unicast NLRI is multicast address %s&quot;</span>,
            inet_ntoa (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.u.prefix4));

          <span class="keywordflow">return</span> -1;
        }
    }

<span class="preprocessor">#ifdef HAVE_IPV6</span>
<span class="preprocessor"></span>      <span class="comment">/* Check address. */</span>
      <span class="keywordflow">if</span> (packet-&gt;afi == <a class="code" href="zebra_8h.html#ad10f30457e426e1d269466d3b6603c3c">AFI_IP6</a> &amp;&amp; packet-&gt;safi == <a class="code" href="zebra_8h.html#afb8a63d76f4951ff8d73c32256b4a497">SAFI_UNICAST</a>)
    {
      <span class="keywordflow">if</span> (IN6_IS_ADDR_LINKLOCAL (&amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.u.prefix6))
        {
          <span class="keywordtype">char</span> buf[BUFSIZ];

          <a class="code" href="log_8c.html#a34f80af784b8ec394e7a7154a7ec7364">zlog</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a8042cd53718885196f47ee66b471ec3d">log</a>, LOG_WARNING, 
            <span class="stringliteral">&quot;IPv6 link-local NLRI received %s ignore this NLRI&quot;</span>,
            <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (AF_INET6, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.u.prefix6, buf, BUFSIZ));

          <span class="keywordflow">continue</span>;
        }
    }
<span class="preprocessor">#endif </span><span class="comment">/* HAVE_IPV6 */</span>

      <span class="comment">/* Normal process. */</span>
      <span class="keywordflow">if</span> (<a class="code" href="structattr.html">attr</a>)
    ret = <a class="code" href="bgp__route_8c.html#adead0e338559e1bf15f14c261fbe975d">bgp_update</a> (<a class="code" href="structpeer.html">peer</a>, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, <a class="code" href="structattr.html">attr</a>, packet-&gt;afi, packet-&gt;safi, 
              <a class="code" href="zebra_8h.html#a1991829492a88a5df46712d8782240a0">ZEBRA_ROUTE_BGP</a>, <a class="code" href="bgp__route_8h.html#a4734a795191347f5279e59e64c75b7a3">BGP_ROUTE_NORMAL</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);
      <span class="keywordflow">else</span>
    ret = <a class="code" href="bgp__route_8c.html#a1e246b33bc776aab326a127170921d6d">bgp_withdraw</a> (<a class="code" href="structpeer.html">peer</a>, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, <a class="code" href="structattr.html">attr</a>, packet-&gt;afi, packet-&gt;safi, 
                <a class="code" href="zebra_8h.html#a1991829492a88a5df46712d8782240a0">ZEBRA_ROUTE_BGP</a>, <a class="code" href="bgp__route_8h.html#a4734a795191347f5279e59e64c75b7a3">BGP_ROUTE_NORMAL</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);

      <span class="comment">/* Address family configuration mismatch or maximum-prefix count</span>
<span class="comment">         overflow. */</span>
      <span class="keywordflow">if</span> (ret &lt; 0)
    <span class="keywordflow">return</span> -1;
    }

  <span class="comment">/* Packet length consistency check. */</span>
  <span class="keywordflow">if</span> (pnt != lim)
    <span class="keywordflow">return</span> -1;

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a121b1ac2ca3b5db4479c018cce058312"></a><!-- doxytag: member="bgp_route.h::bgp_nlri_sanity_check" ref="a121b1ac2ca3b5db4479c018cce058312" args="(struct peer *, int, u_char *, bgp_size_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bgp_nlri_sanity_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpeer.html">peer</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="bgpd_8h.html#ae2ac1a1db99d420f5a214c418552fd1e">bgp_size_t</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l03111">3111</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  u_char *end;
  u_char <a class="code" href="structprefix.html#aae8dafba4797d25cf1d141780d87ff02">prefixlen</a>;
  <span class="keywordtype">int</span> psize;

  end = pnt + <a class="code" href="isis__pdu_8h.html#a64ed70bbcb4536e2af22a1aaf5209d18">length</a>;

  <span class="comment">/* RFC1771 6.3 The NLRI field in the UPDATE message is checked for</span>
<span class="comment">     syntactic validity.  If the field is syntactically incorrect,</span>
<span class="comment">     then the Error Subcode is set to Invalid Network Field. */</span>

  <span class="keywordflow">while</span> (pnt &lt; end)
    {
      prefixlen = *pnt++;
      
      <span class="comment">/* Prefix length check. */</span>
      <span class="keywordflow">if</span> ((afi == <a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a> &amp;&amp; prefixlen &gt; 32)
      || (afi == <a class="code" href="zebra_8h.html#ad10f30457e426e1d269466d3b6603c3c">AFI_IP6</a> &amp;&amp; prefixlen &gt; 128))
    {
      <a class="code" href="log_8h.html#a4dac9f1d742f56610c76fb86e160a28f">plog_err</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a8042cd53718885196f47ee66b471ec3d">log</a>, 
            <span class="stringliteral">&quot;%s [Error] Update packet error (wrong prefix length %d)&quot;</span>,
            <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ac3e4ca25642ebcc52b2d4b2143fa74fa">host</a>, prefixlen);
      <a class="code" href="bgp__packet_8c.html#ac17989ee6afabce09c9d326fbbf6607b">bgp_notify_send</a> (<a class="code" href="structpeer.html">peer</a>, <a class="code" href="bgpd_8h.html#aa66406351b4bf5ff750eda7a70dfdfcb">BGP_NOTIFY_UPDATE_ERR</a>, 
               <a class="code" href="bgpd_8h.html#a80701bbe52975406ae4c176b89a9c5c3">BGP_NOTIFY_UPDATE_INVAL_NETWORK</a>);
      <span class="keywordflow">return</span> -1;
    }

      <span class="comment">/* Packet size overflow check. */</span>
      psize = <a class="code" href="bgpd_8h.html#a472145011d944606a257487e80cc3ace">PSIZE</a> (prefixlen);

      <span class="keywordflow">if</span> (pnt + psize &gt; end)
    {
      <a class="code" href="log_8h.html#a4dac9f1d742f56610c76fb86e160a28f">plog_err</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a8042cd53718885196f47ee66b471ec3d">log</a>, 
            <span class="stringliteral">&quot;%s [Error] Update packet error&quot;</span>
            <span class="stringliteral">&quot; (prefix data overflow prefix size is %d)&quot;</span>,
            <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ac3e4ca25642ebcc52b2d4b2143fa74fa">host</a>, psize);
      <a class="code" href="bgp__packet_8c.html#ac17989ee6afabce09c9d326fbbf6607b">bgp_notify_send</a> (<a class="code" href="structpeer.html">peer</a>, <a class="code" href="bgpd_8h.html#aa66406351b4bf5ff750eda7a70dfdfcb">BGP_NOTIFY_UPDATE_ERR</a>, 
               <a class="code" href="bgpd_8h.html#a80701bbe52975406ae4c176b89a9c5c3">BGP_NOTIFY_UPDATE_INVAL_NETWORK</a>);
      <span class="keywordflow">return</span> -1;
    }

      pnt += psize;
    }

  <span class="comment">/* Packet length consistency check. */</span>
  <span class="keywordflow">if</span> (pnt != end)
    {
      <a class="code" href="log_8h.html#a4dac9f1d742f56610c76fb86e160a28f">plog_err</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a8042cd53718885196f47ee66b471ec3d">log</a>,
        <span class="stringliteral">&quot;%s [Error] Update packet error&quot;</span>
        <span class="stringliteral">&quot; (prefix length mismatch with total length)&quot;</span>,
        <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ac3e4ca25642ebcc52b2d4b2143fa74fa">host</a>);
      <a class="code" href="bgp__packet_8c.html#ac17989ee6afabce09c9d326fbbf6607b">bgp_notify_send</a> (<a class="code" href="structpeer.html">peer</a>, <a class="code" href="bgpd_8h.html#aa66406351b4bf5ff750eda7a70dfdfcb">BGP_NOTIFY_UPDATE_ERR</a>, 
               <a class="code" href="bgpd_8h.html#a80701bbe52975406ae4c176b89a9c5c3">BGP_NOTIFY_UPDATE_INVAL_NETWORK</a>);
      <span class="keywordflow">return</span> -1;
    }
  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a70784e3a19cf0c0482e98535f6a66e6d"></a><!-- doxytag: member="bgp_route.h::bgp_node_afi" ref="a70784e3a19cf0c0482e98535f6a66e6d" args="(struct vty *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a> bgp_node_afi </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__vty_8c_source.html#l00056">56</a> of file <a class="el" href="bgp__vty_8c_source.html">bgp_vty.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9ac72abb8e0411b52a9d91d1a11aeaff">node</a> == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682ad40fb52980325d9440b23b5f86701ffc">BGP_IPV6_NODE</a> || <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9ac72abb8e0411b52a9d91d1a11aeaff">node</a> == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682adbe4c8c9e45712b199bcc26560e77ea4">BGP_IPV6M_NODE</a>)
    <span class="keywordflow">return</span> <a class="code" href="zebra_8h.html#ad10f30457e426e1d269466d3b6603c3c">AFI_IP6</a>;
  <span class="keywordflow">return</span> <a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad5e89c162061cc75087adcc4527438b1"></a><!-- doxytag: member="bgp_route.h::bgp_node_safi" ref="ad5e89c162061cc75087adcc4527438b1" args="(struct vty *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a> bgp_node_safi </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__vty_8c_source.html#l00066">66</a> of file <a class="el" href="bgp__vty_8c_source.html">bgp_vty.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9ac72abb8e0411b52a9d91d1a11aeaff">node</a> == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a7d6209ce7672734b4681adb05e925e08">BGP_VPNV4_NODE</a>)
    <span class="keywordflow">return</span> <a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>;
  <span class="keywordflow">if</span> (<a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9ac72abb8e0411b52a9d91d1a11aeaff">node</a> == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682a0f046c161a229e71ed9da963e29c961d">BGP_IPV4M_NODE</a> || <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9ac72abb8e0411b52a9d91d1a11aeaff">node</a> == <a class="code" href="command_8h.html#a6a276b85e2da28c5f9c3dbce61c55682adbe4c8c9e45712b199bcc26560e77ea4">BGP_IPV6M_NODE</a>)
    <span class="keywordflow">return</span> <a class="code" href="zebra_8h.html#aea5323bab4aaf8f8737af8a8ea19c661">SAFI_MULTICAST</a>;
  <span class="keywordflow">return</span> <a class="code" href="zebra_8h.html#afb8a63d76f4951ff8d73c32256b4a497">SAFI_UNICAST</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2ea14a69ee3c2a03b1bbee2c3961261d"></a><!-- doxytag: member="bgp_route.h::bgp_process" ref="a2ea14a69ee3c2a03b1bbee2c3961261d" args="(struct bgp *, struct bgp_node *, afi_t, safi_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_process </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbgp.html">bgp</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbgp__node.html">bgp_node</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l01628">1628</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structbgp__process__queue.html">bgp_process_queue</a> *pqnode;
  
  <span class="comment">/* already scheduled for processing? */</span>
  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (<a class="code" href="structbgp__process__queue.html#abf324bfeb9698771f6582fd36f20b916">rn</a>-&gt;<a class="code" href="structbgp__node.html#a1369def83e1b7e96e76aa05f1c1bb5c8">flags</a>, <a class="code" href="bgp__table_8h.html#a89387d13426993997af6b2cc02600f12">BGP_NODE_PROCESS_SCHEDULED</a>))
    <span class="keywordflow">return</span>;
  
  <span class="keywordflow">if</span> ( (<a class="code" href="bgpd_8c.html#adeab9451f33cb80e3dad19688138d378">bm</a>-&gt;<a class="code" href="structbgp__master.html#ae83b822ff500e553698ebb24c6940b5b">process_main_queue</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||
       (<a class="code" href="bgpd_8c.html#adeab9451f33cb80e3dad19688138d378">bm</a>-&gt;<a class="code" href="structbgp__master.html#a312c8497537347c02ac02b28efc0764b">process_rsclient_queue</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) )
    <a class="code" href="bgp__route_8c.html#a6b080892b6ca3f0108ab232772574a3f">bgp_process_queue_init</a> ();
  
  pqnode = <a class="code" href="memory_8h.html#a7826e4ed1d152cad0666dcf43f11f663">XCALLOC</a> (<a class="code" href="memtypes_8h.html#a7ff5f2dff38e7639981794c43dc9167ba4db5edc8be06ce399a3625397401960f">MTYPE_BGP_PROCESS_QUEUE</a>, 
                    <span class="keyword">sizeof</span> (<span class="keyword">struct</span> <a class="code" href="structbgp__process__queue.html">bgp_process_queue</a>));
  <span class="keywordflow">if</span> (!pqnode)
    <span class="keywordflow">return</span>;

  <span class="comment">/* all unlocked in bgp_processq_del */</span>
  <a class="code" href="bgp__table_8c.html#a31e5a9590da2ec7f671d9014a714a885">bgp_table_lock</a> (<a class="code" href="structbgp__process__queue.html#abf324bfeb9698771f6582fd36f20b916">rn</a>-&gt;<a class="code" href="structbgp__node.html#a8853446ab7008523bce2eba58b26ad12">table</a>);
  pqnode-&gt;<a class="code" href="structbgp__process__queue.html#abf324bfeb9698771f6582fd36f20b916">rn</a> = <a class="code" href="bgp__table_8c.html#a8c629ca0214d269ce20f39268b9196d7">bgp_lock_node</a> (<a class="code" href="structbgp__process__queue.html#abf324bfeb9698771f6582fd36f20b916">rn</a>);
  pqnode-&gt;<a class="code" href="structbgp__process__queue.html#a9afd710e5c43ffcfebd9e448ede1ac3f">bgp</a> = <a class="code" href="bgp__capability__test_8c.html#a528a1146825f30f8df2ae2e9d61dd7be">bgp</a>;
  <a class="code" href="bgpd_8c.html#a94fe8d4b7a275b31df04f8a46ab1ac37">bgp_lock</a> (<a class="code" href="structbgp.html">bgp</a>);
  pqnode-&gt;<a class="code" href="structbgp__process__queue.html#aab23ff9ce503d676a383be8d9b456430">afi</a> = <a class="code" href="structbgp__process__queue.html#aab23ff9ce503d676a383be8d9b456430">afi</a>;
  pqnode-&gt;<a class="code" href="structbgp__process__queue.html#aaf6f5846c4654daf55532d4cdc63ccd8">safi</a> = <a class="code" href="structbgp__process__queue.html#aaf6f5846c4654daf55532d4cdc63ccd8">safi</a>;
  
  <span class="keywordflow">switch</span> (<a class="code" href="structbgp__process__queue.html#abf324bfeb9698771f6582fd36f20b916">rn</a>-&gt;<a class="code" href="structbgp__node.html#a8853446ab7008523bce2eba58b26ad12">table</a>-&gt;<a class="code" href="structbgp__table.html#a5099bb3c9ff5831a90846db78724e652">type</a>)
    {
      <span class="keywordflow">case</span> <a class="code" href="bgp__table_8h.html#a90f263bf84e91fb0b40f10d94c2baafbaefb8ffd61daca8861e9af4bb3c274b3e">BGP_TABLE_MAIN</a>:
        <a class="code" href="workqueue_8c.html#a193fb769a4d04f3c160c623fd07dfb21">work_queue_add</a> (<a class="code" href="bgpd_8c.html#adeab9451f33cb80e3dad19688138d378">bm</a>-&gt;<a class="code" href="structbgp__master.html#ae83b822ff500e553698ebb24c6940b5b">process_main_queue</a>, pqnode);
        <span class="keywordflow">break</span>;
      <span class="keywordflow">case</span> <a class="code" href="bgp__table_8h.html#a90f263bf84e91fb0b40f10d94c2baafba5af83960b1c7e199dbe0cc6392a5e2b0">BGP_TABLE_RSCLIENT</a>:
        <a class="code" href="workqueue_8c.html#a193fb769a4d04f3c160c623fd07dfb21">work_queue_add</a> (<a class="code" href="bgpd_8c.html#adeab9451f33cb80e3dad19688138d378">bm</a>-&gt;<a class="code" href="structbgp__master.html#a312c8497537347c02ac02b28efc0764b">process_rsclient_queue</a>, pqnode);
        <span class="keywordflow">break</span>;
    }
  
  <span class="keywordflow">return</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad43d4207e8e8d357b758d7898f59dfec"></a><!-- doxytag: member="bgp_route.h::bgp_redistribute_add" ref="ad43d4207e8e8d357b758d7898f59dfec" args="(struct prefix *, struct in_addr *, u_int32_t, u_char)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_redistribute_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_char&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7484774dce89c4dd82bf5e17b1688cbb"></a><!-- doxytag: member="bgp_route.h::bgp_redistribute_delete" ref="a7484774dce89c4dd82bf5e17b1688cbb" args="(struct prefix *, u_char)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_redistribute_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_char&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab7121f0cd3100fffb819723728d50c2e"></a><!-- doxytag: member="bgp_route.h::bgp_redistribute_withdraw" ref="ab7121f0cd3100fffb819723728d50c2e" args="(struct bgp *, afi_t, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_redistribute_withdraw </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbgp.html">bgp</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a12f57c2100947b29dacea6b47b0bfa79"></a><!-- doxytag: member="bgp_route.h::bgp_route_finish" ref="a12f57c2100947b29dacea6b47b0bfa79" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_route_finish </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1d94be4492850d1be9670012f7706620"></a><!-- doxytag: member="bgp_route.h::bgp_route_init" ref="a1d94be4492850d1be9670012f7706620" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_route_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a554bf0135ffc3a68ac99947f528cf9fc"></a><!-- doxytag: member="bgp_route.h::bgp_soft_reconfig_in" ref="a554bf0135ffc3a68ac99947f528cf9fc" args="(struct peer *, afi_t, safi_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_soft_reconfig_in </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpeer.html">peer</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l02653">2653</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structbgp__table.html">bgp_table</a> *table;

  <span class="keywordflow">if</span> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ae39d16f69d65fec0f4f1908b4a33e6c6">status</a> != <a class="code" href="bgpd_8h.html#aa87809ec7dea97b0e970e98ae6c181ea">Established</a>)
    <span class="keywordflow">return</span>;

  <span class="keywordflow">if</span> (<a class="code" href="structbgp__table.html#a1c64abd56c9540ab9e4a144068ed1caa">safi</a> != <a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>)
    <a class="code" href="bgp__route_8c.html#a361e68a96de5fa35c4d78b6a4c6dc984">bgp_soft_reconfig_table</a> (<a class="code" href="structpeer.html">peer</a>, <a class="code" href="structbgp__table.html#a65e5c5b62b7afc22106369584ecefd5d">afi</a>, <a class="code" href="structbgp__table.html#a1c64abd56c9540ab9e4a144068ed1caa">safi</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
  <span class="keywordflow">else</span>
    <span class="keywordflow">for</span> (rn = <a class="code" href="bgp__table_8c.html#af8ce42494729d03a8c7ca41ded487bb2">bgp_table_top</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#aaff7e2f66146a076913d2fe3217edf2c">bgp</a>-&gt;<a class="code" href="structbgp.html#a165710ce04dcbf78397c514707c15f3b">rib</a>[<a class="code" href="structbgp__table.html#a65e5c5b62b7afc22106369584ecefd5d">afi</a>][<a class="code" href="structbgp__table.html#a1c64abd56c9540ab9e4a144068ed1caa">safi</a>]); rn;
     rn = <a class="code" href="bgp__table_8c.html#abdeced48b9b4aad614c88dc63ea0a4cf">bgp_route_next</a> (rn))
      <span class="keywordflow">if</span> ((table = rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <a class="code" href="bgp__route_8c.html#a361e68a96de5fa35c4d78b6a4c6dc984">bgp_soft_reconfig_table</a> (<a class="code" href="structpeer.html">peer</a>, <a class="code" href="structbgp__table.html#a65e5c5b62b7afc22106369584ecefd5d">afi</a>, safi, table);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a02e56f5ae76eee6eec3cb44867837609"></a><!-- doxytag: member="bgp_route.h::bgp_soft_reconfig_rsclient" ref="a02e56f5ae76eee6eec3cb44867837609" args="(struct peer *, afi_t, safi_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_soft_reconfig_rsclient </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpeer.html">peer</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l02608">2608</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structbgp__table.html">bgp_table</a> *table;
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rn;
  
  <span class="keywordflow">if</span> (safi != <a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>)
    <a class="code" href="bgp__route_8c.html#a9a99b91321b9ba23f772dbc64c285e70">bgp_soft_reconfig_table_rsclient</a> (rsclient, afi, safi, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);

  <span class="keywordflow">else</span>
    <span class="keywordflow">for</span> (rn = <a class="code" href="bgp__table_8c.html#af8ce42494729d03a8c7ca41ded487bb2">bgp_table_top</a> (rsclient-&gt;bgp-&gt;rib[afi][safi]); rn;
            rn = <a class="code" href="bgp__table_8c.html#abdeced48b9b4aad614c88dc63ea0a4cf">bgp_route_next</a> (rn))
      <span class="keywordflow">if</span> ((table = rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>) != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
        <a class="code" href="bgp__route_8c.html#a9a99b91321b9ba23f772dbc64c285e70">bgp_soft_reconfig_table_rsclient</a> (rsclient, afi, safi, table);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a11050c063fc4bf2dade8bddefecd117e"></a><!-- doxytag: member="bgp_route.h::bgp_static_delete" ref="a11050c063fc4bf2dade8bddefecd117e" args="(struct bgp *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_static_delete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbgp.html">bgp</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l03855">3855</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a> afi;
  <a class="code" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a> safi;
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rm;
  <span class="keyword">struct </span><a class="code" href="structbgp__table.html">bgp_table</a> *table;
  <span class="keyword">struct </span><a class="code" href="structbgp__static.html">bgp_static</a> *<a class="code" href="structbgp__static.html">bgp_static</a>;

  <span class="keywordflow">for</span> (afi = <a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>; afi &lt; <a class="code" href="zebra_8h.html#abf129a17e985713a26a6181a198d5f1a">AFI_MAX</a>; afi++)
    <span class="keywordflow">for</span> (safi = <a class="code" href="zebra_8h.html#afb8a63d76f4951ff8d73c32256b4a497">SAFI_UNICAST</a>; safi &lt; <a class="code" href="zebra_8h.html#a82fe6f63e822f7bf9e4567873d809ed8">SAFI_MAX</a>; safi++)
      <span class="keywordflow">for</span> (rn = <a class="code" href="bgp__table_8c.html#af8ce42494729d03a8c7ca41ded487bb2">bgp_table_top</a> (<a class="code" href="structbgp.html">bgp</a>-&gt;<a class="code" href="structbgp.html#af06132502d1bbb4584e996e978254e34">route</a>[afi][safi]); rn; rn = <a class="code" href="bgp__table_8c.html#abdeced48b9b4aad614c88dc63ea0a4cf">bgp_route_next</a> (rn))
    <span class="keywordflow">if</span> (rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a> != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
      {      
        <span class="keywordflow">if</span> (safi == <a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>)
          {
        table = rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>;

        <span class="keywordflow">for</span> (rm = <a class="code" href="bgp__table_8c.html#af8ce42494729d03a8c7ca41ded487bb2">bgp_table_top</a> (table); rm; rm = <a class="code" href="bgp__table_8c.html#abdeced48b9b4aad614c88dc63ea0a4cf">bgp_route_next</a> (rm))
          {
            bgp_static = rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>;
            <a class="code" href="bgp__route_8c.html#a949bc552da03f5b91ab061802527294b">bgp_static_withdraw_vpnv4</a> (<a class="code" href="structbgp.html">bgp</a>, &amp;rm-&gt;<a class="code" href="structbgp__node.html#a61c7e08de23a3c64f8dd738448567cde">p</a>,
                           <a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>, <a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>,
                           (<span class="keyword">struct</span> <a class="code" href="structprefix__rd.html">prefix_rd</a> *)&amp;rn-&gt;<a class="code" href="structbgp__node.html#a61c7e08de23a3c64f8dd738448567cde">p</a>,
                           bgp_static-&gt;<a class="code" href="structbgp__static.html#ac8be92b08f87ccf5e9817c12542dcfe4">tag</a>);
            <a class="code" href="bgp__route_8c.html#ab9ed95d988c9782fbfda8fe175344bda">bgp_static_free</a> (bgp_static);
            rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
            <a class="code" href="bgp__table_8c.html#a5f6b53d4f2cd155109c2eec1fcf80687">bgp_unlock_node</a> (rn);
          }
          }
        <span class="keywordflow">else</span>
          {
        bgp_static = rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>;
        <a class="code" href="bgp__route_8c.html#a14bde9043b6db15a3327081054b54dbe">bgp_static_withdraw</a> (<a class="code" href="structbgp.html">bgp</a>, &amp;rn-&gt;<a class="code" href="structbgp__node.html#a61c7e08de23a3c64f8dd738448567cde">p</a>, afi, safi);
        <a class="code" href="bgp__route_8c.html#ab9ed95d988c9782fbfda8fe175344bda">bgp_static_free</a> (bgp_static);
        rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
        <a class="code" href="bgp__table_8c.html#a5f6b53d4f2cd155109c2eec1fcf80687">bgp_unlock_node</a> (rn);
          }
      }
}
</pre></div>
</div>
</div>
<a class="anchor" id="af7cc8ee989b92046e19dc2db89fe1bd8"></a><!-- doxytag: member="bgp_route.h::bgp_static_set_vpnv4" ref="af7cc8ee989b92046e19dc2db89fe1bd8" args="(struct vty *vty, const char *, const char *, const char *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bgp_static_set_vpnv4 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname"><em>vty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l03897">3897</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> ret;
  <span class="keyword">struct </span><a class="code" href="structprefix.html">prefix</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keyword">struct </span><a class="code" href="structprefix__rd.html">prefix_rd</a> prd;
  <span class="keyword">struct </span><a class="code" href="structbgp.html">bgp</a> *<a class="code" href="bgp__capability__test_8c.html#a528a1146825f30f8df2ae2e9d61dd7be">bgp</a>;
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *<a class="code" href="structbgp__node.html#ae70689440c2ce67c611d4e645967b000">prn</a>;
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structbgp__table.html">bgp_table</a> *table;
  <span class="keyword">struct </span><a class="code" href="structbgp__static.html">bgp_static</a> *<a class="code" href="structbgp__static.html">bgp_static</a>;
  u_char <a class="code" href="structbgp__static.html#ac8be92b08f87ccf5e9817c12542dcfe4">tag</a>[3];

  bgp = vty-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;

  ret = <a class="code" href="prefix_8c.html#a35f57d44562d00baaf5d227d03214786">str2prefix</a> (ip_str, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
  <span class="keywordflow">if</span> (! ret)
    {
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;%% Malformed prefix%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
      <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
    }
  <a class="code" href="prefix_8c.html#a99265c5e11b1867552cf784a4cac8252">apply_mask</a> (&amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);

  ret = <a class="code" href="bgp__mplsvpn_8c.html#a296cfbde78d5b77bb55f852b2e1cabdd">str2prefix_rd</a> (rd_str, &amp;prd);
  <span class="keywordflow">if</span> (! ret)
    {
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;%% Malformed rd%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
      <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
    }

  ret = <a class="code" href="bgp__mplsvpn_8c.html#a351be45ea03f40abf1b4247e2a71a8f4">str2tag</a> (tag_str, tag);
  <span class="keywordflow">if</span> (! ret)
    {
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;%% Malformed tag%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
      <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
    }

  prn = <a class="code" href="bgp__table_8c.html#a81c9e9d48e2d66148c713e82968df389">bgp_node_get</a> (bgp-&gt;<a class="code" href="structbgp.html#af06132502d1bbb4584e996e978254e34">route</a>[<a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>][<a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>],
            (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *)&amp;prd);
  <span class="keywordflow">if</span> (prn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    prn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a> = <a class="code" href="bgp__table_8c.html#afbe454c63fbb296e768cb66efa0962da">bgp_table_init</a> (<a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>, <a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>);
  <span class="keywordflow">else</span>
    <a class="code" href="bgp__table_8c.html#a5f6b53d4f2cd155109c2eec1fcf80687">bgp_unlock_node</a> (prn);
  table = prn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>;

  rn = <a class="code" href="bgp__table_8c.html#a81c9e9d48e2d66148c713e82968df389">bgp_node_get</a> (table, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);

  <span class="keywordflow">if</span> (rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>)
    {
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (vty, <span class="stringliteral">&quot;%% Same network configuration exists%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
      <a class="code" href="bgp__table_8c.html#a5f6b53d4f2cd155109c2eec1fcf80687">bgp_unlock_node</a> (rn);
    }
  <span class="keywordflow">else</span>
    {
      <span class="comment">/* New configuration. */</span>
      bgp_static = <a class="code" href="bgp__route_8c.html#a3ba6f7387a668fed8fced2ea48559855">bgp_static_new</a> ();
      bgp_static-&gt;<a class="code" href="structbgp__static.html#a8f8a0cfbc3624f0232c41f95a178c80c">valid</a> = 1;
      <a class="code" href="regex_8c.html#aed653b4838032a2c5ce8960421c8cfd7">memcpy</a> (bgp_static-&gt;<a class="code" href="structbgp__static.html#ac8be92b08f87ccf5e9817c12542dcfe4">tag</a>, tag, 3);
      rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a> = bgp_static;

      <a class="code" href="bgp__route_8c.html#a993bebd87ca0ad9166c4e65c697c9f79">bgp_static_update_vpnv4</a> (bgp, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, <a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>, <a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>, &amp;prd, tag);
    }

  <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="adbb9c96c25faf124bcf3e104607777f1"></a><!-- doxytag: member="bgp_route.h::bgp_static_unset_vpnv4" ref="adbb9c96c25faf124bcf3e104607777f1" args="(struct vty *, const char *, const char *, const char *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bgp_static_unset_vpnv4 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l03965">3965</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> ret;
  <span class="keyword">struct </span><a class="code" href="structbgp.html">bgp</a> *<a class="code" href="bgp__capability__test_8c.html#a528a1146825f30f8df2ae2e9d61dd7be">bgp</a>;
  <span class="keyword">struct </span><a class="code" href="structprefix.html">prefix</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keyword">struct </span><a class="code" href="structprefix__rd.html">prefix_rd</a> prd;
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *<a class="code" href="structbgp__node.html#ae70689440c2ce67c611d4e645967b000">prn</a>;
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structbgp__table.html">bgp_table</a> *table;
  <span class="keyword">struct </span><a class="code" href="structbgp__static.html">bgp_static</a> *<a class="code" href="structbgp__static.html">bgp_static</a>;
  u_char <a class="code" href="structbgp__static.html#ac8be92b08f87ccf5e9817c12542dcfe4">tag</a>[3];

  bgp = <a class="code" href="structvty.html">vty</a>-&gt;<a class="code" href="structvty.html#a9179508dca757a3b7c345c86769b5b9a">index</a>;

  <span class="comment">/* Convert IP prefix string to struct prefix. */</span>
  ret = <a class="code" href="prefix_8c.html#a35f57d44562d00baaf5d227d03214786">str2prefix</a> (ip_str, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
  <span class="keywordflow">if</span> (! ret)
    {
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (<a class="code" href="structvty.html">vty</a>, <span class="stringliteral">&quot;%% Malformed prefix%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
      <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
    }
  <a class="code" href="prefix_8c.html#a99265c5e11b1867552cf784a4cac8252">apply_mask</a> (&amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);

  ret = <a class="code" href="bgp__mplsvpn_8c.html#a296cfbde78d5b77bb55f852b2e1cabdd">str2prefix_rd</a> (rd_str, &amp;prd);
  <span class="keywordflow">if</span> (! ret)
    {
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (<a class="code" href="structvty.html">vty</a>, <span class="stringliteral">&quot;%% Malformed rd%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
      <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
    }

  ret = <a class="code" href="bgp__mplsvpn_8c.html#a351be45ea03f40abf1b4247e2a71a8f4">str2tag</a> (tag_str, tag);
  <span class="keywordflow">if</span> (! ret)
    {
      <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (<a class="code" href="structvty.html">vty</a>, <span class="stringliteral">&quot;%% Malformed tag%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);
      <span class="keywordflow">return</span> <a class="code" href="command_8h.html#a92dc6dc30d8ef3651eb9d47a6083b025">CMD_WARNING</a>;
    }

  prn = <a class="code" href="bgp__table_8c.html#a81c9e9d48e2d66148c713e82968df389">bgp_node_get</a> (bgp-&gt;<a class="code" href="structbgp.html#af06132502d1bbb4584e996e978254e34">route</a>[<a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>][<a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>],
            (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *)&amp;prd);
  <span class="keywordflow">if</span> (prn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    prn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a> = <a class="code" href="bgp__table_8c.html#afbe454c63fbb296e768cb66efa0962da">bgp_table_init</a> (<a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>, <a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>);
  <span class="keywordflow">else</span>
    <a class="code" href="bgp__table_8c.html#a5f6b53d4f2cd155109c2eec1fcf80687">bgp_unlock_node</a> (prn);
  table = prn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>;

  rn = <a class="code" href="bgp__table_8c.html#aa67a654ce220da27fb3f02757fcb0bdc">bgp_node_lookup</a> (table, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);

  <span class="keywordflow">if</span> (rn)
    {
      <a class="code" href="bgp__route_8c.html#a949bc552da03f5b91ab061802527294b">bgp_static_withdraw_vpnv4</a> (bgp, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, <a class="code" href="zebra_8h.html#a192fcc8cbfb7b9d03c6562c48941a4bd">AFI_IP</a>, <a class="code" href="zebra_8h.html#aea6a248ae05b01f7ff8faf6d8c8c6c10">SAFI_MPLS_VPN</a>, &amp;prd, tag);

      bgp_static = rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>;
      <a class="code" href="bgp__route_8c.html#ab9ed95d988c9782fbfda8fe175344bda">bgp_static_free</a> (bgp_static);
      rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
      <a class="code" href="bgp__table_8c.html#a5f6b53d4f2cd155109c2eec1fcf80687">bgp_unlock_node</a> (rn);
      <a class="code" href="bgp__table_8c.html#a5f6b53d4f2cd155109c2eec1fcf80687">bgp_unlock_node</a> (rn);
    }
  <span class="keywordflow">else</span>
    <a class="code" href="vty_8c.html#a3725db0ec6ad3ffdd31f68abc807ee34">vty_out</a> (<a class="code" href="structvty.html">vty</a>, <span class="stringliteral">&quot;%% Can&#39;t find the route%s&quot;</span>, <a class="code" href="vty_8h.html#a3be8ca867e2953936a95c68dc64824b6">VTY_NEWLINE</a>);

  <span class="keywordflow">return</span> <a class="code" href="command_8h.html#aa2008c1bc36d9ef42571a6ec52516d02">CMD_SUCCESS</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3c60dc79eda8a778b3bd202a10b413c7"></a><!-- doxytag: member="bgp_route.h::bgp_static_update" ref="a3c60dc79eda8a778b3bd202a10b413c7" args="(struct bgp *, struct prefix *, struct bgp_static *, afi_t, safi_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_static_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbgp.html">bgp</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbgp__static.html">bgp_static</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l03505">3505</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structpeer.html">peer</a> *rsclient;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;

  <a class="code" href="bgp__route_8c.html#adf87800006cc4fc05a3eb602e9870697">bgp_static_update_main</a> (<a class="code" href="structbgp.html">bgp</a>, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, <a class="code" href="structbgp__static.html">bgp_static</a>, afi, safi);

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (<a class="code" href="structbgp.html">bgp</a>-&gt;<a class="code" href="structbgp.html#a4ccd4dea11eddfa74dc5518fdb448b67">rsclient</a>, node, nnode, rsclient))
    {
      <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (rsclient-&gt;<a class="code" href="structpeer.html#ad491ddb5e6d94d1db07405243d445c54">af_flags</a>[afi][safi], <a class="code" href="bgpd_8h.html#abf59e9a9022e80ecdc266d86f35b378e">PEER_FLAG_RSERVER_CLIENT</a>))
        <a class="code" href="bgp__route_8c.html#adde0f36163e0fb2c47de7cf95f8bbe56">bgp_static_update_rsclient</a> (rsclient, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, <a class="code" href="structbgp__static.html">bgp_static</a>, afi, safi);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2b87965793d5ca53685fc17b9c5f9cc2"></a><!-- doxytag: member="bgp_route.h::bgp_static_withdraw" ref="a2b87965793d5ca53685fc17b9c5f9cc2" args="(struct bgp *, struct prefix *, afi_t, safi_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bgp_static_withdraw </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbgp.html">bgp</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l03554">3554</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structbgp__info.html">bgp_info</a> *ri;

  rn = <a class="code" href="bgp__route_8c.html#a28376b150f4dc5678918739889f323e6">bgp_afi_node_get</a> (<a class="code" href="structbgp.html">bgp</a>-&gt;<a class="code" href="structbgp.html#a165710ce04dcbf78397c514707c15f3b">rib</a>[afi][safi], afi, safi, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);

  <span class="comment">/* Check selected route and self inserted route. */</span>
  <span class="keywordflow">for</span> (ri = rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>; ri; ri = ri-&gt;<a class="code" href="structbgp__info.html#a7a49886b20a2c95c08baa23149501a2a">next</a>)
    <span class="keywordflow">if</span> (ri-&gt;<a class="code" href="structbgp__info.html#a367917f671400c20f33e512fa2c435dc">peer</a> == <a class="code" href="structbgp.html">bgp</a>-&gt;<a class="code" href="structbgp.html#ad576e7fa007ce5b32e2d6768813841f2">peer_self</a> 
    &amp;&amp; ri-&gt;<a class="code" href="structbgp__info.html#a7d70d35aa6ab6fa769c8e7d662288a35">type</a> == <a class="code" href="zebra_8h.html#a1991829492a88a5df46712d8782240a0">ZEBRA_ROUTE_BGP</a>
    &amp;&amp; ri-&gt;<a class="code" href="structbgp__info.html#a1126336f7eec606018fa96967a4e5bfb">sub_type</a> == <a class="code" href="bgp__route_8h.html#a3c52611f8ef467c61080e1444b91d73d">BGP_ROUTE_STATIC</a>)
      <span class="keywordflow">break</span>;

  <span class="comment">/* Withdraw static BGP route from routing table. */</span>
  <span class="keywordflow">if</span> (ri)
    {
      <a class="code" href="bgp__route_8h.html#a91162dd024d89c577f51b3615b75496f">bgp_aggregate_decrement</a> (<a class="code" href="structbgp.html">bgp</a>, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, ri, afi, safi);
      <a class="code" href="bgp__route_8c.html#abfe260239e1b72a286e9c45a5aa1afbd">bgp_info_delete</a> (rn, ri);
      <a class="code" href="bgp__route_8c.html#a3c1be470ddb0d83d2cda73f8e4fa1f88">bgp_process</a> (<a class="code" href="structbgp.html">bgp</a>, rn, afi, safi);
    }

  <span class="comment">/* Unlock bgp_node_lookup. */</span>
  <a class="code" href="bgp__table_8c.html#a5f6b53d4f2cd155109c2eec1fcf80687">bgp_unlock_node</a> (rn);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3fd28b643a06863a65e3e9ccaa465b55"></a><!-- doxytag: member="bgp_route.h::bgp_update" ref="a3fd28b643a06863a65e3e9ccaa465b55" args="(struct peer *, struct prefix *, struct attr *, afi_t, safi_t, int, int, struct prefix_rd *, u_char *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bgp_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpeer.html">peer</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structattr.html">attr</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__rd.html">prefix_rd</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l02351">2351</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structpeer.html">peer</a> *rsclient;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keyword">struct </span><a class="code" href="structbgp.html">bgp</a> *<a class="code" href="bgp__capability__test_8c.html#a528a1146825f30f8df2ae2e9d61dd7be">bgp</a>;
  <span class="keywordtype">int</span> ret;

  ret = <a class="code" href="bgp__route_8c.html#a2a2424f26bef521959d23ff57611f86a">bgp_update_main</a> (<a class="code" href="structpeer.html">peer</a>, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, <a class="code" href="structattr.html">attr</a>, afi, safi, <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, sub_type, prd, tag,
          soft_reconfig);

  bgp = <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#aaff7e2f66146a076913d2fe3217edf2c">bgp</a>;

  <span class="comment">/* Process the update for each RS-client. */</span>
  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (bgp-&gt;<a class="code" href="structbgp.html#a4ccd4dea11eddfa74dc5518fdb448b67">rsclient</a>, node, nnode, rsclient))
    {
      <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (rsclient-&gt;<a class="code" href="structpeer.html#ad491ddb5e6d94d1db07405243d445c54">af_flags</a>[afi][safi], <a class="code" href="bgpd_8h.html#abf59e9a9022e80ecdc266d86f35b378e">PEER_FLAG_RSERVER_CLIENT</a>))
        <a class="code" href="bgp__route_8c.html#a35a6938b2231aa460e1ce4a1d767b89f">bgp_update_rsclient</a> (rsclient, afi, safi, <a class="code" href="structattr.html">attr</a>, <a class="code" href="structpeer.html">peer</a>, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>,
                sub_type, prd, tag);
    }

  <span class="keywordflow">return</span> ret;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab19eddf74f3d5f8d8cd7fcc6dd2404cb"></a><!-- doxytag: member="bgp_route.h::bgp_withdraw" ref="ab19eddf74f3d5f8d8cd7fcc6dd2404cb" args="(struct peer *, struct prefix *, struct attr *, afi_t, safi_t, int, int, struct prefix_rd *, u_char *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bgp_withdraw </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpeer.html">peer</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structattr.html">attr</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a0a34f9bd6bbc49876614d274005c6ff1">afi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__rd.html">prefix_rd</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_char *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="bgp__route_8c_source.html#l02377">2377</a> of file <a class="el" href="bgp__route_8c_source.html">bgp_route.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structbgp.html">bgp</a> *<a class="code" href="bgp__capability__test_8c.html#a528a1146825f30f8df2ae2e9d61dd7be">bgp</a>;
  <span class="keywordtype">char</span> buf[<a class="code" href="sockunion_8h.html#acdf2761ecf6723841896a77e9059e810">SU_ADDRSTRLEN</a>];
  <span class="keyword">struct </span><a class="code" href="structbgp__node.html">bgp_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structbgp__info.html">bgp_info</a> *ri;
  <span class="keyword">struct </span><a class="code" href="structpeer.html">peer</a> *rsclient;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;

  bgp = <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#aaff7e2f66146a076913d2fe3217edf2c">bgp</a>;

  <span class="comment">/* Process the withdraw for each RS-client. */</span>
  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (bgp-&gt;<a class="code" href="structbgp.html#a4ccd4dea11eddfa74dc5518fdb448b67">rsclient</a>, node, nnode, rsclient))
    {
      <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (rsclient-&gt;<a class="code" href="structpeer.html#ad491ddb5e6d94d1db07405243d445c54">af_flags</a>[afi][safi], <a class="code" href="bgpd_8h.html#abf59e9a9022e80ecdc266d86f35b378e">PEER_FLAG_RSERVER_CLIENT</a>))
        <a class="code" href="bgp__route_8c.html#a6f60f6d4e63b4cb347a05b4b07fb36c9">bgp_withdraw_rsclient</a> (rsclient, afi, safi, <a class="code" href="structpeer.html">peer</a>, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a>, sub_type, prd, tag);
    }

  <span class="comment">/* Logging. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="bgp__debug_8h.html#a3652951eb4451c498ae4be9890d4b7a4">BGP_DEBUG</a> (update, UPDATE_IN))  
    <a class="code" href="log_8c.html#a34f80af784b8ec394e7a7154a7ec7364">zlog</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a8042cd53718885196f47ee66b471ec3d">log</a>, LOG_DEBUG, <span class="stringliteral">&quot;%s rcvd UPDATE about %s/%d -- withdrawn&quot;</span>,
      <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ac3e4ca25642ebcc52b2d4b2143fa74fa">host</a>,
      <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a>(<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;family, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;u.prefix, buf, <a class="code" href="sockunion_8h.html#acdf2761ecf6723841896a77e9059e810">SU_ADDRSTRLEN</a>),
      <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen);

  <span class="comment">/* Lookup node. */</span>
  rn = <a class="code" href="bgp__route_8c.html#a28376b150f4dc5678918739889f323e6">bgp_afi_node_get</a> (bgp-&gt;<a class="code" href="structbgp.html#a165710ce04dcbf78397c514707c15f3b">rib</a>[afi][safi], afi, safi, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, prd);

  <span class="comment">/* If peer is soft reconfiguration enabled.  Record input packet for</span>
<span class="comment">     further calculation. */</span>
  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ad491ddb5e6d94d1db07405243d445c54">af_flags</a>[afi][safi], <a class="code" href="bgpd_8h.html#aeb7f2d381386a92f2fb115c6e0b81dba">PEER_FLAG_SOFT_RECONFIG</a>)
      &amp;&amp; <a class="code" href="structpeer.html">peer</a> != bgp-&gt;<a class="code" href="structbgp.html#ad576e7fa007ce5b32e2d6768813841f2">peer_self</a>)
    <a class="code" href="bgp__advertise_8c.html#a88b27370d0e6416445dc1f131053d9f1">bgp_adj_in_unset</a> (rn, <a class="code" href="structpeer.html">peer</a>);

  <span class="comment">/* Lookup withdrawn route. */</span>
  <span class="keywordflow">for</span> (ri = rn-&gt;<a class="code" href="structbgp__node.html#aa7efb6473eab6666b1aba83e4da90429">info</a>; ri; ri = ri-&gt;<a class="code" href="structbgp__info.html#a7a49886b20a2c95c08baa23149501a2a">next</a>)
    <span class="keywordflow">if</span> (ri-&gt;<a class="code" href="structbgp__info.html#a367917f671400c20f33e512fa2c435dc">peer</a> == <a class="code" href="structpeer.html">peer</a> &amp;&amp; ri-&gt;<a class="code" href="structbgp__info.html#a7d70d35aa6ab6fa769c8e7d662288a35">type</a> == <a class="code" href="bgp__open_8h.html#abbb4c0b967acba158c34c110d81b3ab4">type</a> &amp;&amp; ri-&gt;<a class="code" href="structbgp__info.html#a1126336f7eec606018fa96967a4e5bfb">sub_type</a> == sub_type)
      <span class="keywordflow">break</span>;

  <span class="comment">/* Withdraw specified route from routing table. */</span>
  <span class="keywordflow">if</span> (ri &amp;&amp; ! <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (ri-&gt;<a class="code" href="structbgp__info.html#a7ae2579adaf8f2fae14dc9d5fc23e976">flags</a>, <a class="code" href="bgp__route_8h.html#a57adf9fc517cc65fb9f4bcbf8ff796f2">BGP_INFO_HISTORY</a>))
    <a class="code" href="bgp__route_8c.html#a97b525c43ec4d1f2a86b597317b78051">bgp_rib_withdraw</a> (rn, ri, <a class="code" href="structpeer.html">peer</a>, afi, safi);
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="bgp__debug_8h.html#a3652951eb4451c498ae4be9890d4b7a4">BGP_DEBUG</a> (update, UPDATE_IN))
    <a class="code" href="log_8c.html#a34f80af784b8ec394e7a7154a7ec7364">zlog</a> (<a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#a8042cd53718885196f47ee66b471ec3d">log</a>, LOG_DEBUG, 
      <span class="stringliteral">&quot;%s Can&#39;t find the route %s/%d&quot;</span>, <a class="code" href="structpeer.html">peer</a>-&gt;<a class="code" href="structpeer.html#ac3e4ca25642ebcc52b2d4b2143fa74fa">host</a>,
      <a class="code" href="sockunion_8c.html#a5bfb767e8fa3f9ff5d2a1e19d71791f4">inet_ntop</a> (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;family, &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;u.prefix, buf, <a class="code" href="sockunion_8h.html#acdf2761ecf6723841896a77e9059e810">SU_ADDRSTRLEN</a>),
      <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>-&gt;prefixlen);

  <span class="comment">/* Unlock bgp_node_get() lock. */</span>
  <a class="code" href="bgp__table_8c.html#a5f6b53d4f2cd155109c2eec1fcf80687">bgp_unlock_node</a> (rn);

  <span class="keywordflow">return</span> 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9c8ca3acfad463c61259edab3afd7220"></a><!-- doxytag: member="bgp_route.h::route_vty_out" ref="a9c8ca3acfad463c61259edab3afd7220" args="(struct vty *, struct prefix *, struct bgp_info *, int, safi_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void route_vty_out </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbgp__info.html">bgp_info</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae57510a15d9159581f1e32f10aac1a9c"></a><!-- doxytag: member="bgp_route.h::route_vty_out_tag" ref="ae57510a15d9159581f1e32f10aac1a9c" args="(struct vty *, struct prefix *, struct bgp_info *, int, safi_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void route_vty_out_tag </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structbgp__info.html">bgp_info</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0f21f671849f68f41259f9aa94ba9925"></a><!-- doxytag: member="bgp_route.h::route_vty_out_tmp" ref="a0f21f671849f68f41259f9aa94ba9925" args="(struct vty *, struct prefix *, struct attr *, safi_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void route_vty_out_tmp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvty.html">vty</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix.html">prefix</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structattr.html">attr</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zebra_8h.html#a195af4129e055b63a1b67529674bb998">safi_t</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="bgp__route_8h.html">bgp_route.h</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:13 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
