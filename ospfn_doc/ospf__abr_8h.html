<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OSPFN: ospfd/ospf_abr.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OSPFN
   &#160;<span id="projectnumber">1.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('ospf__abr_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ospfd/ospf_abr.h File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ospf__abr_8h__dep__incl.png" border="0" usemap="#ospfd_2ospf__abr_8hdep" alt=""/></div>
<map name="ospfd_2ospf__abr_8hdep" id="ospfd_2ospf__abr_8hdep">
<area shape="rect" id="node3" href="ospf__abr_8c.html" title="ospfd/ospf_abr.c" alt="" coords="5,80,128,107"/><area shape="rect" id="node5" href="ospf__flood_8c.html" title="ospfd/ospf_flood.c" alt="" coords="153,80,289,107"/><area shape="rect" id="node7" href="ospf__ia_8c.html" title="ospfd/ospf_ia.c" alt="" coords="313,80,428,107"/><area shape="rect" id="node9" href="ospf__interface_8c.html" title="ospfd/ospf_interface.c" alt="" coords="453,80,611,107"/><area shape="rect" id="node11" href="ospf__ism_8c.html" title="ospfd/ospf_ism.c" alt="" coords="635,80,761,107"/><area shape="rect" id="node13" href="ospf__nsm_8c.html" title="ospfd/ospf_nsm.c" alt="" coords="787,80,917,107"/><area shape="rect" id="node15" href="ospf__spf_8c.html" title="ospfd/ospf_spf.c" alt="" coords="942,80,1065,107"/><area shape="rect" id="node17" href="ospf__vty_8c.html" title="ospfd/ospf_vty.c" alt="" coords="1090,80,1213,107"/><area shape="rect" id="node19" href="ospf__zebra_8c.html" title="ospfd/ospf_zebra.c" alt="" coords="1239,80,1377,107"/><area shape="rect" id="node21" href="ospfd_8c.html" title="ospfd/ospfd.c" alt="" coords="1401,80,1508,107"/></map>
</div>
</div>
<p><a href="ospf__abr_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structospf__area__range.html">ospf_area_range</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#a571148084025182afb7a06ab669a5d74">OSPF_ABR_TASK_DELAY</a>&#160;&#160;&#160;7</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>&#160;&#160;&#160;(1 &lt;&lt; 0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#a05a85c40463339240f87aa8200447eb8">OSPF_AREA_RANGE_SUBSTITUTE</a>&#160;&#160;&#160;(1 &lt;&lt; 1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#a9e21588e2ea1550756920731bbc4c80c">OSPF_AREA_RANGE_COST_UNSPEC</a>&#160;&#160;&#160;-1U</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#a709a679f2b580cdb618e7ca7eebfdb7c">ospf_area_range_lookup</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#a8a233ddfc4d1b126737b7f2ab3a5cd04">ospf_some_area_range_match</a> (struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#a1af28e056905fbc36aa94bec4fb2c9ce">ospf_area_range_lookup_next</a> (struct <a class="el" href="structospf__area.html">ospf_area</a> *, struct in_addr *, int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#a448f13b2de830e9d4cba13bde667e844">ospf_area_range_set</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct in_addr, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *, int)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#ac9e0a8e17db3923a672901b185a74cdd">ospf_area_range_cost_set</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct in_addr, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *, u_int32_t)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#a4c463cba2a853e3c37409dd3b40c694c">ospf_area_range_unset</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct in_addr, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#a9a8ab1c929db09106255e8c3af5f16c6">ospf_area_range_substitute_set</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct in_addr, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#a8aecc0fc62bcfc8589015885b67d5f2a">ospf_area_range_substitute_unset</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct in_addr, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#a5ba89ae032bc525f99936c48157f2290">ospf_area_range_match_any</a> (struct <a class="el" href="structospf.html">ospf</a> *, struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#a759934be8202604ae9a089640f4a693f">ospf_area_range_active</a> (struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#ad35e816bb0997ccf91bf14db3028b707">ospf_act_bb_connection</a> (struct <a class="el" href="structospf.html">ospf</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#ab7d773cb926cdf8a8c13ec9103747189">ospf_check_abr_status</a> (struct <a class="el" href="structospf.html">ospf</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#ab01815787aa07fa154894299fae89f9e">ospf_abr_task</a> (struct <a class="el" href="structospf.html">ospf</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#a6d0ac8ecc10ddadb7a3a683e06e3cdae">ospf_schedule_abr_task</a> (struct <a class="el" href="structospf.html">ospf</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ospf__abr_8h.html#ace7fc3ab4af756e9839fbe8e54c6c06f">ospf_abr_announce_network_to_area</a> (struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *, u_int32_t, struct <a class="el" href="structospf__area.html">ospf_area</a> *)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a571148084025182afb7a06ab669a5d74"></a><!-- doxytag: member="ospf_abr.h::OSPF_ABR_TASK_DELAY" ref="a571148084025182afb7a06ab669a5d74" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_ABR_TASK_DELAY&#160;&#160;&#160;7</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8h_source.html#l00026">26</a> of file <a class="el" href="ospf__abr_8h_source.html">ospf_abr.h</a>.</p>

</div>
</div>
<a class="anchor" id="aad26a71d348f2b614e680fec6b0122fc"></a><!-- doxytag: member="ospf_abr.h::OSPF_AREA_RANGE_ADVERTISE" ref="aad26a71d348f2b614e680fec6b0122fc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_AREA_RANGE_ADVERTISE&#160;&#160;&#160;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8h_source.html#l00028">28</a> of file <a class="el" href="ospf__abr_8h_source.html">ospf_abr.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9e21588e2ea1550756920731bbc4c80c"></a><!-- doxytag: member="ospf_abr.h::OSPF_AREA_RANGE_COST_UNSPEC" ref="a9e21588e2ea1550756920731bbc4c80c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_AREA_RANGE_COST_UNSPEC&#160;&#160;&#160;-1U</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8h_source.html#l00055">55</a> of file <a class="el" href="ospf__abr_8h_source.html">ospf_abr.h</a>.</p>

</div>
</div>
<a class="anchor" id="a05a85c40463339240f87aa8200447eb8"></a><!-- doxytag: member="ospf_abr.h::OSPF_AREA_RANGE_SUBSTITUTE" ref="a05a85c40463339240f87aa8200447eb8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OSPF_AREA_RANGE_SUBSTITUTE&#160;&#160;&#160;(1 &lt;&lt; 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8h_source.html#l00029">29</a> of file <a class="el" href="ospf__abr_8h_source.html">ospf_abr.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ace7fc3ab4af756e9839fbe8e54c6c06f"></a><!-- doxytag: member="ospf_abr.h::ospf_abr_announce_network_to_area" ref="ace7fc3ab4af756e9839fbe8e54c6c06f" args="(struct prefix_ipv4 *, u_int32_t, struct ospf_area *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_abr_announce_network_to_area </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00724">724</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__lsa.html">ospf_lsa</a> *lsa, *old = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
  <span class="keyword">struct </span><a class="code" href="structsummary__lsa.html">summary_lsa</a> *<a class="code" href="spgrid_8c.html#a1c244c66d157ebaf785a7d1368bf4a28">sl</a> = <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network_to_area(): Start&quot;</span>);

  old = <a class="code" href="ospf__lsa_8c.html#ab2e4bd0fdc42ab447eea95c79f21a7e2">ospf_lsa_lookup_by_prefix</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;lsdb, <a class="code" href="ospf__lsa_8h.html#a3a501e86708401620a7a61e9920cd9bd">OSPF_SUMMARY_LSA</a>, 
                                   (<span class="keyword">struct</span> <a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *) <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>,
                                   <a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;ospf-&gt;router_id);
  <span class="keywordflow">if</span> (old)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network_to_area(): old summary found&quot;</span>);

      sl = (<span class="keyword">struct </span><a class="code" href="structsummary__lsa.html">summary_lsa</a> *) old-&gt;<a class="code" href="structospf__lsa.html#a31a637ecac976d557e71528613046582">data</a>;

      if (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network_to_area(): &quot;</span>
               <span class="stringliteral">&quot;old metric: %d, new metric: %d&quot;</span>,
               <a class="code" href="ospf__lsa_8h.html#af484b7995c962cc7558d5fc385b835fc">GET_METRIC</a> (sl-&gt;<a class="code" href="structsummary__lsa.html#a0353f250382513bdfb5962e9c23f822a">metric</a>), cost);
               
      <span class="keywordflow">if</span> (<a class="code" href="ospf__lsa_8h.html#af484b7995c962cc7558d5fc385b835fc">GET_METRIC</a> (sl-&gt;<a class="code" href="structsummary__lsa.html#a0353f250382513bdfb5962e9c23f822a">metric</a>) == cost)
        {
          <span class="comment">/* unchanged. simply reapprove it */</span>
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network_to_area(): &quot;</span>
                       <span class="stringliteral">&quot;old summary approved&quot;</span>); 
          <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (old-&gt;<a class="code" href="structospf__lsa.html#aa8c833176affd799afeb8db16cdb2602">flags</a>, <a class="code" href="ospf__lsa_8h.html#a7d310b6c5bc390fbe0a0da8a73c43d82">OSPF_LSA_APPROVED</a>);
        }
      <span class="keywordflow">else</span>
        {
          <span class="comment">/* LSA is changed, refresh it */</span>
          <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
            <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network_to_area(): &quot;</span>
                       <span class="stringliteral">&quot;refreshing summary&quot;</span>);
          <a class="code" href="ospf__abr_8c.html#a57499501cfdfc7c1a078bb1c74f54ca5">set_metric</a> (old, cost);
          lsa = <a class="code" href="ospf__lsa_8c.html#ad1ec944b0c3d672071952a4ec0112254">ospf_summary_lsa_refresh</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;ospf, old);
          
          <span class="keywordflow">if</span> (!lsa)
            {
          <span class="keywordtype">char</span> buf[<a class="code" href="prefix_8h.html#a93b37007689284fd9c4bde1a8f4b9199">INET_ADDRSTRLEN</a> + 3]; <span class="comment">/* ipv4 and /XX */</span>
          
          <a class="code" href="prefix_8c.html#a8b848557695ae5694bd2282eba23e367">prefix2str</a> ((<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, buf, <span class="keyword">sizeof</span>(buf));
          <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;%s: Could not refresh %s to %s&quot;</span>,
                     __func__,
                     buf,
                     inet_ntoa (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;area_id));
          <span class="keywordflow">return</span>;
        }
      
          <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (lsa-&gt;<a class="code" href="structospf__lsa.html#aa8c833176affd799afeb8db16cdb2602">flags</a>, <a class="code" href="ospf__lsa_8h.html#a7d310b6c5bc390fbe0a0da8a73c43d82">OSPF_LSA_APPROVED</a>);
          <span class="comment">/* This will flood through area. */</span>
        }
    }
  <span class="keywordflow">else</span>
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network_to_area(): &quot;</span>
               <span class="stringliteral">&quot;creating new summary&quot;</span>);
      lsa = <a class="code" href="ospf__lsa_8c.html#a93fd95cdd56566f3929ae642fe197276">ospf_summary_lsa_originate</a> ( (<span class="keyword">struct</span> <a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> *)<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, cost, <a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>);
          <span class="comment">/* This will flood through area. */</span>
      
      <span class="keywordflow">if</span> (!lsa)
        {
          <span class="keywordtype">char</span> buf[<a class="code" href="prefix_8h.html#a93b37007689284fd9c4bde1a8f4b9199">INET_ADDRSTRLEN</a> + 3]; <span class="comment">/* ipv4 and /XX */</span>
          
          <a class="code" href="prefix_8c.html#a8b848557695ae5694bd2282eba23e367">prefix2str</a> ((<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *)<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>, buf, <span class="keyword">sizeof</span>(buf));
      <a class="code" href="log_8h.html#a4a2ed409bf1559d9ea3c664f70420df7">zlog_warn</a> (<span class="stringliteral">&quot;%s: Could not originate %s to %s&quot;</span>,
                 __func__,
                 buf,
             inet_ntoa (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;area_id));
      <span class="keywordflow">return</span>;
    }
      
      <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (lsa-&gt;<a class="code" href="structospf__lsa.html#aa8c833176affd799afeb8db16cdb2602">flags</a>, <a class="code" href="ospf__lsa_8h.html#a7d310b6c5bc390fbe0a0da8a73c43d82">OSPF_LSA_APPROVED</a>);
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
        <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network_to_area(): &quot;</span>
               <span class="stringliteral">&quot;flooding new version of summary&quot;</span>);
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_announce_network_to_area(): Stop&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab01815787aa07fa154894299fae89f9e"></a><!-- doxytag: member="ospf_abr.h::ospf_abr_task" ref="ab01815787aa07fa154894299fae89f9e" args="(struct ospf *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_abr_task </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01838">1838</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): Start&quot;</span>);

  <span class="keywordflow">if</span> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a1fd3dcac2e3c565e23fce6884ffb097f">new_table</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a0c2e7f55defc0862ed00e1230cd53bd4">new_rtrs</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): Routing tables are not yet ready&quot;</span>);
      <span class="keywordflow">return</span>;
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): unapprove summaries&quot;</span>);
  <a class="code" href="ospf__abr_8c.html#aa382b917196a24d77aea90e4db33d2f0">ospf_abr_unapprove_summaries</a> (<a class="code" href="structospf.html">ospf</a>);

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): prepare aggregates&quot;</span>);
  <a class="code" href="ospf__abr_8c.html#afca847ae061d1a858adb2d8482890747">ospf_abr_prepare_aggregates</a> (<a class="code" href="structospf.html">ospf</a>);

  <span class="keywordflow">if</span> (<a class="code" href="ospfd_8h.html#a66c6ce8df7e5b79426d9eca9f8ef6d27">IS_OSPF_ABR</a> (<a class="code" href="structospf.html">ospf</a>))
    {
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): process network RT&quot;</span>);
      <a class="code" href="ospf__abr_8c.html#a08eac1d777543e2a5ceba05f86718365">ospf_abr_process_network_rt</a> (<a class="code" href="structospf.html">ospf</a>, <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a1fd3dcac2e3c565e23fce6884ffb097f">new_table</a>);

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): process router RT&quot;</span>);
      <a class="code" href="ospf__abr_8c.html#a6e95d221f7ea73125b05c9d5a40f8de4">ospf_abr_process_router_rt</a> (<a class="code" href="structospf.html">ospf</a>, <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a0c2e7f55defc0862ed00e1230cd53bd4">new_rtrs</a>);

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): announce aggregates&quot;</span>);
      <a class="code" href="ospf__abr_8c.html#a953934abb38ade526e393b844f7f02e7">ospf_abr_announce_aggregates</a> (<a class="code" href="structospf.html">ospf</a>);

      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): announce stub defaults&quot;</span>);
      <a class="code" href="ospf__abr_8c.html#a69c79123dfe301c5ab7762850598a199">ospf_abr_announce_stub_defaults</a> (<a class="code" href="structospf.html">ospf</a>);
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): remove unapproved summaries&quot;</span>);
  <a class="code" href="ospf__abr_8c.html#a9f4b9ea2aea8eb7fc76a9386fabdc8ae">ospf_abr_remove_unapproved_summaries</a> (<a class="code" href="structospf.html">ospf</a>);

  <a class="code" href="ospf__abr_8c.html#a22e8f135a7aec6a8656007a9f9dabe77">ospf_abr_manage_discard_routes</a> (<a class="code" href="structospf.html">ospf</a>);

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_abr_task(): Stop&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad35e816bb0997ccf91bf14db3028b707"></a><!-- doxytag: member="ospf_abr.h::ospf_act_bb_connection" ref="ad35e816bb0997ccf91bf14db3028b707" args="(struct ospf *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_act_bb_connection </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00343">343</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#af16c64964298aad9859d5b04503228bd">backbone</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  <span class="keywordflow">return</span> <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#af16c64964298aad9859d5b04503228bd">backbone</a>-&gt;<a class="code" href="structospf__area.html#a44f3838cd2e8fb5bd14a8c5cd1c2a0cd">full_nbrs</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a759934be8202604ae9a089640f4a693f"></a><!-- doxytag: member="ospf_abr.h::ospf_area_range_active" ref="a759934be8202604ae9a089640f4a693f" args="(struct ospf_area_range *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_area_range_active </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00188">188</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">return</span> range-&gt;specifics;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac9e0a8e17db3923a672901b185a74cdd"></a><!-- doxytag: member="ospf_abr.h::ospf_area_range_cost_set" ref="ac9e0a8e17db3923a672901b185a74cdd" args="(struct ospf *, struct in_addr, struct prefix_ipv4 *, u_int32_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_area_range_cost_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00236">236</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;
  <span class="keywordtype">int</span> ret = <a class="code" href="ospfd_8h.html#a4693ac54d402184ececda946d167d1ef">OSPF_AREA_ID_FORMAT_ADDRESS</a>;

  area = <a class="code" href="ospfd_8c.html#aa215da7694f647944fed0fad86df18c8">ospf_area_get</a> (<a class="code" href="structospf.html">ospf</a>, area_id, ret);
  <span class="keywordflow">if</span> (area == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  range = <a class="code" href="ospf__abr_8c.html#a774663b20cea32fea41dc0ade8ead064">ospf_area_range_lookup</a> (area, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
  <span class="keywordflow">if</span> (range == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  <span class="keywordflow">if</span> (range-&gt;<a class="code" href="structospf__area__range.html#a869c843ab497ff8be702a02cd7b3eddf">cost_config</a> != <a class="code" href="structospf__area__range.html#a48ee60db14ab78e1f0435d56fd42d2d0">cost</a>)
    {
      range-&gt;<a class="code" href="structospf__area__range.html#a869c843ab497ff8be702a02cd7b3eddf">cost_config</a> = <a class="code" href="structospf__area__range.html#a48ee60db14ab78e1f0435d56fd42d2d0">cost</a>;
      <span class="keywordflow">if</span> (<a class="code" href="ospf__abr_8c.html#a982c5ad2411024cad7b3979eb1c4d7ab">ospf_area_range_active</a> (range))
    <a class="code" href="ospf__abr_8c.html#a1ff6c727604d00c49b9c4a26131e5462">ospf_schedule_abr_task</a> (<a class="code" href="structospf.html">ospf</a>);
    }

  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a709a679f2b580cdb618e7ca7eebfdb7c"></a><!-- doxytag: member="ospf_abr.h::ospf_area_range_lookup" ref="a709a679f2b580cdb618e7ca7eebfdb7c" args="(struct ospf_area *, struct prefix_ipv4 *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a>* ospf_area_range_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00111">111</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;

  rn = <a class="code" href="table_8c.html#ab99d86b40440c8f18d4f2b31b5b8f1c7">route_node_lookup</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;ranges, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *)<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
  <span class="keywordflow">if</span> (rn)
    {
      <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (rn);
      <span class="keywordflow">return</span> rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;
    }
  <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1af28e056905fbc36aa94bec4fb2c9ce"></a><!-- doxytag: member="ospf_abr.h::ospf_area_range_lookup_next" ref="a1af28e056905fbc36aa94bec4fb2c9ce" args="(struct ospf_area *, struct in_addr *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a>* ospf_area_range_lookup_next </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf__area.html">ospf_area</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00125">125</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structroute__node.html">route_node</a> *rn;
  <span class="keyword">struct </span><a class="code" href="structprefix__ipv4.html">prefix_ipv4</a> <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>;
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *find;

  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.family = AF_INET;
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefixlen = <a class="code" href="prefix_8h.html#a9bd48f210d9f91d189e70196918f82c6">IPV4_MAX_BITLEN</a>;
  <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>.prefix = *range_net;

  <span class="keywordflow">if</span> (first)
    rn = <a class="code" href="table_8c.html#aee1d06c531794df326d946bdac647fb2">route_top</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;ranges);
  <span class="keywordflow">else</span>
    {
      rn = <a class="code" href="table_8c.html#ac91fdff1a0b8dc3d60ebaf152caa0f80">route_node_get</a> (<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>-&gt;ranges, (<span class="keyword">struct</span> <a class="code" href="structprefix.html">prefix</a> *) &amp;<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
      rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn);
    }

  <span class="keywordflow">for</span> (; rn; rn = <a class="code" href="table_8c.html#ad2addc694ecf6cd0cce57cb3a7d96902">route_next</a> (rn))
    <span class="keywordflow">if</span> (rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>)
      <span class="keywordflow">break</span>;

  <span class="keywordflow">if</span> (rn &amp;&amp; rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>)
    {
      find = rn-&gt;<a class="code" href="structroute__node.html#a20aabb1a6fbe9de363a1c57fe3124c87">info</a>;
      *range_net = rn-&gt;<a class="code" href="structroute__node.html#ae6d28f3985e8e2a761c8e22bae5767eb">p</a>.u.<a class="code" href="structprefix.html#ab37b8922554b41b7dc2417d8f37e7829">prefix4</a>;
      <a class="code" href="table_8c.html#a849965644708e01ef49c203a2e00afd4">route_unlock_node</a> (rn);
      <span class="keywordflow">return</span> find;
    }
  <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5ba89ae032bc525f99936c48157f2290"></a><!-- doxytag: member="ospf_abr.h::ospf_area_range_match_any" ref="a5ba89ae032bc525f99936c48157f2290" args="(struct ospf *, struct prefix_ipv4 *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a>* ospf_area_range_match_any </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00174">174</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node;

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a80a3f4035be83abbb709d17412993226">ALL_LIST_ELEMENTS_RO</a> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, area))
    <span class="keywordflow">if</span> ((range = <a class="code" href="ospf__abr_8c.html#a7c346a6d5cb1ed72bfcb661f5ac9c962">ospf_area_range_match</a> (area, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>)))
      <span class="keywordflow">return</span> range;

  <span class="keywordflow">return</span> <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a448f13b2de830e9d4cba13bde667e844"></a><!-- doxytag: member="ospf_abr.h::ospf_area_range_set" ref="a448f13b2de830e9d4cba13bde667e844" args="(struct ospf *, struct in_addr, struct prefix_ipv4 *, int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_area_range_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00200">200</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;
  <span class="keywordtype">int</span> ret = <a class="code" href="ospfd_8h.html#a4693ac54d402184ececda946d167d1ef">OSPF_AREA_ID_FORMAT_ADDRESS</a>;

  area = <a class="code" href="ospfd_8c.html#aa215da7694f647944fed0fad86df18c8">ospf_area_get</a> (<a class="code" href="structospf.html">ospf</a>, area_id, ret);
  <span class="keywordflow">if</span> (area == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  range = <a class="code" href="ospf__abr_8c.html#a774663b20cea32fea41dc0ade8ead064">ospf_area_range_lookup</a> (area, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
  <span class="keywordflow">if</span> (range != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="keywordflow">if</span> ((<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>)
       &amp;&amp; !<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (advertise, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>))
      || (!<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>)
          &amp;&amp; <a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (advertise, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>)))
    <a class="code" href="ospf__abr_8c.html#a1ff6c727604d00c49b9c4a26131e5462">ospf_schedule_abr_task</a> (<a class="code" href="structospf.html">ospf</a>);
    }
  <span class="keywordflow">else</span>
    {
      range = <a class="code" href="ospf__abr_8c.html#ac6351b1459379c07cb2fd7b880d36c4d">ospf_area_range_new</a> (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
      <a class="code" href="ospf__abr_8c.html#ac775d8b4ed2ded945b71370d17a00472">ospf_area_range_add</a> (area, range);
      <a class="code" href="ospf__abr_8c.html#a1ff6c727604d00c49b9c4a26131e5462">ospf_schedule_abr_task</a> (<a class="code" href="structospf.html">ospf</a>);
    }

  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (advertise, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>))
    <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>);
  <span class="keywordflow">else</span>
    <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>);

  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9a8ab1c929db09106255e8c3af5f16c6"></a><!-- doxytag: member="ospf_abr.h::ospf_area_range_substitute_set" ref="a9a8ab1c929db09106255e8c3af5f16c6" args="(struct ospf *, struct in_addr, struct prefix_ipv4 *, struct prefix_ipv4 *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_area_range_substitute_set </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00285">285</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;
  <span class="keywordtype">int</span> ret = <a class="code" href="ospfd_8h.html#a4693ac54d402184ececda946d167d1ef">OSPF_AREA_ID_FORMAT_ADDRESS</a>;

  area = <a class="code" href="ospfd_8c.html#aa215da7694f647944fed0fad86df18c8">ospf_area_get</a> (<a class="code" href="structospf.html">ospf</a>, area_id, ret);
  range = <a class="code" href="ospf__abr_8c.html#a774663b20cea32fea41dc0ade8ead064">ospf_area_range_lookup</a> (area, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);

  <span class="keywordflow">if</span> (range != <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    {
      <span class="keywordflow">if</span> (!<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>) ||
      !<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#a05a85c40463339240f87aa8200447eb8">OSPF_AREA_RANGE_SUBSTITUTE</a>))
    <a class="code" href="ospf__abr_8c.html#a1ff6c727604d00c49b9c4a26131e5462">ospf_schedule_abr_task</a> (<a class="code" href="structospf.html">ospf</a>);
    }
  <span class="keywordflow">else</span>
    {
      range = <a class="code" href="ospf__abr_8c.html#ac6351b1459379c07cb2fd7b880d36c4d">ospf_area_range_new</a> (<a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
      <a class="code" href="ospf__abr_8c.html#ac775d8b4ed2ded945b71370d17a00472">ospf_area_range_add</a> (area, range);
      <a class="code" href="ospf__abr_8c.html#a1ff6c727604d00c49b9c4a26131e5462">ospf_schedule_abr_task</a> (<a class="code" href="structospf.html">ospf</a>);
    }

  <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#aad26a71d348f2b614e680fec6b0122fc">OSPF_AREA_RANGE_ADVERTISE</a>);
  <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#a05a85c40463339240f87aa8200447eb8">OSPF_AREA_RANGE_SUBSTITUTE</a>);
  range-&gt;<a class="code" href="structospf__area__range.html#aae8a961c337b41f842906f32be2e169e">subst_addr</a> = <a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>-&gt;prefix;
  range-&gt;<a class="code" href="structospf__area__range.html#afc6ca0cc37924c70d8d70aa2d426f313">subst_masklen</a> = <a class="code" href="spgrid_8c.html#a5d97d3b42a0d6c9ec9a3e56f2616a6a5">s</a>-&gt;prefixlen;

  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8aecc0fc62bcfc8589015885b67d5f2a"></a><!-- doxytag: member="ospf_abr.h::ospf_area_range_substitute_unset" ref="a8aecc0fc62bcfc8589015885b67d5f2a" args="(struct ospf *, struct in_addr, struct prefix_ipv4 *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_area_range_substitute_unset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00317">317</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;

  area = <a class="code" href="ospfd_8c.html#a24d6ed2a6a05e4856e6dbf5eea74f6ef">ospf_area_lookup_by_area_id</a> (<a class="code" href="structospf.html">ospf</a>, area_id);
  <span class="keywordflow">if</span> (area == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  range = <a class="code" href="ospf__abr_8c.html#a774663b20cea32fea41dc0ade8ead064">ospf_area_range_lookup</a> (area, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
  <span class="keywordflow">if</span> (range == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  <span class="keywordflow">if</span> (<a class="code" href="zebra_8h.html#a9310812ac92febfb7d1eb10127aea1a8">CHECK_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#a05a85c40463339240f87aa8200447eb8">OSPF_AREA_RANGE_SUBSTITUTE</a>))
    <span class="keywordflow">if</span> (<a class="code" href="ospf__abr_8c.html#a982c5ad2411024cad7b3979eb1c4d7ab">ospf_area_range_active</a> (range))
      <a class="code" href="ospf__abr_8c.html#a1ff6c727604d00c49b9c4a26131e5462">ospf_schedule_abr_task</a> (<a class="code" href="structospf.html">ospf</a>);

  <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (range-&gt;<a class="code" href="structospf__area__range.html#adcac2bfd2040ce51c649dd47257fcdd5">flags</a>, <a class="code" href="ospf__abr_8h.html#a05a85c40463339240f87aa8200447eb8">OSPF_AREA_RANGE_SUBSTITUTE</a>);
  range-&gt;<a class="code" href="structospf__area__range.html#aae8a961c337b41f842906f32be2e169e">subst_addr</a>.s_addr = 0;
  range-&gt;<a class="code" href="structospf__area__range.html#afc6ca0cc37924c70d8d70aa2d426f313">subst_masklen</a> = 0;

  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4c463cba2a853e3c37409dd3b40c694c"></a><!-- doxytag: member="ospf_abr.h::ospf_area_range_unset" ref="a4c463cba2a853e3c37409dd3b40c694c" args="(struct ospf *, struct in_addr, struct prefix_ipv4 *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ospf_area_range_unset </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00262">262</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structospf__area__range.html">ospf_area_range</a> *range;

  area = <a class="code" href="ospfd_8c.html#a24d6ed2a6a05e4856e6dbf5eea74f6ef">ospf_area_lookup_by_area_id</a> (<a class="code" href="structospf.html">ospf</a>, area_id);
  <span class="keywordflow">if</span> (area == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  range = <a class="code" href="ospf__abr_8c.html#a774663b20cea32fea41dc0ade8ead064">ospf_area_range_lookup</a> (area, <a class="code" href="spgrid_8c.html#a931bc2aa940ac2a4d1601cf842336926">p</a>);
  <span class="keywordflow">if</span> (range == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <span class="keywordflow">return</span> 0;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__abr_8c.html#a982c5ad2411024cad7b3979eb1c4d7ab">ospf_area_range_active</a> (range))
    <a class="code" href="ospf__abr_8c.html#a1ff6c727604d00c49b9c4a26131e5462">ospf_schedule_abr_task</a> (<a class="code" href="structospf.html">ospf</a>);

  <a class="code" href="ospf__abr_8c.html#a3ffccf20cd7e255cbf64819a1090b843">ospf_area_range_delete</a> (area, range);

  <span class="keywordflow">return</span> 1;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab7d773cb926cdf8a8c13ec9103747189"></a><!-- doxytag: member="ospf_abr.h::ospf_check_abr_status" ref="ab7d773cb926cdf8a8c13ec9103747189" args="(struct ospf *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_check_abr_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l00491">491</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span><a class="code" href="structospf__area.html">ospf_area</a> *<a class="code" href="ospf__vty_8c.html#a7030c85f46deeffac793079c664c14ce">area</a>;
  <span class="keyword">struct </span><a class="code" href="structlistnode.html">listnode</a> *node, *nnode;
  <span class="keywordtype">int</span> bb_configured = 0;
  <span class="keywordtype">int</span> bb_act_attached = 0;
  <span class="keywordtype">int</span> areas_configured = 0;
  <span class="keywordtype">int</span> areas_act_attached = 0;
  u_char <a class="code" href="isis__flags_8h.html#ad1994fd54b269190ebb32103b868b735">new_flags</a> = <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a435f2a4e7119f86c682366f6319ce64f">flags</a>;

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_check_abr_status(): Start&quot;</span>);

  <span class="keywordflow">for</span> (<a class="code" href="linklist_8h.html#a71512a873b8f0e2b4c84d3c949a9bbaf">ALL_LIST_ELEMENTS</a> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a3f6f2d3b6f2ae9f0ad87223301d92bcc">areas</a>, node, nnode, area))
    {
      <span class="keywordflow">if</span> (<a class="code" href="linklist_8h.html#a0429e6385b31a314cc64432a906201e5">listcount</a> (area-&gt;<a class="code" href="structospf__area.html#aec49fceeb655dde5648208d29dfc66a4">oiflist</a>)) 
    {
      areas_configured++;
      
      <span class="keywordflow">if</span> (<a class="code" href="ospfd_8h.html#a62518cec4ea9ee2a4db410d3c42b23f7">OSPF_IS_AREA_BACKBONE</a> (area))
        bb_configured = 1;
    }

      <span class="keywordflow">if</span> (<a class="code" href="ospf__abr_8c.html#af229422187da31bbb735cc83e2ac2d1b">ospf_area_actively_attached</a> (area))
    {
      areas_act_attached++;
      
      <span class="keywordflow">if</span> (<a class="code" href="ospfd_8h.html#a62518cec4ea9ee2a4db410d3c42b23f7">OSPF_IS_AREA_BACKBONE</a> (area))
            bb_act_attached = 1;
    }
    }

  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    {
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_check_abr_status(): looked through areas&quot;</span>);
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_check_abr_status(): bb_configured: %d&quot;</span>, bb_configured);
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_check_abr_status(): bb_act_attached: %d&quot;</span>,
         bb_act_attached);
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_check_abr_status(): areas_configured: %d&quot;</span>,
         areas_configured);
      <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_check_abr_status(): areas_act_attached: %d&quot;</span>,
         areas_act_attached);
    }

  <span class="keywordflow">switch</span> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#ad1c5b3263ee1326f5720d0d09bfce53c">abr_type</a>)
    {
    <span class="keywordflow">case</span> <a class="code" href="ospfd_8h.html#a9dae55988b0aa4f2ec2a954209ec0630">OSPF_ABR_SHORTCUT</a>:
    <span class="keywordflow">case</span> <a class="code" href="ospfd_8h.html#a4ff7faa4a8d19436deb0db86d4bd82df">OSPF_ABR_STAND</a>:
      <span class="keywordflow">if</span> (areas_act_attached &gt; 1)
    <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (new_flags, <a class="code" href="ospfd_8h.html#a0e909e5caea8eee9944b02632cecce52">OSPF_FLAG_ABR</a>);
      <span class="keywordflow">else</span>
    <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (new_flags, <a class="code" href="ospfd_8h.html#a0e909e5caea8eee9944b02632cecce52">OSPF_FLAG_ABR</a>);
      <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="ospfd_8h.html#a22c05e10f58a965d1023edc4d8a23313">OSPF_ABR_IBM</a>:
      <span class="keywordflow">if</span> ((areas_act_attached &gt; 1) &amp;&amp; bb_configured)
    <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (new_flags, <a class="code" href="ospfd_8h.html#a0e909e5caea8eee9944b02632cecce52">OSPF_FLAG_ABR</a>);
      <span class="keywordflow">else</span>
    <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (new_flags, <a class="code" href="ospfd_8h.html#a0e909e5caea8eee9944b02632cecce52">OSPF_FLAG_ABR</a>);
      <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="ospfd_8h.html#aac0be2e336b1b7bcb296c6e9ba32b6ae">OSPF_ABR_CISCO</a>:
      <span class="keywordflow">if</span> ((areas_configured &gt; 1) &amp;&amp; bb_act_attached)
    <a class="code" href="zebra_8h.html#a7c593725d5bbf27a37a922ae84b02333">SET_FLAG</a> (new_flags, <a class="code" href="ospfd_8h.html#a0e909e5caea8eee9944b02632cecce52">OSPF_FLAG_ABR</a>);
      <span class="keywordflow">else</span>
    <a class="code" href="zebra_8h.html#ab1ec1b6701a70280e13876cf1f6ae51d">UNSET_FLAG</a> (new_flags, <a class="code" href="ospfd_8h.html#a0e909e5caea8eee9944b02632cecce52">OSPF_FLAG_ABR</a>);
      <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
      <span class="keywordflow">break</span>;
    }

  <span class="keywordflow">if</span> (new_flags != <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a435f2a4e7119f86c682366f6319ce64f">flags</a>)
    {
      <a class="code" href="ospf__spf_8c.html#a3422ebf3062fac786ecdb7b419c22cf1">ospf_spf_calculate_schedule</a> (<a class="code" href="structospf.html">ospf</a>);
      <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;ospf_check_abr_status(): new router flags: %x&quot;</span>,new_flags);
      <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a435f2a4e7119f86c682366f6319ce64f">flags</a> = <a class="code" href="isis__flags_8h.html#ad1994fd54b269190ebb32103b868b735">new_flags</a>;
      <a class="code" href="ospfd_8h.html#af55bc6c498265fffa9294d0f1b952267">OSPF_TIMER_ON</a> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#a94a369b811b335e1d05e1dab77096606">t_router_lsa_update</a>,
             <a class="code" href="ospf__lsa_8c.html#a4db40452defbd5304d698f8d0cc855d1">ospf_router_lsa_update_timer</a>, <a class="code" href="ospf__lsa_8h.html#a40abe6153ff06321e030f48daccf4966">OSPF_LSA_UPDATE_DELAY</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6d0ac8ecc10ddadb7a3a683e06e3cdae"></a><!-- doxytag: member="ospf_abr.h::ospf_schedule_abr_task" ref="a6d0ac8ecc10ddadb7a3a683e06e3cdae" args="(struct ospf *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ospf_schedule_abr_task </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structospf.html">ospf</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ospf__abr_8c_source.html#l01907">1907</a> of file <a class="el" href="ospf__abr_8c_source.html">ospf_abr.c</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="ospf__dump_8h.html#a6634b26c3071a42864be94d63bfa8d27">IS_DEBUG_OSPF_EVENT</a>)
    <a class="code" href="log_8h.html#af1f70c8ab8e089840180553abf361296">zlog_debug</a> (<span class="stringliteral">&quot;Scheduling ABR task&quot;</span>);

  <span class="keywordflow">if</span> (<a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#adcdb64a50cde7f209f8c55df581d8bae">t_abr_task</a> == <a class="code" href="getopt1_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
    <a class="code" href="structospf.html">ospf</a>-&gt;<a class="code" href="structospf.html#adcdb64a50cde7f209f8c55df581d8bae">t_abr_task</a> = <a class="code" href="thread_8h.html#aca77b3bbd166d3573de5ecd9756a590c">thread_add_timer</a> (<a class="code" href="bgp__main_8c.html#af7f9077bc08df049beb65a1c09cde5fa">master</a>, <a class="code" href="ospf__abr_8c.html#a9b175266d10ffc6d268d313caa0b71fc">ospf_abr_task_timer</a>,
                     <a class="code" href="structospf.html">ospf</a>, <a class="code" href="ospf__abr_8h.html#a571148084025182afb7a06ab669a5d74">OSPF_ABR_TASK_DELAY</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8a233ddfc4d1b126737b7f2ab3a5cd04"></a><!-- doxytag: member="ospf_abr.h::ospf_some_area_range_match" ref="a8a233ddfc4d1b126737b7f2ab3a5cd04" args="(struct prefix_ipv4 *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structospf__area__range.html">ospf_area_range</a>* ospf_some_area_range_match </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structprefix__ipv4.html">prefix_ipv4</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="ospf__abr_8h.html">ospf_abr.h</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 10:41:28 for OSPFN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
